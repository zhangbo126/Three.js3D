"use strict";(self["webpackChunkprodect"]=self["webpackChunkprodect"]||[]).push([[486],{9486:function(e,t,i){i.r(t),i.d(t,{default:function(){return Rl}});i(7658);var o=i(3396),l=i(4870),n=i(7139),a=i(9242),s=i(65),r=i(872),d=i(1794);const p=e=>((0,o.dD)("data-v-03dc8261"),e=e(),(0,o.Cn)(),e),u={class:"edit-box"},m={class:"header"},c=p((()=>(0,o._)("span",null,"背景",-1))),h={class:"icon-name"},g=p((()=>(0,o._)("span",null," 图片",-1))),_={class:"action-txt"},v={class:"check"},f={class:"icon-name"},w=p((()=>(0,o._)("span",null," 颜色",-1))),y={class:"action"},C={class:"check"},b={class:"icon-name"},W=p((()=>(0,o._)("span",null," 全景图",-1))),L={class:"action-txt"},M={class:"check"};var k={__name:"EditBackground",setup(e,{expose:t}){const p=(0,s.oR)(),k=(0,l.qj)({visible:!0,type:3,image:i(3405),viewImg:i(72),color:"#000"}),x=(0,l.iH)(3),S=(0,l.iH)(3),V=(0,l.qj)({modelApi:(0,o.Fl)((()=>p.state.modelApi))}),A=(0,o.Fl)((()=>{const{visible:e}=k;return e?"":"disabled"})),H=r.UL,U=e=>{switch(k.type=e,e){case 1:V.modelApi.onSetSceneColor(k.color);break;case 2:V.modelApi.onSetSceneImage(k.image);break;case 3:V.modelApi.onSetSceneViewImage(k.viewImg);break;default:break}},P=({id:e,url:t})=>{k.image=t,x.value=e,V.modelApi.onSetSceneImage(t)},F=({id:e,url:t})=>{k.viewImg=t,S.value=e,V.modelApi.onSetSceneViewImage(t)},E=e=>{k.color=e,V.modelApi.onSetSceneColor(k.color)},I=()=>{V.modelApi.onSetSceneColor(k.color)},z=()=>{const{type:e,visible:t,image:i,viewImg:o}=k;if(!t)return V.modelApi.onSetSceneColor("#000");switch(e){case 1:V.modelApi.onSetSceneColor(k.color);break;case 2:V.modelApi.onSetSceneImage(i);break;case 3:V.modelApi.onSetSceneViewImage(o);break;default:break}};return t({config:k}),(e,t)=>{const i=(0,o.up)("el-switch"),s=(0,o.up)("Picture"),r=(0,o.up)("el-icon"),p=(0,o.up)("el-space"),V=(0,o.up)("el-button"),T=(0,o.up)("Check"),j=(0,o.up)("el-image"),R=(0,o.up)("el-col"),D=(0,o.up)("el-row"),O=(0,o.up)("el-scrollbar"),B=(0,o.up)("DataAnalysis"),G=(0,o.up)("el-color-picker"),N=(0,o.up)("CameraFilled");return(0,o.wg)(),(0,o.iD)("div",u,[(0,o._)("div",m,[c,(0,o.Wm)(i,{modelValue:k.visible,"onUpdate:modelValue":t[0]||(t[0]=e=>k.visible=e),onChange:z},null,8,["modelValue"])]),(0,o._)("div",{class:(0,n.C_)(["options",A.value])},[(0,o._)("div",{class:"option",onClick:t[1]||(t[1]=e=>U(2))},[(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o._)("div",h,[(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Wm)(s)])),_:1}),g])),_:1})]),(0,o._)("div",_,[(0,o.Wm)(V,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("选择图片")])),_:1})]),(0,o.wy)((0,o._)("div",v,[(0,o.Wm)(r,{size:"20px",color:"#2a3ff6"},{default:(0,o.w5)((()=>[(0,o.Wm)(T)])),_:1})],512),[[a.F8,2==k.type]])])),_:1})]),(0,o.wy)((0,o.Wm)(O,{"max-height":"250px"},{default:(0,o.w5)((()=>[(0,o.Wm)(D,null,{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,l.SU)(d.L8),(e=>((0,o.wg)(),(0,o.j4)(R,{style:{textAlign:"center"},span:6,key:e.id},{default:(0,o.w5)((()=>[(0,o.Wm)(j,{onClick:t=>P(e),class:(0,n.C_)(["el-img",x.value==e.id?"active":""]),src:e.url,fit:"cover"},null,8,["onClick","class","src"])])),_:2},1024)))),128))])),_:1})])),_:1},512),[[a.F8,2==k.type]])],2),(0,o._)("div",{class:(0,n.C_)(["options",A.value])},[(0,o._)("div",{class:"option",onClick:t[3]||(t[3]=e=>U(1))},[(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o._)("div",f,[(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Wm)(B)])),_:1}),w])),_:1})]),(0,o._)("div",y,[(0,o.Wm)(G,{predefine:(0,l.SU)(H),onChange:I,onActiveChange:E,modelValue:k.color,"onUpdate:modelValue":t[2]||(t[2]=e=>k.color=e)},null,8,["predefine","modelValue"])]),(0,o.wy)((0,o._)("div",C,[(0,o.Wm)(r,{size:"20px",color:"#2a3ff6"},{default:(0,o.w5)((()=>[(0,o.Wm)(T)])),_:1})],512),[[a.F8,1==k.type]])])),_:1})])],2),(0,o._)("div",{class:(0,n.C_)(["options",A.value])},[(0,o._)("div",{class:"option",onClick:t[4]||(t[4]=e=>U(3))},[(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o._)("div",b,[(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Wm)(N)])),_:1}),W])),_:1})]),(0,o._)("div",L,[(0,o.Wm)(V,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("选择图片")])),_:1})]),(0,o.wy)((0,o._)("div",M,[(0,o.Wm)(r,{size:"20px",color:"#2a3ff6"},{default:(0,o.w5)((()=>[(0,o.Wm)(T)])),_:1})],512),[[a.F8,3==k.type]])])),_:1})]),(0,o.wy)((0,o.Wm)(O,{"max-height":"350px"},{default:(0,o.w5)((()=>[(0,o.Wm)(D,null,{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,l.SU)(d.Wf),(e=>((0,o.wg)(),(0,o.j4)(R,{span:6,style:{textAlign:"center"},key:e.id},{default:(0,o.w5)((()=>[(0,o.Wm)(j,{onClick:t=>F(e),class:(0,n.C_)(["el-view",S.value==e.id?"active":""]),src:e.url,fit:"cover"},null,8,["onClick","class","src"])])),_:2},1024)))),128))])),_:1})])),_:1},512),[[a.F8,3==k.type]])],2)])}}},x=i(89);const S=(0,x.Z)(k,[["__scopeId","data-v-03dc8261"]]);var V=S,A=i(1114),H=i(7178);const U=e=>((0,o.dD)("data-v-0fbd1b7c"),e=e(),(0,o.Cn)(),e),P={class:"edit-box"},F=U((()=>(0,o._)("div",{class:"header"},[(0,o._)("span",null,"材质")],-1))),E={class:"options"},I=["onClick"],z={class:"icon-name"},T={class:"check"},j=U((()=>(0,o._)("div",{class:"header"},"材质属性",-1))),R={class:"option space-between"},D={class:"option"},O={class:"grid-txt"},B={class:"grid-silder"},G=U((()=>(0,o._)("div",{class:"header"},"模型自带贴图",-1))),N=["onClick"],Y={key:0,class:"select"},Z=U((()=>(0,o._)("div",{class:"header"},"系统贴图",-1))),q=["onClick"],X={key:0,class:"select"};var K={__name:"EditMaterial",setup(e,{expose:t}){const i=(0,s.oR)(),{$bus:p}=(0,o.FN)().proxy,u=(0,l.qj)({meaterialName:null,color:null,wireframe:!1,depthWrite:!0,opacity:1}),m=(0,l.iH)(null),c=(0,o.Fl)((()=>{const e=h.modelMaterialList.find((e=>e.uuid==h.selectMeshUuid))||{};return e.uuid?"":"disabled"})),h=(0,l.qj)({modelMaterialList:(0,o.Fl)((()=>i.state.modelApi.modelMaterialList)),modelApi:(0,o.Fl)((()=>i.state.modelApi)),selectMeshUuid:(0,o.Fl)((()=>i.getters.selectMeshUuid)),modelTextureMap:(0,o.Fl)((()=>i.state.modelApi.modelTextureMap))});(0,o.bv)((()=>{p.on("model-update",(()=>{Object.assign(u,{color:null,wireframe:!1,depthWrite:!0,opacity:1})}))})),(0,o.YP)((()=>i.getters.selectMeshUuid),(e=>{const t=h.modelMaterialList.find((t=>t.uuid==e))||{};if(m.value=t.mapId,t.mapId){const{color:e,wireframe:i,depthWrite:o,opacity:l}=t.material;Object.assign(u,{color:new A.Ilk(e).getStyle(),wireframe:i,depthWrite:o,opacity:l})}}));const g=({name:e,id:t,material:i,mapId:o})=>{u.meaterialName=i.name;const l=h.modelApi.onChangeModelMeaterial(e),{color:n,wireframe:a,depthWrite:s,opacity:r}=l.material;Object.assign(u,{color:new A.Ilk(n).getStyle(),wireframe:a,depthWrite:s,opacity:r})},_=e=>{u.color=e,h.modelApi.onSetModelMaterial(u)},v=()=>{h.modelApi.onSetModelMaterial(u)},f=e=>{m.value=e.mapId,h.modelApi.onSetModelMap(e),Object.assign(u,{color:null,wireframe:!1,depthWrite:!0,opacity:1}),H.z8.success("当前材质贴图修改成功")},w=e=>{m.value=e.id,h.modelApi.onSetSystemModelMap(e),Object.assign(u,{color:null,wireframe:!1,depthWrite:!0,opacity:1}),H.z8.success("当前材质贴图修改成功")},y=()=>({meshList:h.modelApi.onGetEditMeshList()});return t({getMeshConfig:y}),(e,t)=>{const i=(0,o.up)("Check"),s=(0,o.up)("el-icon"),p=(0,o.up)("el-space"),y=(0,o.up)("el-scrollbar"),C=(0,o.up)("WarnTriangleFilled"),b=(0,o.up)("el-tooltip"),W=(0,o.up)("el-button"),L=(0,o.up)("el-color-picker"),M=(0,o.up)("el-switch"),k=(0,o.up)("el-slider"),x=(0,o.up)("el-image"),S=(0,o.up)("Select"),V=(0,o.up)("el-col"),A=(0,o.up)("el-row");return(0,o.wg)(),(0,o.iD)("div",P,[F,(0,o._)("div",E,[(0,o.Wm)(y,{"max-height":"240px"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(h.modelMaterialList,(e=>((0,o.wg)(),(0,o.iD)("div",{class:(0,n.C_)(["option",h.selectMeshUuid==e.uuid?"option-active":""]),onClick:t=>g(e),key:e.uuid},[(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o._)("div",z,(0,n.zw)(e.name),1),(0,o.wy)((0,o._)("div",T,[(0,o.Wm)(s,{size:"20px",color:"#2a3ff6"},{default:(0,o.w5)((()=>[(0,o.Wm)(i)])),_:1})],512),[[a.F8,h.selectMeshUuid==e.uuid]])])),_:2},1024)],10,I)))),128))])),_:1})]),j,(0,o._)("div",{class:(0,n.C_)(["options",c.value])},[(0,o._)("div",R,[(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.Wm)(b,{effect:"dark",content:"注意:部分模型因为原始材质特殊以及灯光等原因,修改材质颜色可能没有实际效果",placement:"top"},{default:(0,o.w5)((()=>[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Wm)(C,{size:20,color:"#ffb940"})])),_:1})])),_:1}),(0,o.Wm)(W,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("材质颜色")])),_:1}),(0,o.Wm)(L,{"color-format":"hex",predefine:(0,l.SU)(r.UL),onChange:v,onActiveChange:_,modelValue:u.color,"onUpdate:modelValue":t[0]||(t[0]=e=>u.color=e)},null,8,["predefine","modelValue"])])),_:1}),(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.Wm)(W,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("深度写入")])),_:1}),(0,o.Wm)(M,{onChange:v,modelValue:u.depthWrite,"onUpdate:modelValue":t[1]||(t[1]=e=>u.depthWrite=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.Wm)(b,{effect:"dark",content:"注意:部分模型因为原始材质不支持网格,修改网格可能导致材质显示异常,或者没有实际效果",placement:"top"},{default:(0,o.w5)((()=>[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Wm)(C,{size:20,color:"#ffb940"})])),_:1})])),_:1}),(0,o.Wm)(W,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("网格")])),_:1}),(0,o.Wm)(M,{onChange:v,modelValue:u.wireframe,"onUpdate:modelValue":t[2]||(t[2]=e=>u.wireframe=e)},null,8,["modelValue"])])),_:1})]),(0,o._)("div",D,[(0,o._)("div",O,[(0,o.Wm)(b,{effect:"dark",content:"注意:部分模型因为原始材质不支持透明度,修改透明度可能导致材质显示异常,或者没有实际效果",placement:"top"},{default:(0,o.w5)((()=>[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Wm)(C,{size:20,color:"#ffb940"})])),_:1})])),_:1}),(0,o.Wm)(W,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("透明度 ")])),_:1})]),(0,o._)("div",B,[(0,o.Wm)(k,{"show-input":"",onChange:v,modelValue:u.opacity,"onUpdate:modelValue":t[3]||(t[3]=e=>u.opacity=e),min:0,max:1,step:.01},null,8,["modelValue"])])])],2),G,(0,o._)("div",{class:(0,n.C_)(["options",c.value])},[(0,o.Wm)(y,{"max-height":"100px"},{default:(0,o.w5)((()=>[(0,o.Wm)(A,null,{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(h.modelTextureMap,(e=>((0,o.wg)(),(0,o.j4)(V,{span:6,style:{textAlign:"center"},key:e.mapId},{default:(0,o.w5)((()=>[(0,o._)("div",{onClick:t=>f(e),class:(0,n.C_)(["image-box",m.value==e.mapId?"active":""])},[(0,o.Wm)(x,{src:e.url,class:"el-map",fit:"cover"},null,8,["src"]),m.value==e.mapId?((0,o.wg)(),(0,o.iD)("div",Y,[(0,o.Wm)(s,{color:"#18c174",size:26},{default:(0,o.w5)((()=>[(0,o.Wm)(S)])),_:1})])):(0,o.kq)("",!0)],10,N)])),_:2},1024)))),128))])),_:1})])),_:1})],2),Z,(0,o._)("div",{class:(0,n.C_)(["options",c.value])},[(0,o.Wm)(y,{"max-height":"240px"},{default:(0,o.w5)((()=>[(0,o.Wm)(A,null,{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,l.SU)(d.or),(e=>((0,o.wg)(),(0,o.j4)(V,{span:6,style:{textAlign:"center"},key:e.id},{default:(0,o.w5)((()=>[(0,o._)("div",{onClick:t=>w(e),class:(0,n.C_)(["image-box",m.value==e.id?"active":""])},[(0,o.Wm)(x,{src:e.url,class:"el-map",fit:"cover"},null,8,["src"]),m.value==e.id?((0,o.wg)(),(0,o.iD)("div",X,[(0,o.Wm)(s,{color:"#18c174",size:26},{default:(0,o.w5)((()=>[(0,o.Wm)(S)])),_:1})])):(0,o.kq)("",!0)],10,q)])),_:2},1024)))),128))])),_:1})])),_:1})],2)])}}};const $=(0,x.Z)(K,[["__scopeId","data-v-0fbd1b7c"]]);var J=$;const Q={class:"edit-box"},ee={class:"header"},te=(0,o._)("span",null,"模型动画",-1),ie=["onClick"],oe={class:"icon-name"},le={class:"check"},ne=(0,o._)("div",{class:"header"},[(0,o._)("span",null,"动画配置")],-1),ae={class:"option"},se=(0,o._)("span",null," 循环方式 ",-1),re={class:"option"},de={class:"option"},pe=(0,o._)("span",null," 播放速度 ",-1),ue={class:"option"},me={class:"option"},ce=(0,o._)("span",null," 动作幅度 ",-1),he={class:"option"},ge={class:"header"},_e=(0,o._)("span",null,"轴动画",-1),ve={class:"options"},fe=(0,o._)("span",null," 轴方向 ",-1),we=(0,o._)("span",null," 播放速度 ",-1);var ye={__name:"EditAnimation",setup(e,{expose:t}){const i=(0,s.oR)(),{$bus:r}=(0,o.FN)().proxy,d=(0,l.qj)({visible:!1,animationName:null,loop:"LoopRepeat",timeScale:1,weight:1,rotationVisible:!1,rotationType:"y",rotationSpeed:1}),p=(0,o.Fl)((()=>d.visible?"":"disabled")),u=(0,o.Fl)((()=>d.rotationVisible?"":"disabled")),m=(0,l.qj)({modelApi:(0,o.Fl)((()=>i.state.modelApi)),modelAnimation:(0,o.Fl)((()=>i.state.modelApi?i.state.modelApi.modelAnimation:[]))});(0,o.bv)((()=>{m.modelAnimation.length&&(d.animationName=m.modelAnimation[0].name),r.on("model-update",(()=>{if(m.modelAnimation.length){const e=m.modelAnimation[0].name;d.animationName=e}Object.assign(d,{visible:!1,loop:"LoopRepeat",timeScale:1,weight:1,rotationVisible:!1,rotationType:"y",rotationSpeed:1})}))}));const c=()=>{const{visible:e}=d;e?g():m.modelApi.onClearAnimation()},h=({name:e})=>{d.animationName=e,m.modelApi.onStartModelAnimaion(d)},g=()=>{m.modelApi.onStartModelAnimaion(d)},_=()=>{m.modelApi.onSetRotation(d)},v=()=>{m.modelApi.onSetRotationType(d)};return t({config:d}),(e,t)=>{const i=(0,o.up)("el-switch"),l=(0,o.up)("Check"),s=(0,o.up)("el-icon"),r=(0,o.up)("el-space"),f=(0,o.up)("el-scrollbar"),w=(0,o.up)("el-empty"),y=(0,o.up)("Switch"),C=(0,o.up)("el-radio-button"),b=(0,o.up)("el-radio-group"),W=(0,o.up)("VideoPlay"),L=(0,o.up)("el-slider"),M=(0,o.up)("Sort");return(0,o.wg)(),(0,o.iD)("div",Q,[(0,o._)("div",ee,[te,(0,o.Wm)(i,{modelValue:d.visible,"onUpdate:modelValue":t[0]||(t[0]=e=>d.visible=e),onChange:c},null,8,["modelValue"])]),(0,o._)("div",{class:(0,n.C_)(["options",p.value])},[m.modelAnimation.length?((0,o.wg)(),(0,o.j4)(f,{key:0,"max-height":"250px"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(m.modelAnimation,(e=>((0,o.wg)(),(0,o.iD)("div",{class:(0,n.C_)(["option",d.animationName==e.name?"option-active":""]),onClick:t=>h(e),key:e.name},[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o._)("div",oe,(0,n.zw)(e.name),1),(0,o.wy)((0,o._)("div",le,[(0,o.Wm)(s,{size:"20px",color:"#2a3ff6"},{default:(0,o.w5)((()=>[(0,o.Wm)(l)])),_:1})],512),[[a.F8,d.animationName==e.name]])])),_:2},1024)],10,ie)))),128))])),_:1})):((0,o.wg)(),(0,o.j4)(w,{key:1,description:"暂无动画","image-size":120}))],2),ne,(0,o._)("div",{class:(0,n.C_)(["options",p.value])},[(0,o._)("div",ae,[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Wm)(y)])),_:1}),se])),_:1})]),(0,o._)("div",re,[(0,o.Wm)(b,{modelValue:d.loop,"onUpdate:modelValue":t[1]||(t[1]=e=>d.loop=e),onChange:g},{default:(0,o.w5)((()=>[(0,o.Wm)(C,{label:"LoopOnce"},{default:(0,o.w5)((()=>[(0,o.Uk)("只执行一次")])),_:1}),(0,o.Wm)(C,{label:"LoopRepeat"},{default:(0,o.w5)((()=>[(0,o.Uk)("无限循环")])),_:1}),(0,o.Wm)(C,{label:"LoopPingPong"},{default:(0,o.w5)((()=>[(0,o.Uk)("来回循环")])),_:1})])),_:1},8,["modelValue"])]),(0,o._)("div",de,[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Wm)(W)])),_:1}),pe])),_:1})]),(0,o._)("div",ue,[(0,o.Wm)(L,{"show-input":"",modelValue:d.timeScale,"onUpdate:modelValue":t[2]||(t[2]=e=>d.timeScale=e),onChange:g,step:.01,min:0,max:1},null,8,["modelValue"])]),(0,o._)("div",me,[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Wm)(M)])),_:1}),ce])),_:1})]),(0,o._)("div",he,[(0,o.Wm)(L,{"show-input":"",modelValue:d.weight,"onUpdate:modelValue":t[3]||(t[3]=e=>d.weight=e),onChange:g,step:.01,min:0,max:1},null,8,["modelValue"])])],2),(0,o._)("div",ge,[_e,(0,o.Wm)(i,{modelValue:d.rotationVisible,"onUpdate:modelValue":t[4]||(t[4]=e=>d.rotationVisible=e),onChange:_},null,8,["modelValue"])]),(0,o._)("div",ve,[(0,o._)("div",{class:(0,n.C_)(["option",u.value])},[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[fe,(0,o.Wm)(b,{modelValue:d.rotationType,"onUpdate:modelValue":t[5]||(t[5]=e=>d.rotationType=e),onChange:v},{default:(0,o.w5)((()=>[(0,o.Wm)(C,{label:"x"},{default:(0,o.w5)((()=>[(0,o.Uk)("X轴")])),_:1}),(0,o.Wm)(C,{label:"y"},{default:(0,o.w5)((()=>[(0,o.Uk)("Y轴")])),_:1}),(0,o.Wm)(C,{label:"z"},{default:(0,o.w5)((()=>[(0,o.Uk)("Z轴")])),_:1})])),_:1},8,["modelValue"])])),_:1})],2),(0,o._)("div",{class:(0,n.C_)(["option",u.value])},[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Wm)(W)])),_:1}),we])),_:1})],2),(0,o._)("div",{class:(0,n.C_)(["option",u.value])},[(0,o.Wm)(L,{onChange:_,"show-input":"",modelValue:d.rotationSpeed,"onUpdate:modelValue":t[6]||(t[6]=e=>d.rotationSpeed=e),step:.01,min:1,max:10},null,8,["modelValue"])],2)])])}}};const Ce=ye;var be=Ce;const We={class:"edit-box"},Le={class:"header"},Me=(0,o._)("span",null,"辅助线/轴配置",-1),ke={class:"option space-between"},xe=(0,o._)("span",null," 模型轴旋转 ",-1),Se={class:"option"},Ve={class:"option"},Ae={class:"option"},He={class:"option space-between"},Ue=(0,o._)("span",null," 模型位置 ",-1),Pe={class:"option"},Fe={class:"grid-txt"},Ee={class:"grid-silder"},Ie={class:"option"},ze={class:"grid-txt"},Te={class:"grid-silder"},je={class:"option"},Re={class:"grid-txt"},De={class:"grid-silder"},Oe={class:"option space-between"},Be=(0,o._)("span",null," 模型骨架 ",-1),Ge={class:"option space-between"},Ne=(0,o._)("span",null," 网格辅助线 ",-1),Ye={class:"option"},Ze={class:"grid-txt"},qe={class:"grid-silder"},Xe={class:"option"},Ke={class:"grid-txt"},$e={class:"grid-silder"},Je={class:"option"},Qe={class:"grid-txt"},et={class:"grid-silder"},tt={class:"option"},it={class:"option"},ot={class:"option space-between"},lt=(0,o._)("span",null," 坐标轴辅助线 ",-1),nt={class:"grid-txt"},at={class:"grid-silder"};var st={__name:"EditAttribute",setup(e,{expose:t}){const i=(0,s.oR)(),{$bus:a}=(0,o.FN)().proxy,d=(0,l.qj)({visible:!0,skeletonHelper:!1,gridHelper:!1,x:0,y:-.59,z:-.1,positionX:0,positionY:-.5,positionZ:0,divisions:10,size:4,color:"rgb(193,193,193)",axesHelper:!1,axesSize:1.8}),p=r.UL,u=(0,o.Fl)((()=>d.visible?"":"disabled")),m=(0,o.Fl)((()=>{const{visible:e,gridHelper:t}=d;return t&&e?"":"disabled"})),c=(0,o.Fl)((()=>{const{visible:e,axesHelper:t}=d;return t&&e?"":"disabled"})),h=(0,l.qj)({modelApi:(0,o.Fl)((()=>i.state.modelApi))});(0,o.bv)((()=>{a.on("model-update",(()=>{Object.assign(d,{visible:!0,skeletonHelper:!1,gridHelper:!1,x:0,y:-.59,z:-.1,positionX:0,positionY:-.5,positionZ:0,divisions:10,size:4,color:"rgb(193,193,193)",axesHelper:!1,axesSize:1.8})}))}));const g=()=>{},_=(e,t)=>{const i="right"==t;h.modelApi.onSetModelRotateOnAxis(e,i)},v=()=>{h.modelApi.onResultModelRotateOnAxis()},f=()=>{h.modelApi.onSetModelPosition(d)},w=()=>{d.positionX=0,d.positionY=-.5,d.positionZ=0,h.modelApi.onResultModelPosition(d)},y=()=>{h.modelApi.onSetModelHelper(d.skeletonHelper)},C=e=>{d.color=e,h.modelApi.onSetModelGridHelper(d)},b=()=>{h.modelApi.onSetModelGridHelper(d)},W=()=>{h.modelApi.onSetModelGridHelperSize(d)},L=()=>{h.modelApi.onSetModelAxesHelper(d)},M=()=>{const{x:e,y:t,z:i}=h.modelApi.model.rotation;let o=e,l=t,n=i;return{...d,rotationX:o,rotationY:l,rotationZ:n}};return t({getAttrbuteConfig:M}),(e,t)=>{const i=(0,o.up)("el-switch"),a=(0,o.up)("Setting"),s=(0,o.up)("el-icon"),r=(0,o.up)("el-space"),h=(0,o.up)("el-button"),M=(0,o.up)("Location"),k=(0,o.up)("el-slider"),x=(0,o.up)("Eleme"),S=(0,o.up)("Grid"),V=(0,o.up)("el-input-number"),A=(0,o.up)("el-color-picker"),H=(0,o.up)("Rank");return(0,o.wg)(),(0,o.iD)("div",We,[(0,o._)("div",Le,[Me,(0,o.Wm)(i,{modelValue:d.visible,"onUpdate:modelValue":t[0]||(t[0]=e=>d.visible=e),onChange:g},null,8,["modelValue"])]),(0,o._)("div",{class:(0,n.C_)(["options",u.value])},[(0,o._)("div",ke,[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Wm)(a)])),_:1}),xe])),_:1}),(0,o.Wm)(h,{type:"primary",link:"",icon:"Refresh",onClick:v},{default:(0,o.w5)((()=>[(0,o.Uk)(" 重置 ")])),_:1})]),(0,o._)("div",Se,[(0,o.Wm)(h,{type:"info",icon:"RefreshRight",onClick:t[1]||(t[1]=e=>_("x","right"))}),(0,o.Wm)(h,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("X轴")])),_:1}),(0,o.Wm)(h,{type:"info",icon:"RefreshLeft",onClick:t[2]||(t[2]=e=>_("x","left"))})]),(0,o._)("div",Ve,[(0,o.Wm)(h,{type:"info",icon:"RefreshRight",onClick:t[3]||(t[3]=e=>_("y","right"))}),(0,o.Wm)(h,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("Y轴")])),_:1}),(0,o.Wm)(h,{type:"info",icon:"RefreshLeft",onClick:t[4]||(t[4]=e=>_("y","left"))})]),(0,o._)("div",Ae,[(0,o.Wm)(h,{type:"info",icon:"RefreshRight",onClick:t[5]||(t[5]=e=>_("z","right"))}),(0,o.Wm)(h,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("Z轴")])),_:1}),(0,o.Wm)(h,{type:"info",icon:"RefreshLeft",onClick:t[6]||(t[6]=e=>_("z","left"))})]),(0,o._)("div",He,[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Wm)(M)])),_:1}),Ue])),_:1}),(0,o.Wm)(h,{type:"primary",link:"",icon:"Refresh",onClick:w},{default:(0,o.w5)((()=>[(0,o.Uk)(" 重置 ")])),_:1})]),(0,o._)("div",Pe,[(0,o._)("div",Fe,[(0,o.Wm)(h,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("X 轴")])),_:1})]),(0,o._)("div",Ee,[(0,o.Wm)(k,{onChange:f,"show-input":"",modelValue:d.positionX,"onUpdate:modelValue":t[7]||(t[7]=e=>d.positionX=e),min:-10,max:10,step:.1},null,8,["modelValue"])])]),(0,o._)("div",Ie,[(0,o._)("div",ze,[(0,o.Wm)(h,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("Y 轴")])),_:1})]),(0,o._)("div",Te,[(0,o.Wm)(k,{onChange:f,"show-input":"",modelValue:d.positionY,"onUpdate:modelValue":t[8]||(t[8]=e=>d.positionY=e),min:-10,max:10,step:.1},null,8,["modelValue"])])]),(0,o._)("div",je,[(0,o._)("div",Re,[(0,o.Wm)(h,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("Z 轴")])),_:1})]),(0,o._)("div",De,[(0,o.Wm)(k,{onChange:f,"show-input":"",modelValue:d.positionZ,"onUpdate:modelValue":t[9]||(t[9]=e=>d.positionZ=e),min:-10,max:10,step:.1},null,8,["modelValue"])])]),(0,o._)("div",Oe,[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Wm)(x)])),_:1}),Be])),_:1}),(0,o.Wm)(i,{modelValue:d.skeletonHelper,"onUpdate:modelValue":t[10]||(t[10]=e=>d.skeletonHelper=e),onChange:y},null,8,["modelValue"])])],2),(0,o._)("div",{class:(0,n.C_)(["options",u.value])},[(0,o._)("div",Ge,[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Wm)(S)])),_:1}),Ne])),_:1}),(0,o.Wm)(i,{modelValue:d.gridHelper,"onUpdate:modelValue":t[11]||(t[11]=e=>d.gridHelper=e),onChange:b},null,8,["modelValue"])])],2),(0,o._)("div",{class:(0,n.C_)(["options",m.value])},[(0,o._)("div",Ye,[(0,o._)("div",Ze,[(0,o.Wm)(h,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("X 轴")])),_:1})]),(0,o._)("div",qe,[(0,o.Wm)(k,{"show-input":"",onChange:b,modelValue:d.x,"onUpdate:modelValue":t[12]||(t[12]=e=>d.x=e),min:-2,max:4,step:.01},null,8,["modelValue"])])]),(0,o._)("div",Xe,[(0,o._)("div",Ke,[(0,o.Wm)(h,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("Y 轴")])),_:1})]),(0,o._)("div",$e,[(0,o.Wm)(k,{"show-input":"",onChange:b,modelValue:d.y,"onUpdate:modelValue":t[13]||(t[13]=e=>d.y=e),min:-2,max:4,step:.01},null,8,["modelValue"])])]),(0,o._)("div",Je,[(0,o._)("div",Qe,[(0,o.Wm)(h,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("Z 轴")])),_:1})]),(0,o._)("div",et,[(0,o.Wm)(k,{"show-input":"",onChange:b,modelValue:d.z,"onUpdate:modelValue":t[14]||(t[14]=e=>d.z=e),min:-2,max:4,step:.01},null,8,["modelValue"])])]),(0,o._)("div",tt,[(0,o._)("div",null,[(0,o.Wm)(h,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("大小")])),_:1}),(0,o.Wm)(V,{controls:!0,onChange:W,modelValue:d.size,"onUpdate:modelValue":t[15]||(t[15]=e=>d.size=e),min:1,max:40},null,8,["modelValue"])]),(0,o._)("div",null,[(0,o.Wm)(h,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("分割数")])),_:1}),(0,o.Wm)(V,{controls:!0,onChange:W,modelValue:d.divisions,"onUpdate:modelValue":t[16]||(t[16]=e=>d.divisions=e),min:1,max:40},null,8,["modelValue"])])]),(0,o._)("div",it,[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("网格颜色")])),_:1}),(0,o.Wm)(A,{"color-format":"hex",predefine:(0,l.SU)(p),onChange:b,onActiveChange:C,modelValue:d.color,"onUpdate:modelValue":t[17]||(t[17]=e=>d.color=e)},null,8,["predefine","modelValue"])])),_:1})])],2),(0,o._)("div",{class:(0,n.C_)(["options",u.value])},[(0,o._)("div",ot,[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Wm)(H)])),_:1}),lt])),_:1}),(0,o.Wm)(i,{modelValue:d.axesHelper,"onUpdate:modelValue":t[18]||(t[18]=e=>d.axesHelper=e),onChange:L},null,8,["modelValue"])]),(0,o._)("div",{class:(0,n.C_)(["option",c.value])},[(0,o._)("div",nt,[(0,o.Wm)(h,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("轴长度")])),_:1})]),(0,o._)("div",at,[(0,o.Wm)(k,{onChange:L,modelValue:d.axesSize,"onUpdate:modelValue":t[19]||(t[19]=e=>d.axesSize=e),min:1,max:10,step:.2},null,8,["modelValue"])])],2)],2)])}}};const rt=st;var dt=rt;const pt=e=>((0,o.dD)("data-v-56578968"),e=e(),(0,o.Cn)(),e),ut={class:"edit-box"},mt=pt((()=>(0,o._)("div",{class:"header"},[(0,o._)("span",null,"模型灯光")],-1))),ct={class:"options"},ht={class:"option space-between"},gt=pt((()=>(0,o._)("span",null,"模型平面",-1))),_t=pt((()=>(0,o._)("span",null,"平面颜色",-1))),vt={class:"grid-txt"},ft={class:"grid-silder"},wt={class:"grid-txt"},yt={class:"grid-silder"},Ct={class:"options"},bt={class:"option space-between"},Wt=pt((()=>(0,o._)("span",null,"环境光",-1))),Lt={class:"color"},Mt={class:"silder"},kt={class:"options"},xt={class:"option space-between"},St=pt((()=>(0,o._)("span",null,"平行光",-1))),Vt={class:"color"},At={class:"silder"},Ht={class:"grid-txt"},Ut={class:"grid-silder"},Pt={class:"grid-txt"},Ft={class:"grid-silder"},Et={class:"grid-txt"},It={class:"grid-silder"},zt={class:"grid-txt"},Tt={class:"grid-silder"},jt={class:"grid-txt"},Rt={class:"grid-silder"},Dt={class:"options"},Ot={class:"option space-between"},Bt=pt((()=>(0,o._)("span",null,"点光源",-1))),Gt={class:"grid-txt"},Nt={class:"grid-silder"},Yt={class:"color"},Zt={class:"silder"},qt={class:"grid-txt"},Xt={class:"grid-silder"},Kt={class:"grid-txt"},$t={class:"grid-silder"},Jt={class:"grid-txt"},Qt={class:"grid-silder"},ei={class:"options"},ti={class:"option space-between"},ii=pt((()=>(0,o._)("span",null,"聚光灯",-1))),oi={class:"color"},li={class:"silder"},ni={class:"grid-txt"},ai={class:"grid-silder"},si={class:"grid-txt"},ri={class:"grid-silder"},di={class:"grid-txt"},pi={class:"grid-silder"},ui={class:"grid-txt"},mi={class:"grid-silder"},ci={class:"grid-txt"},hi={class:"grid-silder"},gi={class:"grid-txt"},_i={class:"grid-silder"},vi={class:"grid-txt"},fi={class:"grid-silder"},wi={class:"grid-txt"},yi={class:"grid-silder"},Ci={class:"grid-txt"},bi={class:"grid-silder"};var Wi={__name:"EditLight",setup(e,{expose:t}){const i=(0,s.oR)(),{$bus:a}=(0,o.FN)().proxy,d=(0,l.qj)({planeGeometry:!1,planeColor:"#939393",planeWidth:7,planeHeight:7,ambientLight:!0,ambientLightColor:"#fff",ambientLightIntensity:.8,directionalLight:!1,directionalLightHelper:!0,directionalLightColor:"#1E90FF",directionalLightIntensity:1,directionalHorizontal:-1.26,directionalVertical:-3.85,directionalSistance:2.98,directionaShadow:!0,pointLight:!1,pointLightHelper:!0,pointLightColor:"#1E90FF",pointLightIntensity:1,pointHorizontal:-4.21,pointVertical:-4.1,pointSistance:2.53,spotLight:!1,spotLightColor:"#323636",spotLightIntensity:400,spotHorizontal:-3.49,spotVertical:-4.37,spotSistance:4.09,spotAngle:.5,spotPenumbra:1,spotFocus:1,spotCastShadow:!0,spotLightHelper:!0,spotDistance:20}),p=r.UL,u=(0,o.Fl)((()=>{const{ambientLight:e}=d;return e?"":"disabled"})),m=(0,o.Fl)((()=>{const{directionalLight:e}=d;return e?"":"disabled"})),c=(0,o.Fl)((()=>{const{pointLight:e}=d;return e?"":"disabled"})),h=(0,o.Fl)((()=>{const{spotLight:e}=d;return e?"":"disabled"})),g=(0,o.Fl)((()=>{const{planeGeometry:e}=d;return e?"":"disabled"})),_=(0,l.qj)({modelApi:(0,o.Fl)((()=>i.state.modelApi))});(0,o.bv)((()=>{a.on("model-update",(()=>{Object.assign(d,{planeGeometry:!1,planeColor:"#939393",planeWidth:7,planeHeight:7,ambientLight:!0,ambientLightColor:"#fff",ambientLightIntensity:.8,directionalLight:!1,directionalLightHelper:!0,directionalLightColor:"#1E90FF",directionalLightIntensity:1,directionalHorizontal:-1.26,directionalVertical:-3.85,directionalSistance:2.98,directionaShadow:!0,pointLight:!1,pointLightHelper:!0,pointLightColor:"#1E90FF",pointLightIntensity:1,pointHorizontal:-4.21,pointVertical:-4.1,pointSistance:2.53,spotLight:!1,spotLightColor:"#323636",spotLightIntensity:400,spotHorizontal:-3.49,spotVertical:-4.37,spotSistance:4.09,spotAngle:.5,spotPenumbra:1,spotFocus:1,spotCastShadow:!0,spotLightHelper:!0,spotDistance:20})}))}));const v=e=>{d.ambientLightColor=e,_.modelApi.onSetModelAmbientLight(d)},f=()=>{_.modelApi.onSetModelAmbientLight(d)},w=e=>{d.directionalLightColor=e,_.modelApi.onSetModelDirectionalLight(d)},y=()=>{d.directionalLight&&(d.planeGeometry=!0,_.modelApi.onSetModelPlaneGeometry(d)),_.modelApi.onSetModelDirectionalLight(d)},C=e=>{d.pointLightColor=e,_.modelApi.onSetModelPointLight(d)},b=()=>{_.modelApi.onSetModelPointLight(d)},W=e=>{d.spotLightColor=e,_.modelApi.onSetModelSpotLight(d)},L=()=>{d.spotLight&&(d.planeGeometry=!0,_.modelApi.onSetModelPlaneGeometry(d)),_.modelApi.onSetModelSpotLight(d)},M=e=>{d.planeColor=e,_.modelApi.onSetModelPlaneGeometry(d)},k=()=>{_.modelApi.onSetModelPlaneGeometry(d)};return t({config:d}),(e,t)=>{const i=(0,o.up)("Odometer"),a=(0,o.up)("el-icon"),s=(0,o.up)("el-space"),r=(0,o.up)("el-switch"),_=(0,o.up)("el-color-picker"),x=(0,o.up)("el-button"),S=(0,o.up)("el-slider"),V=(0,o.up)("SetUp"),A=(0,o.up)("Place"),H=(0,o.up)("Orange"),U=(0,o.up)("el-scrollbar");return(0,o.wg)(),(0,o.iD)("div",ut,[mt,(0,o.Wm)(U,{height:"calc(100vh - 130px)"},{default:(0,o.w5)((()=>[(0,o._)("div",ct,[(0,o._)("div",ht,[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Wm)(a,null,{default:(0,o.w5)((()=>[(0,o.Wm)(i)])),_:1}),gt])),_:1}),(0,o.Wm)(r,{modelValue:d.planeGeometry,"onUpdate:modelValue":t[0]||(t[0]=e=>d.planeGeometry=e),onChange:k},null,8,["modelValue"])]),(0,o._)("div",{class:(0,n.C_)(["option",g.value])},[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[_t,(0,o.Wm)(_,{"color-format":"hex",modelValue:d.planeColor,"onUpdate:modelValue":t[1]||(t[1]=e=>d.planeColor=e),predefine:(0,l.SU)(p),onChange:k,onActiveChange:M},null,8,["modelValue","predefine"])])),_:1})],2),(0,o._)("div",{class:(0,n.C_)(["option",g.value])},[(0,o._)("div",vt,[(0,o.Wm)(x,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("宽度")])),_:1})]),(0,o._)("div",ft,[(0,o.Wm)(S,{"show-input":"",onChange:k,modelValue:d.planeWidth,"onUpdate:modelValue":t[2]||(t[2]=e=>d.planeWidth=e),min:0,max:100,step:.1},null,8,["modelValue"])])],2),(0,o._)("div",{class:(0,n.C_)(["option",g.value])},[(0,o._)("div",wt,[(0,o.Wm)(x,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("高度")])),_:1})]),(0,o._)("div",yt,[(0,o.Wm)(S,{"show-input":"",onChange:k,modelValue:d.planeHeight,"onUpdate:modelValue":t[3]||(t[3]=e=>d.planeHeight=e),min:0,max:100,step:.1},null,8,["modelValue"])])],2)]),(0,o._)("div",Ct,[(0,o._)("div",bt,[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Wm)(a,null,{default:(0,o.w5)((()=>[(0,o.Wm)(i)])),_:1}),Wt])),_:1}),(0,o.Wm)(r,{modelValue:d.ambientLight,"onUpdate:modelValue":t[4]||(t[4]=e=>d.ambientLight=e),onChange:f},null,8,["modelValue"])]),(0,o._)("div",{class:(0,n.C_)(["option",u.value])},[(0,o._)("div",Lt,[(0,o.Wm)(_,{"color-format":"hex",modelValue:d.ambientLightColor,"onUpdate:modelValue":t[5]||(t[5]=e=>d.ambientLightColor=e),predefine:(0,l.SU)(p),onChange:f,onActiveChange:v},null,8,["modelValue","predefine"])]),(0,o._)("div",Mt,[(0,o.Wm)(S,{"show-input":"",onChange:f,modelValue:d.ambientLightIntensity,"onUpdate:modelValue":t[6]||(t[6]=e=>d.ambientLightIntensity=e),min:-5,max:5,step:.01},null,8,["modelValue"])])],2)]),(0,o._)("div",kt,[(0,o._)("div",xt,[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Wm)(a,null,{default:(0,o.w5)((()=>[(0,o.Wm)(V)])),_:1}),St])),_:1}),(0,o.Wm)(r,{modelValue:d.directionalLight,"onUpdate:modelValue":t[7]||(t[7]=e=>d.directionalLight=e),onChange:y},null,8,["modelValue"])]),(0,o._)("div",{class:(0,n.C_)(["option",m.value])},[(0,o._)("div",Vt,[(0,o.Wm)(_,{"color-format":"hex",modelValue:d.directionalLightColor,"onUpdate:modelValue":t[8]||(t[8]=e=>d.directionalLightColor=e),predefine:(0,l.SU)(p),onChange:y,onActiveChange:w},null,8,["modelValue","predefine"])]),(0,o._)("div",At,[(0,o.Wm)(S,{"show-input":"",onChange:y,modelValue:d.directionalLightIntensity,"onUpdate:modelValue":t[9]||(t[9]=e=>d.directionalLightIntensity=e),min:-5,max:5,step:.01},null,8,["modelValue"])])],2),(0,o._)("div",{class:(0,n.C_)(["option",m.value])},[(0,o._)("div",Ht,[(0,o.Wm)(x,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("是否开启阴影")])),_:1})]),(0,o._)("div",Ut,[(0,o.Wm)(r,{modelValue:d.directionaShadow,"onUpdate:modelValue":t[10]||(t[10]=e=>d.directionaShadow=e),onChange:y},null,8,["modelValue"])]),(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o._)("div",Pt,[(0,o.Wm)(x,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("辅助线")])),_:1})]),(0,o._)("div",Ft,[(0,o.Wm)(r,{modelValue:d.directionalLightHelper,"onUpdate:modelValue":t[11]||(t[11]=e=>d.directionalLightHelper=e),onChange:y},null,8,["modelValue"])])])),_:1})],2),(0,o._)("div",{class:(0,n.C_)(["option",m.value])},[(0,o._)("div",Et,[(0,o.Wm)(x,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("水平方向")])),_:1})]),(0,o._)("div",It,[(0,o.Wm)(S,{"show-input":"",onChange:y,modelValue:d.directionalHorizontal,"onUpdate:modelValue":t[12]||(t[12]=e=>d.directionalHorizontal=e),min:-10,max:10,step:.01},null,8,["modelValue"])])],2),(0,o._)("div",{class:(0,n.C_)(["option",m.value])},[(0,o._)("div",zt,[(0,o.Wm)(x,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("垂直方向")])),_:1})]),(0,o._)("div",Tt,[(0,o.Wm)(S,{"show-input":"",onChange:y,modelValue:d.directionalVertical,"onUpdate:modelValue":t[13]||(t[13]=e=>d.directionalVertical=e),min:-10,max:10,step:.01},null,8,["modelValue"])])],2),(0,o._)("div",{class:(0,n.C_)(["option",m.value])},[(0,o._)("div",jt,[(0,o.Wm)(x,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("光源距离")])),_:1})]),(0,o._)("div",Rt,[(0,o.Wm)(S,{"show-input":"",onChange:y,modelValue:d.directionalSistance,"onUpdate:modelValue":t[14]||(t[14]=e=>d.directionalSistance=e),min:0,max:10,step:.01},null,8,["modelValue"])])],2)]),(0,o._)("div",Dt,[(0,o._)("div",Ot,[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Wm)(a,null,{default:(0,o.w5)((()=>[(0,o.Wm)(A)])),_:1}),Bt])),_:1}),(0,o.Wm)(r,{modelValue:d.pointLight,"onUpdate:modelValue":t[15]||(t[15]=e=>d.pointLight=e),onChange:b},null,8,["modelValue"])]),(0,o._)("div",{class:(0,n.C_)(["option",c.value])},[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o._)("div",Gt,[(0,o.Wm)(x,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("辅助线")])),_:1})]),(0,o._)("div",Nt,[(0,o.Wm)(r,{modelValue:d.pointLightHelper,"onUpdate:modelValue":t[16]||(t[16]=e=>d.pointLightHelper=e),onChange:b},null,8,["modelValue"])])])),_:1})],2),(0,o._)("div",{class:(0,n.C_)(["option",c.value])},[(0,o._)("div",Yt,[(0,o.Wm)(_,{"color-format":"hex",modelValue:d.pointLightColor,"onUpdate:modelValue":t[17]||(t[17]=e=>d.pointLightColor=e),predefine:(0,l.SU)(p),onChange:b,onActiveChange:C},null,8,["modelValue","predefine"])]),(0,o._)("div",Zt,[(0,o.Wm)(S,{"show-input":"",onChange:b,modelValue:d.pointLightIntensity,"onUpdate:modelValue":t[18]||(t[18]=e=>d.pointLightIntensity=e),min:-15,max:15,step:.1},null,8,["modelValue"])])],2),(0,o._)("div",{class:(0,n.C_)(["option",c.value])},[(0,o._)("div",qt,[(0,o.Wm)(x,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("水平方向")])),_:1})]),(0,o._)("div",Xt,[(0,o.Wm)(S,{"show-input":"",onChange:b,modelValue:d.pointHorizontal,"onUpdate:modelValue":t[19]||(t[19]=e=>d.pointHorizontal=e),min:-10,max:10,step:.11},null,8,["modelValue"])])],2),(0,o._)("div",{class:(0,n.C_)(["option",c.value])},[(0,o._)("div",Kt,[(0,o.Wm)(x,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("垂直方向")])),_:1})]),(0,o._)("div",$t,[(0,o.Wm)(S,{"show-input":"",onChange:b,modelValue:d.pointVertical,"onUpdate:modelValue":t[20]||(t[20]=e=>d.pointVertical=e),min:-10,max:10,step:.1},null,8,["modelValue"])])],2),(0,o._)("div",{class:(0,n.C_)(["option",c.value])},[(0,o._)("div",Jt,[(0,o.Wm)(x,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("光源距离")])),_:1})]),(0,o._)("div",Qt,[(0,o.Wm)(S,{"show-input":"",onChange:b,modelValue:d.pointSistance,"onUpdate:modelValue":t[21]||(t[21]=e=>d.pointSistance=e),min:0,max:10,step:.1},null,8,["modelValue"])])],2)]),(0,o._)("div",ei,[(0,o._)("div",ti,[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Wm)(a,null,{default:(0,o.w5)((()=>[(0,o.Wm)(H)])),_:1}),ii])),_:1}),(0,o.Wm)(r,{modelValue:d.spotLight,"onUpdate:modelValue":t[22]||(t[22]=e=>d.spotLight=e),onChange:L},null,8,["modelValue"])]),(0,o._)("div",{class:(0,n.C_)(["option",h.value])},[(0,o._)("div",oi,[(0,o.Wm)(_,{"color-format":"hex",modelValue:d.spotLightColor,"onUpdate:modelValue":t[23]||(t[23]=e=>d.spotLightColor=e),predefine:(0,l.SU)(p),onChange:L,onActiveChange:W},null,8,["modelValue","predefine"])]),(0,o._)("div",li,[(0,o.Wm)(S,{"show-input":"",onChange:L,modelValue:d.spotLightIntensity,"onUpdate:modelValue":t[24]||(t[24]=e=>d.spotLightIntensity=e),min:0,max:600,step:.1},null,8,["modelValue"])])],2),(0,o._)("div",{class:(0,n.C_)(["option",h.value])},[(0,o._)("div",ni,[(0,o.Wm)(x,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("是否开启阴影")])),_:1})]),(0,o._)("div",ai,[(0,o.Wm)(r,{modelValue:d.spotCastShadow,"onUpdate:modelValue":t[25]||(t[25]=e=>d.spotCastShadow=e),onChange:L},null,8,["modelValue"])]),(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o._)("div",si,[(0,o.Wm)(x,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("辅助线")])),_:1})]),(0,o._)("div",ri,[(0,o.Wm)(r,{modelValue:d.spotLightHelper,"onUpdate:modelValue":t[26]||(t[26]=e=>d.spotLightHelper=e),onChange:L},null,8,["modelValue"])])])),_:1})],2),(0,o._)("div",{class:(0,n.C_)(["option",h.value])},[(0,o._)("div",di,[(0,o.Wm)(x,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("水平方向")])),_:1})]),(0,o._)("div",pi,[(0,o.Wm)(S,{"show-input":"",onChange:L,modelValue:d.spotHorizontal,"onUpdate:modelValue":t[27]||(t[27]=e=>d.spotHorizontal=e),min:-10,max:10,step:.1},null,8,["modelValue"])])],2),(0,o._)("div",{class:(0,n.C_)(["option",h.value])},[(0,o._)("div",ui,[(0,o.Wm)(x,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("垂直方向")])),_:1})]),(0,o._)("div",mi,[(0,o.Wm)(S,{"show-input":"",onChange:L,modelValue:d.spotVertical,"onUpdate:modelValue":t[28]||(t[28]=e=>d.spotVertical=e),min:-10,max:10,step:.1},null,8,["modelValue"])])],2),(0,o._)("div",{class:(0,n.C_)(["option",h.value])},[(0,o._)("div",ci,[(0,o.Wm)(x,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("光源距离")])),_:1})]),(0,o._)("div",hi,[(0,o.Wm)(S,{"show-input":"",onChange:L,modelValue:d.spotSistance,"onUpdate:modelValue":t[29]||(t[29]=e=>d.spotSistance=e),min:0,max:10,step:.1},null,8,["modelValue"])])],2),(0,o._)("div",{class:(0,n.C_)(["option",h.value])},[(0,o._)("div",gi,[(0,o.Wm)(x,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("光线照射范围")])),_:1})]),(0,o._)("div",_i,[(0,o.Wm)(S,{"show-input":"",onChange:L,modelValue:d.spotAngle,"onUpdate:modelValue":t[30]||(t[30]=e=>d.spotAngle=e),min:0,max:2,step:.01},null,8,["modelValue"])])],2),(0,o._)("div",{class:(0,n.C_)(["option",h.value])},[(0,o._)("div",vi,[(0,o.Wm)(x,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("边缘聚光度")])),_:1})]),(0,o._)("div",fi,[(0,o.Wm)(S,{"show-input":"",onChange:L,modelValue:d.spotPenumbra,"onUpdate:modelValue":t[31]||(t[31]=e=>d.spotPenumbra=e),min:0,max:1,step:.01},null,8,["modelValue"])])],2),(0,o._)("div",{class:(0,n.C_)(["option",h.value])},[(0,o._)("div",wi,[(0,o.Wm)(x,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("投影聚焦度")])),_:1})]),(0,o._)("div",yi,[(0,o.Wm)(S,{"show-input":"",onChange:L,modelValue:d.spotFocus,"onUpdate:modelValue":t[32]||(t[32]=e=>d.spotFocus=e),min:0,max:3,step:.01},null,8,["modelValue"])])],2),(0,o._)("div",{class:(0,n.C_)(["option",h.value])},[(0,o._)("div",Ci,[(0,o.Wm)(x,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("光源照射距离")])),_:1})]),(0,o._)("div",bi,[(0,o.Wm)(S,{"show-input":"",onChange:L,modelValue:d.spotDistance,"onUpdate:modelValue":t[33]||(t[33]=e=>d.spotDistance=e),min:1,max:500,step:1},null,8,["modelValue"])])],2)])])),_:1})])}}};const Li=(0,x.Z)(Wi,[["__scopeId","data-v-56578968"]]);var Mi=Li;const ki={class:"edit-box"},xi=(0,o._)("div",{class:"header"},[(0,o._)("span",null,"后期处理")],-1),Si={class:"options"},Vi={class:"option space-between"},Ai=(0,o._)("span",null," 辉光 ",-1),Hi={class:"option"},Ui={class:"grid-txt"},Pi={class:"grid-silder"},Fi={class:"option"},Ei={class:"grid-txt"},Ii={class:"grid-silder"},zi={class:"option"},Ti={class:"grid-txt"},ji={class:"grid-silder"},Ri={class:"options"},Di={class:"option space-between"},Oi=(0,o._)("span",null," 色调曝光度 ",-1),Bi={class:"grid-silder"},Gi={class:"header"},Ni=(0,o._)("span",null,"模型操作",-1),Yi={class:"options"},Zi=(0,o._)("span",null," 模型分解 ",-1),qi={class:"grid-silder"},Xi=(0,o._)("span",null," 模型材质拖拽 ",-1),Ki={class:"grid-silder"},$i=(0,o._)("span",null," hover是否显示材质标签 ",-1),Ji={class:"grid-silder"};var Qi={__name:"EditLaterStage",setup(e,{expose:t}){const i=(0,s.oR)(),{$bus:a}=(0,o.FN)().proxy,r=(0,l.qj)({modelApi:(0,o.Fl)((()=>i.state.modelApi))}),d=(0,o.Fl)((()=>{const{glow:e}=c;return e?"":"disabled"})),p=(0,o.Fl)((()=>{const e=r.modelApi.modelMaterialList,t=e.filter((e=>"Mesh"==e.type));return t.length<=1||c.modelDrag?"disabled":""})),u=(0,o.Fl)((()=>{const e=r.modelApi.modelMaterialList,t=e.filter((e=>"Mesh"==e.type));return t.length<=1?"disabled":""})),m=(0,o.Fl)((()=>{const e=r.modelApi.modelMaterialList,t=e.filter((e=>"Mesh"==e.type));return t.length<=1&&!c.hoverMeshTag?"disabled":""})),c=(0,l.qj)({glow:!1,threshold:.05,strength:.6,radius:1,decompose:0,modelDrag:!1,toneMappingExposure:3,hoverMeshTag:!1});(0,o.bv)((()=>{a.on("model-update",(()=>{Object.assign(c,{glow:!1,threshold:.05,strength:.6,radius:1,decompose:0,modelDrag:!1,toneMappingExposure:3,hoverMeshTag:!1})}))}));const h=()=>{r.modelApi.onSetUnrealBloomPass(c)},g=()=>{r.modelApi.setModelMeshDecompose(c)},_=()=>{r.modelApi.setModelMeshTag(c)},v=()=>{c.decompose=0,r.modelApi.setModelMeshDecompose(c),r.modelApi.setModelMeshDrag(c)},f=()=>({meshPositonList:r.modelApi.getMeshDragPosition(),...c});return t({getStageConfig:f}),(e,t)=>{const i=(0,o.up)("Sunny"),l=(0,o.up)("el-icon"),a=(0,o.up)("el-space"),s=(0,o.up)("el-switch"),r=(0,o.up)("el-button"),f=(0,o.up)("el-slider"),w=(0,o.up)("Umbrella"),y=(0,o.up)("WarnTriangleFilled"),C=(0,o.up)("el-tooltip"),b=(0,o.up)("Cpu"),W=(0,o.up)("Rank"),L=(0,o.up)("Message");return(0,o.wg)(),(0,o.iD)("div",ki,[xi,(0,o._)("div",Si,[(0,o._)("div",Vi,[(0,o.Wm)(a,null,{default:(0,o.w5)((()=>[(0,o.Wm)(l,null,{default:(0,o.w5)((()=>[(0,o.Wm)(i)])),_:1}),Ai])),_:1}),(0,o.Wm)(s,{modelValue:c.glow,"onUpdate:modelValue":t[0]||(t[0]=e=>c.glow=e),onChange:h},null,8,["modelValue"])])]),(0,o._)("div",{class:(0,n.C_)(["options",d.value])},[(0,o._)("div",Hi,[(0,o._)("div",Ui,[(0,o.Wm)(r,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("强度")])),_:1})]),(0,o._)("div",Pi,[(0,o.Wm)(f,{"show-input":"",modelValue:c.strength,"onUpdate:modelValue":t[1]||(t[1]=e=>c.strength=e),onChange:h,step:.01,min:0,max:3},null,8,["modelValue"])])]),(0,o._)("div",Fi,[(0,o._)("div",Ei,[(0,o.Wm)(r,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("半径")])),_:1})]),(0,o._)("div",Ii,[(0,o.Wm)(f,{"show-input":"",modelValue:c.radius,"onUpdate:modelValue":t[2]||(t[2]=e=>c.radius=e),onChange:h,step:.01,min:0,max:2},null,8,["modelValue"])])]),(0,o._)("div",zi,[(0,o._)("div",Ti,[(0,o.Wm)(r,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("阈值")])),_:1})]),(0,o._)("div",ji,[(0,o.Wm)(f,{"show-input":"",modelValue:c.threshold,"onUpdate:modelValue":t[3]||(t[3]=e=>c.threshold=e),onChange:h,step:.01,min:0,max:1},null,8,["modelValue"])])])],2),(0,o._)("div",Ri,[(0,o._)("div",Di,[(0,o.Wm)(a,null,{default:(0,o.w5)((()=>[(0,o.Wm)(l,null,{default:(0,o.w5)((()=>[(0,o.Wm)(w)])),_:1}),Oi])),_:1}),(0,o._)("div",Bi,[(0,o.Wm)(f,{"show-input":"",modelValue:c.toneMappingExposure,"onUpdate:modelValue":t[4]||(t[4]=e=>c.toneMappingExposure=e),onChange:h,step:.01,min:.5,max:10},null,8,["modelValue"])])])]),(0,o._)("div",Gi,[(0,o.Wm)(a,null,{default:(0,o.w5)((()=>[Ni,"disabled"==p.value?((0,o.wg)(),(0,o.j4)(C,{key:0,effect:"dark",content:"当前模型不可进行以下操作",placement:"top"},{default:(0,o.w5)((()=>[(0,o.Wm)(l,null,{default:(0,o.w5)((()=>[(0,o.Wm)(y,{size:20,color:"#ffb940"})])),_:1})])),_:1})):(0,o.kq)("",!0)])),_:1})]),(0,o._)("div",Yi,[(0,o._)("div",{class:(0,n.C_)(["option space-between",p.value])},[(0,o.Wm)(a,null,{default:(0,o.w5)((()=>[(0,o.Wm)(l,null,{default:(0,o.w5)((()=>[(0,o.Wm)(b)])),_:1}),Zi])),_:1}),(0,o._)("div",qi,[(0,o.Wm)(f,{"show-input":"",modelValue:c.decompose,"onUpdate:modelValue":t[5]||(t[5]=e=>c.decompose=e),onChange:g,step:.01,min:0,max:20},null,8,["modelValue"])])],2),(0,o._)("div",{class:(0,n.C_)(["option",u.value])},[(0,o.Wm)(a,null,{default:(0,o.w5)((()=>[(0,o.Wm)(l,null,{default:(0,o.w5)((()=>[(0,o.Wm)(W,{size:20})])),_:1}),Xi])),_:1}),(0,o._)("div",Ki,[(0,o.Wm)(s,{modelValue:c.modelDrag,"onUpdate:modelValue":t[6]||(t[6]=e=>c.modelDrag=e),onChange:v},null,8,["modelValue"])])],2),(0,o._)("div",{class:(0,n.C_)(["option",m.value])},[(0,o.Wm)(a,null,{default:(0,o.w5)((()=>[(0,o.Wm)(l,null,{default:(0,o.w5)((()=>[(0,o.Wm)(L,{size:20})])),_:1}),$i])),_:1}),(0,o._)("div",Ji,[(0,o.Wm)(s,{modelValue:c.hoverMeshTag,"onUpdate:modelValue":t[7]||(t[7]=e=>c.hoverMeshTag=e),onChange:_},null,8,["modelValue"])])],2)])])}}};const eo=Qi;var to=eo;const io={class:"model-panel"},oo={class:"panel-tabs"},lo=["onClick"],no={class:"tab"},ao={class:"panel-edit"};var so={__name:"index",setup(e,{expose:t}){const i=[{name:"背景",key:"EditBackground",icon:"Picture"},{name:"材质",key:"EditMaterial",icon:"DataAnalysis"},{name:"后期/操作",key:"EditLaterStage",icon:"MagicStick"},{name:"灯光",key:"EditLight",icon:"Sunrise"},{name:"模型动画",key:"EditAnimation",icon:"VideoCameraFilled"},{name:"辅助线/轴配置",key:"EditAttribute",icon:"Box"}],s=(0,l.iH)("EditMaterial"),r=(0,l.iH)(null),d=(0,l.iH)(null),p=(0,l.iH)(null),u=(0,l.iH)(null),m=(0,l.iH)(null),c=(0,l.iH)(null),h=()=>({background:r.value.config,material:d.value.getMeshConfig(),animation:p.value.config,attribute:u.value.getAttrbuteConfig(),light:m.value.config,stage:c.value.getStageConfig()});return t({getPanelConfig:h}),(e,t)=>{const l=(0,o.up)("el-icon"),h=(0,o.up)("el-tooltip");return(0,o.wg)(),(0,o.iD)("div",io,[(0,o._)("ul",oo,[((0,o.wg)(),(0,o.iD)(o.HY,null,(0,o.Ko)(i,(e=>(0,o._)("li",{key:e.key,class:(0,n.C_)(s.value==e.key?"active":""),onClick:t=>s.value=e.key},[(0,o.Wm)(h,{effect:"light",content:e.name,placement:"top"},{default:(0,o.w5)((()=>[(0,o._)("div",no,[(0,o.Wm)(l,{size:"20px",color:s.value==e.key?"#fff":""},{default:(0,o.w5)((()=>[((0,o.wg)(),(0,o.j4)((0,o.LL)(e.icon)))])),_:2},1032,["color"])])])),_:2},1032,["content"])],10,lo))),64))]),(0,o._)("div",ao,[(0,o.wy)((0,o._)("div",null,[(0,o.Wm)(V,{ref_key:"background",ref:r},null,512)],512),[[a.F8,"EditBackground"==s.value]]),(0,o.wy)((0,o._)("div",null,[(0,o.Wm)(J,{ref_key:"material",ref:d},null,512)],512),[[a.F8,"EditMaterial"==s.value]]),(0,o.wy)((0,o._)("div",null,[(0,o.Wm)(to,{ref_key:"stage",ref:c},null,512)],512),[[a.F8,"EditLaterStage"==s.value]]),(0,o.wy)((0,o._)("div",null,[(0,o.Wm)(be,{ref_key:"animation",ref:p},null,512)],512),[[a.F8,"EditAnimation"==s.value]]),(0,o.wy)((0,o._)("div",null,[(0,o.Wm)(Mi,{ref_key:"light",ref:m},null,512)],512),[[a.F8,"EditLight"==s.value]]),(0,o.wy)((0,o._)("div",null,[(0,o.Wm)(dt,{ref_key:"attribute",ref:u},null,512)],512),[[a.F8,"EditAttribute"==s.value]])])])}}};const ro=(0,x.Z)(so,[["__scopeId","data-v-58c340f1"]]);var po=ro,uo=(i(6229),i(7330),i(2062),i(2346));const mo={class:"model-choose"},co=(0,o._)("div",{class:"header"},[(0,o._)("span",null,"模型列表")],-1),ho={class:"options"},go={class:"option"},_o=(0,o._)("span",null,"普通模型",-1),vo={class:"options"},fo={class:"option"},wo=(0,o._)("span",null,"动画模型",-1),yo={class:"options"},Co={class:"option"},bo=(0,o._)("span",null,"外部模型",-1),Wo={class:"file-name"},Lo=(0,o._)("span",null,"当前模型:",-1),Mo={class:"upload"},ko={class:"icon"},xo=(0,o._)("div",null,[(0,o._)("span",null,"请选择(目前仅支持.glb, .obj, .gltf格式)")],-1);var So={__name:"index",setup(e,{expose:t}){const a=(0,s.oR)(),{$bus:r}=(0,o.FN)().proxy,p=(0,l.qj)({modelApi:(0,o.Fl)((()=>a.state.modelApi))}),u=(0,o.Fl)((()=>d.H1.filter((e=>!e.animation)))),m=(0,o.Fl)((()=>d.H1.filter((e=>e.animation)))),c=(0,l.iH)(9),h=(0,l.iH)({name:"变形金刚（3）",fileType:"glb",id:9,animation:!1,filePath:"threeFile/glb/glb-9.glb",icon:i(8817),decomposeName:"transformers_3",key:"transformers-3"}),g=(0,l.iH)(null),_=async e=>{if(e.id==c.value)return!1;c.value=e.id,g.value=null,h.value=e,r.emit("page-loading",!0);try{const{load:t}=await p.modelApi.onSwitchModel(e);t&&(r.emit("model-update"),r.emit("page-loading",!1))}catch(t){r.emit("page-loading",!1)}},v=async e=>{g.value=e.name;const t=URL.createObjectURL(e.raw),i={filePath:t,fileType:(0,uo.JB)(e.name)};r.emit("page-loading",!0);try{const{load:e,filePath:t}=await p.modelApi.onSwitchModel(i);URL.revokeObjectURL(t),e&&(r.emit("model-update"),r.emit("page-loading",!1),c.value=null,h.value={})}catch(o){g.value=null,r.emit("page-loading",!1)}};return t({activeModel:h}),(e,t)=>{const i=(0,o.up)("Orange"),l=(0,o.up)("el-icon"),a=(0,o.up)("el-space"),s=(0,o.up)("el-image"),r=(0,o.up)("el-col"),d=(0,o.up)("el-row"),p=(0,o.up)("el-scrollbar"),h=(0,o.up)("Paperclip"),f=(0,o.up)("UploadFilled"),w=(0,o.up)("el-tooltip"),y=(0,o.up)("Plus"),C=(0,o.up)("el-upload");return(0,o.wg)(),(0,o.iD)("div",mo,[co,(0,o._)("div",ho,[(0,o._)("div",go,[(0,o.Wm)(a,null,{default:(0,o.w5)((()=>[(0,o.Wm)(l,null,{default:(0,o.w5)((()=>[(0,o.Wm)(i)])),_:1}),_o])),_:1})]),(0,o.Wm)(p,{"max-height":"250px"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(u.value,(e=>((0,o.wg)(),(0,o.j4)(r,{style:{textAlign:"center"},span:12,key:e.id},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{onClick:t=>_(e),class:(0,n.C_)(["el-img",c.value==e.id?"active-model":""]),src:e.icon,fit:"cover"},null,8,["onClick","class","src"])])),_:2},1024)))),128))])),_:1})])),_:1})]),(0,o._)("div",vo,[(0,o._)("div",fo,[(0,o.Wm)(a,null,{default:(0,o.w5)((()=>[(0,o.Wm)(l,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h)])),_:1}),wo])),_:1})]),(0,o.Wm)(p,{"max-height":"250px"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(m.value,(e=>((0,o.wg)(),(0,o.j4)(r,{style:{textAlign:"center"},span:12,key:e.id},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{onClick:t=>_(e),class:(0,n.C_)(["el-img",c.value==e.id?"active-model":""]),src:e.icon,fit:"cover"},null,8,["onClick","class","src"])])),_:2},1024)))),128))])),_:1})])),_:1})]),(0,o._)("div",yo,[(0,o._)("div",Co,[(0,o.Wm)(a,null,{default:(0,o.w5)((()=>[(0,o.Wm)(l,null,{default:(0,o.w5)((()=>[(0,o.Wm)(f)])),_:1}),bo])),_:1})]),(0,o._)("div",Wo,[Lo,(0,o.Wm)(w,{effect:"dark",content:g.value,placement:"top"},{default:(0,o.w5)((()=>[(0,o._)("b",null,(0,n.zw)(g.value),1)])),_:1},8,["content"])]),(0,o.Wm)(C,{action:"",accept:".glb,.obj,.gltf",class:"file-box","show-file-list":!1,"auto-upload":!1,"on-change":v},{default:(0,o.w5)((()=>[(0,o._)("div",Mo,[(0,o._)("div",ko,[(0,o.Wm)(l,{size:44},{default:(0,o.w5)((()=>[(0,o.Wm)(y)])),_:1}),xo])])])),_:1})])])}}};const Vo=So;var Ao=Vo,Ho=i(2483),Uo=i(6e3),Po=i(4543),Fo=i(9469),Eo=i(8421),Io=i(2338),zo=i(840),To=i(9066),jo=i(328),Ro=i(9868),Do=i(499),Oo=i(6573);const Bo=new A.JOQ,Go=new A.iMs,No=new A.FM8,Yo=new A.Pa4,Zo=new A.Pa4,qo=new A.Pa4,Xo=new A.yGw;class Ko extends A.pBf{constructor(e,t,i){super(),i.style.touchAction="none";let o=null,l=null;const n=[],a=this;function s(){i.addEventListener("pointermove",m),i.addEventListener("pointerdown",c),i.addEventListener("pointerup",h),i.addEventListener("pointerleave",h)}function r(){i.removeEventListener("pointermove",m),i.removeEventListener("pointerdown",c),i.removeEventListener("pointerup",h),i.removeEventListener("pointerleave",h),i.style.cursor=""}function d(){r()}function p(){return e}function u(){return Go}function m(s){if(!1!==a.enabled){if(g(s),Go.setFromCamera(No,t),o)return Go.ray.intersectPlane(Bo,Zo)&&o.position.copy(Zo.sub(Yo).applyMatrix4(Xo)),void a.dispatchEvent({type:"drag",object:o});if("mouse"===s.pointerType||"pen"===s.pointerType)if(n.length=0,Go.setFromCamera(No,t),Go.intersectObjects(e,!0,n),n.length>0){const e=n[0].object;Bo.setFromNormalAndCoplanarPoint(t.getWorldDirection(Bo.normal),qo.setFromMatrixPosition(e.matrixWorld)),l!==e&&null!==l&&(a.dispatchEvent({type:"hoveroff",object:l}),i.style.cursor="auto",l=null),l!==e&&(a.dispatchEvent({type:"hoveron",object:e}),i.style.cursor="pointer",l=e)}else null!==l&&(a.dispatchEvent({type:"hoveroff",object:l}),i.style.cursor="auto",l=null)}}function c(l){!1!==a.enabled&&(g(l),n.length=0,Go.setFromCamera(No,t),Go.intersectObjects(e,!0,n),n.length>0&&(o=!0===a.transformGroup?e[0]:n[0].object,Bo.setFromNormalAndCoplanarPoint(t.getWorldDirection(Bo.normal),qo.setFromMatrixPosition(o.matrixWorld)),Go.ray.intersectPlane(Bo,Zo)&&(Xo.copy(o.parent.matrixWorld).invert(),Yo.copy(Zo).sub(qo.setFromMatrixPosition(o.matrixWorld))),i.style.cursor="move",a.dispatchEvent({type:"dragstart",object:o})))}function h(){!1!==a.enabled&&(o&&(a.dispatchEvent({type:"dragend",object:o}),o=null),i.style.cursor=l?"pointer":"auto")}function g(e){const t=i.getBoundingClientRect();No.x=(e.clientX-t.left)/t.width*2-1,No.y=-(e.clientY-t.top)/t.height*2+1}s(),this.enabled=!0,this.transformGroup=!1,this.activate=s,this.deactivate=r,this.dispose=d,this.getObjects=p,this.getRaycaster=u}}var $o,Jo=i(4239),Qo={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)},Out:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin(5*(e-.1)*Math.PI)+1},InOut:function(e){return 0===e?0:1===e?1:(e*=2,e<1?-.5*Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)+1)}},Back:{In:function(e){var t=1.70158;return e*e*((t+1)*e-t)},Out:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},Bounce:{In:function(e){return 1-Qo.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*Qo.Bounce.In(2*e):.5*Qo.Bounce.Out(2*e-1)+.5}}};$o="undefined"===typeof self&&"undefined"!==typeof process&&process.hrtime?function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!==typeof self&&void 0!==self.performance&&void 0!==self.performance.now?self.performance.now.bind(self.performance):void 0!==Date.now?Date.now:function(){return(new Date).getTime()};var el=$o,tl=function(){function e(){this._tweens={},this._tweensAddedDuringUpdate={}}return e.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map((function(t){return e._tweens[t]}))},e.prototype.removeAll=function(){this._tweens={}},e.prototype.add=function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},e.prototype.remove=function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},e.prototype.update=function(e,t){void 0===e&&(e=el()),void 0===t&&(t=!1);var i=Object.keys(this._tweens);if(0===i.length)return!1;while(i.length>0){this._tweensAddedDuringUpdate={};for(var o=0;o<i.length;o++){var l=this._tweens[i[o]],n=!t;l&&!1===l.update(e,n)&&!t&&delete this._tweens[i[o]]}i=Object.keys(this._tweensAddedDuringUpdate)}return!0},e}(),il={Linear:function(e,t){var i=e.length-1,o=i*t,l=Math.floor(o),n=il.Utils.Linear;return t<0?n(e[0],e[1],o):t>1?n(e[i],e[i-1],i-o):n(e[l],e[l+1>i?i:l+1],o-l)},Bezier:function(e,t){for(var i=0,o=e.length-1,l=Math.pow,n=il.Utils.Bernstein,a=0;a<=o;a++)i+=l(1-t,o-a)*l(t,a)*e[a]*n(o,a);return i},CatmullRom:function(e,t){var i=e.length-1,o=i*t,l=Math.floor(o),n=il.Utils.CatmullRom;return e[0]===e[i]?(t<0&&(l=Math.floor(o=i*(1+t))),n(e[(l-1+i)%i],e[l],e[(l+1)%i],e[(l+2)%i],o-l)):t<0?e[0]-(n(e[0],e[0],e[1],e[1],-o)-e[0]):t>1?e[i]-(n(e[i],e[i],e[i-1],e[i-1],o-i)-e[i]):n(e[l?l-1:0],e[l],e[i<l+1?i:l+1],e[i<l+2?i:l+2],o-l)},Utils:{Linear:function(e,t,i){return(t-e)*i+e},Bernstein:function(e,t){var i=il.Utils.Factorial;return i(e)/i(t)/i(e-t)},Factorial:function(){var e=[1];return function(t){var i=1;if(e[t])return e[t];for(var o=t;o>1;o--)i*=o;return e[t]=i,i}}(),CatmullRom:function(e,t,i,o,l){var n=.5*(i-e),a=.5*(o-t),s=l*l,r=l*s;return(2*t-2*i+n+a)*r+(-3*t+3*i-2*n-a)*s+n*l+t}}},ol=function(){function e(){}return e.nextId=function(){return e._nextId++},e._nextId=0,e}(),ll=new tl,nl=function(){function e(e,t){void 0===t&&(t=ll),this._object=e,this._group=t,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=Qo.Linear.None,this._interpolationFunction=il.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=ol.nextId(),this._isChainStopped=!1,this._goToEnd=!1}return e.prototype.getId=function(){return this._id},e.prototype.isPlaying=function(){return this._isPlaying},e.prototype.isPaused=function(){return this._isPaused},e.prototype.to=function(e,t){return this._valuesEnd=Object.create(e),void 0!==t&&(this._duration=t),this},e.prototype.duration=function(e){return this._duration=e,this},e.prototype.start=function(e){if(this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed)for(var t in this._reversed=!1,this._valuesStartRepeat)this._swapEndStartRepeatValues(t),this._valuesStart[t]=this._valuesStartRepeat[t];return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=void 0!==e?"string"===typeof e?el()+parseFloat(e):e:el(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},e.prototype._setupProperties=function(e,t,i,o){for(var l in i){var n=e[l],a=Array.isArray(n),s=a?"array":typeof n,r=!a&&Array.isArray(i[l]);if("undefined"!==s&&"function"!==s){if(r){var d=i[l];if(0===d.length)continue;d=d.map(this._handleRelativeValue.bind(this,n)),i[l]=[n].concat(d)}if("object"!==s&&!a||!n||r)"undefined"===typeof t[l]&&(t[l]=n),a||(t[l]*=1),o[l]=r?i[l].slice().reverse():t[l]||0;else{for(var p in t[l]=a?[]:{},n)t[l][p]=n[p];o[l]=a?[]:{},this._setupProperties(n,t[l],i[l],o[l])}}}},e.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},e.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},e.prototype.pause=function(e){return void 0===e&&(e=el()),this._isPaused||!this._isPlaying||(this._isPaused=!0,this._pauseStart=e,this._group&&this._group.remove(this)),this},e.prototype.resume=function(e){return void 0===e&&(e=el()),this._isPaused&&this._isPlaying?(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this):this},e.prototype.stopChainedTweens=function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop();return this},e.prototype.group=function(e){return this._group=e,this},e.prototype.delay=function(e){return this._delayTime=e,this},e.prototype.repeat=function(e){return this._initialRepeat=e,this._repeat=e,this},e.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},e.prototype.yoyo=function(e){return this._yoyo=e,this},e.prototype.easing=function(e){return this._easingFunction=e,this},e.prototype.interpolation=function(e){return this._interpolationFunction=e,this},e.prototype.chain=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._chainedTweens=e,this},e.prototype.onStart=function(e){return this._onStartCallback=e,this},e.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},e.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},e.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},e.prototype.onStop=function(e){return this._onStopCallback=e,this},e.prototype.update=function(e,t){if(void 0===e&&(e=el()),void 0===t&&(t=!0),this._isPaused)return!0;var i,o,l=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(e>l)return!1;t&&this.start(e)}if(this._goToEnd=!1,e<this._startTime)return!0;!1===this._onStartCallbackFired&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),o=(e-this._startTime)/this._duration,o=0===this._duration||o>1?1:o;var n=this._easingFunction(o);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,n),this._onUpdateCallback&&this._onUpdateCallback(this._object,o),1===o){if(this._repeat>0){for(i in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat)this._yoyo||"string"!==typeof this._valuesEnd[i]||(this._valuesStartRepeat[i]=this._valuesStartRepeat[i]+parseFloat(this._valuesEnd[i])),this._yoyo&&this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i];return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=e+this._repeatDelayTime:this._startTime=e+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var a=0,s=this._chainedTweens.length;a<s;a++)this._chainedTweens[a].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},e.prototype._updateProperties=function(e,t,i,o){for(var l in i)if(void 0!==t[l]){var n=t[l]||0,a=i[l],s=Array.isArray(e[l]),r=Array.isArray(a),d=!s&&r;d?e[l]=this._interpolationFunction(a,o):"object"===typeof a&&a?this._updateProperties(e[l],n,a,o):(a=this._handleRelativeValue(n,a),"number"===typeof a&&(e[l]=n+(a-n)*o))}},e.prototype._handleRelativeValue=function(e,t){return"string"!==typeof t?t:"+"===t.charAt(0)||"-"===t.charAt(0)?e+parseFloat(t):parseFloat(t)},e.prototype._swapEndStartRepeatValues=function(e){var t=this._valuesStartRepeat[e],i=this._valuesEnd[e];this._valuesStartRepeat[e]="string"===typeof i?this._valuesStartRepeat[e]+parseFloat(i):this._valuesEnd[e],this._valuesEnd[e]=t},e}(),al="18.6.4",sl=ol.nextId,rl=ll,dl=rl.getAll.bind(rl),pl=rl.removeAll.bind(rl),ul=rl.add.bind(rl),ml=rl.remove.bind(rl),cl=rl.update.bind(rl),hl={Easing:Qo,Group:tl,Interpolation:il,now:el,Sequence:ol,nextId:sl,Tween:nl,VERSION:al,getAll:dl,removeAll:pl,add:ul,remove:ml,update:cl},gl=hl;class _l{constructor(e){this.container=document.querySelector(e),this.camera,this.scene,this.renderer,this.controls,this.model,this.fileLoaderMap={glb:new Fo.E,fbx:new Oo.y,gltf:new Fo.E,obj:new Do.L(new A.lLk)},this.modelAnimation,this.animationMixer,this.animationColock=new A.SUY,this.animationFrame,this.rotationAnimationFrame,this.animateClipAction=null,this.loopMap={LoopOnce:A.jAl,LoopRepeat:A.YKA,LoopPingPong:A.uEv},this.skeletonHelper,this.gridHelper,this.axesHelper,this.ambientLight,this.directionalLight,this.directionalLightHelper,this.pointLight,this.pointLightHelper,this.spotLight,this.spotLightHelper,this.planeGeometry,this.modelMaterialList,this.effectComposer,this.outlinePass,this.renderAnimation,this.raycaster=new A.iMs,this.mouse=new A.FM8,this.modelTextureMap,this.glowComposer,this.unrealBloomPass,this.glowMaterialList,this.materials={},this.dragControls,this.hoverMeshTag=!1,this.onWindowResizesListener,this.onMouseClickListener,this.onMouseDownListener,this.onMouseMoveListener,this.modelProgressCallback=e=>e}init(){return new Promise((async(e,t)=>{this.initRender(),this.initCamera(),this.initScene(),this.initControls(),this.createHelper(),this.createLight();const i=await this.setModel({filePath:"threeFile/glb/glb-9.glb",fileType:"glb",decomposeName:"transformers_3"});this.createEffectComposer(),this.sceneAnimation(),this.addEvenListMouseLisatener(),e(i)}))}initScene(){this.scene=new A.xsS;const e=(new A.dpR).load(i(72));e.mapping=A.dSO,this.scene.background=e,this.scene.environment=e}initCamera(){const{clientHeight:e,clientWidth:t}=this.container;this.camera=new A.cPb(45,t/e,.25,1e3)}initRender(){this.renderer=new A.CP7({antialias:!0,alpha:!0}),this.renderer.setPixelRatio(window.devicePixelRatio);const{clientHeight:e,clientWidth:t}=this.container;this.renderer.setSize(t,e),this.renderer.toneMapping=A.CdI,this.renderer.toneMappingExposure=3,this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=A.ntZ,this.container.appendChild(this.renderer.domElement)}sceneAnimation(){this.renderAnimation=requestAnimationFrame((()=>this.sceneAnimation())),this.controls.update(),this.scene.traverse((e=>{e instanceof A.xsS&&(this.materials.scene=e.background,e.background=null),!this.glowMaterialList.includes(e.name)&&e.isMesh&&(this.materials[e.uuid]=e.material,e.material=new A.vBJ({color:"black"}))})),this.glowComposer.render(),this.scene.traverse((e=>{this.materials[e.uuid]&&(e.material=this.materials[e.uuid],delete this.materials[e.uuid]),e instanceof A.xsS&&(e.background=this.materials.scene,delete this.materials.scene)})),gl.update(),this.effectComposer.render()}addEvenListMouseLisatener(){this.onWindowResizesListener=this.onWindowResizes.bind(this),window.addEventListener("resize",this.onWindowResizesListener),this.onMouseClickListener=this.onMouseClickModel.bind(this),this.container.addEventListener("click",this.onMouseClickListener),this.onMouseDownListener=this.onMouseDownModel.bind(this),this.container.addEventListener("mousedown",this.onMouseDownListener),this.onMouseMoveListener=this.onMouseMoveModel.bind(this),this.container.addEventListener("mousemove",this.onMouseMoveListener)}initControls(){this.controls=new Po.z(this.camera,this.renderer.domElement),this.controls.enablePan=!1}setModel({filePath:e,fileType:t,scale:i,map:o,position:l,decomposeName:n}){return new Promise(((a,s)=>{const r=this.fileLoaderMap[t];r.load(e,(e=>{switch(t){case"glb":this.model=e.scene,this.skeletonHelper=new A._YX(e.scene),this.modelAnimation=e.animations||[];break;case"fbx":this.model=e;break;case"gltf":this.model=e.scene,this.skeletonHelper=new A._YX(e.scene),this.modelAnimation=e.animations||[];break;case"obj":this.model=e,this.skeletonHelper=new A._YX(e),this.modelAnimation=e.animations||[];break;default:break}if(this.model.decomposeName=n,this.getModelMeaterialList(o),this.setModelPositionSize(),i&&this.model.scale.set(i,i,i),this.model.position.set(0,-.5,0),l){const{x:e,y:t,z:i}=l;this.model.position.set(e,t,i)}this.skeletonHelper.visible=!1,this.scene.add(this.skeletonHelper),this.glowMaterialList=this.modelMaterialList.map((e=>e.name)),this.scene.add(this.model),a(!0)}),this.modelProgress.bind(this),(e=>{H.z8.error("文件错误"),console.log(e),s()}))}))}modelProgress(e){if(e.lengthComputable){const t=e.loaded/e.total*100;this.modelProgressCallback(t)}}onProgress(e){"function"==typeof e&&(this.modelProgressCallback=e)}createHelper(){this.gridHelper=new A.VLJ(4,10,"rgb(193,193,193)","rgb(193,193,193)"),this.gridHelper.position.set(0,-.59,-.1),this.gridHelper.visible=!1,this.scene.add(this.gridHelper),this.axesHelper=new A.y8_(2),this.axesHelper.visible=!1,this.scene.add(this.axesHelper),this.renderer.shadowMap.enabled=!0}createLight(){this.ambientLight=new A.Mig("#fff",.8),this.scene.add(this.ambientLight),this.directionalLight=new A.Ox3("#1E90FF",1),this.directionalLight.position.set(-1.44,2.2,1),this.directionalLight.castShadow=!0,this.directionalLight.visible=!1,this.scene.add(this.directionalLight),this.directionalLightHelper=new A.cBI(this.directionalLight,.5),this.directionalLightHelper.visible=!1,this.scene.add(this.directionalLightHelper),this.pointLight=new A.cek(16711680,1,100),this.pointLight.visible=!1,this.scene.add(this.pointLight),this.pointLightHelper=new A.xG9(this.pointLight,.5),this.pointLightHelper.visible=!1,this.scene.add(this.pointLightHelper),this.spotLight=new A.PMe("#323636",440),this.spotLight.visible=!1,this.spotLight.map=(new A.dpR).load(i(8208)),this.spotLight.decay=2,this.spotLight.shadow.mapSize.width=1920,this.spotLight.shadow.mapSize.height=1080,this.spotLight.shadow.camera.near=1,this.spotLight.shadow.camera.far=10,this.scene.add(this.spotLight),this.spotLightHelper=new A.FvO(this.spotLight),this.spotLightHelper.visible=!1,this.scene.add(this.spotLightHelper);const e=new A._12(4,4);var t=new A.Wid({color:"#939393"});this.planeGeometry=new A.Kj0(e,t),this.planeGeometry.name="planeGeometry",this.planeGeometry.rotation.x=-Math.PI/2,this.planeGeometry.position.set(0,-.5,0),this.planeGeometry.receiveShadow=!0,this.planeGeometry.visible=!1,this.scene.add(this.planeGeometry)}createEffectComposer(){const{clientHeight:e,clientWidth:t}=this.container;this.effectComposer=new Eo.x(this.renderer);const i=new Io.C(this.scene,this.camera);this.effectComposer.addPass(i),this.outlinePass=new zo.f(new A.FM8(t,e),this.scene,this.camera),this.outlinePass.visibleEdgeColor=new A.Ilk("#FF8C00"),this.outlinePass.hiddenEdgeColor=new A.Ilk("#8a90f3"),this.outlinePass.edgeGlow=2,this.outlinePass.edgeThickness=1,this.outlinePass.edgeStrength=4,this.outlinePass.pulsePeriod=100,this.effectComposer.addPass(this.outlinePass);let o=new To.T(jo.C);const l=this.renderer.getPixelRatio();o.uniforms.resolution.value.set(1/(t*l),1/(e*l)),o.renderToScreen=!0,o.needsSwap=!0,this.effectComposer.addPass(o),this.unrealBloomPass=new Ro.m(new A.FM8(t,e),0,0,0),this.unrealBloomPass.threshold=0,this.unrealBloomPass.strength=0,this.unrealBloomPass.radius=0,this.unrealBloomPass.renderToScreen=!1,this.glowComposer=new Eo.x(this.renderer),this.glowComposer.renderToScreen=!1,this.glowComposer.addPass(new Io.C(this.scene,this.camera)),this.glowComposer.addPass(this.unrealBloomPass);let n=new To.T(new A.jyz({uniforms:{baseTexture:{value:null},bloomTexture:{value:this.glowComposer.renderTarget2.texture},tDiffuse:{value:null}},vertexShader:r.C7,fragmentShader:r.zH,defines:{}}),"baseTexture");n.renderToScreen=!0,n.needsSwap=!0,this.effectComposer.addPass(n)}onSwitchModel(e){return new Promise((async(t,i)=>{try{this.scene.traverse((e=>{"Mesh"===e.type&&(e.geometry.dispose(),e.material.dispose())})),cancelAnimationFrame(this.animationFrame),cancelAnimationFrame(this.rotationAnimationFrame),this.scene.remove(this.model),this.modelTextureMap=[],this.onResettingLight();const i=document.getElementById("mesh-txt");document.body.style.cursor="",i.style.display="none",this.dragControls&&this.dragControls.dispose(),this.renderer.toneMappingExposure=3,Object.assign(this.unrealBloomPass,{threshold:0,strength:0,radius:0}),this.skeletonHelper.visible=!1;const o={gridHelper:!1,x:0,y:-.59,z:-.1,positionX:0,positionY:-.5,positionZ:0,divisions:10,size:4,color:"rgb(193,193,193)",axesHelper:!1,axesSize:1.8};this.onSetModelGridHelper(o),this.onSetModelGridHelperSize(o),this.onSetModelAxesHelper(o);const l=await this.setModel(e);t({load:l,filePath:e.filePath})}catch{i()}}))}onWindowResizes(){if(!this.container)return!1;const{clientHeight:e,clientWidth:t}=this.container;this.camera.aspect=t/e,this.camera.updateProjectionMatrix(),this.renderer.setSize(t,e),this.effectComposer.setSize(t,e),this.glowComposer.setSize(t,e)}onClearModelData(){cancelAnimationFrame(this.rotationAnimationFrame),cancelAnimationFrame(this.renderAnimation),cancelAnimationFrame(this.animationFrame),this.container.removeEventListener("click",this.onMouseClickListener),this.container.removeEventListener("mousedown",this.onMouseDownListener),this.container.removeEventListener("mousemove",this.onMouseMoveListener),window.removeEventListener("resize",this.onWindowResizesListener),this.scene.traverse((e=>{"Mesh"===e.type&&(e.geometry.dispose(),e.material.dispose())})),this.scene.clear(),this.renderer.clear(),this.container=null,this.camera=null,this.scene=null,this.renderer=null,this.controls=null,this.model=null,this.fileLoaderMap=null,this.modelAnimation=null,this.animationMixer=null,this.animationColock=null,this.animationFrame=null,this.rotationAnimationFrame=null,this.animateClipAction=null,this.loopMap=null,this.skeletonHelper=null,this.gridHelper=null,this.axesHelper=null,this.ambientLight=null,this.directionalLight=null,this.directionalLightHelper=null,this.pointLight=null,this.pointLightHelper=null,this.spotLight=null,this.spotLightHelper=null,this.planeGeometry=null,this.modelMaterialList=null,this.effectComposer=null,this.outlinePass=null,this.renderAnimation=null,this.raycaster,this.mouse=null,this.modelTextureMap=null,this.glowComposer=null,this.unrealBloomPass=null,this.glowMaterialList=null,this.materials=null,this.dragControls=null,this.hoverMeshTag=null}onSetSceneColor(e){this.scene.background=new A.Ilk(e)}onSetSceneImage(e){this.scene.background=(new A.dpR).load(e)}onSetSceneViewImage(e){const t=(new A.dpR).load(e);t.mapping=A.dSO,this.scene.background=t,this.scene.environment=t}getModelMeaterialList(e){const t=!!e;this.modelMaterialList=[],this.modelTextureMap=[];let i=0;this.model.traverse((o=>{const{uuid:l}=o;if(o.isMesh){if(o.castShadow=!0,o.frustumCulled=!1,i++,o.material){const e=Array.isArray(o.material)?o.material:[o.material],{name:t,color:n,map:a}=o.material;o.material=new A.Wid({map:a,transparent:!0,color:n,name:t}),this.modelMaterialList.push(o);const{url:s,mapId:r}=this.getModelMaps(e,l),d={meshName:o.name,material:o.material,url:s,mapId:r+"_"+i};o.mapId=r+"_"+i,this.modelTextureMap.push(d)}if(o.material&&t){const t=(new A.dpR).load(e),{color:n,name:a}=o.material;o.material=new A.Wid({map:t,name:a,transparent:!0,color:n}),o.mapId=l+"_"+i,this.modelTextureMap=[{meshName:o.name,material:o.material,url:e,mapId:l+"_"+i}]}}}))}setModelPositionSize(){this.model.updateMatrixWorld();const e=(new A.ZzF).setFromObject(this.model),t=e.getSize(new A.Pa4),i=e.getCenter(new A.Pa4),o=Math.max(t.x,t.y,t.z),l=2.5,n=l/(o>1?o:.5);this.model.scale.set(n,n,n),this.controls.maxDistance=10*t.length(),this.camera.position.set(0,2,6),this.camera.lookAt(i),this.camera.updateProjectionMatrix()}getModelMaps(e,t){let i={};return e.forEach((e=>{if(e.map&&e.map.image){const t=document.createElement("canvas"),{width:o,height:l}=e.map.image;t.width=o,t.height=l;const n=t.getContext("2d");n.drawImage(e.map.image,0,0),i={url:t.toDataURL("image/png"),mapId:e.uuid}}})),i}onSetModelMaterial(e){const{color:t,wireframe:i,depthWrite:o,opacity:l}=e,n=Jo.Z.state.selectMesh.uuid,a=this.scene.getObjectByProperty("uuid",n);a&&a.material&&(a.material.color.set(new A.Ilk(t)),a.material.wireframe=i,a.material.depthWrite=o,a.material.transparent=!0,a.material.opacity=l)}onSetModelMap({material:e,mapId:t,meshName:i}){const o=Jo.Z.state.selectMesh.uuid,l=this.scene.getObjectByProperty("uuid",o),{name:n,color:a}=l.material;l.material=new A.Wid({map:e.map,transparent:!0,color:a,name:n}),l.mapId=t,l.meshFrom=i}onSetSystemModelMap({id:e,url:t}){const i=Jo.Z.state.selectMesh.uuid,o=this.scene.getObjectByProperty("uuid",i),{name:l,color:n}=o.material,a=(new A.dpR).load(t);o.material=new A.Wid({map:a,transparent:!0,color:n,name:l}),o.mapId=e,o.meshFrom=e}onChangeModelMeaterial(e){const t=this.model.getObjectByName(e);return this.outlinePass.selectedObjects=[t],Jo.Z.commit("SELECT_MESH",t),t}onMouseDownModel(){if(this.modelAnimation.length)return!1;const{clientHeight:e,clientWidth:t,offsetLeft:i,offsetTop:o}=this.container;this.mouse.x=(event.clientX-i)/t*2-1,this.mouse.y=-(event.clientY-o)/e*2+1,this.raycaster.setFromCamera(this.mouse,this.camera);const l=this.raycaster.intersectObjects(this.scene.children).filter((e=>e.object.isMesh));if(l.length>0){const e=l[0].object;this.outlinePass.selectedObjects=[e],Jo.Z.commit("SELECT_MESH",e)}else this.outlinePass.selectedObjects=[],Jo.Z.commit("SELECT_MESH",{})}onMouseClickModel(e){if(!this.modelAnimation.length)return!1;const{clientHeight:t,clientWidth:i,offsetLeft:o,offsetTop:l}=this.container;this.mouse.x=(e.clientX-o)/i*2-1,this.mouse.y=-(e.clientY-l)/t*2+1,this.raycaster.setFromCamera(this.mouse,this.camera);const n=this.raycaster.intersectObjects(this.scene.children).filter((e=>e.object.isMesh));if(n.length>0){const e=n[0].object;this.outlinePass.selectedObjects=[e],Jo.Z.commit("SELECT_MESH",e)}else this.outlinePass.selectedObjects=[],Jo.Z.commit("SELECT_MESH",{})}onGetEditMeshList(){const e=[];return this.model.traverse((t=>{if(t.isMesh&&t.material){const{color:i,opacity:o,depthWrite:l,wireframe:n}=t.material,a={meshName:t.name,meshFrom:t.meshFrom,color:i.getStyle(),opacity:o,depthWrite:l,wireframe:n};e.push(a)}})),e}onSetUnrealBloomPass(e){const{glow:t,threshold:i,strength:o,radius:l,toneMappingExposure:n}=e;t?(this.unrealBloomPass.threshold=i,this.unrealBloomPass.strength=o,this.unrealBloomPass.radius=l,this.renderer.toneMappingExposure=n):(this.unrealBloomPass.threshold=0,this.unrealBloomPass.strength=0,this.unrealBloomPass.radius=0,this.renderer.toneMappingExposure=n)}setModelMeshDecompose({decompose:e}){if(this.glowMaterialList.length<=1)return!1;const t=(e,t)=>{const i=new gl.Tween(e.position);i.to(t,500),i.onUpdate((function(t){e.position.set(t.x||0,t.y||0,t.z||0)})),i.start()},i=this.glowMaterialList.length,o=2*Math.PI/i;this.glowMaterialList.forEach(((i,l)=>{const n=this.model.getObjectByName(i),{decomposeName:a}=this.model;if("Mesh"==n.type)if(r.lY[a]&&r.lY[a][i]){const o={x:0,y:0,z:0},{x:l,y:s,z:d}=r.lY[a][i];"straight"==l?o.x+=e:"burden"==l&&(o.x-=e),"straight"==s?o.y+=e:"burden"==s&&(o.y-=e),"straight"==d?o.z+=e:"burden"==d&&(o.z-=e),t(n,o)}else{const i=l*o,a=e*Math.cos(i),s=e*Math.sin(i),r={x:a,y:s,z:0};t(n,r)}}))}setModelMeshDrag({modelDrag:e}){e?(this.dragControls=new Ko(this.modelMaterialList,this.camera,this.renderer.domElement),this.dragControls.addEventListener("dragstart",(()=>{this.controls.enabled=!1})),this.dragControls.addEventListener("dragend",(()=>{this.controls.enabled=!0}))):this.dragControls&&this.dragControls.dispose()}setModelMeshTag({hoverMeshTag:e}){this.hoverMeshTag=e}onMouseMoveModel(e){if(this.modelAnimation.length)return!1;const{clientHeight:t,clientWidth:i,offsetLeft:o,offsetTop:l}=this.container;this.mouse.x=(e.clientX-o)/i*2-1,this.mouse.y=-(e.clientY-l)/t*2+1,this.raycaster.setFromCamera(this.mouse,this.camera);const n=this.raycaster.intersectObjects(this.scene.children).filter((e=>e.object.isMesh&&this.glowMaterialList.includes(e.object.name)));if(n.length>0){const t=document.getElementById("mesh-txt");if(this.modelAnimation.length)return document.body.style.cursor="pointer",!1;if(this.hoverMeshTag){const i=n[0].object;t.innerHTML=i.name,t.style.display="block",t.style.top=e.clientY-l+"px",t.style.left=e.clientX-o+20+"px"}document.body.style.cursor="pointer"}else{const e=document.getElementById("mesh-txt");document.body.style.cursor="",e.style.display="none"}}getMeshDragPosition(){const e=[];return this.modelMaterialList.forEach((t=>{const i=this.model.getObjectByProperty("name",t.name),o={name:t.name,...i.position};e.push(o)})),e}onSetModelAmbientLight({ambientLight:e,ambientLightColor:t,ambientLightIntensity:i}){this.ambientLight.visible=e,this.ambientLight.intensity=i,this.ambientLight.color.set(t)}onSetModelDirectionalLight(e){const{directionaShadow:t,directionalHorizontal:i,directionalVertical:o,directionalSistance:l,directionalLight:n,directionalLightColor:a,directionalLightIntensity:s,directionalLightHelper:r}=e;this.directionalLight.visible=n,this.directionalLightHelper.visible=r&&n,this.directionalLight.intensity=s,this.directionalLight.castShadow=t,this.directionalLight.color.set(a);const{x:d,y:p,z:u}=(0,uo.E3)(i,o,l);this.directionalLight.position.set(d,p,u),this.directionalLightHelper.update()}onSetModelPointLight(e){const{pointHorizontal:t,pointVertical:i,pointSistance:o,pointLight:l,pointLightColor:n,pointLightIntensity:a,pointLightHelper:s}=e;this.pointLight.visible=l,this.pointLightHelper.visible=l&&s,this.pointLight.intensity=a,this.pointLight.color.set(n);const{x:r,y:d,z:p}=(0,uo.E3)(t,i,o);this.pointLight.position.set(r,d,p),this.pointLightHelper.update()}onSetModelSpotLight(e){const{spotDistance:t,spotCastShadow:i,spotLightHelper:o,spotFocus:l,spotPenumbra:n,spotAngle:a,spotLight:s,spotLightColor:r,spotLightIntensity:d,spotHorizontal:p,spotVertical:u,spotSistance:m}=e;this.spotLight.visible=s,this.spotLightHelper.visible=s&&o,this.spotLight.intensity=d,this.spotLight.angle=a,this.spotLight.penumbra=n,this.spotLight.shadow.focus=l,this.spotLight.castShadow=i,this.spotLight.distance=t,this.spotLight.color.set(r);const{x:c,y:h,z:g}=(0,uo.E3)(p,u,m);this.spotLight.position.set(c,h,g),this.spotLightHelper.update()}onSetModelPlaneGeometry({planeGeometry:e,planeColor:t,planeWidth:i,planeHeight:o}){this.planeGeometry.visible=e,this.planeGeometry.geometry=new A._12(i,o),this.planeGeometry.material.color.set(t),this.planeGeometry.geometry.verticesNeedUpdate=!0}onResettingLight(){const e={planeGeometry:!1,planeColor:"#939393",planeWidth:7,planeHeight:7,ambientLight:!0,ambientLightColor:"#fff",ambientLightIntensity:.8,directionalLight:!1,directionalLightHelper:!0,directionalLightColor:"#1E90FF",directionalLightIntensity:1,directionalHorizontal:-1.26,directionalVertical:-3.85,directionalSistance:2.98,directionaShadow:!0,pointLight:!1,pointLightHelper:!0,pointLightColor:"#1E90FF",pointLightIntensity:1,pointHorizontal:-4.21,pointVertical:-4.1,pointSistance:2.53,spotLight:!1,spotLightColor:"#323636",spotLightIntensity:400,spotHorizontal:-3.49,spotVertical:-4.37,spotSistance:4.09,spotAngle:.5,spotPenumbra:1,spotFocus:1,spotCastShadow:!0,spotLightHelper:!0,spotDistance:20};this.onSetModelAmbientLight(e),this.onSetModelDirectionalLight(e),this.onSetModelPointLight(e),this.onSetModelSpotLight(e),this.onSetModelPlaneGeometry(e)}onStartModelAnimaion(e){this.onSetModelAnimaion(e),cancelAnimationFrame(this.animationFrame),this.animationFrameFun()}onSetModelAnimaion({animationName:e,loop:t,timeScale:i,weight:o}){this.animationMixer=new A.Xcj(this.model);const l=A.m7l.findByName(this.modelAnimation,e);l&&(this.animateClipAction=this.animationMixer.clipAction(l),this.animateClipAction.setEffectiveTimeScale(i),this.animateClipAction.setEffectiveWeight(o),this.animateClipAction.setLoop(this.loopMap[t]),this.animateClipAction.play())}animationFrameFun(){this.animationFrame=requestAnimationFrame((()=>this.animationFrameFun())),this.animationMixer&&this.animationMixer.update(this.animationColock.getDelta())}onClearAnimation(){this.animateClipAction&&(this.animationMixer.stopAllAction(),this.animationMixer.update(0))}onSetRotation(e){const{rotationVisible:t,rotationType:i,rotationSpeed:o}=e;t?(cancelAnimationFrame(this.rotationAnimationFrame),this.rotationAnimationFun(i,o)):(cancelAnimationFrame(this.rotationAnimationFrame),this.model.rotation.set(0,0,0))}onSetRotationType(e){const{rotationType:t,rotationSpeed:i}=e;this.model.rotation.set(0,0,0),cancelAnimationFrame(this.rotationAnimationFrame),this.rotationAnimationFun(t,i)}rotationAnimationFun(e,t){this.rotationAnimationFrame=requestAnimationFrame((()=>this.rotationAnimationFun(e,t))),this.model.rotation[e]+=t/50}onSetModelHelper(e){this.skeletonHelper.visible=e}onSetModelRotateOnAxis(e,t){const i=Math.PI/2,{x:o,y:l,z:n}=this.model.rotation,a={x:o,y:l,z:n};a[e]+=t?i:-i;const s=new gl.Tween({x:o,y:l,z:n});s.to(a,500),s.onUpdate((t=>{this.model.rotation[e]=t[e]})),s.start()}onResultModelRotateOnAxis(){this.model.rotation.x=0,this.model.rotation.y=0,this.model.rotation.z=0}onSetModelPosition({positionX:e,positionY:t,positionZ:i}){const o=new gl.Tween(this.model.position),l={x:e,y:t,z:i};o.to(l,500),o.onUpdate((e=>{this.model.position.set(e.x||0,e.y||0,e.z||0)})),o.start()}onResultModelPosition({positionX:e,positionY:t,positionZ:i}){this.model.position.set(e,t,i)}onResetModelCamera(){this.camera.position.set(0,2,6),this.camera.lookAt(0,0,0)}onGetModelCamera(){return this.camera.position}onSetModelGridHelper({x:e,y:t,z:i,gridHelper:o,color:l}){this.gridHelper.visible=o,this.gridHelper.material.color.set(l);const n=new gl.Tween(this.gridHelper.position),a={x:e,y:t,z:i};n.to(a,500),n.onUpdate((e=>{this.gridHelper.position.set(e.x||0,e.y||0,e.z||0)})),n.start()}onSetModelGridHelperSize({x:e,y:t,z:i,size:o,divisions:l,color:n,gridHelper:a}){this.scene.remove(this.gridHelper),this.gridHelper.geometry.dispose(),this.gridHelper.material.dispose(),this.gridHelper=new A.VLJ(o,l,n,n),this.gridHelper.position.set(e,t,i),this.gridHelper.material.linewidth=.1,this.gridHelper.material.color.set(n),this.gridHelper.visible=a,this.scene.add(this.gridHelper)}onSetModelAxesHelper({axesHelper:e,axesSize:t}){this.scene.remove(this.axesHelper),this.axesHelper.geometry.dispose(),this.axesHelper.material.dispose(),this.axesHelper=new A.y8_(t),this.axesHelper.position.set(0,-.5,0),this.axesHelper.visible=e,this.scene.add(this.axesHelper)}}var vl=_l,fl=i(1932);const wl=e=>((0,o.dD)("data-v-7256665d"),e=e(),(0,o.Cn)(),e),yl={key:0,id:"loading-mark"},Cl={class:"loading-box"},bl={class:"loading"},Wl=["src"],Ll=wl((()=>(0,o._)("div",{class:"loading-txt"},"模型文件首次加载时间较长请耐心等待.....",-1)));var Ml={__name:"PageLoading",props:{percentage:{type:Number,default:100},loading:{type:Boolean,default:!1}},setup(e){const{percentage:t,loading:n}=e;return(t,n)=>e.loading?((0,o.wg)(),(0,o.iD)("div",yl,[(0,o._)("div",Cl,[(0,o._)("div",bl,[(0,o._)("img",{src:i(7622)},null,8,Wl),(0,o._)("div",null,[(0,o.Wm)((0,l.SU)(fl.Xh),{id:"loading-progress",percentage:e.percentage,"text-color":"#ff7c81","text-inside":!0,"stroke-width":18,color:"#ff7c81"},null,8,["percentage"])]),Ll])])])):(0,o.kq)("",!0)}};const kl=(0,x.Z)(Ml,[["__scopeId","data-v-7256665d"]]);var xl=kl;const Sl=e=>((0,o.dD)("data-v-2f07199f"),e=e(),(0,o.Cn)(),e),Vl={class:"model-page"},Al={class:"model-header"},Hl=Sl((()=>(0,o._)("div",{class:"header-lf"},[(0,o._)("span",null," 基于Three.js+Vue3+Element-Plus开发的3d模型可视化编辑系统 "),(0,o._)("span",null,"作者:answer")],-1))),Ul={class:"header-lr"},Pl={class:"model-container"},Fl={id:"model",ref:"model"},El={class:"camera-icon"},Il=Sl((()=>(0,o._)("div",{id:"mesh-txt"},null,-1))),zl={class:"edit-panel",style:{minWidth:"380px"}};var Tl={__name:"index",setup(e){const t=(0,s.oR)(),i=(0,Ho.tv)(),{$bus:n,$local:a}=(0,o.FN)().proxy,d=(0,l.qj)({modelApi:(0,o.Fl)((()=>t.state.modelApi))}),p=(0,l.iH)(!1),u=(0,l.iH)(100),m=(0,l.iH)(null),c=(0,l.iH)(null),h=()=>{d.modelApi.onResetModelCamera()},g=()=>{const e=m.value.getPanelConfig();if(e.camera=d.modelApi.onGetModelCamera(),e.fileInfo=c.value.activeModel,e.fileInfo.filePath){a.set(r.AQ,e);const{href:t}=i.resolve({path:"/preview"});window.open(t,"_blank")}else H.z8.warning("外部模型不支持“效果预览”")},_=()=>{Uo.T.confirm(" 确认要更新当前模型数据至“模板库”?","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"success"}).then((()=>{const e=m.value.getPanelConfig();if(e.camera=d.modelApi.onGetModelCamera(),e.fileInfo=c.value.activeModel,e.fileInfo.filePath){const t=a.get(r.Aw),{id:i}=e.fileInfo;Object.assign(t.filter((e=>i===e.fileInfo.id))[0],e),a.set(r.Aw,t),H.z8.success("更新成功")}else H.z8.warning("外部模型不支持“数据保存”")})).catch((()=>{}))};return(0,o.bv)((async()=>{p.value=!0;const e=new vl("#model");t.commit("SET_MODEL_API",e),n.on("page-loading",(e=>{p.value=e}));const i=await e.init();d.modelApi.onProgress((e=>{u.value=Number(e.toFixed(2))})),i&&(p.value=!1)})),(0,o.Jd)((()=>{d.modelApi.onClearModelData()})),(e,t)=>{const i=(0,o.up)("el-button"),n=(0,o.up)("Aim"),a=(0,o.up)("el-icon"),s=(0,o.up)("el-tooltip");return(0,o.wg)(),(0,o.iD)("div",Vl,[(0,o._)("header",Al,[Hl,(0,o._)("div",Ul,[(0,o.Wm)(i,{type:"primary",icon:"Film",onClick:t[0]||(t[0]=t=>e.$router.push({path:"/modelBase"}))},{default:(0,o.w5)((()=>[(0,o.Uk)(" 模型库 ")])),_:1}),(0,o.Wm)(i,{type:"primary",icon:"Document",onClick:_},{default:(0,o.w5)((()=>[(0,o.Uk)("保存数据")])),_:1}),(0,o.Wm)(i,{type:"primary",icon:"View",onClick:g},{default:(0,o.w5)((()=>[(0,o.Uk)("效果预览")])),_:1})])]),(0,o._)("div",Pl,[(0,o.Wm)((0,l.SU)(Ao),{ref_key:"choosePanel",ref:c},null,512),(0,o._)("div",Fl,[(0,o._)("div",El,[(0,o.Wm)(s,{effect:"dark",content:"居中",placement:"top"},{default:(0,o.w5)((()=>[(0,o.Wm)(a,{size:18,color:"#fff",onClick:h},{default:(0,o.w5)((()=>[(0,o.Wm)(n)])),_:1})])),_:1})]),Il],512),(0,o._)("div",zl,[d.modelApi.model?((0,o.wg)(),(0,o.j4)((0,l.SU)(po),{key:0,ref_key:"editPanel",ref:m},null,512)):(0,o.kq)("",!0)])]),(0,o.Wm)((0,l.SU)(xl),{loading:p.value,"onUpdate:loading":t[1]||(t[1]=e=>p.value=e),percentage:u.value,"onUpdate:percentage":t[2]||(t[2]=e=>u.value=e)},null,8,["loading","percentage"])])}}};const jl=(0,x.Z)(Tl,[["__scopeId","data-v-2f07199f"]]);var Rl=jl}}]);
"use strict";(self["webpackChunkprodect"]=self["webpackChunkprodect"]||[]).push([[252],{252:function(e,t,i){i.r(t),i.d(t,{default:function(){return Bn}});i(7658);var o=i(3396),n=i(4870),l=i(7139),a=i(9242),s=i(65),r=i(872),d=i(1794);const u=e=>((0,o.dD)("data-v-03dc8261"),e=e(),(0,o.Cn)(),e),p={class:"edit-box"},c={class:"header"},m=u((()=>(0,o._)("span",null,"背景",-1))),h={class:"icon-name"},g=u((()=>(0,o._)("span",null," 图片",-1))),_={class:"action-txt"},f={class:"check"},v={class:"icon-name"},w=u((()=>(0,o._)("span",null," 颜色",-1))),y={class:"action"},b={class:"check"},C={class:"icon-name"},L=u((()=>(0,o._)("span",null," 全景图",-1))),k={class:"action-txt"},W={class:"check"};var M={__name:"EditBackground",setup(e,{expose:t}){const u=(0,s.oR)(),M=(0,n.qj)({visible:!0,type:3,image:i(3405),viewImg:i(72),color:"#000"}),x=(0,n.iH)(3),S=(0,n.iH)(3),A=(0,n.qj)({modelApi:(0,o.Fl)((()=>u.state.modelApi))}),V=(0,o.Fl)((()=>{const{visible:e}=M;return e?"":"disabled"})),U=r.UL,P=e=>{switch(M.type=e,e){case 1:A.modelApi.onSetSceneColor(M.color);break;case 2:A.modelApi.onSetSceneImage(M.image);break;case 3:A.modelApi.onSetSceneViewImage(M.viewImg);break;default:break}},H=({id:e,url:t})=>{M.image=t,x.value=e,A.modelApi.onSetSceneImage(t)},F=({id:e,url:t})=>{M.viewImg=t,S.value=e,A.modelApi.onSetSceneViewImage(t)},I=e=>{M.color=e,A.modelApi.onSetSceneColor(M.color)},E=()=>{A.modelApi.onSetSceneColor(M.color)},T=()=>{const{type:e,visible:t,image:i,viewImg:o}=M;if(!t)return A.modelApi.onSetSceneColor("#000");switch(e){case 1:A.modelApi.onSetSceneColor(M.color);break;case 2:A.modelApi.onSetSceneImage(i);break;case 3:A.modelApi.onSetSceneViewImage(o);break;default:break}};return t({config:M}),(e,t)=>{const i=(0,o.up)("el-switch"),s=(0,o.up)("Picture"),r=(0,o.up)("el-icon"),u=(0,o.up)("el-space"),A=(0,o.up)("el-button"),R=(0,o.up)("Check"),D=(0,o.up)("el-image"),z=(0,o.up)("el-col"),j=(0,o.up)("el-row"),O=(0,o.up)("el-scrollbar"),G=(0,o.up)("DataAnalysis"),B=(0,o.up)("el-color-picker"),N=(0,o.up)("CameraFilled");return(0,o.wg)(),(0,o.iD)("div",p,[(0,o._)("div",c,[m,(0,o.Wm)(i,{modelValue:M.visible,"onUpdate:modelValue":t[0]||(t[0]=e=>M.visible=e),onChange:T},null,8,["modelValue"])]),(0,o._)("div",{class:(0,l.C_)(["options",V.value])},[(0,o._)("div",{class:"option",onClick:t[1]||(t[1]=e=>P(2))},[(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o._)("div",h,[(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Wm)(s)])),_:1}),g])),_:1})]),(0,o._)("div",_,[(0,o.Wm)(A,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("选择图片")])),_:1})]),(0,o.wy)((0,o._)("div",f,[(0,o.Wm)(r,{size:"20px",color:"#2a3ff6"},{default:(0,o.w5)((()=>[(0,o.Wm)(R)])),_:1})],512),[[a.F8,2==M.type]])])),_:1})]),(0,o.wy)((0,o.Wm)(O,{"max-height":"250px"},{default:(0,o.w5)((()=>[(0,o.Wm)(j,null,{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,n.SU)(d.L8),(e=>((0,o.wg)(),(0,o.j4)(z,{style:{textAlign:"center"},span:6,key:e.id},{default:(0,o.w5)((()=>[(0,o.Wm)(D,{onClick:t=>H(e),class:(0,l.C_)(["el-img",x.value==e.id?"active":""]),src:e.url,fit:"cover"},null,8,["onClick","class","src"])])),_:2},1024)))),128))])),_:1})])),_:1},512),[[a.F8,2==M.type]])],2),(0,o._)("div",{class:(0,l.C_)(["options",V.value])},[(0,o._)("div",{class:"option",onClick:t[3]||(t[3]=e=>P(1))},[(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o._)("div",v,[(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Wm)(G)])),_:1}),w])),_:1})]),(0,o._)("div",y,[(0,o.Wm)(B,{predefine:(0,n.SU)(U),onChange:E,onActiveChange:I,modelValue:M.color,"onUpdate:modelValue":t[2]||(t[2]=e=>M.color=e)},null,8,["predefine","modelValue"])]),(0,o.wy)((0,o._)("div",b,[(0,o.Wm)(r,{size:"20px",color:"#2a3ff6"},{default:(0,o.w5)((()=>[(0,o.Wm)(R)])),_:1})],512),[[a.F8,1==M.type]])])),_:1})])],2),(0,o._)("div",{class:(0,l.C_)(["options",V.value])},[(0,o._)("div",{class:"option",onClick:t[4]||(t[4]=e=>P(3))},[(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o._)("div",C,[(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Wm)(N)])),_:1}),L])),_:1})]),(0,o._)("div",k,[(0,o.Wm)(A,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("选择图片")])),_:1})]),(0,o.wy)((0,o._)("div",W,[(0,o.Wm)(r,{size:"20px",color:"#2a3ff6"},{default:(0,o.w5)((()=>[(0,o.Wm)(R)])),_:1})],512),[[a.F8,3==M.type]])])),_:1})]),(0,o.wy)((0,o.Wm)(O,{"max-height":"350px"},{default:(0,o.w5)((()=>[(0,o.Wm)(j,null,{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,n.SU)(d.Wf),(e=>((0,o.wg)(),(0,o.j4)(z,{span:6,style:{textAlign:"center"},key:e.id},{default:(0,o.w5)((()=>[(0,o.Wm)(D,{onClick:t=>F(e),class:(0,l.C_)(["el-view",S.value==e.id?"active":""]),src:e.url,fit:"cover"},null,8,["onClick","class","src"])])),_:2},1024)))),128))])),_:1})])),_:1},512),[[a.F8,3==M.type]])],2)])}}},x=i(89);const S=(0,x.Z)(M,[["__scopeId","data-v-03dc8261"]]);var A=S,V=i(8603),U=i(7178);const P=e=>((0,o.dD)("data-v-0fbd1b7c"),e=e(),(0,o.Cn)(),e),H={class:"edit-box"},F=P((()=>(0,o._)("div",{class:"header"},[(0,o._)("span",null,"材质")],-1))),I={class:"options"},E=["onClick"],T={class:"icon-name"},R={class:"check"},D=P((()=>(0,o._)("div",{class:"header"},"材质属性",-1))),z={class:"option space-between"},j={class:"option"},O={class:"grid-txt"},G={class:"grid-silder"},B=P((()=>(0,o._)("div",{class:"header"},"模型自带贴图",-1))),N=["onClick"],Y={key:0,class:"select"},q=P((()=>(0,o._)("div",{class:"header"},"系统贴图",-1))),Z=["onClick"],X={key:0,class:"select"};var K={__name:"EditMaterial",setup(e,{expose:t}){const i=(0,s.oR)(),{$bus:u}=(0,o.FN)().proxy,p=(0,n.qj)({meaterialName:null,color:null,wireframe:!1,depthWrite:!0,opacity:1}),c=(0,n.iH)(null),m=(0,o.Fl)((()=>{const e=h.modelMaterialList.find((e=>e.uuid==h.selectMeshUuid))||{};return e.uuid?"":"disabled"})),h=(0,n.qj)({modelMaterialList:(0,o.Fl)((()=>i.state.modelApi.modelMaterialList)),modelApi:(0,o.Fl)((()=>i.state.modelApi)),selectMeshUuid:(0,o.Fl)((()=>i.getters.selectMeshUuid)),modelTextureMap:(0,o.Fl)((()=>i.state.modelApi.modelTextureMap))});(0,o.bv)((()=>{u.on("model-update",(()=>{Object.assign(p,{color:null,wireframe:!1,depthWrite:!0,opacity:1})}))})),(0,o.YP)((()=>i.getters.selectMeshUuid),(e=>{const t=h.modelMaterialList.find((t=>t.uuid==e))||{};if(c.value=t.mapId,t.mapId){const{color:e,wireframe:i,depthWrite:o,opacity:n}=t.material;Object.assign(p,{color:new V.Ilk(e).getStyle(),wireframe:i,depthWrite:o,opacity:n})}}));const g=({name:e,id:t,material:i,mapId:o})=>{p.meaterialName=i.name;const n=h.modelApi.onChangeModelMeaterial(e),{color:l,wireframe:a,depthWrite:s,opacity:r}=n.material;Object.assign(p,{color:new V.Ilk(l).getStyle(),wireframe:a,depthWrite:s,opacity:r})},_=e=>{p.color=e,h.modelApi.onSetModelMaterial(p)},f=()=>{h.modelApi.onSetModelMaterial(p)},v=e=>{c.value=e.mapId,h.modelApi.onSetModelMap(e),Object.assign(p,{color:null,wireframe:!1,depthWrite:!0,opacity:1}),U.z8.success("当前材质贴图修改成功")},w=e=>{c.value=e.id,h.modelApi.onSetSystemModelMap(e),Object.assign(p,{color:null,wireframe:!1,depthWrite:!0,opacity:1}),U.z8.success("当前材质贴图修改成功")},y=()=>({meshList:h.modelApi.onGetEditMeshList()});return t({getMeshConfig:y}),(e,t)=>{const i=(0,o.up)("Check"),s=(0,o.up)("el-icon"),u=(0,o.up)("el-space"),y=(0,o.up)("el-scrollbar"),b=(0,o.up)("WarnTriangleFilled"),C=(0,o.up)("el-tooltip"),L=(0,o.up)("el-button"),k=(0,o.up)("el-color-picker"),W=(0,o.up)("el-switch"),M=(0,o.up)("el-slider"),x=(0,o.up)("el-image"),S=(0,o.up)("Select"),A=(0,o.up)("el-col"),V=(0,o.up)("el-row");return(0,o.wg)(),(0,o.iD)("div",H,[F,(0,o._)("div",I,[(0,o.Wm)(y,{"max-height":"240px"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(h.modelMaterialList,(e=>((0,o.wg)(),(0,o.iD)("div",{class:(0,l.C_)(["option",h.selectMeshUuid==e.uuid?"option-active":""]),onClick:t=>g(e),key:e.uuid},[(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o._)("div",T,(0,l.zw)(e.name),1),(0,o.wy)((0,o._)("div",R,[(0,o.Wm)(s,{size:"20px",color:"#2a3ff6"},{default:(0,o.w5)((()=>[(0,o.Wm)(i)])),_:1})],512),[[a.F8,h.selectMeshUuid==e.uuid]])])),_:2},1024)],10,E)))),128))])),_:1})]),D,(0,o._)("div",{class:(0,l.C_)(["options",m.value])},[(0,o._)("div",z,[(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Wm)(C,{effect:"dark",content:"注意:部分模型因为原始材质特殊以及灯光等原因,修改材质颜色可能没有实际效果",placement:"top"},{default:(0,o.w5)((()=>[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Wm)(b,{size:20,color:"#ffb940"})])),_:1})])),_:1}),(0,o.Wm)(L,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("材质颜色")])),_:1}),(0,o.Wm)(k,{"color-format":"hex",predefine:(0,n.SU)(r.UL),onChange:f,onActiveChange:_,modelValue:p.color,"onUpdate:modelValue":t[0]||(t[0]=e=>p.color=e)},null,8,["predefine","modelValue"])])),_:1}),(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Wm)(L,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("深度写入")])),_:1}),(0,o.Wm)(W,{onChange:f,modelValue:p.depthWrite,"onUpdate:modelValue":t[1]||(t[1]=e=>p.depthWrite=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Wm)(C,{effect:"dark",content:"注意:部分模型因为原始材质不支持网格,修改网格可能导致材质显示异常,或者没有实际效果",placement:"top"},{default:(0,o.w5)((()=>[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Wm)(b,{size:20,color:"#ffb940"})])),_:1})])),_:1}),(0,o.Wm)(L,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("网格")])),_:1}),(0,o.Wm)(W,{onChange:f,modelValue:p.wireframe,"onUpdate:modelValue":t[2]||(t[2]=e=>p.wireframe=e)},null,8,["modelValue"])])),_:1})]),(0,o._)("div",j,[(0,o._)("div",O,[(0,o.Wm)(C,{effect:"dark",content:"注意:部分模型因为原始材质不支持透明度,修改透明度可能导致材质显示异常,或者没有实际效果",placement:"top"},{default:(0,o.w5)((()=>[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Wm)(b,{size:20,color:"#ffb940"})])),_:1})])),_:1}),(0,o.Wm)(L,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("透明度 ")])),_:1})]),(0,o._)("div",G,[(0,o.Wm)(M,{"show-input":"",onChange:f,modelValue:p.opacity,"onUpdate:modelValue":t[3]||(t[3]=e=>p.opacity=e),min:0,max:1,step:.01},null,8,["modelValue"])])])],2),B,(0,o._)("div",{class:(0,l.C_)(["options",m.value])},[(0,o.Wm)(y,{"max-height":"100px"},{default:(0,o.w5)((()=>[(0,o.Wm)(V,null,{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(h.modelTextureMap,(e=>((0,o.wg)(),(0,o.j4)(A,{span:6,style:{textAlign:"center"},key:e.mapId},{default:(0,o.w5)((()=>[(0,o._)("div",{onClick:t=>v(e),class:(0,l.C_)(["image-box",c.value==e.mapId?"active":""])},[(0,o.Wm)(x,{src:e.url,class:"el-map",fit:"cover"},null,8,["src"]),c.value==e.mapId?((0,o.wg)(),(0,o.iD)("div",Y,[(0,o.Wm)(s,{color:"#18c174",size:26},{default:(0,o.w5)((()=>[(0,o.Wm)(S)])),_:1})])):(0,o.kq)("",!0)],10,N)])),_:2},1024)))),128))])),_:1})])),_:1})],2),q,(0,o._)("div",{class:(0,l.C_)(["options",m.value])},[(0,o.Wm)(y,{"max-height":"240px"},{default:(0,o.w5)((()=>[(0,o.Wm)(V,null,{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,n.SU)(d.or),(e=>((0,o.wg)(),(0,o.j4)(A,{span:6,style:{textAlign:"center"},key:e.id},{default:(0,o.w5)((()=>[(0,o._)("div",{onClick:t=>w(e),class:(0,l.C_)(["image-box",c.value==e.id?"active":""])},[(0,o.Wm)(x,{src:e.url,class:"el-map",fit:"cover"},null,8,["src"]),c.value==e.id?((0,o.wg)(),(0,o.iD)("div",X,[(0,o.Wm)(s,{color:"#18c174",size:26},{default:(0,o.w5)((()=>[(0,o.Wm)(S)])),_:1})])):(0,o.kq)("",!0)],10,Z)])),_:2},1024)))),128))])),_:1})])),_:1})],2)])}}};const $=(0,x.Z)(K,[["__scopeId","data-v-0fbd1b7c"]]);var J=$;const Q={class:"edit-box"},ee={class:"header"},te=(0,o._)("span",null,"模型动画",-1),ie=["onClick"],oe={class:"icon-name"},ne={class:"check"},le=(0,o._)("div",{class:"header"},[(0,o._)("span",null,"动画配置")],-1),ae={class:"option"},se=(0,o._)("span",null," 循环方式 ",-1),re={class:"option"},de={class:"option"},ue=(0,o._)("span",null," 播放速度 ",-1),pe={class:"option"},ce={class:"option"},me=(0,o._)("span",null," 动作幅度 ",-1),he={class:"option"},ge={class:"header"},_e=(0,o._)("span",null,"轴动画",-1),fe={class:"options"},ve=(0,o._)("span",null," 轴方向 ",-1),we=(0,o._)("span",null," 播放速度 ",-1);var ye={__name:"EditAnimation",setup(e,{expose:t}){const i=(0,s.oR)(),{$bus:r}=(0,o.FN)().proxy,d=(0,n.qj)({visible:!1,animationName:null,loop:"LoopRepeat",timeScale:1,weight:1,rotationVisible:!1,rotationType:"y",rotationSpeed:1}),u=(0,o.Fl)((()=>d.visible?"":"disabled")),p=(0,o.Fl)((()=>d.rotationVisible?"":"disabled")),c=(0,n.qj)({modelApi:(0,o.Fl)((()=>i.state.modelApi)),modelAnimation:(0,o.Fl)((()=>i.state.modelApi?i.state.modelApi.modelAnimation:[]))});(0,o.bv)((()=>{c.modelAnimation.length&&(d.animationName=c.modelAnimation[0].name),r.on("model-update",(()=>{if(c.modelAnimation.length){const e=c.modelAnimation[0].name;d.animationName=e}Object.assign(d,{visible:!1,loop:"LoopRepeat",timeScale:1,weight:1,rotationVisible:!1,rotationType:"y",rotationSpeed:1})}))}));const m=()=>{const{visible:e}=d;e?g():c.modelApi.onClearAnimation()},h=({name:e})=>{d.animationName=e,c.modelApi.onStartModelAnimaion(d)},g=()=>{c.modelApi.onStartModelAnimaion(d)},_=()=>{c.modelApi.onSetRotation(d)},f=()=>{c.modelApi.onSetRotationType(d)};return t({config:d}),(e,t)=>{const i=(0,o.up)("el-switch"),n=(0,o.up)("Check"),s=(0,o.up)("el-icon"),r=(0,o.up)("el-space"),v=(0,o.up)("el-scrollbar"),w=(0,o.up)("el-empty"),y=(0,o.up)("Switch"),b=(0,o.up)("el-radio-button"),C=(0,o.up)("el-radio-group"),L=(0,o.up)("VideoPlay"),k=(0,o.up)("el-slider"),W=(0,o.up)("Sort");return(0,o.wg)(),(0,o.iD)("div",Q,[(0,o._)("div",ee,[te,(0,o.Wm)(i,{modelValue:d.visible,"onUpdate:modelValue":t[0]||(t[0]=e=>d.visible=e),onChange:m},null,8,["modelValue"])]),(0,o._)("div",{class:(0,l.C_)(["options",u.value])},[c.modelAnimation.length?((0,o.wg)(),(0,o.j4)(v,{key:0,"max-height":"250px"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(c.modelAnimation,(e=>((0,o.wg)(),(0,o.iD)("div",{class:(0,l.C_)(["option",d.animationName==e.name?"option-active":""]),onClick:t=>h(e),key:e.name},[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o._)("div",oe,(0,l.zw)(e.name),1),(0,o.wy)((0,o._)("div",ne,[(0,o.Wm)(s,{size:"20px",color:"#2a3ff6"},{default:(0,o.w5)((()=>[(0,o.Wm)(n)])),_:1})],512),[[a.F8,d.animationName==e.name]])])),_:2},1024)],10,ie)))),128))])),_:1})):((0,o.wg)(),(0,o.j4)(w,{key:1,description:"暂无动画","image-size":120}))],2),le,(0,o._)("div",{class:(0,l.C_)(["options",u.value])},[(0,o._)("div",ae,[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Wm)(y)])),_:1}),se])),_:1})]),(0,o._)("div",re,[(0,o.Wm)(C,{modelValue:d.loop,"onUpdate:modelValue":t[1]||(t[1]=e=>d.loop=e),onChange:g},{default:(0,o.w5)((()=>[(0,o.Wm)(b,{label:"LoopOnce"},{default:(0,o.w5)((()=>[(0,o.Uk)("只执行一次")])),_:1}),(0,o.Wm)(b,{label:"LoopRepeat"},{default:(0,o.w5)((()=>[(0,o.Uk)("无限循环")])),_:1}),(0,o.Wm)(b,{label:"LoopPingPong"},{default:(0,o.w5)((()=>[(0,o.Uk)("来回循环")])),_:1})])),_:1},8,["modelValue"])]),(0,o._)("div",de,[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Wm)(L)])),_:1}),ue])),_:1})]),(0,o._)("div",pe,[(0,o.Wm)(k,{"show-input":"",modelValue:d.timeScale,"onUpdate:modelValue":t[2]||(t[2]=e=>d.timeScale=e),onChange:g,step:.01,min:0,max:1},null,8,["modelValue"])]),(0,o._)("div",ce,[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Wm)(W)])),_:1}),me])),_:1})]),(0,o._)("div",he,[(0,o.Wm)(k,{"show-input":"",modelValue:d.weight,"onUpdate:modelValue":t[3]||(t[3]=e=>d.weight=e),onChange:g,step:.01,min:0,max:1},null,8,["modelValue"])])],2),(0,o._)("div",ge,[_e,(0,o.Wm)(i,{modelValue:d.rotationVisible,"onUpdate:modelValue":t[4]||(t[4]=e=>d.rotationVisible=e),onChange:_},null,8,["modelValue"])]),(0,o._)("div",fe,[(0,o._)("div",{class:(0,l.C_)(["option",p.value])},[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[ve,(0,o.Wm)(C,{modelValue:d.rotationType,"onUpdate:modelValue":t[5]||(t[5]=e=>d.rotationType=e),onChange:f},{default:(0,o.w5)((()=>[(0,o.Wm)(b,{label:"x"},{default:(0,o.w5)((()=>[(0,o.Uk)("X轴")])),_:1}),(0,o.Wm)(b,{label:"y"},{default:(0,o.w5)((()=>[(0,o.Uk)("Y轴")])),_:1}),(0,o.Wm)(b,{label:"z"},{default:(0,o.w5)((()=>[(0,o.Uk)("Z轴")])),_:1})])),_:1},8,["modelValue"])])),_:1})],2),(0,o._)("div",{class:(0,l.C_)(["option",p.value])},[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Wm)(L)])),_:1}),we])),_:1})],2),(0,o._)("div",{class:(0,l.C_)(["option",p.value])},[(0,o.Wm)(k,{onChange:_,"show-input":"",modelValue:d.rotationSpeed,"onUpdate:modelValue":t[6]||(t[6]=e=>d.rotationSpeed=e),step:.01,min:1,max:10},null,8,["modelValue"])],2)])])}}};const be=ye;var Ce=be;const Le={class:"edit-box"},ke={class:"header"},We=(0,o._)("span",null,"辅助线/轴配置",-1),Me={class:"option space-between"},xe=(0,o._)("span",null," 模型轴旋转 ",-1),Se={class:"option"},Ae={class:"option"},Ve={class:"option"},Ue={class:"option space-between"},Pe=(0,o._)("span",null," 模型位置 ",-1),He={class:"option"},Fe={class:"grid-txt"},Ie={class:"grid-silder"},Ee={class:"option"},Te={class:"grid-txt"},Re={class:"grid-silder"},De={class:"option"},ze={class:"grid-txt"},je={class:"grid-silder"},Oe={class:"option space-between"},Ge=(0,o._)("span",null," 模型骨架 ",-1),Be={class:"option space-between"},Ne=(0,o._)("span",null," 网格辅助线 ",-1),Ye={class:"option"},qe={class:"grid-txt"},Ze={class:"grid-silder"},Xe={class:"option"},Ke={class:"grid-txt"},$e={class:"grid-silder"},Je={class:"option"},Qe={class:"grid-txt"},et={class:"grid-silder"},tt={class:"option"},it={class:"option"},ot={class:"option space-between"},nt=(0,o._)("span",null," 坐标轴辅助线 ",-1),lt={class:"grid-txt"},at={class:"grid-silder"};var st={__name:"EditAttribute",setup(e,{expose:t}){const i=(0,s.oR)(),{$bus:a}=(0,o.FN)().proxy,d=(0,n.qj)({visible:!0,skeletonHelper:!1,gridHelper:!1,x:0,y:-.59,z:-.1,positionX:0,positionY:-.5,positionZ:0,divisions:10,size:4,color:"rgb(193,193,193)",axesHelper:!1,axesSize:1.8}),u=r.UL,p=(0,o.Fl)((()=>d.visible?"":"disabled")),c=(0,o.Fl)((()=>{const{visible:e,gridHelper:t}=d;return t&&e?"":"disabled"})),m=(0,o.Fl)((()=>{const{visible:e,axesHelper:t}=d;return t&&e?"":"disabled"})),h=(0,n.qj)({modelApi:(0,o.Fl)((()=>i.state.modelApi))});(0,o.bv)((()=>{a.on("model-update",(()=>{Object.assign(d,{visible:!0,skeletonHelper:!1,gridHelper:!1,x:0,y:-.59,z:-.1,positionX:0,positionY:-.5,positionZ:0,divisions:10,size:4,color:"rgb(193,193,193)",axesHelper:!1,axesSize:1.8})}))}));const g=()=>{},_=(e,t)=>{const i="right"==t;h.modelApi.onSetModelRotateOnAxis(e,i)},f=()=>{h.modelApi.onResultModelRotateOnAxis()},v=()=>{h.modelApi.onSetModelPosition(d)},w=()=>{d.positionX=0,d.positionY=-.5,d.positionZ=0,h.modelApi.onResultModelPosition(d)},y=()=>{h.modelApi.onSetModelHelper(d.skeletonHelper)},b=e=>{d.color=e,h.modelApi.onSetModelGridHelper(d)},C=()=>{h.modelApi.onSetModelGridHelper(d)},L=()=>{h.modelApi.onSetModelGridHelperSize(d)},k=()=>{h.modelApi.onSetModelAxesHelper(d)},W=()=>{const{x:e,y:t,z:i}=h.modelApi.model.rotation;let o=e,n=t,l=i;return{...d,rotationX:o,rotationY:n,rotationZ:l}};return t({getAttrbuteConfig:W}),(e,t)=>{const i=(0,o.up)("el-switch"),a=(0,o.up)("Setting"),s=(0,o.up)("el-icon"),r=(0,o.up)("el-space"),h=(0,o.up)("el-button"),W=(0,o.up)("Location"),M=(0,o.up)("el-slider"),x=(0,o.up)("Eleme"),S=(0,o.up)("Grid"),A=(0,o.up)("el-input-number"),V=(0,o.up)("el-color-picker"),U=(0,o.up)("Rank");return(0,o.wg)(),(0,o.iD)("div",Le,[(0,o._)("div",ke,[We,(0,o.Wm)(i,{modelValue:d.visible,"onUpdate:modelValue":t[0]||(t[0]=e=>d.visible=e),onChange:g},null,8,["modelValue"])]),(0,o._)("div",{class:(0,l.C_)(["options",p.value])},[(0,o._)("div",Me,[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Wm)(a)])),_:1}),xe])),_:1}),(0,o.Wm)(h,{type:"primary",link:"",icon:"Refresh",onClick:f},{default:(0,o.w5)((()=>[(0,o.Uk)(" 重置 ")])),_:1})]),(0,o._)("div",Se,[(0,o.Wm)(h,{type:"info",icon:"RefreshRight",onClick:t[1]||(t[1]=e=>_("x","right"))}),(0,o.Wm)(h,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("X轴")])),_:1}),(0,o.Wm)(h,{type:"info",icon:"RefreshLeft",onClick:t[2]||(t[2]=e=>_("x","left"))})]),(0,o._)("div",Ae,[(0,o.Wm)(h,{type:"info",icon:"RefreshRight",onClick:t[3]||(t[3]=e=>_("y","right"))}),(0,o.Wm)(h,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("Y轴")])),_:1}),(0,o.Wm)(h,{type:"info",icon:"RefreshLeft",onClick:t[4]||(t[4]=e=>_("y","left"))})]),(0,o._)("div",Ve,[(0,o.Wm)(h,{type:"info",icon:"RefreshRight",onClick:t[5]||(t[5]=e=>_("z","right"))}),(0,o.Wm)(h,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("Z轴")])),_:1}),(0,o.Wm)(h,{type:"info",icon:"RefreshLeft",onClick:t[6]||(t[6]=e=>_("z","left"))})]),(0,o._)("div",Ue,[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Wm)(W)])),_:1}),Pe])),_:1}),(0,o.Wm)(h,{type:"primary",link:"",icon:"Refresh",onClick:w},{default:(0,o.w5)((()=>[(0,o.Uk)(" 重置 ")])),_:1})]),(0,o._)("div",He,[(0,o._)("div",Fe,[(0,o.Wm)(h,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("X 轴")])),_:1})]),(0,o._)("div",Ie,[(0,o.Wm)(M,{onChange:v,"show-input":"",modelValue:d.positionX,"onUpdate:modelValue":t[7]||(t[7]=e=>d.positionX=e),min:-10,max:10,step:.1},null,8,["modelValue"])])]),(0,o._)("div",Ee,[(0,o._)("div",Te,[(0,o.Wm)(h,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("Y 轴")])),_:1})]),(0,o._)("div",Re,[(0,o.Wm)(M,{onChange:v,"show-input":"",modelValue:d.positionY,"onUpdate:modelValue":t[8]||(t[8]=e=>d.positionY=e),min:-10,max:10,step:.1},null,8,["modelValue"])])]),(0,o._)("div",De,[(0,o._)("div",ze,[(0,o.Wm)(h,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("Z 轴")])),_:1})]),(0,o._)("div",je,[(0,o.Wm)(M,{onChange:v,"show-input":"",modelValue:d.positionZ,"onUpdate:modelValue":t[9]||(t[9]=e=>d.positionZ=e),min:-10,max:10,step:.1},null,8,["modelValue"])])]),(0,o._)("div",Oe,[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Wm)(x)])),_:1}),Ge])),_:1}),(0,o.Wm)(i,{modelValue:d.skeletonHelper,"onUpdate:modelValue":t[10]||(t[10]=e=>d.skeletonHelper=e),onChange:y},null,8,["modelValue"])])],2),(0,o._)("div",{class:(0,l.C_)(["options",p.value])},[(0,o._)("div",Be,[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Wm)(S)])),_:1}),Ne])),_:1}),(0,o.Wm)(i,{modelValue:d.gridHelper,"onUpdate:modelValue":t[11]||(t[11]=e=>d.gridHelper=e),onChange:C},null,8,["modelValue"])])],2),(0,o._)("div",{class:(0,l.C_)(["options",c.value])},[(0,o._)("div",Ye,[(0,o._)("div",qe,[(0,o.Wm)(h,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("X 轴")])),_:1})]),(0,o._)("div",Ze,[(0,o.Wm)(M,{"show-input":"",onChange:C,modelValue:d.x,"onUpdate:modelValue":t[12]||(t[12]=e=>d.x=e),min:-2,max:4,step:.01},null,8,["modelValue"])])]),(0,o._)("div",Xe,[(0,o._)("div",Ke,[(0,o.Wm)(h,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("Y 轴")])),_:1})]),(0,o._)("div",$e,[(0,o.Wm)(M,{"show-input":"",onChange:C,modelValue:d.y,"onUpdate:modelValue":t[13]||(t[13]=e=>d.y=e),min:-2,max:4,step:.01},null,8,["modelValue"])])]),(0,o._)("div",Je,[(0,o._)("div",Qe,[(0,o.Wm)(h,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("Z 轴")])),_:1})]),(0,o._)("div",et,[(0,o.Wm)(M,{"show-input":"",onChange:C,modelValue:d.z,"onUpdate:modelValue":t[14]||(t[14]=e=>d.z=e),min:-2,max:4,step:.01},null,8,["modelValue"])])]),(0,o._)("div",tt,[(0,o._)("div",null,[(0,o.Wm)(h,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("大小")])),_:1}),(0,o.Wm)(A,{controls:!0,onChange:L,modelValue:d.size,"onUpdate:modelValue":t[15]||(t[15]=e=>d.size=e),min:1,max:40},null,8,["modelValue"])]),(0,o._)("div",null,[(0,o.Wm)(h,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("分割数")])),_:1}),(0,o.Wm)(A,{controls:!0,onChange:L,modelValue:d.divisions,"onUpdate:modelValue":t[16]||(t[16]=e=>d.divisions=e),min:1,max:40},null,8,["modelValue"])])]),(0,o._)("div",it,[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("网格颜色")])),_:1}),(0,o.Wm)(V,{"color-format":"hex",predefine:(0,n.SU)(u),onChange:C,onActiveChange:b,modelValue:d.color,"onUpdate:modelValue":t[17]||(t[17]=e=>d.color=e)},null,8,["predefine","modelValue"])])),_:1})])],2),(0,o._)("div",{class:(0,l.C_)(["options",p.value])},[(0,o._)("div",ot,[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Wm)(U)])),_:1}),nt])),_:1}),(0,o.Wm)(i,{modelValue:d.axesHelper,"onUpdate:modelValue":t[18]||(t[18]=e=>d.axesHelper=e),onChange:k},null,8,["modelValue"])]),(0,o._)("div",{class:(0,l.C_)(["option",m.value])},[(0,o._)("div",lt,[(0,o.Wm)(h,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("轴长度")])),_:1})]),(0,o._)("div",at,[(0,o.Wm)(M,{onChange:k,modelValue:d.axesSize,"onUpdate:modelValue":t[19]||(t[19]=e=>d.axesSize=e),min:1,max:10,step:.2},null,8,["modelValue"])])],2)],2)])}}};const rt=st;var dt=rt;const ut=e=>((0,o.dD)("data-v-56578968"),e=e(),(0,o.Cn)(),e),pt={class:"edit-box"},ct=ut((()=>(0,o._)("div",{class:"header"},[(0,o._)("span",null,"模型灯光")],-1))),mt={class:"options"},ht={class:"option space-between"},gt=ut((()=>(0,o._)("span",null,"模型平面",-1))),_t=ut((()=>(0,o._)("span",null,"平面颜色",-1))),ft={class:"grid-txt"},vt={class:"grid-silder"},wt={class:"grid-txt"},yt={class:"grid-silder"},bt={class:"options"},Ct={class:"option space-between"},Lt=ut((()=>(0,o._)("span",null,"环境光",-1))),kt={class:"color"},Wt={class:"silder"},Mt={class:"options"},xt={class:"option space-between"},St=ut((()=>(0,o._)("span",null,"平行光",-1))),At={class:"color"},Vt={class:"silder"},Ut={class:"grid-txt"},Pt={class:"grid-silder"},Ht={class:"grid-txt"},Ft={class:"grid-silder"},It={class:"grid-txt"},Et={class:"grid-silder"},Tt={class:"grid-txt"},Rt={class:"grid-silder"},Dt={class:"grid-txt"},zt={class:"grid-silder"},jt={class:"options"},Ot={class:"option space-between"},Gt=ut((()=>(0,o._)("span",null,"点光源",-1))),Bt={class:"grid-txt"},Nt={class:"grid-silder"},Yt={class:"color"},qt={class:"silder"},Zt={class:"grid-txt"},Xt={class:"grid-silder"},Kt={class:"grid-txt"},$t={class:"grid-silder"},Jt={class:"grid-txt"},Qt={class:"grid-silder"},ei={class:"options"},ti={class:"option space-between"},ii=ut((()=>(0,o._)("span",null,"聚光灯",-1))),oi={class:"color"},ni={class:"silder"},li={class:"grid-txt"},ai={class:"grid-silder"},si={class:"grid-txt"},ri={class:"grid-silder"},di={class:"grid-txt"},ui={class:"grid-silder"},pi={class:"grid-txt"},ci={class:"grid-silder"},mi={class:"grid-txt"},hi={class:"grid-silder"},gi={class:"grid-txt"},_i={class:"grid-silder"},fi={class:"grid-txt"},vi={class:"grid-silder"},wi={class:"grid-txt"},yi={class:"grid-silder"},bi={class:"grid-txt"},Ci={class:"grid-silder"};var Li={__name:"EditLight",setup(e,{expose:t}){const i=(0,s.oR)(),{$bus:a}=(0,o.FN)().proxy,d=(0,n.qj)({planeGeometry:!1,planeColor:"#939393",planeWidth:7,planeHeight:7,ambientLight:!0,ambientLightColor:"#fff",ambientLightIntensity:.8,directionalLight:!1,directionalLightHelper:!0,directionalLightColor:"#1E90FF",directionalLightIntensity:1,directionalHorizontal:-1.26,directionalVertical:-3.85,directionalSistance:2.98,directionaShadow:!0,pointLight:!1,pointLightHelper:!0,pointLightColor:"#1E90FF",pointLightIntensity:1,pointHorizontal:-4.21,pointVertical:-4.1,pointSistance:2.53,spotLight:!1,spotLightColor:"#323636",spotLightIntensity:400,spotHorizontal:-3.49,spotVertical:-4.37,spotSistance:4.09,spotAngle:.5,spotPenumbra:1,spotFocus:1,spotCastShadow:!0,spotLightHelper:!0,spotDistance:20}),u=r.UL,p=(0,o.Fl)((()=>{const{ambientLight:e}=d;return e?"":"disabled"})),c=(0,o.Fl)((()=>{const{directionalLight:e}=d;return e?"":"disabled"})),m=(0,o.Fl)((()=>{const{pointLight:e}=d;return e?"":"disabled"})),h=(0,o.Fl)((()=>{const{spotLight:e}=d;return e?"":"disabled"})),g=(0,o.Fl)((()=>{const{planeGeometry:e}=d;return e?"":"disabled"})),_=(0,n.qj)({modelApi:(0,o.Fl)((()=>i.state.modelApi))});(0,o.bv)((()=>{a.on("model-update",(()=>{Object.assign(d,{planeGeometry:!1,planeColor:"#939393",planeWidth:7,planeHeight:7,ambientLight:!0,ambientLightColor:"#fff",ambientLightIntensity:.8,directionalLight:!1,directionalLightHelper:!0,directionalLightColor:"#1E90FF",directionalLightIntensity:1,directionalHorizontal:-1.26,directionalVertical:-3.85,directionalSistance:2.98,directionaShadow:!0,pointLight:!1,pointLightHelper:!0,pointLightColor:"#1E90FF",pointLightIntensity:1,pointHorizontal:-4.21,pointVertical:-4.1,pointSistance:2.53,spotLight:!1,spotLightColor:"#323636",spotLightIntensity:400,spotHorizontal:-3.49,spotVertical:-4.37,spotSistance:4.09,spotAngle:.5,spotPenumbra:1,spotFocus:1,spotCastShadow:!0,spotLightHelper:!0,spotDistance:20})}))}));const f=e=>{d.ambientLightColor=e,_.modelApi.onSetModelAmbientLight(d)},v=()=>{_.modelApi.onSetModelAmbientLight(d)},w=e=>{d.directionalLightColor=e,_.modelApi.onSetModelDirectionalLight(d)},y=()=>{d.directionalLight&&(d.planeGeometry=!0,_.modelApi.onSetModelPlaneGeometry(d)),_.modelApi.onSetModelDirectionalLight(d)},b=e=>{d.pointLightColor=e,_.modelApi.onSetModelPointLight(d)},C=()=>{_.modelApi.onSetModelPointLight(d)},L=e=>{d.spotLightColor=e,_.modelApi.onSetModelSpotLight(d)},k=()=>{d.spotLight&&(d.planeGeometry=!0,_.modelApi.onSetModelPlaneGeometry(d)),_.modelApi.onSetModelSpotLight(d)},W=e=>{d.planeColor=e,_.modelApi.onSetModelPlaneGeometry(d)},M=()=>{_.modelApi.onSetModelPlaneGeometry(d)};return t({config:d}),(e,t)=>{const i=(0,o.up)("Odometer"),a=(0,o.up)("el-icon"),s=(0,o.up)("el-space"),r=(0,o.up)("el-switch"),_=(0,o.up)("el-color-picker"),x=(0,o.up)("el-button"),S=(0,o.up)("el-slider"),A=(0,o.up)("SetUp"),V=(0,o.up)("Place"),U=(0,o.up)("Orange"),P=(0,o.up)("el-scrollbar");return(0,o.wg)(),(0,o.iD)("div",pt,[ct,(0,o.Wm)(P,{height:"calc(100vh - 130px)"},{default:(0,o.w5)((()=>[(0,o._)("div",mt,[(0,o._)("div",ht,[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Wm)(a,null,{default:(0,o.w5)((()=>[(0,o.Wm)(i)])),_:1}),gt])),_:1}),(0,o.Wm)(r,{modelValue:d.planeGeometry,"onUpdate:modelValue":t[0]||(t[0]=e=>d.planeGeometry=e),onChange:M},null,8,["modelValue"])]),(0,o._)("div",{class:(0,l.C_)(["option",g.value])},[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[_t,(0,o.Wm)(_,{"color-format":"hex",modelValue:d.planeColor,"onUpdate:modelValue":t[1]||(t[1]=e=>d.planeColor=e),predefine:(0,n.SU)(u),onChange:M,onActiveChange:W},null,8,["modelValue","predefine"])])),_:1})],2),(0,o._)("div",{class:(0,l.C_)(["option",g.value])},[(0,o._)("div",ft,[(0,o.Wm)(x,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("宽度")])),_:1})]),(0,o._)("div",vt,[(0,o.Wm)(S,{"show-input":"",onChange:M,modelValue:d.planeWidth,"onUpdate:modelValue":t[2]||(t[2]=e=>d.planeWidth=e),min:0,max:100,step:.1},null,8,["modelValue"])])],2),(0,o._)("div",{class:(0,l.C_)(["option",g.value])},[(0,o._)("div",wt,[(0,o.Wm)(x,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("高度")])),_:1})]),(0,o._)("div",yt,[(0,o.Wm)(S,{"show-input":"",onChange:M,modelValue:d.planeHeight,"onUpdate:modelValue":t[3]||(t[3]=e=>d.planeHeight=e),min:0,max:100,step:.1},null,8,["modelValue"])])],2)]),(0,o._)("div",bt,[(0,o._)("div",Ct,[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Wm)(a,null,{default:(0,o.w5)((()=>[(0,o.Wm)(i)])),_:1}),Lt])),_:1}),(0,o.Wm)(r,{modelValue:d.ambientLight,"onUpdate:modelValue":t[4]||(t[4]=e=>d.ambientLight=e),onChange:v},null,8,["modelValue"])]),(0,o._)("div",{class:(0,l.C_)(["option",p.value])},[(0,o._)("div",kt,[(0,o.Wm)(_,{"color-format":"hex",modelValue:d.ambientLightColor,"onUpdate:modelValue":t[5]||(t[5]=e=>d.ambientLightColor=e),predefine:(0,n.SU)(u),onChange:v,onActiveChange:f},null,8,["modelValue","predefine"])]),(0,o._)("div",Wt,[(0,o.Wm)(S,{"show-input":"",onChange:v,modelValue:d.ambientLightIntensity,"onUpdate:modelValue":t[6]||(t[6]=e=>d.ambientLightIntensity=e),min:-5,max:5,step:.01},null,8,["modelValue"])])],2)]),(0,o._)("div",Mt,[(0,o._)("div",xt,[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Wm)(a,null,{default:(0,o.w5)((()=>[(0,o.Wm)(A)])),_:1}),St])),_:1}),(0,o.Wm)(r,{modelValue:d.directionalLight,"onUpdate:modelValue":t[7]||(t[7]=e=>d.directionalLight=e),onChange:y},null,8,["modelValue"])]),(0,o._)("div",{class:(0,l.C_)(["option",c.value])},[(0,o._)("div",At,[(0,o.Wm)(_,{"color-format":"hex",modelValue:d.directionalLightColor,"onUpdate:modelValue":t[8]||(t[8]=e=>d.directionalLightColor=e),predefine:(0,n.SU)(u),onChange:y,onActiveChange:w},null,8,["modelValue","predefine"])]),(0,o._)("div",Vt,[(0,o.Wm)(S,{"show-input":"",onChange:y,modelValue:d.directionalLightIntensity,"onUpdate:modelValue":t[9]||(t[9]=e=>d.directionalLightIntensity=e),min:-5,max:5,step:.01},null,8,["modelValue"])])],2),(0,o._)("div",{class:(0,l.C_)(["option",c.value])},[(0,o._)("div",Ut,[(0,o.Wm)(x,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("是否开启阴影")])),_:1})]),(0,o._)("div",Pt,[(0,o.Wm)(r,{modelValue:d.directionaShadow,"onUpdate:modelValue":t[10]||(t[10]=e=>d.directionaShadow=e),onChange:y},null,8,["modelValue"])]),(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o._)("div",Ht,[(0,o.Wm)(x,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("辅助线")])),_:1})]),(0,o._)("div",Ft,[(0,o.Wm)(r,{modelValue:d.directionalLightHelper,"onUpdate:modelValue":t[11]||(t[11]=e=>d.directionalLightHelper=e),onChange:y},null,8,["modelValue"])])])),_:1})],2),(0,o._)("div",{class:(0,l.C_)(["option",c.value])},[(0,o._)("div",It,[(0,o.Wm)(x,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("水平方向")])),_:1})]),(0,o._)("div",Et,[(0,o.Wm)(S,{"show-input":"",onChange:y,modelValue:d.directionalHorizontal,"onUpdate:modelValue":t[12]||(t[12]=e=>d.directionalHorizontal=e),min:-10,max:10,step:.01},null,8,["modelValue"])])],2),(0,o._)("div",{class:(0,l.C_)(["option",c.value])},[(0,o._)("div",Tt,[(0,o.Wm)(x,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("垂直方向")])),_:1})]),(0,o._)("div",Rt,[(0,o.Wm)(S,{"show-input":"",onChange:y,modelValue:d.directionalVertical,"onUpdate:modelValue":t[13]||(t[13]=e=>d.directionalVertical=e),min:-10,max:10,step:.01},null,8,["modelValue"])])],2),(0,o._)("div",{class:(0,l.C_)(["option",c.value])},[(0,o._)("div",Dt,[(0,o.Wm)(x,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("光源距离")])),_:1})]),(0,o._)("div",zt,[(0,o.Wm)(S,{"show-input":"",onChange:y,modelValue:d.directionalSistance,"onUpdate:modelValue":t[14]||(t[14]=e=>d.directionalSistance=e),min:0,max:10,step:.01},null,8,["modelValue"])])],2)]),(0,o._)("div",jt,[(0,o._)("div",Ot,[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Wm)(a,null,{default:(0,o.w5)((()=>[(0,o.Wm)(V)])),_:1}),Gt])),_:1}),(0,o.Wm)(r,{modelValue:d.pointLight,"onUpdate:modelValue":t[15]||(t[15]=e=>d.pointLight=e),onChange:C},null,8,["modelValue"])]),(0,o._)("div",{class:(0,l.C_)(["option",m.value])},[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o._)("div",Bt,[(0,o.Wm)(x,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("辅助线")])),_:1})]),(0,o._)("div",Nt,[(0,o.Wm)(r,{modelValue:d.pointLightHelper,"onUpdate:modelValue":t[16]||(t[16]=e=>d.pointLightHelper=e),onChange:C},null,8,["modelValue"])])])),_:1})],2),(0,o._)("div",{class:(0,l.C_)(["option",m.value])},[(0,o._)("div",Yt,[(0,o.Wm)(_,{"color-format":"hex",modelValue:d.pointLightColor,"onUpdate:modelValue":t[17]||(t[17]=e=>d.pointLightColor=e),predefine:(0,n.SU)(u),onChange:C,onActiveChange:b},null,8,["modelValue","predefine"])]),(0,o._)("div",qt,[(0,o.Wm)(S,{"show-input":"",onChange:C,modelValue:d.pointLightIntensity,"onUpdate:modelValue":t[18]||(t[18]=e=>d.pointLightIntensity=e),min:-15,max:15,step:.1},null,8,["modelValue"])])],2),(0,o._)("div",{class:(0,l.C_)(["option",m.value])},[(0,o._)("div",Zt,[(0,o.Wm)(x,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("水平方向")])),_:1})]),(0,o._)("div",Xt,[(0,o.Wm)(S,{"show-input":"",onChange:C,modelValue:d.pointHorizontal,"onUpdate:modelValue":t[19]||(t[19]=e=>d.pointHorizontal=e),min:-10,max:10,step:.11},null,8,["modelValue"])])],2),(0,o._)("div",{class:(0,l.C_)(["option",m.value])},[(0,o._)("div",Kt,[(0,o.Wm)(x,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("垂直方向")])),_:1})]),(0,o._)("div",$t,[(0,o.Wm)(S,{"show-input":"",onChange:C,modelValue:d.pointVertical,"onUpdate:modelValue":t[20]||(t[20]=e=>d.pointVertical=e),min:-10,max:10,step:.1},null,8,["modelValue"])])],2),(0,o._)("div",{class:(0,l.C_)(["option",m.value])},[(0,o._)("div",Jt,[(0,o.Wm)(x,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("光源距离")])),_:1})]),(0,o._)("div",Qt,[(0,o.Wm)(S,{"show-input":"",onChange:C,modelValue:d.pointSistance,"onUpdate:modelValue":t[21]||(t[21]=e=>d.pointSistance=e),min:0,max:10,step:.1},null,8,["modelValue"])])],2)]),(0,o._)("div",ei,[(0,o._)("div",ti,[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Wm)(a,null,{default:(0,o.w5)((()=>[(0,o.Wm)(U)])),_:1}),ii])),_:1}),(0,o.Wm)(r,{modelValue:d.spotLight,"onUpdate:modelValue":t[22]||(t[22]=e=>d.spotLight=e),onChange:k},null,8,["modelValue"])]),(0,o._)("div",{class:(0,l.C_)(["option",h.value])},[(0,o._)("div",oi,[(0,o.Wm)(_,{"color-format":"hex",modelValue:d.spotLightColor,"onUpdate:modelValue":t[23]||(t[23]=e=>d.spotLightColor=e),predefine:(0,n.SU)(u),onChange:k,onActiveChange:L},null,8,["modelValue","predefine"])]),(0,o._)("div",ni,[(0,o.Wm)(S,{"show-input":"",onChange:k,modelValue:d.spotLightIntensity,"onUpdate:modelValue":t[24]||(t[24]=e=>d.spotLightIntensity=e),min:0,max:600,step:.1},null,8,["modelValue"])])],2),(0,o._)("div",{class:(0,l.C_)(["option",h.value])},[(0,o._)("div",li,[(0,o.Wm)(x,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("是否开启阴影")])),_:1})]),(0,o._)("div",ai,[(0,o.Wm)(r,{modelValue:d.spotCastShadow,"onUpdate:modelValue":t[25]||(t[25]=e=>d.spotCastShadow=e),onChange:k},null,8,["modelValue"])]),(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o._)("div",si,[(0,o.Wm)(x,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("辅助线")])),_:1})]),(0,o._)("div",ri,[(0,o.Wm)(r,{modelValue:d.spotLightHelper,"onUpdate:modelValue":t[26]||(t[26]=e=>d.spotLightHelper=e),onChange:k},null,8,["modelValue"])])])),_:1})],2),(0,o._)("div",{class:(0,l.C_)(["option",h.value])},[(0,o._)("div",di,[(0,o.Wm)(x,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("水平方向")])),_:1})]),(0,o._)("div",ui,[(0,o.Wm)(S,{"show-input":"",onChange:k,modelValue:d.spotHorizontal,"onUpdate:modelValue":t[27]||(t[27]=e=>d.spotHorizontal=e),min:-10,max:10,step:.1},null,8,["modelValue"])])],2),(0,o._)("div",{class:(0,l.C_)(["option",h.value])},[(0,o._)("div",pi,[(0,o.Wm)(x,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("垂直方向")])),_:1})]),(0,o._)("div",ci,[(0,o.Wm)(S,{"show-input":"",onChange:k,modelValue:d.spotVertical,"onUpdate:modelValue":t[28]||(t[28]=e=>d.spotVertical=e),min:-10,max:10,step:.1},null,8,["modelValue"])])],2),(0,o._)("div",{class:(0,l.C_)(["option",h.value])},[(0,o._)("div",mi,[(0,o.Wm)(x,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("光源距离")])),_:1})]),(0,o._)("div",hi,[(0,o.Wm)(S,{"show-input":"",onChange:k,modelValue:d.spotSistance,"onUpdate:modelValue":t[29]||(t[29]=e=>d.spotSistance=e),min:0,max:10,step:.1},null,8,["modelValue"])])],2),(0,o._)("div",{class:(0,l.C_)(["option",h.value])},[(0,o._)("div",gi,[(0,o.Wm)(x,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("光线照射范围")])),_:1})]),(0,o._)("div",_i,[(0,o.Wm)(S,{"show-input":"",onChange:k,modelValue:d.spotAngle,"onUpdate:modelValue":t[30]||(t[30]=e=>d.spotAngle=e),min:0,max:2,step:.01},null,8,["modelValue"])])],2),(0,o._)("div",{class:(0,l.C_)(["option",h.value])},[(0,o._)("div",fi,[(0,o.Wm)(x,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("边缘聚光度")])),_:1})]),(0,o._)("div",vi,[(0,o.Wm)(S,{"show-input":"",onChange:k,modelValue:d.spotPenumbra,"onUpdate:modelValue":t[31]||(t[31]=e=>d.spotPenumbra=e),min:0,max:1,step:.01},null,8,["modelValue"])])],2),(0,o._)("div",{class:(0,l.C_)(["option",h.value])},[(0,o._)("div",wi,[(0,o.Wm)(x,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("投影聚焦度")])),_:1})]),(0,o._)("div",yi,[(0,o.Wm)(S,{"show-input":"",onChange:k,modelValue:d.spotFocus,"onUpdate:modelValue":t[32]||(t[32]=e=>d.spotFocus=e),min:0,max:3,step:.01},null,8,["modelValue"])])],2),(0,o._)("div",{class:(0,l.C_)(["option",h.value])},[(0,o._)("div",bi,[(0,o.Wm)(x,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("光源照射距离")])),_:1})]),(0,o._)("div",Ci,[(0,o.Wm)(S,{"show-input":"",onChange:k,modelValue:d.spotDistance,"onUpdate:modelValue":t[33]||(t[33]=e=>d.spotDistance=e),min:1,max:500,step:1},null,8,["modelValue"])])],2)])])),_:1})])}}};const ki=(0,x.Z)(Li,[["__scopeId","data-v-56578968"]]);var Wi=ki;const Mi={class:"edit-box"},xi=(0,o._)("div",{class:"header"},[(0,o._)("span",null,"后期处理")],-1),Si={class:"options"},Ai={class:"option space-between"},Vi=(0,o._)("span",null," 辉光 ",-1),Ui={class:"option"},Pi={class:"grid-txt"},Hi={class:"grid-silder"},Fi={class:"option"},Ii={class:"grid-txt"},Ei={class:"grid-silder"},Ti={class:"option"},Ri={class:"grid-txt"},Di={class:"grid-silder"},zi={class:"options"},ji={class:"option space-between"},Oi=(0,o._)("span",null," 色调曝光度 ",-1),Gi={class:"grid-silder"},Bi={class:"header"},Ni=(0,o._)("span",null,"模型操作",-1),Yi={class:"options"},qi=(0,o._)("span",null," 模型分解 ",-1),Zi={class:"grid-silder"},Xi=(0,o._)("span",null," 模型材质拖拽 ",-1),Ki={class:"grid-silder"},$i=(0,o._)("span",null," hover是否显示材质标签 ",-1),Ji={class:"grid-silder"};var Qi={__name:"EditLaterStage",setup(e,{expose:t}){const i=(0,s.oR)(),{$bus:a}=(0,o.FN)().proxy,r=(0,n.qj)({modelApi:(0,o.Fl)((()=>i.state.modelApi))}),d=(0,o.Fl)((()=>{const{glow:e}=m;return e?"":"disabled"})),u=(0,o.Fl)((()=>{const e=r.modelApi.modelMaterialList,t=e.filter((e=>"Mesh"==e.type));return t.length<=1||m.modelDrag?"disabled":""})),p=(0,o.Fl)((()=>{const e=r.modelApi.modelMaterialList,t=e.filter((e=>"Mesh"==e.type));return t.length<=1?"disabled":""})),c=(0,o.Fl)((()=>{const e=r.modelApi.modelMaterialList,t=e.filter((e=>"Mesh"==e.type));return t.length<=1&&!m.hoverMeshTag?"disabled":""})),m=(0,n.qj)({glow:!1,threshold:.05,strength:.6,radius:1,decompose:0,modelDrag:!1,toneMappingExposure:2,hoverMeshTag:!1});(0,o.bv)((()=>{a.on("model-update",(()=>{Object.assign(m,{glow:!1,threshold:.05,strength:.6,radius:1,decompose:0,modelDrag:!1,toneMappingExposure:2,hoverMeshTag:!1})}))}));const h=()=>{r.modelApi.onSetUnrealBloomPass(m)},g=()=>{r.modelApi.setModelMeshDecompose(m)},_=()=>{r.modelApi.setModelMeshTag(m)},f=()=>{m.decompose=0,r.modelApi.setModelMeshDecompose(m),r.modelApi.setModelMeshDrag(m)},v=()=>({meshPositonList:r.modelApi.getMeshDragPosition(),...m});return t({getStageConfig:v}),(e,t)=>{const i=(0,o.up)("Sunny"),n=(0,o.up)("el-icon"),a=(0,o.up)("el-space"),s=(0,o.up)("el-switch"),r=(0,o.up)("el-button"),v=(0,o.up)("el-slider"),w=(0,o.up)("Umbrella"),y=(0,o.up)("WarnTriangleFilled"),b=(0,o.up)("el-tooltip"),C=(0,o.up)("Cpu"),L=(0,o.up)("Rank"),k=(0,o.up)("Message");return(0,o.wg)(),(0,o.iD)("div",Mi,[xi,(0,o._)("div",Si,[(0,o._)("div",Ai,[(0,o.Wm)(a,null,{default:(0,o.w5)((()=>[(0,o.Wm)(n,null,{default:(0,o.w5)((()=>[(0,o.Wm)(i)])),_:1}),Vi])),_:1}),(0,o.Wm)(s,{modelValue:m.glow,"onUpdate:modelValue":t[0]||(t[0]=e=>m.glow=e),onChange:h},null,8,["modelValue"])])]),(0,o._)("div",{class:(0,l.C_)(["options",d.value])},[(0,o._)("div",Ui,[(0,o._)("div",Pi,[(0,o.Wm)(r,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("强度")])),_:1})]),(0,o._)("div",Hi,[(0,o.Wm)(v,{"show-input":"",modelValue:m.strength,"onUpdate:modelValue":t[1]||(t[1]=e=>m.strength=e),onChange:h,step:.01,min:0,max:3},null,8,["modelValue"])])]),(0,o._)("div",Fi,[(0,o._)("div",Ii,[(0,o.Wm)(r,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("半径")])),_:1})]),(0,o._)("div",Ei,[(0,o.Wm)(v,{"show-input":"",modelValue:m.radius,"onUpdate:modelValue":t[2]||(t[2]=e=>m.radius=e),onChange:h,step:.01,min:0,max:2},null,8,["modelValue"])])]),(0,o._)("div",Ti,[(0,o._)("div",Ri,[(0,o.Wm)(r,{type:"primary",link:""},{default:(0,o.w5)((()=>[(0,o.Uk)("阈值")])),_:1})]),(0,o._)("div",Di,[(0,o.Wm)(v,{"show-input":"",modelValue:m.threshold,"onUpdate:modelValue":t[3]||(t[3]=e=>m.threshold=e),onChange:h,step:.01,min:0,max:1},null,8,["modelValue"])])])],2),(0,o._)("div",zi,[(0,o._)("div",ji,[(0,o.Wm)(a,null,{default:(0,o.w5)((()=>[(0,o.Wm)(n,null,{default:(0,o.w5)((()=>[(0,o.Wm)(w)])),_:1}),Oi])),_:1}),(0,o._)("div",Gi,[(0,o.Wm)(v,{"show-input":"",modelValue:m.toneMappingExposure,"onUpdate:modelValue":t[4]||(t[4]=e=>m.toneMappingExposure=e),onChange:h,step:.01,min:.5,max:10},null,8,["modelValue"])])])]),(0,o._)("div",Bi,[(0,o.Wm)(a,null,{default:(0,o.w5)((()=>[Ni,"disabled"==u.value?((0,o.wg)(),(0,o.j4)(b,{key:0,effect:"dark",content:"当前模型不可进行以下操作",placement:"top"},{default:(0,o.w5)((()=>[(0,o.Wm)(n,null,{default:(0,o.w5)((()=>[(0,o.Wm)(y,{size:20,color:"#ffb940"})])),_:1})])),_:1})):(0,o.kq)("",!0)])),_:1})]),(0,o._)("div",Yi,[(0,o._)("div",{class:(0,l.C_)(["option space-between",u.value])},[(0,o.Wm)(a,null,{default:(0,o.w5)((()=>[(0,o.Wm)(n,null,{default:(0,o.w5)((()=>[(0,o.Wm)(C)])),_:1}),qi])),_:1}),(0,o._)("div",Zi,[(0,o.Wm)(v,{"show-input":"",modelValue:m.decompose,"onUpdate:modelValue":t[5]||(t[5]=e=>m.decompose=e),onChange:g,step:.01,min:0,max:20},null,8,["modelValue"])])],2),(0,o._)("div",{class:(0,l.C_)(["option",p.value])},[(0,o.Wm)(a,null,{default:(0,o.w5)((()=>[(0,o.Wm)(n,null,{default:(0,o.w5)((()=>[(0,o.Wm)(L,{size:20})])),_:1}),Xi])),_:1}),(0,o._)("div",Ki,[(0,o.Wm)(s,{modelValue:m.modelDrag,"onUpdate:modelValue":t[6]||(t[6]=e=>m.modelDrag=e),onChange:f},null,8,["modelValue"])])],2),(0,o._)("div",{class:(0,l.C_)(["option",c.value])},[(0,o.Wm)(a,null,{default:(0,o.w5)((()=>[(0,o.Wm)(n,null,{default:(0,o.w5)((()=>[(0,o.Wm)(k,{size:20})])),_:1}),$i])),_:1}),(0,o._)("div",Ji,[(0,o.Wm)(s,{modelValue:m.hoverMeshTag,"onUpdate:modelValue":t[7]||(t[7]=e=>m.hoverMeshTag=e),onChange:_},null,8,["modelValue"])])],2)])])}}};const eo=Qi;var to=eo;const io={class:"model-panel"},oo={class:"panel-tabs"},no=["onClick"],lo={class:"tab"},ao={class:"panel-edit"};var so={__name:"index",setup(e,{expose:t}){const i=[{name:"背景",key:"EditBackground",icon:"Picture"},{name:"材质",key:"EditMaterial",icon:"DataAnalysis"},{name:"后期/操作",key:"EditLaterStage",icon:"MagicStick"},{name:"灯光",key:"EditLight",icon:"Sunrise"},{name:"模型动画",key:"EditAnimation",icon:"VideoCameraFilled"},{name:"辅助线/轴配置",key:"EditAttribute",icon:"Box"}],s=(0,n.iH)("EditMaterial"),r=(0,n.iH)(null),d=(0,n.iH)(null),u=(0,n.iH)(null),p=(0,n.iH)(null),c=(0,n.iH)(null),m=(0,n.iH)(null),h=()=>({background:r.value.config,material:d.value.getMeshConfig(),animation:u.value.config,attribute:p.value.getAttrbuteConfig(),light:c.value.config,stage:m.value.getStageConfig()});return t({getPanelConfig:h}),(e,t)=>{const n=(0,o.up)("el-icon"),h=(0,o.up)("el-tooltip");return(0,o.wg)(),(0,o.iD)("div",io,[(0,o._)("ul",oo,[((0,o.wg)(),(0,o.iD)(o.HY,null,(0,o.Ko)(i,(e=>(0,o._)("li",{key:e.key,class:(0,l.C_)(s.value==e.key?"active":""),onClick:t=>s.value=e.key},[(0,o.Wm)(h,{effect:"light",content:e.name,placement:"top"},{default:(0,o.w5)((()=>[(0,o._)("div",lo,[(0,o.Wm)(n,{size:"20px",color:s.value==e.key?"#fff":""},{default:(0,o.w5)((()=>[((0,o.wg)(),(0,o.j4)((0,o.LL)(e.icon)))])),_:2},1032,["color"])])])),_:2},1032,["content"])],10,no))),64))]),(0,o._)("div",ao,[(0,o.wy)((0,o._)("div",null,[(0,o.Wm)(A,{ref_key:"background",ref:r},null,512)],512),[[a.F8,"EditBackground"==s.value]]),(0,o.wy)((0,o._)("div",null,[(0,o.Wm)(J,{ref_key:"material",ref:d},null,512)],512),[[a.F8,"EditMaterial"==s.value]]),(0,o.wy)((0,o._)("div",null,[(0,o.Wm)(to,{ref_key:"stage",ref:m},null,512)],512),[[a.F8,"EditLaterStage"==s.value]]),(0,o.wy)((0,o._)("div",null,[(0,o.Wm)(Ce,{ref_key:"animation",ref:u},null,512)],512),[[a.F8,"EditAnimation"==s.value]]),(0,o.wy)((0,o._)("div",null,[(0,o.Wm)(Wi,{ref_key:"light",ref:c},null,512)],512),[[a.F8,"EditLight"==s.value]]),(0,o.wy)((0,o._)("div",null,[(0,o.Wm)(dt,{ref_key:"attribute",ref:p},null,512)],512),[[a.F8,"EditAttribute"==s.value]])])])}}};const ro=(0,x.Z)(so,[["__scopeId","data-v-58c340f1"]]);var uo=ro,po=(i(6229),i(7330),i(2062),i(2346));const co={class:"model-choose"},mo=(0,o._)("div",{class:"header"},[(0,o._)("span",null,"模型列表")],-1),ho={class:"options"},go={class:"option"},_o=(0,o._)("span",null,"普通模型",-1),fo={class:"options"},vo={class:"option"},wo=(0,o._)("span",null,"动画模型",-1),yo={class:"options"},bo={class:"option"},Co=(0,o._)("span",null,"外部模型",-1),Lo={class:"file-name"},ko=(0,o._)("span",null,"当前模型:",-1),Wo={class:"upload"},Mo={class:"icon"},xo=(0,o._)("div",null,[(0,o._)("span",null,"请选择(目前仅支持.glb, .obj, .gltf格式)")],-1);var So={__name:"index",setup(e,{expose:t}){const a=(0,s.oR)(),{$bus:r}=(0,o.FN)().proxy,u=(0,n.qj)({modelApi:(0,o.Fl)((()=>a.state.modelApi))}),p=(0,o.Fl)((()=>d.H1.filter((e=>!e.animation)))),c=(0,o.Fl)((()=>d.H1.filter((e=>e.animation)))),m=(0,n.iH)(9),h=(0,n.iH)({name:"变形金刚（3）",fileType:"glb",id:9,animation:!1,filePath:"threeFile/glb/glb-9.glb",icon:i(8817),decomposeName:"transformers_3",key:"transformers-3"}),g=(0,n.iH)(null),_=async e=>{if(e.id==m.value)return!1;m.value=e.id,g.value=null,h.value=e,r.emit("page-loading",!0);try{const{load:t}=await u.modelApi.onSwitchModel(e);t&&(r.emit("model-update"),r.emit("page-loading",!1))}catch(t){r.emit("page-loading",!1)}},f=async e=>{g.value=e.name;const t=URL.createObjectURL(e.raw),i={filePath:t,fileType:(0,po.JB)(e.name)};r.emit("page-loading",!0);try{const{load:e,filePath:t}=await u.modelApi.onSwitchModel(i);URL.revokeObjectURL(t),e&&(r.emit("model-update"),r.emit("page-loading",!1),m.value=null,h.value={})}catch(o){g.value=null,r.emit("page-loading",!1)}};return t({activeModel:h}),(e,t)=>{const i=(0,o.up)("Orange"),n=(0,o.up)("el-icon"),a=(0,o.up)("el-space"),s=(0,o.up)("el-image"),r=(0,o.up)("el-col"),d=(0,o.up)("el-row"),u=(0,o.up)("el-scrollbar"),h=(0,o.up)("Paperclip"),v=(0,o.up)("UploadFilled"),w=(0,o.up)("el-tooltip"),y=(0,o.up)("Plus"),b=(0,o.up)("el-upload");return(0,o.wg)(),(0,o.iD)("div",co,[mo,(0,o._)("div",ho,[(0,o._)("div",go,[(0,o.Wm)(a,null,{default:(0,o.w5)((()=>[(0,o.Wm)(n,null,{default:(0,o.w5)((()=>[(0,o.Wm)(i)])),_:1}),_o])),_:1})]),(0,o.Wm)(u,{"max-height":"250px"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(p.value,(e=>((0,o.wg)(),(0,o.j4)(r,{style:{textAlign:"center"},span:12,key:e.id},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{onClick:t=>_(e),class:(0,l.C_)(["el-img",m.value==e.id?"active-model":""]),src:e.icon,fit:"cover"},null,8,["onClick","class","src"])])),_:2},1024)))),128))])),_:1})])),_:1})]),(0,o._)("div",fo,[(0,o._)("div",vo,[(0,o.Wm)(a,null,{default:(0,o.w5)((()=>[(0,o.Wm)(n,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h)])),_:1}),wo])),_:1})]),(0,o.Wm)(u,{"max-height":"250px"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(c.value,(e=>((0,o.wg)(),(0,o.j4)(r,{style:{textAlign:"center"},span:12,key:e.id},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{onClick:t=>_(e),class:(0,l.C_)(["el-img",m.value==e.id?"active-model":""]),src:e.icon,fit:"cover"},null,8,["onClick","class","src"])])),_:2},1024)))),128))])),_:1})])),_:1})]),(0,o._)("div",yo,[(0,o._)("div",bo,[(0,o.Wm)(a,null,{default:(0,o.w5)((()=>[(0,o.Wm)(n,null,{default:(0,o.w5)((()=>[(0,o.Wm)(v)])),_:1}),Co])),_:1})]),(0,o._)("div",Lo,[ko,(0,o.Wm)(w,{effect:"dark",content:g.value,placement:"top"},{default:(0,o.w5)((()=>[(0,o._)("b",null,(0,l.zw)(g.value),1)])),_:1},8,["content"])]),(0,o.Wm)(b,{action:"",accept:".glb,.obj,.gltf",class:"file-box","show-file-list":!1,"auto-upload":!1,"on-change":f},{default:(0,o.w5)((()=>[(0,o._)("div",Wo,[(0,o._)("div",Mo,[(0,o.Wm)(n,{size:44},{default:(0,o.w5)((()=>[(0,o.Wm)(y)])),_:1}),xo])])])),_:1})])])}}};const Ao=So;var Vo=Ao,Uo=i(2483),Po=i(6e3),Ho=i(4605),Fo=i(5456),Io=i(2018),Eo=i(3536),To=i(6852),Ro=i(5584),Do=i(6007),zo=i(4033),jo=i(3570),Oo=i(8796);i(1439),i(7585),i(5315);const Go=new WeakMap;class Bo extends V.aNw{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,o){const n=new V.hH6(this.manager);n.setPath(this.path),n.setResponseType("arraybuffer"),n.setRequestHeader(this.requestHeader),n.setWithCredentials(this.withCredentials),n.load(e,(e=>{this.parse(e,t,o)}),i,o)}parse(e,t,i){this.decodeDracoFile(e,t,null,null,V.KI_).catch(i)}decodeDracoFile(e,t,i,o,n=V.GUF){const l={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:o||this.defaultAttributeTypes,useUniqueIDs:!!i,vertexColorSpace:n};return this.decodeGeometry(e,l).then(t)}decodeGeometry(e,t){const i=JSON.stringify(t);if(Go.has(e)){const t=Go.get(e);if(t.key===i)return t.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let o;const n=this.workerNextTaskID++,l=e.byteLength,a=this._getWorker(n,l).then((i=>(o=i,new Promise(((i,l)=>{o._callbacks[n]={resolve:i,reject:l},o.postMessage({type:"decode",id:n,taskConfig:t,buffer:e},[e])}))))).then((e=>this._createGeometry(e.geometry)));return a.catch((()=>!0)).then((()=>{o&&n&&this._releaseTask(o,n)})),Go.set(e,{key:i,promise:a}),a}_createGeometry(e){const t=new V.u9r;e.index&&t.setIndex(new V.TlE(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const o=e.attributes[i],n=o.name,l=o.array,a=o.itemSize,s=new V.TlE(l,a);"color"===n&&(this._assignVertexColorSpace(s,o.vertexColorSpace),s.normalized=l instanceof Float32Array===!1),t.setAttribute(n,s)}return t}_assignVertexColorSpace(e,t){if(t!==V.KI_)return;const i=new V.Ilk;for(let o=0,n=e.count;o<n;o++)i.fromBufferAttribute(e,o).convertSRGBToLinear(),e.setXYZ(o,i.r,i.g,i.b)}_loadLibrary(e,t){const i=new V.hH6(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise(((t,o)=>{i.load(e,t,void 0,o)}))}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e="object"!==typeof WebAssembly||"js"===this.decoderConfig.type,t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then((t=>{const i=t[0];e||(this.decoderConfig.wasmBinary=t[1]);const o=No.toString(),n=["/* draco decoder */",i,"","/* worker */",o.substring(o.indexOf("{")+1,o.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([n]))})),this.decoderPending}_getWorker(e,t){return this._initDecoder().then((()=>{if(this.workerPool.length<this.workerLimit){const e=new Worker(this.workerSourceURL);e._callbacks={},e._taskCosts={},e._taskLoad=0,e.postMessage({type:"init",decoderConfig:this.decoderConfig}),e.onmessage=function(t){const i=t.data;switch(i.type){case"decode":e._callbacks[i.id].resolve(i);break;case"error":e._callbacks[i.id].reject(i);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+i.type+'"')}},this.workerPool.push(e)}else this.workerPool.sort((function(e,t){return e._taskLoad>t._taskLoad?-1:1}));const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i}))}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map((e=>e._taskLoad)))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,""!==this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),this}}function No(){let e,t;function i(e,t,i,l){const a=l.attributeIDs,s=l.attributeTypes;let r,d;const u=t.GetEncodedGeometryType(i);if(u===e.TRIANGULAR_MESH)r=new e.Mesh,d=t.DecodeArrayToMesh(i,i.byteLength,r);else{if(u!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");r=new e.PointCloud,d=t.DecodeArrayToPointCloud(i,i.byteLength,r)}if(!d.ok()||0===r.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+d.error_msg());const p={index:null,attributes:[]};for(const o in a){const i=self[s[o]];let d,u;if(l.useUniqueIDs)u=a[o],d=t.GetAttributeByUniqueId(r,u);else{if(u=t.GetAttributeId(r,e[a[o]]),-1===u)continue;d=t.GetAttribute(r,u)}const c=n(e,t,r,o,i,d);"color"===o&&(c.vertexColorSpace=l.vertexColorSpace),p.attributes.push(c)}return u===e.TRIANGULAR_MESH&&(p.index=o(e,t,r)),e.destroy(r),p}function o(e,t,i){const o=i.num_faces(),n=3*o,l=4*n,a=e._malloc(l);t.GetTrianglesUInt32Array(i,l,a);const s=new Uint32Array(e.HEAPF32.buffer,a,n).slice();return e._free(a),{array:s,itemSize:1}}function n(e,t,i,o,n,a){const s=a.num_components(),r=i.num_points(),d=r*s,u=d*n.BYTES_PER_ELEMENT,p=l(e,n),c=e._malloc(u);t.GetAttributeDataArrayForAllPoints(i,a,p,u,c);const m=new n(e.HEAPF32.buffer,c,d).slice();return e._free(c),{name:o,array:m,itemSize:s}}function l(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}onmessage=function(o){const n=o.data;switch(n.type){case"init":e=n.decoderConfig,t=new Promise((function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)}));break;case"decode":const o=n.buffer,l=n.taskConfig;t.then((e=>{const t=e.draco,a=new t.Decoder;try{const e=i(t,a,new Int8Array(o),l),s=e.attributes.map((e=>e.array.buffer));e.index&&s.push(e.index.array.buffer),self.postMessage({type:"decode",id:n.id,geometry:e},s)}catch(s){console.error(s),self.postMessage({type:"error",id:n.id,error:s.message})}finally{t.destroy(a)}}));break}}}const Yo=new V.JOQ,qo=new V.iMs,Zo=new V.FM8,Xo=new V.Pa4,Ko=new V.Pa4,$o=new V.Pa4,Jo=new V.yGw;class Qo extends V.pBf{constructor(e,t,i){super(),i.style.touchAction="none";let o=null,n=null;const l=[],a=this;function s(){i.addEventListener("pointermove",c),i.addEventListener("pointerdown",m),i.addEventListener("pointerup",h),i.addEventListener("pointerleave",h)}function r(){i.removeEventListener("pointermove",c),i.removeEventListener("pointerdown",m),i.removeEventListener("pointerup",h),i.removeEventListener("pointerleave",h),i.style.cursor=""}function d(){r()}function u(){return e}function p(){return qo}function c(s){if(!1!==a.enabled){if(g(s),qo.setFromCamera(Zo,t),o)return qo.ray.intersectPlane(Yo,Ko)&&o.position.copy(Ko.sub(Xo).applyMatrix4(Jo)),void a.dispatchEvent({type:"drag",object:o});if("mouse"===s.pointerType||"pen"===s.pointerType)if(l.length=0,qo.setFromCamera(Zo,t),qo.intersectObjects(e,!0,l),l.length>0){const e=l[0].object;Yo.setFromNormalAndCoplanarPoint(t.getWorldDirection(Yo.normal),$o.setFromMatrixPosition(e.matrixWorld)),n!==e&&null!==n&&(a.dispatchEvent({type:"hoveroff",object:n}),i.style.cursor="auto",n=null),n!==e&&(a.dispatchEvent({type:"hoveron",object:e}),i.style.cursor="pointer",n=e)}else null!==n&&(a.dispatchEvent({type:"hoveroff",object:n}),i.style.cursor="auto",n=null)}}function m(n){!1!==a.enabled&&(g(n),l.length=0,qo.setFromCamera(Zo,t),qo.intersectObjects(e,!0,l),l.length>0&&(o=!0===a.transformGroup?e[0]:l[0].object,Yo.setFromNormalAndCoplanarPoint(t.getWorldDirection(Yo.normal),$o.setFromMatrixPosition(o.matrixWorld)),qo.ray.intersectPlane(Yo,Ko)&&(Jo.copy(o.parent.matrixWorld).invert(),Xo.copy(Ko).sub($o.setFromMatrixPosition(o.matrixWorld))),i.style.cursor="move",a.dispatchEvent({type:"dragstart",object:o})))}function h(){!1!==a.enabled&&(o&&(a.dispatchEvent({type:"dragend",object:o}),o=null),i.style.cursor=n?"pointer":"auto")}function g(e){const t=i.getBoundingClientRect();Zo.x=(e.clientX-t.left)/t.width*2-1,Zo.y=-(e.clientY-t.top)/t.height*2+1}s(),this.enabled=!0,this.transformGroup=!1,this.activate=s,this.deactivate=r,this.dispose=d,this.getObjects=u,this.getRaycaster=p}}var en,tn=i(4239),on={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)},Out:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin(5*(e-.1)*Math.PI)+1},InOut:function(e){return 0===e?0:1===e?1:(e*=2,e<1?-.5*Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)+1)}},Back:{In:function(e){var t=1.70158;return e*e*((t+1)*e-t)},Out:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},Bounce:{In:function(e){return 1-on.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*on.Bounce.In(2*e):.5*on.Bounce.Out(2*e-1)+.5}}};en="undefined"===typeof self&&"undefined"!==typeof process&&process.hrtime?function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!==typeof self&&void 0!==self.performance&&void 0!==self.performance.now?self.performance.now.bind(self.performance):void 0!==Date.now?Date.now:function(){return(new Date).getTime()};var nn=en,ln=function(){function e(){this._tweens={},this._tweensAddedDuringUpdate={}}return e.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map((function(t){return e._tweens[t]}))},e.prototype.removeAll=function(){this._tweens={}},e.prototype.add=function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},e.prototype.remove=function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},e.prototype.update=function(e,t){void 0===e&&(e=nn()),void 0===t&&(t=!1);var i=Object.keys(this._tweens);if(0===i.length)return!1;while(i.length>0){this._tweensAddedDuringUpdate={};for(var o=0;o<i.length;o++){var n=this._tweens[i[o]],l=!t;n&&!1===n.update(e,l)&&!t&&delete this._tweens[i[o]]}i=Object.keys(this._tweensAddedDuringUpdate)}return!0},e}(),an={Linear:function(e,t){var i=e.length-1,o=i*t,n=Math.floor(o),l=an.Utils.Linear;return t<0?l(e[0],e[1],o):t>1?l(e[i],e[i-1],i-o):l(e[n],e[n+1>i?i:n+1],o-n)},Bezier:function(e,t){for(var i=0,o=e.length-1,n=Math.pow,l=an.Utils.Bernstein,a=0;a<=o;a++)i+=n(1-t,o-a)*n(t,a)*e[a]*l(o,a);return i},CatmullRom:function(e,t){var i=e.length-1,o=i*t,n=Math.floor(o),l=an.Utils.CatmullRom;return e[0]===e[i]?(t<0&&(n=Math.floor(o=i*(1+t))),l(e[(n-1+i)%i],e[n],e[(n+1)%i],e[(n+2)%i],o-n)):t<0?e[0]-(l(e[0],e[0],e[1],e[1],-o)-e[0]):t>1?e[i]-(l(e[i],e[i],e[i-1],e[i-1],o-i)-e[i]):l(e[n?n-1:0],e[n],e[i<n+1?i:n+1],e[i<n+2?i:n+2],o-n)},Utils:{Linear:function(e,t,i){return(t-e)*i+e},Bernstein:function(e,t){var i=an.Utils.Factorial;return i(e)/i(t)/i(e-t)},Factorial:function(){var e=[1];return function(t){var i=1;if(e[t])return e[t];for(var o=t;o>1;o--)i*=o;return e[t]=i,i}}(),CatmullRom:function(e,t,i,o,n){var l=.5*(i-e),a=.5*(o-t),s=n*n,r=n*s;return(2*t-2*i+l+a)*r+(-3*t+3*i-2*l-a)*s+l*n+t}}},sn=function(){function e(){}return e.nextId=function(){return e._nextId++},e._nextId=0,e}(),rn=new ln,dn=function(){function e(e,t){void 0===t&&(t=rn),this._object=e,this._group=t,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=on.Linear.None,this._interpolationFunction=an.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=sn.nextId(),this._isChainStopped=!1,this._goToEnd=!1}return e.prototype.getId=function(){return this._id},e.prototype.isPlaying=function(){return this._isPlaying},e.prototype.isPaused=function(){return this._isPaused},e.prototype.to=function(e,t){return this._valuesEnd=Object.create(e),void 0!==t&&(this._duration=t),this},e.prototype.duration=function(e){return this._duration=e,this},e.prototype.start=function(e){if(this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed)for(var t in this._reversed=!1,this._valuesStartRepeat)this._swapEndStartRepeatValues(t),this._valuesStart[t]=this._valuesStartRepeat[t];return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=void 0!==e?"string"===typeof e?nn()+parseFloat(e):e:nn(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},e.prototype._setupProperties=function(e,t,i,o){for(var n in i){var l=e[n],a=Array.isArray(l),s=a?"array":typeof l,r=!a&&Array.isArray(i[n]);if("undefined"!==s&&"function"!==s){if(r){var d=i[n];if(0===d.length)continue;d=d.map(this._handleRelativeValue.bind(this,l)),i[n]=[l].concat(d)}if("object"!==s&&!a||!l||r)"undefined"===typeof t[n]&&(t[n]=l),a||(t[n]*=1),o[n]=r?i[n].slice().reverse():t[n]||0;else{for(var u in t[n]=a?[]:{},l)t[n][u]=l[u];o[n]=a?[]:{},this._setupProperties(l,t[n],i[n],o[n])}}}},e.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},e.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},e.prototype.pause=function(e){return void 0===e&&(e=nn()),this._isPaused||!this._isPlaying||(this._isPaused=!0,this._pauseStart=e,this._group&&this._group.remove(this)),this},e.prototype.resume=function(e){return void 0===e&&(e=nn()),this._isPaused&&this._isPlaying?(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this):this},e.prototype.stopChainedTweens=function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop();return this},e.prototype.group=function(e){return this._group=e,this},e.prototype.delay=function(e){return this._delayTime=e,this},e.prototype.repeat=function(e){return this._initialRepeat=e,this._repeat=e,this},e.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},e.prototype.yoyo=function(e){return this._yoyo=e,this},e.prototype.easing=function(e){return this._easingFunction=e,this},e.prototype.interpolation=function(e){return this._interpolationFunction=e,this},e.prototype.chain=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._chainedTweens=e,this},e.prototype.onStart=function(e){return this._onStartCallback=e,this},e.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},e.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},e.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},e.prototype.onStop=function(e){return this._onStopCallback=e,this},e.prototype.update=function(e,t){if(void 0===e&&(e=nn()),void 0===t&&(t=!0),this._isPaused)return!0;var i,o,n=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(e>n)return!1;t&&this.start(e)}if(this._goToEnd=!1,e<this._startTime)return!0;!1===this._onStartCallbackFired&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),o=(e-this._startTime)/this._duration,o=0===this._duration||o>1?1:o;var l=this._easingFunction(o);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,l),this._onUpdateCallback&&this._onUpdateCallback(this._object,o),1===o){if(this._repeat>0){for(i in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat)this._yoyo||"string"!==typeof this._valuesEnd[i]||(this._valuesStartRepeat[i]=this._valuesStartRepeat[i]+parseFloat(this._valuesEnd[i])),this._yoyo&&this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i];return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=e+this._repeatDelayTime:this._startTime=e+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var a=0,s=this._chainedTweens.length;a<s;a++)this._chainedTweens[a].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},e.prototype._updateProperties=function(e,t,i,o){for(var n in i)if(void 0!==t[n]){var l=t[n]||0,a=i[n],s=Array.isArray(e[n]),r=Array.isArray(a),d=!s&&r;d?e[n]=this._interpolationFunction(a,o):"object"===typeof a&&a?this._updateProperties(e[n],l,a,o):(a=this._handleRelativeValue(l,a),"number"===typeof a&&(e[n]=l+(a-l)*o))}},e.prototype._handleRelativeValue=function(e,t){return"string"!==typeof t?t:"+"===t.charAt(0)||"-"===t.charAt(0)?e+parseFloat(t):parseFloat(t)},e.prototype._swapEndStartRepeatValues=function(e){var t=this._valuesStartRepeat[e],i=this._valuesEnd[e];this._valuesStartRepeat[e]="string"===typeof i?this._valuesStartRepeat[e]+parseFloat(i):this._valuesEnd[e],this._valuesEnd[e]=t},e}(),un="18.6.4",pn=sn.nextId,cn=rn,mn=cn.getAll.bind(cn),hn=cn.removeAll.bind(cn),gn=cn.add.bind(cn),_n=cn.remove.bind(cn),fn=cn.update.bind(cn),vn={Easing:on,Group:ln,Interpolation:an,now:nn,Sequence:sn,nextId:pn,Tween:dn,VERSION:un,getAll:mn,removeAll:hn,add:gn,remove:_n,update:fn},wn=vn;class yn{constructor(e){this.container=document.querySelector(e),this.camera,this.scene,this.renderer,this.controls,this.model,this.loadingManager=new V.lLk,this.fileLoaderMap={glb:new Fo.E,fbx:new Oo.y(this.loadingManager),gltf:new Fo.E,obj:new jo.L(this.loadingManager)},this.modelAnimation,this.animationMixer,this.animationColock=new V.SUY,this.animationFrame,this.rotationAnimationFrame,this.animateClipAction=null,this.loopMap={LoopOnce:V.jAl,LoopRepeat:V.YKA,LoopPingPong:V.uEv},this.skeletonHelper,this.gridHelper,this.axesHelper,this.ambientLight,this.directionalLight,this.directionalLightHelper,this.pointLight,this.pointLightHelper,this.spotLight,this.spotLightHelper,this.planeGeometry,this.modelMaterialList,this.effectComposer,this.outlinePass,this.renderAnimation,this.raycaster=new V.iMs,this.mouse=new V.FM8,this.modelTextureMap,this.glowComposer,this.unrealBloomPass,this.glowMaterialList,this.materials={},this.dragControls,this.hoverMeshTag=!1,this.onWindowResizesListener,this.onMouseClickListener,this.onMouseDownListener,this.onMouseMoveListener,this.modelProgressCallback=e=>e}init(){return new Promise((async(e,t)=>{this.initRender(),this.initCamera(),this.initScene(),this.initControls(),this.createHelper(),this.createLight(),this.addEvenListMouseLisatener();const i=await this.setModel({filePath:"threeFile/glb/glb-9.glb",fileType:"glb",decomposeName:"transformers_3"});this.createEffectComposer(),this.sceneAnimation(),e(i)}))}initScene(){this.scene=new V.xsS;const e=(new V.dpR).load(i(72));e.mapping=V.dSO,this.scene.background=e,this.scene.environment=e}initCamera(){const{clientHeight:e,clientWidth:t}=this.container;this.camera=new V.cPb(45,t/e,.25,1e3)}initRender(){this.renderer=new V.CP7({antialias:!0,alpha:!0}),this.renderer.setPixelRatio(window.devicePixelRatio);const{clientHeight:e,clientWidth:t}=this.container;this.renderer.setSize(t,e),this.renderer.toneMapping=V.LY2,this.renderer.outputColorSpace=V.KI_,this.renderer.toneMappingExposure=2,this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=V.ntZ,this.container.appendChild(this.renderer.domElement)}sceneAnimation(){this.renderAnimation=requestAnimationFrame((()=>this.sceneAnimation())),this.controls.update(),this.scene.traverse((e=>{e instanceof V.xsS&&(this.materials.scene=e.background,e.background=null),!this.glowMaterialList.includes(e.name)&&e.isMesh&&(this.materials[e.uuid]=e.material,e.material=new V.vBJ({color:"black"}))})),this.glowComposer.render(),this.scene.traverse((e=>{this.materials[e.uuid]&&(e.material=this.materials[e.uuid],delete this.materials[e.uuid]),e instanceof V.xsS&&(e.background=this.materials.scene,delete this.materials.scene)})),wn.update(),this.effectComposer.render()}addEvenListMouseLisatener(){this.onWindowResizesListener=this.onWindowResizes.bind(this),window.addEventListener("resize",this.onWindowResizesListener),this.onMouseClickListener=this.onMouseClickModel.bind(this),this.container.addEventListener("click",this.onMouseClickListener),this.onMouseDownListener=this.onMouseDownModel.bind(this),this.container.addEventListener("mousedown",this.onMouseDownListener),this.onMouseMoveListener=this.onMouseMoveModel.bind(this),this.container.addEventListener("mousemove",this.onMouseMoveListener)}initControls(){this.controls=new Ho.z(this.camera,this.renderer.domElement),this.controls.enablePan=!1}setModel({filePath:e,fileType:t,scale:i,map:o,position:n,decomposeName:l}){return new Promise(((a,s)=>{const r=this.fileLoaderMap[t];if(["glb","gltf"].includes(t)){const e=new Bo;e.setDecoderPath("./threeFile/gltf/"),r.setDRACOLoader(e)}r.load(e,(e=>{switch(t){case"glb":this.model=e.scene,this.skeletonHelper=new V._YX(e.scene),this.modelAnimation=e.animations||[];break;case"fbx":this.model=e;break;case"gltf":this.model=e.scene,this.skeletonHelper=new V._YX(e.scene),this.modelAnimation=e.animations||[];break;case"obj":this.model=e,this.skeletonHelper=new V._YX(e),this.modelAnimation=e.animations||[];break;default:break}if(this.model.decomposeName=l,this.getModelMeaterialList(o),this.setModelPositionSize(),i&&this.model.scale.set(i,i,i),this.model.position.set(0,-.5,0),n){const{x:e,y:t,z:i}=n;this.model.position.set(e,t,i)}this.skeletonHelper.visible=!1,this.scene.add(this.skeletonHelper),this.glowMaterialList=this.modelMaterialList.map((e=>e.name)),this.scene.add(this.model),a(!0)}),(e=>{this.modelProgressCallback(e.loaded)}),(e=>{U.z8.error("文件错误"),console.log(e),s()}))}))}onProgress(e){"function"==typeof e&&(this.modelProgressCallback=e)}createHelper(){this.gridHelper=new V.VLJ(4,10,"rgb(193,193,193)","rgb(193,193,193)"),this.gridHelper.position.set(0,-.59,-.1),this.gridHelper.visible=!1,this.scene.add(this.gridHelper),this.axesHelper=new V.y8_(2),this.axesHelper.visible=!1,this.scene.add(this.axesHelper),this.renderer.shadowMap.enabled=!0}createLight(){this.ambientLight=new V.Mig("#fff",.8),this.scene.add(this.ambientLight),this.directionalLight=new V.Ox3("#1E90FF",1),this.directionalLight.position.set(-1.44,2.2,1),this.directionalLight.castShadow=!0,this.directionalLight.visible=!1,this.scene.add(this.directionalLight),this.directionalLightHelper=new V.cBI(this.directionalLight,.5),this.directionalLightHelper.visible=!1,this.scene.add(this.directionalLightHelper),this.pointLight=new V.cek(16711680,1,100),this.pointLight.visible=!1,this.scene.add(this.pointLight),this.pointLightHelper=new V.xG9(this.pointLight,.5),this.pointLightHelper.visible=!1,this.scene.add(this.pointLightHelper),this.spotLight=new V.PMe("#323636",440),this.spotLight.visible=!1,this.spotLight.map=(new V.dpR).load(i(8208)),this.spotLight.decay=2,this.spotLight.shadow.mapSize.width=1920,this.spotLight.shadow.mapSize.height=1080,this.spotLight.shadow.camera.near=1,this.spotLight.shadow.camera.far=10,this.scene.add(this.spotLight),this.spotLightHelper=new V.FvO(this.spotLight),this.spotLightHelper.visible=!1,this.scene.add(this.spotLightHelper);const e=new V._12(4,4);var t=new V.Wid({color:"#939393"});this.planeGeometry=new V.Kj0(e,t),this.planeGeometry.name="planeGeometry",this.planeGeometry.rotation.x=-Math.PI/2,this.planeGeometry.position.set(0,-.5,0),this.planeGeometry.receiveShadow=!0,this.planeGeometry.visible=!1,this.scene.add(this.planeGeometry)}createEffectComposer(){const{clientHeight:e,clientWidth:t}=this.container;this.effectComposer=new Io.x(this.renderer);const i=new Eo.C(this.scene,this.camera);this.effectComposer.addPass(i),this.outlinePass=new To.f(new V.FM8(t,e),this.scene,this.camera),this.outlinePass.visibleEdgeColor=new V.Ilk("#FF8C00"),this.outlinePass.hiddenEdgeColor=new V.Ilk("#8a90f3"),this.outlinePass.edgeGlow=2,this.outlinePass.edgeThickness=1,this.outlinePass.edgeStrength=4,this.outlinePass.pulsePeriod=100,this.effectComposer.addPass(this.outlinePass);let o=new Ro.T(Do.C);const n=this.renderer.getPixelRatio();o.uniforms.resolution.value.set(1/(t*n),1/(e*n)),o.renderToScreen=!0,o.needsSwap=!0,this.effectComposer.addPass(o),this.unrealBloomPass=new zo.m(new V.FM8(t,e),0,0,0),this.unrealBloomPass.threshold=0,this.unrealBloomPass.strength=0,this.unrealBloomPass.radius=0,this.unrealBloomPass.renderToScreen=!1,this.glowComposer=new Io.x(this.renderer),this.glowComposer.renderToScreen=!1,this.glowComposer.addPass(new Eo.C(this.scene,this.camera)),this.glowComposer.addPass(this.unrealBloomPass);let l=new Ro.T(new V.jyz({uniforms:{baseTexture:{value:null},bloomTexture:{value:this.glowComposer.renderTarget2.texture},tDiffuse:{value:null}},vertexShader:r.C7,fragmentShader:r.zH,defines:{}}),"baseTexture");l.renderToScreen=!0,l.needsSwap=!0,this.effectComposer.addPass(l)}onSwitchModel(e){return new Promise((async(t,i)=>{try{this.scene.traverse((e=>{"Mesh"===e.type&&(e.geometry.dispose(),e.material.dispose())})),cancelAnimationFrame(this.animationFrame),cancelAnimationFrame(this.rotationAnimationFrame),this.scene.remove(this.model),this.modelTextureMap=[],this.onResettingLight();const i=document.getElementById("mesh-txt");document.body.style.cursor="",i.style.display="none",this.dragControls&&this.dragControls.dispose(),this.renderer.toneMappingExposure=2,Object.assign(this.unrealBloomPass,{threshold:0,strength:0,radius:0}),this.skeletonHelper.visible=!1;const o={gridHelper:!1,x:0,y:-.59,z:-.1,positionX:0,positionY:-.5,positionZ:0,divisions:10,size:4,color:"rgb(193,193,193)",axesHelper:!1,axesSize:1.8};this.onSetModelGridHelper(o),this.onSetModelGridHelperSize(o),this.onSetModelAxesHelper(o);const n=await this.setModel(e);t({load:n,filePath:e.filePath})}catch{i()}}))}onWindowResizes(){if(!this.container)return!1;const{clientHeight:e,clientWidth:t}=this.container;this.camera.aspect=t/e,this.camera.updateProjectionMatrix(),this.renderer.setSize(t,e),this.effectComposer.setSize(t,e),this.glowComposer.setSize(t,e)}onClearModelData(){cancelAnimationFrame(this.rotationAnimationFrame),cancelAnimationFrame(this.renderAnimation),cancelAnimationFrame(this.animationFrame),this.container.removeEventListener("click",this.onMouseClickListener),this.container.removeEventListener("mousedown",this.onMouseDownListener),this.container.removeEventListener("mousemove",this.onMouseMoveListener),window.removeEventListener("resize",this.onWindowResizesListener),this.scene.traverse((e=>{"Mesh"===e.type&&(e.geometry.dispose(),e.material.dispose())})),this.scene.clear(),this.renderer.clear(),this.container=null,this.camera=null,this.scene=null,this.renderer=null,this.controls=null,this.model=null,this.fileLoaderMap=null,this.modelAnimation=null,this.animationMixer=null,this.animationColock=null,this.animationFrame=null,this.rotationAnimationFrame=null,this.animateClipAction=null,this.loopMap=null,this.skeletonHelper=null,this.gridHelper=null,this.axesHelper=null,this.ambientLight=null,this.directionalLight=null,this.directionalLightHelper=null,this.pointLight=null,this.pointLightHelper=null,this.spotLight=null,this.spotLightHelper=null,this.planeGeometry=null,this.modelMaterialList=null,this.effectComposer=null,this.outlinePass=null,this.renderAnimation=null,this.raycaster,this.mouse=null,this.modelTextureMap=null,this.glowComposer=null,this.unrealBloomPass=null,this.glowMaterialList=null,this.materials=null,this.dragControls=null,this.hoverMeshTag=null}onSetSceneColor(e){this.scene.background=new V.Ilk(e)}onSetSceneImage(e){this.scene.background=(new V.dpR).load(e)}onSetSceneViewImage(e){const t=(new V.dpR).load(e);t.mapping=V.dSO,this.scene.background=t,this.scene.environment=t}getModelMeaterialList(e){const t=!!e;this.modelMaterialList=[],this.modelTextureMap=[];let i=0;this.model.traverse((o=>{const{uuid:n}=o;if(o.isMesh){if(o.castShadow=!0,o.frustumCulled=!1,i++,o.material){const e=Array.isArray(o.material)?o.material:[o.material],{name:t,color:l,map:a}=o.material;o.material=new V.Wid({map:a,transparent:!0,color:l,name:t}),this.modelMaterialList.push(o);const{url:s,mapId:r}=this.getModelMaps(e,n),d={meshName:o.name,material:o.material,url:s,mapId:r+"_"+i};o.mapId=r+"_"+i,this.modelTextureMap.push(d)}if(o.material&&t){const t=(new V.dpR).load(e),{color:l,name:a}=o.material;o.material=new V.Wid({map:t,name:a,transparent:!0,color:l}),o.mapId=n+"_"+i,this.modelTextureMap=[{meshName:o.name,material:o.material,url:e,mapId:n+"_"+i}]}}}))}setModelPositionSize(){this.model.updateMatrixWorld();const e=(new V.ZzF).setFromObject(this.model),t=e.getSize(new V.Pa4),i=e.getCenter(new V.Pa4),o=Math.max(t.x,t.y,t.z),n=2.5,l=n/(o>1?o:.5);this.model.scale.set(l,l,l),this.controls.maxDistance=10*t.length(),this.camera.position.set(0,2,6),this.camera.lookAt(i),this.camera.updateProjectionMatrix()}getModelMaps(e,t){let i={};return e.forEach((e=>{if(e.map&&e.map.image){const t=document.createElement("canvas"),{width:o,height:n}=e.map.image;t.width=o,t.height=n;const l=t.getContext("2d");l.drawImage(e.map.image,0,0),i={url:t.toDataURL("image/png"),mapId:e.uuid}}})),i}onSetModelMaterial(e){const{color:t,wireframe:i,depthWrite:o,opacity:n}=e,l=tn.Z.state.selectMesh.uuid,a=this.scene.getObjectByProperty("uuid",l);a&&a.material&&(a.material.color.set(new V.Ilk(t)),a.material.wireframe=i,a.material.depthWrite=o,a.material.transparent=!0,a.material.opacity=n)}onSetModelMap({material:e,mapId:t,meshName:i}){const o=tn.Z.state.selectMesh.uuid,n=this.scene.getObjectByProperty("uuid",o),{name:l,color:a}=n.material;n.material=new V.Wid({map:e.map,transparent:!0,color:a,name:l}),n.mapId=t,n.meshFrom=i}onSetSystemModelMap({id:e,url:t}){const i=tn.Z.state.selectMesh.uuid,o=this.scene.getObjectByProperty("uuid",i),{name:n,color:l}=o.material,a=(new V.dpR).load(t);o.material=new V.Wid({map:a,transparent:!0,color:l,name:n}),o.mapId=e,o.meshFrom=e}onChangeModelMeaterial(e){const t=this.model.getObjectByName(e);return this.outlinePass.selectedObjects=[t],tn.Z.commit("SELECT_MESH",t),t}onMouseDownModel(){if(this.modelAnimation.length)return!1;const{clientHeight:e,clientWidth:t,offsetLeft:i,offsetTop:o}=this.container;this.mouse.x=(event.clientX-i)/t*2-1,this.mouse.y=-(event.clientY-o)/e*2+1,this.raycaster.setFromCamera(this.mouse,this.camera);const n=this.raycaster.intersectObjects(this.scene.children).filter((e=>e.object.isMesh));if(n.length>0){const e=n[0].object;this.outlinePass.selectedObjects=[e],tn.Z.commit("SELECT_MESH",e)}else this.outlinePass.selectedObjects=[],tn.Z.commit("SELECT_MESH",{})}onMouseClickModel(e){if(!this.modelAnimation.length)return!1;const{clientHeight:t,clientWidth:i,offsetLeft:o,offsetTop:n}=this.container;this.mouse.x=(e.clientX-o)/i*2-1,this.mouse.y=-(e.clientY-n)/t*2+1,this.raycaster.setFromCamera(this.mouse,this.camera);const l=this.raycaster.intersectObjects(this.scene.children).filter((e=>e.object.isMesh));if(l.length>0){const e=l[0].object;this.outlinePass.selectedObjects=[e],tn.Z.commit("SELECT_MESH",e)}else this.outlinePass.selectedObjects=[],tn.Z.commit("SELECT_MESH",{})}onGetEditMeshList(){const e=[];return this.model.traverse((t=>{if(t.isMesh&&t.material){const{color:i,opacity:o,depthWrite:n,wireframe:l}=t.material,a={meshName:t.name,meshFrom:t.meshFrom,color:i.getStyle(),opacity:o,depthWrite:n,wireframe:l};e.push(a)}})),e}onSetUnrealBloomPass(e){const{glow:t,threshold:i,strength:o,radius:n,toneMappingExposure:l}=e;t?(this.unrealBloomPass.threshold=i,this.unrealBloomPass.strength=o,this.unrealBloomPass.radius=n,this.renderer.toneMappingExposure=l):(this.unrealBloomPass.threshold=0,this.unrealBloomPass.strength=0,this.unrealBloomPass.radius=0,this.renderer.toneMappingExposure=l)}setModelMeshDecompose({decompose:e}){if(this.glowMaterialList.length<=1)return!1;const t=(e,t)=>{const i=new wn.Tween(e.position);i.to(t,500),i.onUpdate((function(t){e.position.set(t.x||0,t.y||0,t.z||0)})),i.start()},i=this.glowMaterialList.length,o=2*Math.PI/i;this.glowMaterialList.forEach(((i,n)=>{const l=this.model.getObjectByName(i),{decomposeName:a}=this.model;if("Mesh"==l.type)if(r.lY[a]&&r.lY[a][i]){const o={x:0,y:0,z:0},{x:n,y:s,z:d}=r.lY[a][i];"straight"==n?o.x+=e:"burden"==n&&(o.x-=e),"straight"==s?o.y+=e:"burden"==s&&(o.y-=e),"straight"==d?o.z+=e:"burden"==d&&(o.z-=e),t(l,o)}else{const i=n*o,a=e*Math.cos(i),s=e*Math.sin(i),r={x:a,y:s,z:0};t(l,r)}}))}setModelMeshDrag({modelDrag:e}){e?(this.dragControls=new Qo(this.modelMaterialList,this.camera,this.renderer.domElement),this.dragControls.addEventListener("dragstart",(()=>{this.controls.enabled=!1})),this.dragControls.addEventListener("dragend",(()=>{this.controls.enabled=!0}))):this.dragControls&&this.dragControls.dispose()}setModelMeshTag({hoverMeshTag:e}){this.hoverMeshTag=e}onMouseMoveModel(e){if(this.modelAnimation.length)return!1;const{clientHeight:t,clientWidth:i,offsetLeft:o,offsetTop:n}=this.container;this.mouse.x=(e.clientX-o)/i*2-1,this.mouse.y=-(e.clientY-n)/t*2+1,this.raycaster.setFromCamera(this.mouse,this.camera);const l=this.raycaster.intersectObjects(this.scene.children).filter((e=>e.object.isMesh&&this.glowMaterialList.includes(e.object.name)));if(l.length>0){const t=document.getElementById("mesh-txt");if(this.modelAnimation.length)return document.body.style.cursor="pointer",!1;if(this.hoverMeshTag){const i=l[0].object;t.innerHTML=i.name,t.style.display="block",t.style.top=e.clientY-n+"px",t.style.left=e.clientX-o+20+"px"}document.body.style.cursor="pointer"}else{const e=document.getElementById("mesh-txt");document.body.style.cursor="",e.style.display="none"}}getMeshDragPosition(){const e=[];return this.modelMaterialList.forEach((t=>{const i=this.model.getObjectByProperty("name",t.name),o={name:t.name,...i.position};e.push(o)})),e}onSetModelAmbientLight({ambientLight:e,ambientLightColor:t,ambientLightIntensity:i}){this.ambientLight.visible=e,this.ambientLight.intensity=i,this.ambientLight.color.set(t)}onSetModelDirectionalLight(e){const{directionaShadow:t,directionalHorizontal:i,directionalVertical:o,directionalSistance:n,directionalLight:l,directionalLightColor:a,directionalLightIntensity:s,directionalLightHelper:r}=e;this.directionalLight.visible=l,this.directionalLightHelper.visible=r&&l,this.directionalLight.intensity=s,this.directionalLight.castShadow=t,this.directionalLight.color.set(a);const{x:d,y:u,z:p}=(0,po.E3)(i,o,n);this.directionalLight.position.set(d,u,p),this.directionalLightHelper.update()}onSetModelPointLight(e){const{pointHorizontal:t,pointVertical:i,pointSistance:o,pointLight:n,pointLightColor:l,pointLightIntensity:a,pointLightHelper:s}=e;this.pointLight.visible=n,this.pointLightHelper.visible=n&&s,this.pointLight.intensity=a,this.pointLight.color.set(l);const{x:r,y:d,z:u}=(0,po.E3)(t,i,o);this.pointLight.position.set(r,d,u),this.pointLightHelper.update()}onSetModelSpotLight(e){const{spotDistance:t,spotCastShadow:i,spotLightHelper:o,spotFocus:n,spotPenumbra:l,spotAngle:a,spotLight:s,spotLightColor:r,spotLightIntensity:d,spotHorizontal:u,spotVertical:p,spotSistance:c}=e;this.spotLight.visible=s,this.spotLightHelper.visible=s&&o,this.spotLight.intensity=d,this.spotLight.angle=a,this.spotLight.penumbra=l,this.spotLight.shadow.focus=n,this.spotLight.castShadow=i,this.spotLight.distance=t,this.spotLight.color.set(r);const{x:m,y:h,z:g}=(0,po.E3)(u,p,c);this.spotLight.position.set(m,h,g),this.spotLightHelper.update()}onSetModelPlaneGeometry({planeGeometry:e,planeColor:t,planeWidth:i,planeHeight:o}){this.planeGeometry.visible=e,this.planeGeometry.geometry=new V._12(i,o),this.planeGeometry.material.color.set(t),this.planeGeometry.geometry.verticesNeedUpdate=!0}onResettingLight(){const e={planeGeometry:!1,planeColor:"#939393",planeWidth:7,planeHeight:7,ambientLight:!0,ambientLightColor:"#fff",ambientLightIntensity:.8,directionalLight:!1,directionalLightHelper:!0,directionalLightColor:"#1E90FF",directionalLightIntensity:1,directionalHorizontal:-1.26,directionalVertical:-3.85,directionalSistance:2.98,directionaShadow:!0,pointLight:!1,pointLightHelper:!0,pointLightColor:"#1E90FF",pointLightIntensity:1,pointHorizontal:-4.21,pointVertical:-4.1,pointSistance:2.53,spotLight:!1,spotLightColor:"#323636",spotLightIntensity:400,spotHorizontal:-3.49,spotVertical:-4.37,spotSistance:4.09,spotAngle:.5,spotPenumbra:1,spotFocus:1,spotCastShadow:!0,spotLightHelper:!0,spotDistance:20};this.onSetModelAmbientLight(e),this.onSetModelDirectionalLight(e),this.onSetModelPointLight(e),this.onSetModelSpotLight(e),this.onSetModelPlaneGeometry(e)}onStartModelAnimaion(e){this.onSetModelAnimaion(e),cancelAnimationFrame(this.animationFrame),this.animationFrameFun()}onSetModelAnimaion({animationName:e,loop:t,timeScale:i,weight:o}){this.animationMixer=new V.Xcj(this.model);const n=V.m7l.findByName(this.modelAnimation,e);n&&(this.animateClipAction=this.animationMixer.clipAction(n),this.animateClipAction.setEffectiveTimeScale(i),this.animateClipAction.setEffectiveWeight(o),this.animateClipAction.setLoop(this.loopMap[t]),this.animateClipAction.play())}animationFrameFun(){this.animationFrame=requestAnimationFrame((()=>this.animationFrameFun())),this.animationMixer&&this.animationMixer.update(this.animationColock.getDelta())}onClearAnimation(){this.animateClipAction&&(this.animationMixer.stopAllAction(),this.animationMixer.update(0))}onSetRotation(e){const{rotationVisible:t,rotationType:i,rotationSpeed:o}=e;t?(cancelAnimationFrame(this.rotationAnimationFrame),this.rotationAnimationFun(i,o)):(cancelAnimationFrame(this.rotationAnimationFrame),this.model.rotation.set(0,0,0))}onSetRotationType(e){const{rotationType:t,rotationSpeed:i}=e;this.model.rotation.set(0,0,0),cancelAnimationFrame(this.rotationAnimationFrame),this.rotationAnimationFun(t,i)}rotationAnimationFun(e,t){this.rotationAnimationFrame=requestAnimationFrame((()=>this.rotationAnimationFun(e,t))),this.model.rotation[e]+=t/50}onSetModelHelper(e){this.skeletonHelper.visible=e}onSetModelRotateOnAxis(e,t){const i=Math.PI/2,{x:o,y:n,z:l}=this.model.rotation,a={x:o,y:n,z:l};a[e]+=t?i:-i;const s=new wn.Tween({x:o,y:n,z:l});s.to(a,500),s.onUpdate((t=>{this.model.rotation[e]=t[e]})),s.start()}onResultModelRotateOnAxis(){this.model.rotation.x=0,this.model.rotation.y=0,this.model.rotation.z=0}onSetModelPosition({positionX:e,positionY:t,positionZ:i}){const o=new wn.Tween(this.model.position),n={x:e,y:t,z:i};o.to(n,500),o.onUpdate((e=>{this.model.position.set(e.x||0,e.y||0,e.z||0)})),o.start()}onResultModelPosition({positionX:e,positionY:t,positionZ:i}){this.model.position.set(e,t,i)}onResetModelCamera(){this.camera.position.set(0,2,6),this.camera.lookAt(0,0,0)}onGetModelCamera(){return this.camera.position}onSetModelGridHelper({x:e,y:t,z:i,gridHelper:o,color:n}){this.gridHelper.visible=o,this.gridHelper.material.color.set(n);const l=new wn.Tween(this.gridHelper.position),a={x:e,y:t,z:i};l.to(a,500),l.onUpdate((e=>{this.gridHelper.position.set(e.x||0,e.y||0,e.z||0)})),l.start()}onSetModelGridHelperSize({x:e,y:t,z:i,size:o,divisions:n,color:l,gridHelper:a}){this.scene.remove(this.gridHelper),this.gridHelper.geometry.dispose(),this.gridHelper.material.dispose(),this.gridHelper=new V.VLJ(o,n,l,l),this.gridHelper.position.set(e,t,i),this.gridHelper.material.linewidth=.1,this.gridHelper.material.color.set(l),this.gridHelper.visible=a,this.scene.add(this.gridHelper)}onSetModelAxesHelper({axesHelper:e,axesSize:t}){this.scene.remove(this.axesHelper),this.axesHelper.geometry.dispose(),this.axesHelper.material.dispose(),this.axesHelper=new V.y8_(t),this.axesHelper.position.set(0,-.5,0),this.axesHelper.visible=e,this.scene.add(this.axesHelper)}}var bn=yn;const Cn=e=>((0,o.dD)("data-v-66179a0e"),e=e(),(0,o.Cn)(),e),Ln={key:0,id:"loading-mark"},kn={class:"loading-box"},Wn={class:"loading"},Mn=["src"],xn={class:"progress-txt"},Sn=Cn((()=>(0,o._)("div",{class:"loading-txt"}," 模型文件首次加载时间较长请耐心等待..... ",-1)));var An={__name:"PageLoading",props:{percentage:{type:Number,default:0},loading:{type:Boolean,default:!1}},setup(e){const t=e;return(e,n)=>t.loading?((0,o.wg)(),(0,o.iD)("div",Ln,[(0,o._)("div",kn,[(0,o._)("div",Wn,[(0,o._)("img",{src:i(7622)},null,8,Mn),(0,o._)("div",xn," 当前模型已加载"+(0,l.zw)(t.percentage)+" M ",1),Sn])])])):(0,o.kq)("",!0)}};const Vn=(0,x.Z)(An,[["__scopeId","data-v-66179a0e"]]);var Un=Vn;const Pn=e=>((0,o.dD)("data-v-16c544a4"),e=e(),(0,o.Cn)(),e),Hn={class:"model-page"},Fn={class:"model-header"},In=Pn((()=>(0,o._)("div",{class:"header-lf"},[(0,o._)("span",null," 基于Three.js+Vue3+Element-Plus开发的3d模型可视化编辑系统 "),(0,o._)("span",null,"作者:answer")],-1))),En={class:"header-lr"},Tn={class:"model-container"},Rn={id:"model",ref:"model"},Dn={class:"camera-icon"},zn=Pn((()=>(0,o._)("div",{id:"mesh-txt"},null,-1))),jn={class:"edit-panel",style:{minWidth:"380px"}};var On={__name:"index",setup(e){const t=(0,s.oR)(),i=(0,Uo.tv)(),{$bus:l,$local:a}=(0,o.FN)().proxy,d=(0,n.qj)({modelApi:(0,o.Fl)((()=>t.state.modelApi))}),u=(0,n.iH)(!1),p=(0,n.iH)(0),c=(0,n.iH)(null),m=(0,n.iH)(null),h=()=>{d.modelApi.onResetModelCamera()},g=()=>{const e=c.value.getPanelConfig();if(e.camera=d.modelApi.onGetModelCamera(),e.fileInfo=m.value.activeModel,e.fileInfo.filePath){a.set(r.AQ,e);const{href:t}=i.resolve({path:"/preview"});window.open(t,"_blank")}else U.z8.warning("外部模型不支持“效果预览”")},_=()=>{Po.T.confirm(" 确认要更新当前模型数据至“模板库”?","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"success"}).then((()=>{const e=c.value.getPanelConfig();if(e.camera=d.modelApi.onGetModelCamera(),e.fileInfo=m.value.activeModel,e.fileInfo.filePath){const t=a.get(r.Aw),{id:i}=e.fileInfo;Object.assign(t.filter((e=>i===e.fileInfo.id))[0],e),a.set(r.Aw,t),U.z8.success("更新成功")}else U.z8.warning("外部模型不支持“数据保存”")})).catch((()=>{}))};return(0,o.bv)((async()=>{u.value=!0;const e=new bn("#model");t.commit("SET_MODEL_API",e),l.on("page-loading",(e=>{u.value=e}));const i=await e.init();i&&(u.value=!1,p.value=0),d.modelApi.onProgress((e=>{p.value=(e/1024/1024).toFixed(2),console.log("模型已加载"+p.value+"M")}))})),(0,o.Jd)((()=>{d.modelApi.onClearModelData()})),(e,t)=>{const i=(0,o.up)("el-button"),l=(0,o.up)("Aim"),a=(0,o.up)("el-icon"),s=(0,o.up)("el-tooltip");return(0,o.wg)(),(0,o.iD)("div",Hn,[(0,o._)("header",Fn,[In,(0,o._)("div",En,[(0,o.Wm)(i,{type:"primary",icon:"Film",onClick:t[0]||(t[0]=t=>e.$router.push({path:"/modelBase"}))},{default:(0,o.w5)((()=>[(0,o.Uk)(" 模型库 ")])),_:1}),(0,o.Wm)(i,{type:"primary",icon:"Document",onClick:_},{default:(0,o.w5)((()=>[(0,o.Uk)("保存数据")])),_:1}),(0,o.Wm)(i,{type:"primary",icon:"View",onClick:g},{default:(0,o.w5)((()=>[(0,o.Uk)("效果预览")])),_:1})])]),(0,o._)("div",Tn,[(0,o.Wm)((0,n.SU)(Vo),{ref_key:"choosePanel",ref:m},null,512),(0,o._)("div",Rn,[(0,o._)("div",Dn,[(0,o.Wm)(s,{effect:"dark",content:"居中",placement:"top"},{default:(0,o.w5)((()=>[(0,o.Wm)(a,{size:18,color:"#fff",onClick:h},{default:(0,o.w5)((()=>[(0,o.Wm)(l)])),_:1})])),_:1})]),zn],512),(0,o._)("div",jn,[d.modelApi.model?((0,o.wg)(),(0,o.j4)((0,n.SU)(uo),{key:0,ref_key:"editPanel",ref:c},null,512)):(0,o.kq)("",!0)])]),(0,o.Wm)((0,n.SU)(Un),{loading:u.value,percentage:p.value},null,8,["loading","percentage"])])}}};const Gn=(0,x.Z)(On,[["__scopeId","data-v-16c544a4"]]);var Bn=Gn}}]);
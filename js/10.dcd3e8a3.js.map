{"version":3,"file":"js/10.dcd3e8a3.js","mappings":"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","sources":["webpack://ts-project/./src/components/ModelChoose/index.vue?b2df","webpack://ts-project/./src/components/ModelChoose/index.vue","webpack://ts-project/./src/components/ModelChoose/index.vue?2787","webpack://ts-project/./src/components/ModelEditPanel/EditBackground.vue?47e8","webpack://ts-project/./src/components/ModelEditPanel/EditBackground.vue","webpack://ts-project/./src/components/ModelEditPanel/EditBackground.vue?9a85","webpack://ts-project/./src/components/ModelEditPanel/EditMaterial.vue?bb64","webpack://ts-project/./src/components/ModelEditPanel/EditMaterial.vue","webpack://ts-project/./src/components/ModelEditPanel/EditMaterial.vue?a34a","webpack://ts-project/./src/components/ModelEditPanel/EditAnimation.vue?4e8a","webpack://ts-project/./src/components/ModelEditPanel/EditAnimation.vue","webpack://ts-project/./src/components/ModelEditPanel/EditAnimation.vue?1c1c","webpack://ts-project/./src/components/ModelEditPanel/EditAttribute.vue?ec11","webpack://ts-project/./src/components/ModelEditPanel/EditAttribute.vue","webpack://ts-project/./src/components/ModelEditPanel/EditAttribute.vue?9a5d","webpack://ts-project/./src/components/ModelEditPanel/EditLight.vue?3859","webpack://ts-project/./src/components/ModelEditPanel/EditLight.vue","webpack://ts-project/./src/components/ModelEditPanel/EditLight.vue?40a1","webpack://ts-project/./src/components/ModelEditPanel/EditLaterStage.vue?c050","webpack://ts-project/./src/components/ModelEditPanel/EditLaterStage.vue","webpack://ts-project/./src/components/ModelEditPanel/EditLaterStage.vue?16f1","webpack://ts-project/./src/components/ModelEditPanel/EditGeometry.vue?fef2","webpack://ts-project/./src/components/ModelEditPanel/EditGeometry.vue","webpack://ts-project/./src/components/ModelEditPanel/EditGeometry.vue?5fed","webpack://ts-project/./src/components/ModelEditPanel/index.vue?46ea","webpack://ts-project/./src/components/ModelEditPanel/index.vue","webpack://ts-project/./src/components/ModelEditPanel/index.vue?01a1","webpack://ts-project/./node_modules/three/examples/jsm/loaders/DRACOLoader.js","webpack://ts-project/./node_modules/three/examples/jsm/utils/TextureUtils.js","webpack://ts-project/./node_modules/three/examples/jsm/exporters/GLTFExporter.js","webpack://ts-project/./node_modules/three/examples/jsm/controls/DragControls.js","webpack://ts-project/./node_modules/@tweenjs/tween.js/dist/tween.esm.js","webpack://ts-project/./src/views/modelEdit/renderModel.ts","webpack://ts-project/./src/components/Loading/PageLoading.vue?3a74","webpack://ts-project/./src/components/Loading/PageLoading.vue","webpack://ts-project/./src/components/Loading/PageLoading.vue?7de0","webpack://ts-project/./src/views/modelEdit/index.vue?e136","webpack://ts-project/./src/views/modelEdit/index.vue","webpack://ts-project/./src/views/modelEdit/index.vue?d13f","webpack://ts-project/./node_modules/core-js/internals/classof.js","webpack://ts-project/./node_modules/core-js/internals/define-built-in-accessor.js","webpack://ts-project/./node_modules/core-js/internals/to-string-tag-support.js","webpack://ts-project/./node_modules/core-js/internals/to-string.js","webpack://ts-project/./node_modules/core-js/internals/validate-arguments-length.js","webpack://ts-project/./node_modules/core-js/modules/web.url-search-params.delete.js","webpack://ts-project/./node_modules/core-js/modules/web.url-search-params.has.js","webpack://ts-project/./node_modules/core-js/modules/web.url-search-params.size.js"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, withModifiers as _withModifiers, normalizeClass as _normalizeClass, createBlock as _createBlock, createCommentVNode as _createCommentVNode, unref as _unref, toDisplayString as _toDisplayString } from \"vue\"\n\nconst _hoisted_1 = { class: \"model-choose\" }\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"header\" }, [\n  /*#__PURE__*/_createElementVNode(\"span\", null, \"模型列表\")\n], -1)\nconst _hoisted_3 = { class: \"options\" }\nconst _hoisted_4 = { class: \"option\" }\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"span\", null, \"普通模型\", -1)\nconst _hoisted_6 = { class: \"options\" }\nconst _hoisted_7 = { class: \"option\" }\nconst _hoisted_8 = /*#__PURE__*/_createElementVNode(\"span\", null, \"动画模型\", -1)\nconst _hoisted_9 = { class: \"options\" }\nconst _hoisted_10 = { class: \"option\" }\nconst _hoisted_11 = /*#__PURE__*/_createElementVNode(\"span\", null, \"几何体模型\", -1)\nconst _hoisted_12 = {\n  key: 0,\n  style: { color: '#18c174 ' }\n}\nconst _hoisted_13 = [\"onDragstart\"]\nconst _hoisted_14 = { class: \"geometry-name\" }\nconst _hoisted_15 = {\n  key: 1,\n  class: \"geometry-box\"\n}\nconst _hoisted_16 = { class: \"icon\" }\nconst _hoisted_17 = /*#__PURE__*/_createElementVNode(\"div\", null, [\n  /*#__PURE__*/_createElementVNode(\"span\", null, \"添加几何体模型\")\n], -1)\nconst _hoisted_18 = { class: \"options\" }\nconst _hoisted_19 = { class: \"option\" }\nconst _hoisted_20 = /*#__PURE__*/_createElementVNode(\"span\", null, \"外部模型\", -1)\nconst _hoisted_21 = { class: \"file-name\" }\nconst _hoisted_22 = /*#__PURE__*/_createElementVNode(\"span\", null, \"当前模型:\", -1)\nconst _hoisted_23 = { class: \"upload\" }\nconst _hoisted_24 = { class: \"icon\" }\nconst _hoisted_25 = /*#__PURE__*/_createElementVNode(\"div\", null, [\n  /*#__PURE__*/_createElementVNode(\"span\", null, \"请选择(目前仅支持.glb, .obj, .gltf, .fbx格式)\")\n], -1)\n\nimport { ref, computed, getCurrentInstance, reactive, Ref } from \"vue\";\r\nimport { modelList, geometryModelList } from \"@/config/model\";\r\nimport { useStore } from \"vuex\";\r\nimport { getFileType } from \"@/utils/utilityFunction\";\r\nimport { BusType } from \"@/config/typeOptions\";\r\n\r\ninterface getCurrentInstanceOptions {\r\n  $bus: BusType;\r\n}\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'index',\n  setup(__props, { expose: __expose }) {\n\r\nconst store = useStore();\r\nconst { $bus } = (getCurrentInstance()!.proxy as unknown) as getCurrentInstanceOptions;\r\n\r\nconst state = reactive({\r\n  modelApi: computed(() => {\r\n    return store.state.modelApi;\r\n  }),\r\n});\r\n\r\n//普通模型\r\nconst ordinaryModelList = computed(() => {\r\n  return modelList.filter((v) => !v.animation);\r\n});\r\n// 动画模型\r\nconst animationModelList = computed(() => {\r\n  return modelList.filter((v) => v.animation);\r\n});\r\n\r\n//当前模型id\r\nconst activeModelId: Ref<null | number> = ref(9);\r\nconst geometryVisable = ref(false);\r\n// 当前模型信息\r\nconst activeModel: Ref<any> = ref({\r\n  name: \"变形金刚（3）\",\r\n  fileType: \"glb\",\r\n  id: 9,\r\n  animation: false,\r\n  filePath: \"threeFile/glb/glb-9.glb\",\r\n  icon: require(\"@/assets/model-icon/4.png\"),\r\n  decomposeName: \"transformers_3\",\r\n  key: \"transformers-3\",\r\n});\r\n//当前本地模型\r\nconst localModelName: Ref<null | string> = ref(null);\r\n\r\n//选择模型\r\nconst onChangeModel = async (model: {\r\n  name: string;\r\n  fileType: string;\r\n  id: number;\r\n  animation: boolean;\r\n  filePath: string;\r\n  icon: any;\r\n  decomposeName: string;\r\n  key: string;\r\n}) => {\r\n  if (model.id == activeModelId.value) return false;\r\n  geometryVisable.value = false;\r\n  activeModelId.value = model.id;\r\n  localModelName.value = null;\r\n  activeModel.value = model;\r\n  $bus.emit(\"page-loading\", true);\r\n  try {\r\n    const { load } = await state.modelApi.onSwitchModel(model);\r\n    if (load) {\r\n      $bus.emit(\"model-update\");\r\n      $bus.emit(\"page-loading\", false);\r\n    }\r\n  } catch (err) {\r\n    $bus.emit(\"page-loading\", false);\r\n  }\r\n};\r\n\r\n// 添加几何模型\r\nconst onAddGeometry = async () => {\r\n  geometryVisable.value = true;\r\n  localModelName.value = null;\r\n  activeModelId.value = null;\r\n  activeModel.value = {};\r\n  state.modelApi.clearSceneModel();\r\n};\r\n\r\n// 拖拽几何模型开始\r\nconst onDragstart = (e: any, model: any) => {\r\n  state.modelApi.setDragGeometryModel(model);\r\n};\r\n// 拖拽中\r\nconst onDrag = (event: { preventDefault: () => void }) => {\r\n  event.preventDefault();\r\n};\r\n\r\n// 选择本地模型文件\r\nconst onUpload = async (file: { name: string; raw: Blob | MediaSource }) => {\r\n  localModelName.value = file.name;\r\n  const filePath = URL.createObjectURL(file.raw);\r\n\r\n  const model = {\r\n    filePath,\r\n    fileType: getFileType(file.name),\r\n  };\r\n  $bus.emit(\"page-loading\", true);\r\n  try {\r\n    const { load, filePath } = await state.modelApi.onSwitchModel(model);\r\n    // TODO: 加载成功之后手动释放 否则会造成内存浪费\r\n    URL.revokeObjectURL(filePath);\r\n    if (load) {\r\n      $bus.emit(\"model-update\");\r\n      $bus.emit(\"page-loading\", false);\r\n      activeModelId.value = null;\r\n      geometryVisable.value = false;\r\n      activeModel.value = {};\r\n    }\r\n  } catch (err) {\r\n    localModelName.value = null;\r\n    $bus.emit(\"page-loading\", false);\r\n  }\r\n};\r\n\r\n__expose({\r\n  activeModel,\r\n});\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_Orange = _resolveComponent(\"Orange\")!\n  const _component_el_icon = _resolveComponent(\"el-icon\")!\n  const _component_el_space = _resolveComponent(\"el-space\")!\n  const _component_el_image = _resolveComponent(\"el-image\")!\n  const _component_el_col = _resolveComponent(\"el-col\")!\n  const _component_el_row = _resolveComponent(\"el-row\")!\n  const _component_el_scrollbar = _resolveComponent(\"el-scrollbar\")!\n  const _component_Paperclip = _resolveComponent(\"Paperclip\")!\n  const _component_SwitchFilled = _resolveComponent(\"SwitchFilled\")!\n  const _component_el_tooltip = _resolveComponent(\"el-tooltip\")!\n  const _component_Plus = _resolveComponent(\"Plus\")!\n  const _component_UploadFilled = _resolveComponent(\"UploadFilled\")!\n  const _component_el_upload = _resolveComponent(\"el-upload\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _hoisted_2,\n    _createElementVNode(\"div\", _hoisted_3, [\n      _createElementVNode(\"div\", _hoisted_4, [\n        _createVNode(_component_el_space, null, {\n          default: _withCtx(() => [\n            _createVNode(_component_el_icon, null, {\n              default: _withCtx(() => [\n                _createVNode(_component_Orange)\n              ]),\n              _: 1\n            }),\n            _hoisted_5\n          ]),\n          _: 1\n        })\n      ]),\n      _createVNode(_component_el_scrollbar, { \"max-height\": \"210px\" }, {\n        default: _withCtx(() => [\n          _createVNode(_component_el_row, null, {\n            default: _withCtx(() => [\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(ordinaryModelList.value, (model) => {\n                return (_openBlock(), _createBlock(_component_el_col, {\n                  style: { textAlign: 'center' },\n                  span: 12,\n                  key: model.id\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_el_image, {\n                      draggable: \"false\",\n                      onClick: _withModifiers(($event: any) => (onChangeModel(model)), [\"prevent\"]),\n                      class: _normalizeClass([\"el-img\", activeModelId.value == model.id ? 'active-model' : '']),\n                      src: model.icon,\n                      fit: \"cover\"\n                    }, null, 8, [\"onClick\", \"class\", \"src\"])\n                  ]),\n                  _: 2\n                }, 1024))\n              }), 128))\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      })\n    ]),\n    _createElementVNode(\"div\", _hoisted_6, [\n      _createElementVNode(\"div\", _hoisted_7, [\n        _createVNode(_component_el_space, null, {\n          default: _withCtx(() => [\n            _createVNode(_component_el_icon, null, {\n              default: _withCtx(() => [\n                _createVNode(_component_Paperclip)\n              ]),\n              _: 1\n            }),\n            _hoisted_8\n          ]),\n          _: 1\n        })\n      ]),\n      _createVNode(_component_el_scrollbar, { \"max-height\": \"210px\" }, {\n        default: _withCtx(() => [\n          _createVNode(_component_el_row, null, {\n            default: _withCtx(() => [\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(animationModelList.value, (model) => {\n                return (_openBlock(), _createBlock(_component_el_col, {\n                  style: { textAlign: 'center' },\n                  span: 12,\n                  key: model.id\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_el_image, {\n                      draggable: \"false\",\n                      onClick: ($event: any) => (onChangeModel(model)),\n                      class: _normalizeClass([\"el-img\", activeModelId.value == model.id ? 'active-model' : '']),\n                      src: model.icon,\n                      fit: \"cover\"\n                    }, null, 8, [\"onClick\", \"class\", \"src\"])\n                  ]),\n                  _: 2\n                }, 1024))\n              }), 128))\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      })\n    ]),\n    _createElementVNode(\"div\", _hoisted_9, [\n      _createElementVNode(\"div\", _hoisted_10, [\n        _createVNode(_component_el_space, null, {\n          default: _withCtx(() => [\n            _createVNode(_component_el_icon, null, {\n              default: _withCtx(() => [\n                _createVNode(_component_SwitchFilled)\n              ]),\n              _: 1\n            }),\n            _hoisted_11,\n            (geometryVisable.value)\n              ? (_openBlock(), _createElementBlock(\"span\", _hoisted_12, \"(可拖拽添加多个)\"))\n              : _createCommentVNode(\"\", true)\n          ]),\n          _: 1\n        })\n      ]),\n      _createVNode(_component_el_scrollbar, { \"max-height\": \"120px\" }, {\n        default: _withCtx(() => [\n          (geometryVisable.value)\n            ? (_openBlock(), _createBlock(_component_el_row, { key: 0 }, {\n                default: _withCtx(() => [\n                  (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(geometryModelList), (model) => {\n                    return (_openBlock(), _createBlock(_component_el_col, {\n                      style: { textAlign: 'center' },\n                      span: 8,\n                      key: model.type\n                    }, {\n                      default: _withCtx(() => [\n                        _createElementVNode(\"div\", {\n                          class: _normalizeClass([\"geometry\", activeModelId.value == model.id ? 'active-model' : '']),\n                          draggable: \"true\",\n                          onDragstart: (e) => onDragstart(e, model),\n                          onDrag: _cache[0] || (_cache[0] = (e) => onDrag(e))\n                        }, [\n                          _createElementVNode(\"div\", _hoisted_14, [\n                            _createVNode(_component_el_tooltip, {\n                              effect: \"dark\",\n                              content: `${model.name}:${model.type}`,\n                              placement: \"top\"\n                            }, {\n                              default: _withCtx(() => [\n                                _createElementVNode(\"b\", null, _toDisplayString(model.name), 1)\n                              ]),\n                              _: 2\n                            }, 1032, [\"content\"])\n                          ])\n                        ], 42, _hoisted_13)\n                      ]),\n                      _: 2\n                    }, 1024))\n                  }), 128))\n                ]),\n                _: 1\n              }))\n            : (_openBlock(), _createElementBlock(\"div\", _hoisted_15, [\n                _createElementVNode(\"div\", {\n                  class: \"geometry-add\",\n                  onClick: onAddGeometry\n                }, [\n                  _createElementVNode(\"div\", _hoisted_16, [\n                    _createVNode(_component_el_icon, { size: 44 }, {\n                      default: _withCtx(() => [\n                        _createVNode(_component_Plus)\n                      ]),\n                      _: 1\n                    }),\n                    _hoisted_17\n                  ])\n                ])\n              ]))\n        ]),\n        _: 1\n      })\n    ]),\n    _createElementVNode(\"div\", _hoisted_18, [\n      _createElementVNode(\"div\", _hoisted_19, [\n        _createVNode(_component_el_space, null, {\n          default: _withCtx(() => [\n            _createVNode(_component_el_icon, null, {\n              default: _withCtx(() => [\n                _createVNode(_component_UploadFilled)\n              ]),\n              _: 1\n            }),\n            _hoisted_20\n          ]),\n          _: 1\n        })\n      ]),\n      _createElementVNode(\"div\", _hoisted_21, [\n        _hoisted_22,\n        _createVNode(_component_el_tooltip, {\n          effect: \"dark\",\n          content: localModelName.value,\n          placement: \"top\"\n        }, {\n          default: _withCtx(() => [\n            _createElementVNode(\"b\", null, _toDisplayString(localModelName.value), 1)\n          ]),\n          _: 1\n        }, 8, [\"content\"])\n      ]),\n      _createVNode(_component_el_upload, {\n        action: \"\",\n        accept: \".glb,.obj,.gltf,.fbx\",\n        class: \"file-box\",\n        \"show-file-list\": false,\n        \"auto-upload\": false,\n        \"on-change\": onUpload\n      }, {\n        default: _withCtx(() => [\n          _createElementVNode(\"div\", _hoisted_23, [\n            _createElementVNode(\"div\", _hoisted_24, [\n              _createVNode(_component_el_icon, { size: 44 }, {\n                default: _withCtx(() => [\n                  _createVNode(_component_Plus)\n                ]),\n                _: 1\n              }),\n              _hoisted_25\n            ])\n          ])\n        ]),\n        _: 1\n      })\n    ])\n  ]))\n}\n}\n\n})","<template>\r\n  <div class=\"model-choose\">\r\n    <div class=\"header\">\r\n      <span>模型列表</span>\r\n    </div>\r\n    <!-- 普通模型 -->\r\n    <div class=\"options\">\r\n      <div class=\"option\">\r\n        <el-space>\r\n          <el-icon>\r\n            <Orange />\r\n          </el-icon>\r\n          <span>普通模型</span>\r\n        </el-space>\r\n      </div>\r\n      <!-- 模型列表 -->\r\n      <el-scrollbar max-height=\"210px\">\r\n        <el-row>\r\n          <el-col\r\n            :style=\"{ textAlign: 'center' }\"\r\n            :span=\"12\"\r\n            v-for=\"model in ordinaryModelList\"\r\n            :key=\"model.id\"\r\n          >\r\n            <el-image\r\n              draggable=\"false\"\r\n              @click.prevent=\"onChangeModel(model)\"\r\n              class=\"el-img\"\r\n              :class=\"activeModelId == model.id ? 'active-model' : ''\"\r\n              :src=\"model.icon\"\r\n              fit=\"cover\"\r\n            />\r\n          </el-col>\r\n        </el-row>\r\n      </el-scrollbar>\r\n    </div>\r\n    <!-- 动画模型 -->\r\n    <div class=\"options\">\r\n      <div class=\"option\">\r\n        <el-space>\r\n          <el-icon>\r\n            <Paperclip />\r\n          </el-icon>\r\n          <span>动画模型</span>\r\n        </el-space>\r\n      </div>\r\n      <!-- 模型列表 -->\r\n      <el-scrollbar max-height=\"210px\">\r\n        <el-row>\r\n          <el-col\r\n            :style=\"{ textAlign: 'center' }\"\r\n            :span=\"12\"\r\n            v-for=\"model in animationModelList\"\r\n            :key=\"model.id\"\r\n          >\r\n            <el-image\r\n              draggable=\"false\"\r\n              @click=\"onChangeModel(model)\"\r\n              class=\"el-img\"\r\n              :class=\"activeModelId == model.id ? 'active-model' : ''\"\r\n              :src=\"model.icon\"\r\n              fit=\"cover\"\r\n            />\r\n          </el-col>\r\n        </el-row>\r\n      </el-scrollbar>\r\n    </div>\r\n    <!-- 几何体模型 -->\r\n    <div class=\"options\">\r\n      <div class=\"option\">\r\n        <el-space>\r\n          <el-icon>\r\n            <SwitchFilled />\r\n          </el-icon>\r\n          <span>几何体模型</span>\r\n          <span :style=\"{ color: '#18c174 ' }\" v-if=\"geometryVisable\"\r\n            >(可拖拽添加多个)</span\r\n          >\r\n        </el-space>\r\n      </div>\r\n      <!-- 模型列表 -->\r\n      <el-scrollbar max-height=\"120px\">\r\n        <el-row v-if=\"geometryVisable\">\r\n          <el-col\r\n            :style=\"{ textAlign: 'center' }\"\r\n            :span=\"8\"\r\n            v-for=\"model in geometryModelList\"\r\n            :key=\"model.type\"\r\n          >\r\n            <div\r\n              class=\"geometry\"\r\n              :class=\"activeModelId == model.id ? 'active-model' : ''\"\r\n              draggable=\"true\"\r\n              @dragstart=\"(e) => onDragstart(e, model)\"\r\n              @drag=\"(e) => onDrag(e)\"\r\n            >\r\n              <div class=\"geometry-name\">\r\n                <el-tooltip\r\n                  effect=\"dark\"\r\n                  :content=\"`${model.name}:${model.type}`\"\r\n                  placement=\"top\"\r\n                >\r\n                  <b> {{ model.name }}</b>\r\n                </el-tooltip>\r\n              </div>\r\n            </div>\r\n          </el-col>\r\n        </el-row>\r\n        <div class=\"geometry-box\" v-else>\r\n          <div class=\"geometry-add\" @click=\"onAddGeometry\">\r\n            <div class=\"icon\">\r\n              <el-icon :size=\"44\">\r\n                <Plus />\r\n              </el-icon>\r\n              <div><span>添加几何体模型</span></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </el-scrollbar>\r\n    </div>\r\n    <!-- 外部模型 -->\r\n    <div class=\"options\">\r\n      <div class=\"option\">\r\n        <el-space>\r\n          <el-icon>\r\n            <UploadFilled />\r\n          </el-icon>\r\n          <span>外部模型</span>\r\n        </el-space>\r\n      </div>\r\n      <!-- 模型内容 -->\r\n      <div class=\"file-name\">\r\n        <span>当前模型:</span>\r\n        <el-tooltip effect=\"dark\" :content=\"localModelName\" placement=\"top\">\r\n          <b>{{ localModelName }}</b>\r\n        </el-tooltip>\r\n      </div>\r\n      <el-upload\r\n        action=\"\"\r\n        accept=\".glb,.obj,.gltf,.fbx\"\r\n        class=\"file-box\"\r\n        :show-file-list=\"false\"\r\n        :auto-upload=\"false\"\r\n        :on-change=\"onUpload\"\r\n      >\r\n        <div class=\"upload\">\r\n          <div class=\"icon\">\r\n            <el-icon :size=\"44\">\r\n              <Plus />\r\n            </el-icon>\r\n            <div><span>请选择(目前仅支持.glb, .obj, .gltf, .fbx格式)</span></div>\r\n          </div>\r\n        </div>\r\n      </el-upload>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, computed, getCurrentInstance, reactive, Ref } from \"vue\";\r\nimport { modelList, geometryModelList } from \"@/config/model\";\r\nimport { useStore } from \"vuex\";\r\nimport { getFileType } from \"@/utils/utilityFunction\";\r\nimport { BusType } from \"@/config/typeOptions\";\r\n\r\ninterface getCurrentInstanceOptions {\r\n  $bus: BusType;\r\n}\r\n\r\nconst store = useStore();\r\nconst { $bus } = (getCurrentInstance()!.proxy as unknown) as getCurrentInstanceOptions;\r\n\r\nconst state = reactive({\r\n  modelApi: computed(() => {\r\n    return store.state.modelApi;\r\n  }),\r\n});\r\n\r\n//普通模型\r\nconst ordinaryModelList = computed(() => {\r\n  return modelList.filter((v) => !v.animation);\r\n});\r\n// 动画模型\r\nconst animationModelList = computed(() => {\r\n  return modelList.filter((v) => v.animation);\r\n});\r\n\r\n//当前模型id\r\nconst activeModelId: Ref<null | number> = ref(9);\r\nconst geometryVisable = ref(false);\r\n// 当前模型信息\r\nconst activeModel: Ref<any> = ref({\r\n  name: \"变形金刚（3）\",\r\n  fileType: \"glb\",\r\n  id: 9,\r\n  animation: false,\r\n  filePath: \"threeFile/glb/glb-9.glb\",\r\n  icon: require(\"@/assets/model-icon/4.png\"),\r\n  decomposeName: \"transformers_3\",\r\n  key: \"transformers-3\",\r\n});\r\n//当前本地模型\r\nconst localModelName: Ref<null | string> = ref(null);\r\n\r\n//选择模型\r\nconst onChangeModel = async (model: {\r\n  name: string;\r\n  fileType: string;\r\n  id: number;\r\n  animation: boolean;\r\n  filePath: string;\r\n  icon: any;\r\n  decomposeName: string;\r\n  key: string;\r\n}) => {\r\n  if (model.id == activeModelId.value) return false;\r\n  geometryVisable.value = false;\r\n  activeModelId.value = model.id;\r\n  localModelName.value = null;\r\n  activeModel.value = model;\r\n  $bus.emit(\"page-loading\", true);\r\n  try {\r\n    const { load } = await state.modelApi.onSwitchModel(model);\r\n    if (load) {\r\n      $bus.emit(\"model-update\");\r\n      $bus.emit(\"page-loading\", false);\r\n    }\r\n  } catch (err) {\r\n    $bus.emit(\"page-loading\", false);\r\n  }\r\n};\r\n\r\n// 添加几何模型\r\nconst onAddGeometry = async () => {\r\n  geometryVisable.value = true;\r\n  localModelName.value = null;\r\n  activeModelId.value = null;\r\n  activeModel.value = {};\r\n  state.modelApi.clearSceneModel();\r\n};\r\n\r\n// 拖拽几何模型开始\r\nconst onDragstart = (e: any, model: any) => {\r\n  state.modelApi.setDragGeometryModel(model);\r\n};\r\n// 拖拽中\r\nconst onDrag = (event: { preventDefault: () => void }) => {\r\n  event.preventDefault();\r\n};\r\n\r\n// 选择本地模型文件\r\nconst onUpload = async (file: { name: string; raw: Blob | MediaSource }) => {\r\n  localModelName.value = file.name;\r\n  const filePath = URL.createObjectURL(file.raw);\r\n\r\n  const model = {\r\n    filePath,\r\n    fileType: getFileType(file.name),\r\n  };\r\n  $bus.emit(\"page-loading\", true);\r\n  try {\r\n    const { load, filePath } = await state.modelApi.onSwitchModel(model);\r\n    // TODO: 加载成功之后手动释放 否则会造成内存浪费\r\n    URL.revokeObjectURL(filePath);\r\n    if (load) {\r\n      $bus.emit(\"model-update\");\r\n      $bus.emit(\"page-loading\", false);\r\n      activeModelId.value = null;\r\n      geometryVisable.value = false;\r\n      activeModel.value = {};\r\n    }\r\n  } catch (err) {\r\n    localModelName.value = null;\r\n    $bus.emit(\"page-loading\", false);\r\n  }\r\n};\r\n\r\ndefineExpose({\r\n  activeModel,\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.model-choose {\r\n  min-width: 305px;\r\n  height: calc(100vh - 35px) !important;\r\n  background-color: #1b1c23;\r\n\r\n  .el-img {\r\n    width: 145px;\r\n    height: 88px;\r\n    cursor: pointer;\r\n    margin-bottom: 4px;\r\n    box-sizing: border-box;\r\n    opacity: 0.5;\r\n  }\r\n\r\n  .active-model {\r\n    border: 3px solid #18c174 !important;\r\n    opacity: 1;\r\n  }\r\n  .geometry {\r\n    color: #fff;\r\n    cursor: all-scroll;\r\n    font-size: 12px;\r\n    text-align: center;\r\n    height: 70px;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    flex-direction: column;\r\n    border: 1px solid #dcdfe6;\r\n    margin: 4px 2px;\r\n  }\r\n  .geometry-box {\r\n    padding: 0px 20px;\r\n    color: #8c939d;\r\n    box-sizing: border-box;\r\n    text-align: center;\r\n    position: relative;\r\n    overflow: hidden;\r\n    display: flex;\r\n    justify-content: center;\r\n    .geometry-add {\r\n      width: 228px;\r\n      height: 108px;\r\n      border: 1px dashed #dcdfe6;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      border-radius: 6px;\r\n      cursor: pointer;\r\n      .icon {\r\n        span {\r\n          font-size: 14px;\r\n        }\r\n      }\r\n\r\n      &:hover {\r\n        border-color: #409eff;\r\n        color: #409eff;\r\n      }\r\n    }\r\n  }\r\n  .file-box {\r\n    padding: 10px 20px;\r\n    color: #8c939d;\r\n    box-sizing: border-box;\r\n    text-align: center;\r\n    cursor: pointer;\r\n    position: relative;\r\n    overflow: hidden;\r\n    display: flex;\r\n    justify-content: center;\r\n    .upload {\r\n      width: 228px;\r\n      height: 128px;\r\n      border: 1px dashed #dcdfe6;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      border-radius: 6px;\r\n\r\n      .icon {\r\n        span {\r\n          font-size: 14px;\r\n        }\r\n      }\r\n\r\n      &:hover {\r\n        border-color: #409eff;\r\n        color: #409eff;\r\n      }\r\n    }\r\n  }\r\n\r\n  .file-name {\r\n    color: #fff;\r\n    text-align: center;\r\n    font-size: 14px;\r\n    text-overflow: ellipsis;\r\n    white-space: nowrap;\r\n    overflow: hidden;\r\n  }\r\n}\r\n</style>\r\n","import script from \"./index.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=457d43b5&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, vShow as _vShow, withDirectives as _withDirectives, unref as _unref, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, createBlock as _createBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-b8e051cc\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"edit-box\" }\nconst _hoisted_2 = { class: \"header\" }\nconst _hoisted_3 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", null, \"背景\", -1))\nconst _hoisted_4 = { class: \"icon-name\" }\nconst _hoisted_5 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", null, \" 图片\", -1))\nconst _hoisted_6 = { class: \"action-txt\" }\nconst _hoisted_7 = { class: \"check\" }\nconst _hoisted_8 = { class: \"icon-name\" }\nconst _hoisted_9 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", null, \" 颜色\", -1))\nconst _hoisted_10 = { class: \"action\" }\nconst _hoisted_11 = { class: \"check\" }\nconst _hoisted_12 = { class: \"icon-name\" }\nconst _hoisted_13 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", null, \" 全景图\", -1))\nconst _hoisted_14 = { class: \"action-txt\" }\nconst _hoisted_15 = { class: \"check\" }\n\nimport { ref, reactive, computed } from \"vue\";\r\nimport { useStore } from \"vuex\";\r\nimport { PREDEFINE_COLORS } from \"@/config/constant\";\r\nimport { backgrundList, viewImageList } from \"@/config/model\";\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'EditBackground',\n  setup(__props, { expose: __expose }) {\n\r\nconst store = useStore();\r\nconst config = reactive({\r\n  visible: true,\r\n  type: 3, //1 颜色 2 图片  3全景图\r\n  image: require(\"@/assets/image/model-bg-3.jpg\"),\r\n  viewImg: require(\"@/assets/image/view-4.png\"),\r\n  color: \"#000\",\r\n});\r\nconst activeBackgroundId = ref(3);\r\nconst activeViewImageId = ref(3);\r\nconst state = reactive({\r\n  modelApi: computed(() => {\r\n    return store.state.modelApi;\r\n  }),\r\n});\r\nconst optionsDisable = computed(() => {\r\n  const { visible } = config;\r\n  return visible ? \"\" : \"disabled\";\r\n});\r\nconst predefineColors = PREDEFINE_COLORS;\r\n//切换类型\r\nconst onChangeType = (type: number) => {\r\n  config.type = type;\r\n  switch (type) {\r\n    case 1:\r\n      state.modelApi.onSetSceneColor(config.color);\r\n      break;\r\n    case 2:\r\n      state.modelApi.onSetSceneImage(config.image);\r\n      break;\r\n    case 3:\r\n      state.modelApi.onSetSceneViewImage(config.viewImg);\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n};\r\n//选择图片\r\nconst onChangeImage = (image: { id: number, url: string }) => {\r\n  const { id, url } = image\r\n  config.image = url;\r\n  activeBackgroundId.value = id;\r\n  state.modelApi.onSetSceneImage(url);\r\n};\r\n//选择全景图\r\nconst onChangeViewImage = (image: { id: number, url: string }) => {\r\n  const { id, url } = image\r\n  config.viewImg = url;\r\n  activeViewImageId.value = id;\r\n  state.modelApi.onSetSceneViewImage(url);\r\n};\r\n// 颜色面板值发生变化\r\nconst activeChangeColor = (color: string) => {\r\n  config.color = color;\r\n  state.modelApi.onSetSceneColor(config.color);\r\n};\r\n//选择颜色\r\nconst onChangeColor = () => {\r\n  state.modelApi.onSetSceneColor(config.color);\r\n};\r\n\r\nconst onChangeBgSwitch = () => {\r\n  const { type, visible, image, viewImg } = config;\r\n  if (!visible) return state.modelApi.onSetSceneColor(\"#000\");\r\n  switch (type) {\r\n    case 1:\r\n      state.modelApi.onSetSceneColor(config.color);\r\n      break;\r\n    case 2:\r\n      state.modelApi.onSetSceneImage(image);\r\n      break;\r\n    case 3:\r\n      state.modelApi.onSetSceneViewImage(viewImg);\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n};\r\n\r\n__expose({\r\n  config,\r\n});\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_switch = _resolveComponent(\"el-switch\")!\n  const _component_Picture = _resolveComponent(\"Picture\")!\n  const _component_el_icon = _resolveComponent(\"el-icon\")!\n  const _component_el_space = _resolveComponent(\"el-space\")!\n  const _component_el_button = _resolveComponent(\"el-button\")!\n  const _component_Check = _resolveComponent(\"Check\")!\n  const _component_el_image = _resolveComponent(\"el-image\")!\n  const _component_el_col = _resolveComponent(\"el-col\")!\n  const _component_el_row = _resolveComponent(\"el-row\")!\n  const _component_el_scrollbar = _resolveComponent(\"el-scrollbar\")!\n  const _component_DataAnalysis = _resolveComponent(\"DataAnalysis\")!\n  const _component_el_color_picker = _resolveComponent(\"el-color-picker\")!\n  const _component_CameraFilled = _resolveComponent(\"CameraFilled\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _hoisted_3,\n      _createVNode(_component_el_switch, {\n        modelValue: config.visible,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((config.visible) = $event)),\n        onChange: onChangeBgSwitch\n      }, null, 8, [\"modelValue\"])\n    ]),\n    _createElementVNode(\"div\", {\n      class: _normalizeClass([\"options\", optionsDisable.value])\n    }, [\n      _createElementVNode(\"div\", {\n        class: \"option\",\n        onClick: _cache[1] || (_cache[1] = ($event: any) => (onChangeType(2)))\n      }, [\n        _createVNode(_component_el_space, null, {\n          default: _withCtx(() => [\n            _createElementVNode(\"div\", _hoisted_4, [\n              _createVNode(_component_el_space, null, {\n                default: _withCtx(() => [\n                  _createVNode(_component_el_icon, null, {\n                    default: _withCtx(() => [\n                      _createVNode(_component_Picture)\n                    ]),\n                    _: 1\n                  }),\n                  _hoisted_5\n                ]),\n                _: 1\n              })\n            ]),\n            _createElementVNode(\"div\", _hoisted_6, [\n              _createVNode(_component_el_button, {\n                type: \"primary\",\n                link: \"\"\n              }, {\n                default: _withCtx(() => [\n                  _createTextVNode(\"选择图片\")\n                ]),\n                _: 1\n              })\n            ]),\n            _withDirectives(_createElementVNode(\"div\", _hoisted_7, [\n              _createVNode(_component_el_icon, {\n                size: \"20px\",\n                color: \"#2a3ff6\"\n              }, {\n                default: _withCtx(() => [\n                  _createVNode(_component_Check)\n                ]),\n                _: 1\n              })\n            ], 512), [\n              [_vShow, config.type == 2]\n            ])\n          ]),\n          _: 1\n        })\n      ]),\n      _withDirectives(_createVNode(_component_el_scrollbar, { \"max-height\": \"250px\" }, {\n        default: _withCtx(() => [\n          _createVNode(_component_el_row, null, {\n            default: _withCtx(() => [\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(backgrundList), (background) => {\n                return (_openBlock(), _createBlock(_component_el_col, {\n                  style: { textAlign: 'center' },\n                  span: 6,\n                  key: background.id\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_el_image, {\n                      onClick: ($event: any) => (onChangeImage(background)),\n                      class: _normalizeClass([\"el-img\", activeBackgroundId.value == background.id ? 'active' : '']),\n                      src: background.url,\n                      fit: \"cover\"\n                    }, null, 8, [\"onClick\", \"class\", \"src\"])\n                  ]),\n                  _: 2\n                }, 1024))\n              }), 128))\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      }, 512), [\n        [_vShow, config.type == 2]\n      ])\n    ], 2),\n    _createElementVNode(\"div\", {\n      class: _normalizeClass([\"options\", optionsDisable.value])\n    }, [\n      _createElementVNode(\"div\", {\n        class: \"option\",\n        onClick: _cache[3] || (_cache[3] = ($event: any) => (onChangeType(1)))\n      }, [\n        _createVNode(_component_el_space, null, {\n          default: _withCtx(() => [\n            _createElementVNode(\"div\", _hoisted_8, [\n              _createVNode(_component_el_space, null, {\n                default: _withCtx(() => [\n                  _createVNode(_component_el_icon, null, {\n                    default: _withCtx(() => [\n                      _createVNode(_component_DataAnalysis)\n                    ]),\n                    _: 1\n                  }),\n                  _hoisted_9\n                ]),\n                _: 1\n              })\n            ]),\n            _createElementVNode(\"div\", _hoisted_10, [\n              _createVNode(_component_el_color_picker, {\n                predefine: _unref(predefineColors),\n                onChange: onChangeColor,\n                onActiveChange: activeChangeColor,\n                modelValue: config.color,\n                \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((config.color) = $event))\n              }, null, 8, [\"predefine\", \"modelValue\"])\n            ]),\n            _withDirectives(_createElementVNode(\"div\", _hoisted_11, [\n              _createVNode(_component_el_icon, {\n                size: \"20px\",\n                color: \"#2a3ff6\"\n              }, {\n                default: _withCtx(() => [\n                  _createVNode(_component_Check)\n                ]),\n                _: 1\n              })\n            ], 512), [\n              [_vShow, config.type == 1]\n            ])\n          ]),\n          _: 1\n        })\n      ])\n    ], 2),\n    _createElementVNode(\"div\", {\n      class: _normalizeClass([\"options\", optionsDisable.value])\n    }, [\n      _createElementVNode(\"div\", {\n        class: \"option\",\n        onClick: _cache[4] || (_cache[4] = ($event: any) => (onChangeType(3)))\n      }, [\n        _createVNode(_component_el_space, null, {\n          default: _withCtx(() => [\n            _createElementVNode(\"div\", _hoisted_12, [\n              _createVNode(_component_el_space, null, {\n                default: _withCtx(() => [\n                  _createVNode(_component_el_icon, null, {\n                    default: _withCtx(() => [\n                      _createVNode(_component_CameraFilled)\n                    ]),\n                    _: 1\n                  }),\n                  _hoisted_13\n                ]),\n                _: 1\n              })\n            ]),\n            _createElementVNode(\"div\", _hoisted_14, [\n              _createVNode(_component_el_button, {\n                type: \"primary\",\n                link: \"\"\n              }, {\n                default: _withCtx(() => [\n                  _createTextVNode(\"选择图片\")\n                ]),\n                _: 1\n              })\n            ]),\n            _withDirectives(_createElementVNode(\"div\", _hoisted_15, [\n              _createVNode(_component_el_icon, {\n                size: \"20px\",\n                color: \"#2a3ff6\"\n              }, {\n                default: _withCtx(() => [\n                  _createVNode(_component_Check)\n                ]),\n                _: 1\n              })\n            ], 512), [\n              [_vShow, config.type == 3]\n            ])\n          ]),\n          _: 1\n        })\n      ]),\n      _withDirectives(_createVNode(_component_el_scrollbar, { \"max-height\": \"350px\" }, {\n        default: _withCtx(() => [\n          _createVNode(_component_el_row, null, {\n            default: _withCtx(() => [\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(viewImageList), (view) => {\n                return (_openBlock(), _createBlock(_component_el_col, {\n                  span: 6,\n                  style: { textAlign: 'center' },\n                  key: view.id\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_el_image, {\n                      onClick: ($event: any) => (onChangeViewImage(view)),\n                      class: _normalizeClass([\"el-view\", activeViewImageId.value == view.id ? 'active' : '']),\n                      src: view.url,\n                      fit: \"cover\"\n                    }, null, 8, [\"onClick\", \"class\", \"src\"])\n                  ]),\n                  _: 2\n                }, 1024))\n              }), 128))\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      }, 512), [\n        [_vShow, config.type == 3]\n      ])\n    ], 2)\n  ]))\n}\n}\n\n})","<template>\r\n  <div class=\"edit-box\">\r\n    <div class=\"header\">\r\n      <span>背景</span>\r\n      <el-switch v-model=\"config.visible\" @change=\"onChangeBgSwitch\" />\r\n    </div>\r\n    <!-- 图片 -->\r\n    <div class=\"options\" :class=\"optionsDisable\">\r\n      <div class=\"option\" @click=\"onChangeType(2)\">\r\n        <el-space>\r\n          <div class=\"icon-name\">\r\n            <el-space>\r\n              <el-icon>\r\n                <Picture />\r\n              </el-icon>\r\n              <span> 图片</span>\r\n            </el-space>\r\n          </div>\r\n          <div class=\"action-txt\">\r\n            <el-button type=\"primary\" link>选择图片</el-button>\r\n          </div>\r\n          <div class=\"check\" v-show=\"config.type == 2\">\r\n            <el-icon size=\"20px\" color=\"#2a3ff6\">\r\n              <Check />\r\n            </el-icon>\r\n          </div>\r\n        </el-space>\r\n      </div>\r\n      <el-scrollbar max-height=\"250px\" v-show=\"config.type == 2\">\r\n        <el-row>\r\n          <el-col :style=\"{ textAlign: 'center' }\" :span=\"6\" v-for=\"background in backgrundList\" :key=\"background.id\">\r\n            <el-image @click=\"onChangeImage(background)\" class=\"el-img\"\r\n              :class=\"activeBackgroundId == background.id ? 'active' : ''\" :src=\"background.url\" fit=\"cover\" />\r\n          </el-col>\r\n        </el-row>\r\n      </el-scrollbar>\r\n    </div>\r\n    <!-- 颜色 -->\r\n    <div class=\"options\" :class=\"optionsDisable\">\r\n      <div class=\"option\" @click=\"onChangeType(1)\">\r\n        <el-space>\r\n          <div class=\"icon-name\">\r\n            <el-space>\r\n              <el-icon>\r\n                <DataAnalysis />\r\n              </el-icon>\r\n              <span> 颜色</span>\r\n            </el-space>\r\n          </div>\r\n          <div class=\"action\">\r\n            <el-color-picker :predefine=\"predefineColors\" @change=\"onChangeColor\" @active-change=\"activeChangeColor\"\r\n              v-model=\"config.color\" />\r\n          </div>\r\n          <div class=\"check\" v-show=\"config.type == 1\">\r\n            <el-icon size=\"20px\" color=\"#2a3ff6\">\r\n              <Check />\r\n            </el-icon>\r\n          </div>\r\n        </el-space>\r\n      </div>\r\n    </div>\r\n    <!-- 全景图 -->\r\n    <div class=\"options\" :class=\"optionsDisable\">\r\n      <div class=\"option\" @click=\"onChangeType(3)\">\r\n        <el-space>\r\n          <div class=\"icon-name\">\r\n            <el-space>\r\n              <el-icon>\r\n                <CameraFilled />\r\n              </el-icon>\r\n              <span> 全景图</span>\r\n            </el-space>\r\n          </div>\r\n          <div class=\"action-txt\">\r\n            <el-button type=\"primary\" link>选择图片</el-button>\r\n          </div>\r\n          <div class=\"check\" v-show=\"config.type == 3\">\r\n            <el-icon size=\"20px\" color=\"#2a3ff6\">\r\n              <Check />\r\n            </el-icon>\r\n          </div>\r\n        </el-space>\r\n      </div>\r\n      <el-scrollbar max-height=\"350px\" v-show=\"config.type == 3\">\r\n        <el-row>\r\n          <el-col :span=\"6\" :style=\"{ textAlign: 'center' }\" v-for=\"view in viewImageList\" :key=\"view.id\">\r\n            <el-image @click=\"onChangeViewImage(view)\" class=\"el-view\"\r\n              :class=\"activeViewImageId == view.id ? 'active' : ''\" :src=\"view.url\" fit=\"cover\" />\r\n          </el-col>\r\n        </el-row>\r\n      </el-scrollbar>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script setup lang=\"ts\">\r\nimport { ref, reactive, computed } from \"vue\";\r\nimport { useStore } from \"vuex\";\r\nimport { PREDEFINE_COLORS } from \"@/config/constant\";\r\nimport { backgrundList, viewImageList } from \"@/config/model\";\r\nconst store = useStore();\r\nconst config = reactive({\r\n  visible: true,\r\n  type: 3, //1 颜色 2 图片  3全景图\r\n  image: require(\"@/assets/image/model-bg-3.jpg\"),\r\n  viewImg: require(\"@/assets/image/view-4.png\"),\r\n  color: \"#000\",\r\n});\r\nconst activeBackgroundId = ref(3);\r\nconst activeViewImageId = ref(3);\r\nconst state = reactive({\r\n  modelApi: computed(() => {\r\n    return store.state.modelApi;\r\n  }),\r\n});\r\nconst optionsDisable = computed(() => {\r\n  const { visible } = config;\r\n  return visible ? \"\" : \"disabled\";\r\n});\r\nconst predefineColors = PREDEFINE_COLORS;\r\n//切换类型\r\nconst onChangeType = (type: number) => {\r\n  config.type = type;\r\n  switch (type) {\r\n    case 1:\r\n      state.modelApi.onSetSceneColor(config.color);\r\n      break;\r\n    case 2:\r\n      state.modelApi.onSetSceneImage(config.image);\r\n      break;\r\n    case 3:\r\n      state.modelApi.onSetSceneViewImage(config.viewImg);\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n};\r\n//选择图片\r\nconst onChangeImage = (image: { id: number, url: string }) => {\r\n  const { id, url } = image\r\n  config.image = url;\r\n  activeBackgroundId.value = id;\r\n  state.modelApi.onSetSceneImage(url);\r\n};\r\n//选择全景图\r\nconst onChangeViewImage = (image: { id: number, url: string }) => {\r\n  const { id, url } = image\r\n  config.viewImg = url;\r\n  activeViewImageId.value = id;\r\n  state.modelApi.onSetSceneViewImage(url);\r\n};\r\n// 颜色面板值发生变化\r\nconst activeChangeColor = (color: string) => {\r\n  config.color = color;\r\n  state.modelApi.onSetSceneColor(config.color);\r\n};\r\n//选择颜色\r\nconst onChangeColor = () => {\r\n  state.modelApi.onSetSceneColor(config.color);\r\n};\r\n\r\nconst onChangeBgSwitch = () => {\r\n  const { type, visible, image, viewImg } = config;\r\n  if (!visible) return state.modelApi.onSetSceneColor(\"#000\");\r\n  switch (type) {\r\n    case 1:\r\n      state.modelApi.onSetSceneColor(config.color);\r\n      break;\r\n    case 2:\r\n      state.modelApi.onSetSceneImage(image);\r\n      break;\r\n    case 3:\r\n      state.modelApi.onSetSceneViewImage(viewImg);\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n};\r\n\r\ndefineExpose({\r\n  config,\r\n});\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.add-img {\r\n  border: 1px dashed #414141;\r\n  width: 180px;\r\n  height: 78px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  cursor: pointer;\r\n}\r\n\r\n.img-privew {\r\n  cursor: pointer;\r\n  padding: 0px 26px;\r\n}\r\n\r\n.el-img {\r\n  width: 78px;\r\n  height: 40px;\r\n  cursor: pointer;\r\n  margin-bottom: 4px;\r\n}\r\n\r\n.el-view {\r\n  width: 60px;\r\n  height: 60px;\r\n  cursor: pointer;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.active {\r\n  border: 2px solid #18c174;\r\n}\r\n</style>\r\n","import script from \"./EditBackground.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./EditBackground.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./EditBackground.vue?vue&type=style&index=0&id=b8e051cc&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-b8e051cc\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, unref as _unref, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveComponent as _resolveComponent, createBlock as _createBlock, withCtx as _withCtx, createVNode as _createVNode, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, vShow as _vShow, withDirectives as _withDirectives, normalizeClass as _normalizeClass, createTextVNode as _createTextVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-5ce4aada\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"edit-box\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"header\" }, [\n  /*#__PURE__*/_createElementVNode(\"span\", null, \"材质类型\")\n], -1))\nconst _hoisted_3 = { class: \"options\" }\nconst _hoisted_4 = { class: \"option\" }\nconst _hoisted_5 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", null, \"当前材质类型：\", -1))\nconst _hoisted_6 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"header\" }, [\n  /*#__PURE__*/_createElementVNode(\"span\", null, \"材质\")\n], -1))\nconst _hoisted_7 = { class: \"options\" }\nconst _hoisted_8 = [\"onClick\"]\nconst _hoisted_9 = { class: \"icon-name\" }\nconst _hoisted_10 = { class: \"check\" }\nconst _hoisted_11 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"header\" }, \"材质属性\", -1))\nconst _hoisted_12 = { class: \"option space-between\" }\nconst _hoisted_13 = { class: \"option\" }\nconst _hoisted_14 = { class: \"grid-txt\" }\nconst _hoisted_15 = { class: \"grid-silder\" }\nconst _hoisted_16 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"header\" }, \"模型自带贴图\", -1))\nconst _hoisted_17 = [\"onClick\"]\nconst _hoisted_18 = {\n  key: 0,\n  class: \"select\"\n}\nconst _hoisted_19 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"not-load\" }, \"当前模型材质数量过大,暂不支持贴图加载\", -1))\nconst _hoisted_20 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"header\" }, \"系统贴图\", -1))\nconst _hoisted_21 = [\"onClick\"]\nconst _hoisted_22 = {\n  key: 0,\n  class: \"select\"\n}\n\nimport { ref, reactive, computed, onMounted, getCurrentInstance, watch } from \"vue\";\r\nimport { useStore } from \"vuex\";\r\nimport { PREDEFINE_COLORS, meshTypeList } from \"@/config/constant\";\r\nimport { mapImageList } from \"@/config/model\";\r\nimport * as THREE from \"three\";\r\nimport { ElMessage } from \"element-plus\";\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'EditMaterial',\n  setup(__props, { expose: __expose }) {\n\r\nconst store = useStore();\r\nconst { $bus } = (getCurrentInstance() as any).proxy;\r\nconst config = reactive({\r\n  meaterialName: null,\r\n  color: \"#fff\",\r\n  wireframe: false,\r\n  depthWrite: true,\r\n  opacity: 1,\r\n});\r\nconst activeMeshType = ref(null);\r\nconst activeMesh = reactive({\r\n  type: \"MeshBasicMaterial\",\r\n  describe: \"标准网格材质\",\r\n  color: true,\r\n  wireframe: true,\r\n  depthWrite: true,\r\n  opacity: true,\r\n});\r\nconst activeTextureMap = ref(null);\r\n\r\nconst optionDisabled = computed(() => {\r\n  const activeMesh =\r\n    state.modelMaterialList.find((v: { uuid: any; }) => v.uuid == state.selectMeshUuid) || {};\r\n  return activeMesh.uuid ? \"\" : \"disabled\";\r\n});\r\n\r\nconst state = reactive({\r\n  modelMaterialList: computed(() => {\r\n    return store.state.modelApi.modelMaterialList;\r\n  }),\r\n  modelApi: computed(() => {\r\n    return store.state.modelApi;\r\n  }),\r\n  selectMeshUuid: computed(() => store.getters.selectMeshUuid),\r\n  modelTextureMap: computed(() => {\r\n    return store.state.modelApi.modelTextureMap;\r\n  }),\r\n});\r\n\r\nonMounted(() => {\r\n  $bus.on(\"model-update\", () => {\r\n    // 重置动画数据\r\n    Object.assign(config, {\r\n      color: null,\r\n      wireframe: false,\r\n      depthWrite: true,\r\n      opacity: 1,\r\n    });\r\n  });\r\n});\r\n\r\nwatch(\r\n  () => store.getters.selectMeshUuid,\r\n  (val) => {\r\n    const map = state.modelMaterialList.find((v: { uuid: any; }) => v.uuid == val) || {};\r\n    activeTextureMap.value = map.mapId;\r\n\r\n    if (map.mapId) {\r\n      const { color, wireframe, depthWrite, opacity } = map.material;\r\n      Object.assign(config, {\r\n        color: new THREE.Color(color).getStyle(),\r\n        wireframe,\r\n        depthWrite,\r\n        opacity,\r\n      });\r\n    }\r\n  }\r\n);\r\n\r\n// 切换材质类型\r\nconst onChangeMeshType = (e: string) => {\r\n  const activeMesh = meshTypeList.find((v: any) => v.type == e);\r\n  state.modelApi.onChangeModelMeshType(activeMesh);\r\n};\r\n\r\n// 选择材质\r\nconst onChangeMaterialType = (mesh: { name: string; material: any; }) => {\r\n  const { name, material } = mesh\r\n  config.meaterialName = material.name;\r\n  const activeMesh = state.modelApi.onChangeModelMeaterial(name);\r\n  const { color, wireframe, depthWrite, opacity } = activeMesh.material;\r\n  Object.assign(config, {\r\n    color: new THREE.Color(color).getStyle(),\r\n    wireframe,\r\n    depthWrite,\r\n    opacity,\r\n  });\r\n};\r\n\r\nconst activeChangeColor = (color: string) => {\r\n  config.color = color;\r\n  state.modelApi.onSetModelMaterial(config);\r\n};\r\n\r\nconst onChangeMeaterial = () => {\r\n  state.modelApi.onSetModelMaterial(config);\r\n};\r\n\r\n// 设置材质显隐\r\nconst onSetMeshVisibe = (mesh: any) => {\r\n  mesh.visible = !mesh.visible;\r\n};\r\n//修改当前材质贴图\r\nconst onChangeModelMap = (map: { mapId: null; }) => {\r\n  activeTextureMap.value = map.mapId;\r\n  state.modelApi.onSetModelMap(map);\r\n  Object.assign(config, {\r\n    color: null,\r\n    wireframe: false,\r\n    depthWrite: true,\r\n    opacity: 1,\r\n  });\r\n  ElMessage.success(\"当前材质贴图修改成功\");\r\n};\r\n// 修改当前材质贴图\r\nconst onChangeSystemModelMap = (map: { id: null; }) => {\r\n  activeTextureMap.value = map.id;\r\n  state.modelApi.onSetSystemModelMap(map);\r\n  Object.assign(config, {\r\n    color: null,\r\n    wireframe: false,\r\n    depthWrite: true,\r\n    opacity: 1,\r\n  });\r\n  ElMessage.success(\"当前材质贴图修改成功\");\r\n};\r\nconst getMeshConfig = () => {\r\n  return {\r\n    materialType: activeMeshType.value,\r\n    meshList: state.modelApi.onGetEditMeshList(),\r\n  };\r\n};\r\n__expose({\r\n  getMeshConfig,\r\n});\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_option = _resolveComponent(\"el-option\")!\n  const _component_el_select = _resolveComponent(\"el-select\")!\n  const _component_el_space = _resolveComponent(\"el-space\")!\n  const _component_View = _resolveComponent(\"View\")!\n  const _component_el_icon = _resolveComponent(\"el-icon\")!\n  const _component_Hide = _resolveComponent(\"Hide\")!\n  const _component_Check = _resolveComponent(\"Check\")!\n  const _component_el_scrollbar = _resolveComponent(\"el-scrollbar\")!\n  const _component_el_button = _resolveComponent(\"el-button\")!\n  const _component_el_color_picker = _resolveComponent(\"el-color-picker\")!\n  const _component_WarnTriangleFilled = _resolveComponent(\"WarnTriangleFilled\")!\n  const _component_el_tooltip = _resolveComponent(\"el-tooltip\")!\n  const _component_el_switch = _resolveComponent(\"el-switch\")!\n  const _component_el_slider = _resolveComponent(\"el-slider\")!\n  const _component_el_image = _resolveComponent(\"el-image\")!\n  const _component_Select = _resolveComponent(\"Select\")!\n  const _component_el_col = _resolveComponent(\"el-col\")!\n  const _component_el_row = _resolveComponent(\"el-row\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _hoisted_2,\n    _createElementVNode(\"div\", _hoisted_3, [\n      _createElementVNode(\"div\", _hoisted_4, [\n        _createVNode(_component_el_space, null, {\n          default: _withCtx(() => [\n            _hoisted_5,\n            _createVNode(_component_el_select, {\n              modelValue: activeMeshType.value,\n              \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((activeMeshType).value = $event)),\n              onChange: onChangeMeshType,\n              placeholder: \"请选择\",\n              size: \"small\"\n            }, {\n              default: _withCtx(() => [\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(meshTypeList), (item) => {\n                  return (_openBlock(), _createBlock(_component_el_option, {\n                    key: item.type,\n                    label: `${item.type}(${item.describe})`,\n                    value: item.type\n                  }, null, 8, [\"label\", \"value\"]))\n                }), 128))\n              ]),\n              _: 1\n            }, 8, [\"modelValue\"])\n          ]),\n          _: 1\n        })\n      ])\n    ]),\n    _hoisted_6,\n    _createElementVNode(\"div\", _hoisted_7, [\n      _createVNode(_component_el_scrollbar, { \"max-height\": \"200px\" }, {\n        default: _withCtx(() => [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(state.modelMaterialList, (mesh) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n              class: _normalizeClass([\"option\", state.selectMeshUuid == mesh.uuid ? 'option-active' : '']),\n              onClick: ($event: any) => (onChangeMaterialType(mesh)),\n              key: mesh.uuid\n            }, [\n              _createVNode(_component_el_space, null, {\n                default: _withCtx(() => [\n                  (mesh.visible)\n                    ? (_openBlock(), _createBlock(_component_el_icon, {\n                        key: 0,\n                        onClick: ($event: any) => (onSetMeshVisibe(mesh)),\n                        size: \"18\",\n                        color: \"#409eff\"\n                      }, {\n                        default: _withCtx(() => [\n                          _createVNode(_component_View)\n                        ]),\n                        _: 2\n                      }, 1032, [\"onClick\"]))\n                    : (_openBlock(), _createBlock(_component_el_icon, {\n                        key: 1,\n                        size: \"18\",\n                        onClick: ($event: any) => (onSetMeshVisibe(mesh))\n                      }, {\n                        default: _withCtx(() => [\n                          _createVNode(_component_Hide)\n                        ]),\n                        _: 2\n                      }, 1032, [\"onClick\"])),\n                  _createElementVNode(\"div\", _hoisted_9, _toDisplayString(mesh.name), 1),\n                  _withDirectives(_createElementVNode(\"div\", _hoisted_10, [\n                    _createVNode(_component_el_icon, {\n                      size: \"20px\",\n                      color: \"#2a3ff6\"\n                    }, {\n                      default: _withCtx(() => [\n                        _createVNode(_component_Check)\n                      ]),\n                      _: 1\n                    })\n                  ], 512), [\n                    [_vShow, state.selectMeshUuid == mesh.uuid]\n                  ])\n                ]),\n                _: 2\n              }, 1024)\n            ], 10, _hoisted_8))\n          }), 128))\n        ]),\n        _: 1\n      })\n    ]),\n    _hoisted_11,\n    _createElementVNode(\"div\", {\n      class: _normalizeClass([\"options\", optionDisabled.value])\n    }, [\n      _createElementVNode(\"div\", _hoisted_12, [\n        _createVNode(_component_el_space, null, {\n          default: _withCtx(() => [\n            _createVNode(_component_el_button, {\n              type: \"primary\",\n              link: \"\"\n            }, {\n              default: _withCtx(() => [\n                _createTextVNode(\"材质颜色\")\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_color_picker, {\n              \"color-format\": \"hex\",\n              predefine: _unref(PREDEFINE_COLORS),\n              onChange: onChangeMeaterial,\n              onActiveChange: activeChangeColor,\n              modelValue: config.color,\n              \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((config.color) = $event))\n            }, null, 8, [\"predefine\", \"modelValue\"])\n          ]),\n          _: 1\n        }),\n        _createVNode(_component_el_space, null, {\n          default: _withCtx(() => [\n            _createVNode(_component_el_tooltip, {\n              effect: \"dark\",\n              content: \"注意：深度写入属性不支持模型“导出” \",\n              placement: \"top\"\n            }, {\n              default: _withCtx(() => [\n                _createVNode(_component_el_icon, null, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_WarnTriangleFilled, {\n                      size: 20,\n                      color: \"#ffb940\"\n                    })\n                  ]),\n                  _: 1\n                })\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_button, {\n              type: \"primary\",\n              link: \"\"\n            }, {\n              default: _withCtx(() => [\n                _createTextVNode(\"深度写入\")\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_switch, {\n              onChange: onChangeMeaterial,\n              modelValue: config.depthWrite,\n              \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((config.depthWrite) = $event))\n            }, null, 8, [\"modelValue\"])\n          ]),\n          _: 1\n        }),\n        _createVNode(_component_el_space, null, {\n          default: _withCtx(() => [\n            _createVNode(_component_el_tooltip, {\n              effect: \"dark\",\n              content: \"注意：网格属性不支持模型“导出” \",\n              placement: \"top\"\n            }, {\n              default: _withCtx(() => [\n                _createVNode(_component_el_icon, null, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_WarnTriangleFilled, {\n                      size: 20,\n                      color: \"#ffb940\"\n                    })\n                  ]),\n                  _: 1\n                })\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_button, {\n              type: \"primary\",\n              link: \"\"\n            }, {\n              default: _withCtx(() => [\n                _createTextVNode(\"网格\")\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_switch, {\n              onChange: onChangeMeaterial,\n              modelValue: config.wireframe,\n              \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((config.wireframe) = $event))\n            }, null, 8, [\"modelValue\"])\n          ]),\n          _: 1\n        })\n      ]),\n      _createElementVNode(\"div\", _hoisted_13, [\n        _createElementVNode(\"div\", _hoisted_14, [\n          _createVNode(_component_el_button, {\n            type: \"primary\",\n            link: \"\"\n          }, {\n            default: _withCtx(() => [\n              _createTextVNode(\"透明度 \")\n            ]),\n            _: 1\n          })\n        ]),\n        _createElementVNode(\"div\", _hoisted_15, [\n          _createVNode(_component_el_slider, {\n            \"show-input\": \"\",\n            onInput: onChangeMeaterial,\n            modelValue: config.opacity,\n            \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event: any) => ((config.opacity) = $event)),\n            min: 0,\n            max: 1,\n            step: 0.01\n          }, null, 8, [\"modelValue\"])\n        ])\n      ])\n    ], 2),\n    _hoisted_16,\n    _createElementVNode(\"div\", {\n      class: _normalizeClass([\"options\", optionDisabled.value])\n    }, [\n      _createVNode(_component_el_scrollbar, { \"max-height\": \"100px\" }, {\n        default: _withCtx(() => [\n          (state.modelTextureMap)\n            ? (_openBlock(), _createBlock(_component_el_row, { key: 0 }, {\n                default: _withCtx(() => [\n                  (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(state.modelTextureMap, (map) => {\n                    return (_openBlock(), _createBlock(_component_el_col, {\n                      span: 6,\n                      style: { textAlign: 'center' },\n                      key: map.mapId\n                    }, {\n                      default: _withCtx(() => [\n                        _createElementVNode(\"div\", {\n                          onClick: ($event: any) => (onChangeModelMap(map)),\n                          class: _normalizeClass([\"image-box\", activeTextureMap.value == map.mapId ? 'active' : ''])\n                        }, [\n                          _createVNode(_component_el_image, {\n                            src: map.url,\n                            class: \"el-map\",\n                            fit: \"cover\"\n                          }, null, 8, [\"src\"]),\n                          (activeTextureMap.value == map.mapId)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_18, [\n                                _createVNode(_component_el_icon, {\n                                  color: \"#18c174\",\n                                  size: 26\n                                }, {\n                                  default: _withCtx(() => [\n                                    _createVNode(_component_Select)\n                                  ]),\n                                  _: 1\n                                })\n                              ]))\n                            : _createCommentVNode(\"\", true)\n                        ], 10, _hoisted_17)\n                      ]),\n                      _: 2\n                    }, 1024))\n                  }), 128))\n                ]),\n                _: 1\n              }))\n            : (_openBlock(), _createBlock(_component_el_row, {\n                key: 1,\n                justify: \"center\"\n              }, {\n                default: _withCtx(() => [\n                  _createVNode(_component_el_col, null, {\n                    default: _withCtx(() => [\n                      _hoisted_19\n                    ]),\n                    _: 1\n                  })\n                ]),\n                _: 1\n              }))\n        ]),\n        _: 1\n      })\n    ], 2),\n    _hoisted_20,\n    _createElementVNode(\"div\", {\n      class: _normalizeClass([\"options\", optionDisabled.value])\n    }, [\n      _createVNode(_component_el_scrollbar, { \"max-height\": \"230px\" }, {\n        default: _withCtx(() => [\n          _createVNode(_component_el_row, null, {\n            default: _withCtx(() => [\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(mapImageList), (map) => {\n                return (_openBlock(), _createBlock(_component_el_col, {\n                  span: 6,\n                  style: { textAlign: 'center' },\n                  key: map.id\n                }, {\n                  default: _withCtx(() => [\n                    _createElementVNode(\"div\", {\n                      onClick: ($event: any) => (onChangeSystemModelMap(map)),\n                      class: _normalizeClass([\"image-box\", activeTextureMap.value == map.id ? 'active' : ''])\n                    }, [\n                      _createVNode(_component_el_image, {\n                        src: map.url,\n                        class: \"el-map\",\n                        fit: \"cover\"\n                      }, null, 8, [\"src\"]),\n                      (activeTextureMap.value == map.id)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_22, [\n                            _createVNode(_component_el_icon, {\n                              color: \"#18c174\",\n                              size: 26\n                            }, {\n                              default: _withCtx(() => [\n                                _createVNode(_component_Select)\n                              ]),\n                              _: 1\n                            })\n                          ]))\n                        : _createCommentVNode(\"\", true)\n                    ], 10, _hoisted_21)\n                  ]),\n                  _: 2\n                }, 1024))\n              }), 128))\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      })\n    ], 2)\n  ]))\n}\n}\n\n})","<template>\r\n  <div class=\"edit-box\">\r\n    <div class=\"header\">\r\n      <span>材质类型</span>\r\n    </div>\r\n    <div class=\"options\">\r\n      <div class=\"option\">\r\n        <el-space>\r\n          <span>当前材质类型：</span>\r\n          <el-select v-model=\"activeMeshType\" @change=\"onChangeMeshType\" placeholder=\"请选择\" size=\"small\">\r\n            <el-option v-for=\"item in meshTypeList\" :key=\"item.type\" :label=\"`${item.type}(${item.describe})`\"\r\n              :value=\"item.type\" />\r\n          </el-select>\r\n        </el-space>\r\n      </div>\r\n    </div>\r\n    <div class=\"header\">\r\n      <span>材质</span>\r\n    </div>\r\n    <!-- 材质列表 -->\r\n    <div class=\"options\">\r\n      <el-scrollbar max-height=\"200px\">\r\n        <div class=\"option\" :class=\"state.selectMeshUuid == mesh.uuid ? 'option-active' : ''\"\r\n          @click=\"onChangeMaterialType(mesh)\" v-for=\"mesh in state.modelMaterialList\" :key=\"mesh.uuid\">\r\n          <el-space>\r\n            <el-icon @click=\"onSetMeshVisibe(mesh)\" size=\"18\" color=\"#409eff\" v-if=\"mesh.visible\">\r\n              <View />\r\n            </el-icon>\r\n            <el-icon size=\"18\" @click=\"onSetMeshVisibe(mesh)\" v-else>\r\n              <Hide />\r\n            </el-icon>\r\n            <div class=\"icon-name\">\r\n              {{ mesh.name }}\r\n            </div>\r\n            <div class=\"check\" v-show=\"state.selectMeshUuid == mesh.uuid\">\r\n              <el-icon size=\"20px\" color=\"#2a3ff6\">\r\n                <Check />\r\n              </el-icon>\r\n            </div>\r\n          </el-space>\r\n        </div>\r\n      </el-scrollbar>\r\n    </div>\r\n    <!-- 材质属性 -->\r\n    <div class=\"header\">材质属性</div>\r\n    <div class=\"options\" :class=\"optionDisabled\">\r\n      <div class=\"option space-between\">\r\n        <el-space>\r\n          <el-button type=\"primary\" link>材质颜色</el-button>\r\n          <el-color-picker color-format=\"hex\" :predefine=\"PREDEFINE_COLORS\" @change=\"onChangeMeaterial\"\r\n            @active-change=\"activeChangeColor\" v-model=\"config.color\" />\r\n        </el-space>\r\n        <el-space>\r\n          <el-tooltip effect=\"dark\" content=\"注意：深度写入属性不支持模型“导出” \" placement=\"top\">\r\n            <el-icon>\r\n              <WarnTriangleFilled :size=\"20\" color=\"#ffb940\" />\r\n            </el-icon>\r\n          </el-tooltip>\r\n          <el-button type=\"primary\" link>深度写入</el-button>\r\n          <el-switch @change=\"onChangeMeaterial\" v-model=\"config.depthWrite\"></el-switch>\r\n        </el-space>\r\n        <el-space>\r\n          <el-tooltip effect=\"dark\" content=\"注意：网格属性不支持模型“导出” \" placement=\"top\">\r\n            <el-icon>\r\n              <WarnTriangleFilled :size=\"20\" color=\"#ffb940\" />\r\n            </el-icon>\r\n          </el-tooltip>\r\n          <el-button type=\"primary\" link>网格</el-button>\r\n          <el-switch @change=\"onChangeMeaterial\" v-model=\"config.wireframe\"></el-switch>\r\n        </el-space>\r\n      </div>\r\n      <div class=\"option\">\r\n        <div class=\"grid-txt\">\r\n          <el-button type=\"primary\" link>透明度 </el-button>\r\n        </div>\r\n        <div class=\"grid-silder\">\r\n          <el-slider show-input @input=\"onChangeMeaterial\" v-model=\"config.opacity\" :min=\"0\" :max=\"1\" :step=\"0.01\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"header\">模型自带贴图</div>\r\n    <div class=\"options\" :class=\"optionDisabled\">\r\n      <el-scrollbar max-height=\"100px\">\r\n        <el-row v-if=\"state.modelTextureMap\">\r\n          <el-col :span=\"6\" :style=\"{ textAlign: 'center' }\" v-for=\"map in state.modelTextureMap\" :key=\"map.mapId\">\r\n            <div @click=\"onChangeModelMap(map)\" class=\"image-box\" :class=\"activeTextureMap == map.mapId ? 'active' : ''\">\r\n              <el-image :src=\"map.url\" class=\"el-map\" fit=\"cover\" />\r\n              <div class=\"select\" v-if=\"activeTextureMap == map.mapId\">\r\n                <el-icon color=\"#18c174\" :size=\"26\"><Select /></el-icon>\r\n              </div>\r\n            </div>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row justify=\"center\" v-else>\r\n          <el-col>\r\n            <div class=\"not-load\">当前模型材质数量过大,暂不支持贴图加载</div>\r\n          </el-col>\r\n        </el-row>\r\n      </el-scrollbar>\r\n    </div>\r\n    <div class=\"header\">系统贴图</div>\r\n    <div class=\"options\" :class=\"optionDisabled\">\r\n      <el-scrollbar max-height=\"230px\">\r\n        <el-row>\r\n          <el-col :span=\"6\" :style=\"{ textAlign: 'center' }\" v-for=\"map in mapImageList\" :key=\"map.id\">\r\n            <div @click=\"onChangeSystemModelMap(map)\" class=\"image-box\"\r\n              :class=\"activeTextureMap == map.id ? 'active' : ''\">\r\n              <el-image :src=\"map.url\" class=\"el-map\" fit=\"cover\" />\r\n              <div class=\"select\" v-if=\"activeTextureMap == map.id\">\r\n                <el-icon color=\"#18c174\" :size=\"26\"><Select /></el-icon>\r\n              </div>\r\n            </div>\r\n          </el-col>\r\n        </el-row>\r\n      </el-scrollbar>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script setup lang=\"ts\">\r\nimport { ref, reactive, computed, onMounted, getCurrentInstance, watch } from \"vue\";\r\nimport { useStore } from \"vuex\";\r\nimport { PREDEFINE_COLORS, meshTypeList } from \"@/config/constant\";\r\nimport { mapImageList } from \"@/config/model\";\r\nimport * as THREE from \"three\";\r\nimport { ElMessage } from \"element-plus\";\r\n\r\nconst store = useStore();\r\nconst { $bus } = (getCurrentInstance() as any).proxy;\r\nconst config = reactive({\r\n  meaterialName: null,\r\n  color: \"#fff\",\r\n  wireframe: false,\r\n  depthWrite: true,\r\n  opacity: 1,\r\n});\r\nconst activeMeshType = ref(null);\r\nconst activeMesh = reactive({\r\n  type: \"MeshBasicMaterial\",\r\n  describe: \"标准网格材质\",\r\n  color: true,\r\n  wireframe: true,\r\n  depthWrite: true,\r\n  opacity: true,\r\n});\r\nconst activeTextureMap = ref(null);\r\n\r\nconst optionDisabled = computed(() => {\r\n  const activeMesh =\r\n    state.modelMaterialList.find((v: { uuid: any; }) => v.uuid == state.selectMeshUuid) || {};\r\n  return activeMesh.uuid ? \"\" : \"disabled\";\r\n});\r\n\r\nconst state = reactive({\r\n  modelMaterialList: computed(() => {\r\n    return store.state.modelApi.modelMaterialList;\r\n  }),\r\n  modelApi: computed(() => {\r\n    return store.state.modelApi;\r\n  }),\r\n  selectMeshUuid: computed(() => store.getters.selectMeshUuid),\r\n  modelTextureMap: computed(() => {\r\n    return store.state.modelApi.modelTextureMap;\r\n  }),\r\n});\r\n\r\nonMounted(() => {\r\n  $bus.on(\"model-update\", () => {\r\n    // 重置动画数据\r\n    Object.assign(config, {\r\n      color: null,\r\n      wireframe: false,\r\n      depthWrite: true,\r\n      opacity: 1,\r\n    });\r\n  });\r\n});\r\n\r\nwatch(\r\n  () => store.getters.selectMeshUuid,\r\n  (val) => {\r\n    const map = state.modelMaterialList.find((v: { uuid: any; }) => v.uuid == val) || {};\r\n    activeTextureMap.value = map.mapId;\r\n\r\n    if (map.mapId) {\r\n      const { color, wireframe, depthWrite, opacity } = map.material;\r\n      Object.assign(config, {\r\n        color: new THREE.Color(color).getStyle(),\r\n        wireframe,\r\n        depthWrite,\r\n        opacity,\r\n      });\r\n    }\r\n  }\r\n);\r\n\r\n// 切换材质类型\r\nconst onChangeMeshType = (e: string) => {\r\n  const activeMesh = meshTypeList.find((v: any) => v.type == e);\r\n  state.modelApi.onChangeModelMeshType(activeMesh);\r\n};\r\n\r\n// 选择材质\r\nconst onChangeMaterialType = (mesh: { name: string; material: any; }) => {\r\n  const { name, material } = mesh\r\n  config.meaterialName = material.name;\r\n  const activeMesh = state.modelApi.onChangeModelMeaterial(name);\r\n  const { color, wireframe, depthWrite, opacity } = activeMesh.material;\r\n  Object.assign(config, {\r\n    color: new THREE.Color(color).getStyle(),\r\n    wireframe,\r\n    depthWrite,\r\n    opacity,\r\n  });\r\n};\r\n\r\nconst activeChangeColor = (color: string) => {\r\n  config.color = color;\r\n  state.modelApi.onSetModelMaterial(config);\r\n};\r\n\r\nconst onChangeMeaterial = () => {\r\n  state.modelApi.onSetModelMaterial(config);\r\n};\r\n\r\n// 设置材质显隐\r\nconst onSetMeshVisibe = (mesh: any) => {\r\n  mesh.visible = !mesh.visible;\r\n};\r\n//修改当前材质贴图\r\nconst onChangeModelMap = (map: { mapId: null; }) => {\r\n  activeTextureMap.value = map.mapId;\r\n  state.modelApi.onSetModelMap(map);\r\n  Object.assign(config, {\r\n    color: null,\r\n    wireframe: false,\r\n    depthWrite: true,\r\n    opacity: 1,\r\n  });\r\n  ElMessage.success(\"当前材质贴图修改成功\");\r\n};\r\n// 修改当前材质贴图\r\nconst onChangeSystemModelMap = (map: { id: null; }) => {\r\n  activeTextureMap.value = map.id;\r\n  state.modelApi.onSetSystemModelMap(map);\r\n  Object.assign(config, {\r\n    color: null,\r\n    wireframe: false,\r\n    depthWrite: true,\r\n    opacity: 1,\r\n  });\r\n  ElMessage.success(\"当前材质贴图修改成功\");\r\n};\r\nconst getMeshConfig = () => {\r\n  return {\r\n    materialType: activeMeshType.value,\r\n    meshList: state.modelApi.onGetEditMeshList(),\r\n  };\r\n};\r\ndefineExpose({\r\n  getMeshConfig,\r\n});\r\n</script>\r\n<style scoped lang=\"scss\">\r\n.options {\r\n  max-width: 380px;\r\n}\r\n\r\n.image-box {\r\n  width: 90px;\r\n  height: 90px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  box-sizing: border-box;\r\n  cursor: pointer;\r\n  opacity: 0.6;\r\n  position: relative;\r\n\r\n  .el-map {\r\n    padding: 6px;\r\n  }\r\n\r\n  .select {\r\n    position: absolute;\r\n  }\r\n}\r\n\r\n.not-load {\r\n  padding: 20px 0px;\r\n  font-size: 16px;\r\n  color: #fff;\r\n  text-align: center;\r\n}\r\n\r\n.active {\r\n  border: 2px solid #18c174;\r\n  opacity: 1;\r\n}\r\n</style>\r\n","import script from \"./EditMaterial.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./EditMaterial.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./EditMaterial.vue?vue&type=style&index=0&id=5ce4aada&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-5ce4aada\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, withCtx as _withCtx, vShow as _vShow, withDirectives as _withDirectives, normalizeClass as _normalizeClass, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode } from \"vue\"\n\nconst _hoisted_1 = { class: \"edit-box\" }\nconst _hoisted_2 = { class: \"header\" }\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"span\", null, \"模型动画\", -1)\nconst _hoisted_4 = [\"onClick\"]\nconst _hoisted_5 = { class: \"icon-name\" }\nconst _hoisted_6 = { class: \"check\" }\nconst _hoisted_7 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"header\" }, [\n  /*#__PURE__*/_createElementVNode(\"span\", null, \"动画配置\")\n], -1)\nconst _hoisted_8 = { class: \"option\" }\nconst _hoisted_9 = /*#__PURE__*/_createElementVNode(\"span\", null, \" 循环方式 \", -1)\nconst _hoisted_10 = { class: \"option\" }\nconst _hoisted_11 = { class: \"option\" }\nconst _hoisted_12 = /*#__PURE__*/_createElementVNode(\"span\", null, \" 播放速度 \", -1)\nconst _hoisted_13 = { class: \"option\" }\nconst _hoisted_14 = { class: \"option\" }\nconst _hoisted_15 = /*#__PURE__*/_createElementVNode(\"span\", null, \" 动作幅度 \", -1)\nconst _hoisted_16 = { class: \"option\" }\nconst _hoisted_17 = { class: \"header\" }\nconst _hoisted_18 = /*#__PURE__*/_createElementVNode(\"span\", null, \"轴动画\", -1)\nconst _hoisted_19 = { class: \"options\" }\nconst _hoisted_20 = /*#__PURE__*/_createElementVNode(\"span\", null, \" 轴方向 \", -1)\nconst _hoisted_21 = /*#__PURE__*/_createElementVNode(\"span\", null, \" 播放速度 \", -1)\n\nimport { reactive, computed, onMounted, getCurrentInstance } from \"vue\";\r\nimport { useStore } from \"vuex\";\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'EditAnimation',\n  setup(__props, { expose: __expose }) {\n\r\nconst store = useStore();\r\nconst { $bus } = (getCurrentInstance() as any).proxy;\r\nconst config = reactive({\r\n  visible: false,\r\n  animationName: null, //动画名称\r\n  loop: \"LoopRepeat\", // 循环方式 TODO:LoopOnce 执行一次 LoopRepeat 循环执行  LoopPingPong 来回执行\r\n  timeScale: 1, // 播放速度\r\n  weight: 1, // 动作幅度\r\n  rotationVisible: false, //轴动画开关\r\n  rotationType: \"y\", // 轴类型\r\n  rotationSpeed: 1, // 旋转速度\r\n});\r\nconst optionDisabled = computed(() => {\r\n  return config.visible ? \"\" : \"disabled\";\r\n});\r\nconst optionRotation = computed(() => {\r\n  return config.rotationVisible ? \"\" : \"disabled\";\r\n});\r\n\r\nconst state = reactive({\r\n  modelApi: computed(() => {\r\n    return store.state.modelApi;\r\n  }),\r\n  // 模型动画\r\n  modelAnimation: computed(() => {\r\n    if (store.state.modelApi) {\r\n      return store.state.modelApi.modelAnimation;\r\n    }\r\n    return [];\r\n  }),\r\n});\r\n\r\nonMounted(() => {\r\n  if (state.modelAnimation.length) {\r\n    config.animationName = state.modelAnimation[0].name;\r\n  }\r\n  // 监听模型变化\r\n  $bus.on(\"model-update\", () => {\r\n    if (state.modelAnimation.length) {\r\n      const animationName = state.modelAnimation[0].name;\r\n      config.animationName = animationName;\r\n    }\r\n    // 重置动画数据\r\n    Object.assign(config, {\r\n      visible: false,\r\n      loop: \"LoopRepeat\", // 循环方式 TODO:LoopOnce 执行一次 LoopRepeat 循环执行  LoopPingPong 来回执行\r\n      timeScale: 1, // 播放速度\r\n      weight: 1, // 动作幅度\r\n      rotationVisible: false, //轴动画开关\r\n      rotationType: \"y\", // 轴类型\r\n      rotationSpeed: 1, // 旋转速度\r\n    });\r\n  });\r\n});\r\n\r\n// 动画开启/关闭\r\nconst onChangeAnimationSwitch = () => {\r\n  const { visible } = config;\r\n  if (visible) {\r\n    onUplateAnimation();\r\n  } else {\r\n    state.modelApi.onClearAnimation();\r\n  }\r\n};\r\n// 选择动画\r\nconst onChangeAnimationType = (animation: { name: any; }) => {\r\n  const { name } = animation\r\n  config.animationName = name;\r\n  state.modelApi.onStartModelAnimaion(config);\r\n};\r\n// 更新模型状态\r\nconst onUplateAnimation = () => {\r\n  state.modelApi.onStartModelAnimaion(config);\r\n};\r\n\r\n// 设置模型轴动画\r\nconst onRotationAnimation = () => {\r\n  state.modelApi.onSetRotation(config);\r\n};\r\n// 设置模型轴动画类型\r\nconst onRotationType = () => {\r\n  state.modelApi.onSetRotationType(config);\r\n};\r\n\r\n__expose({\r\n  config,\r\n});\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_switch = _resolveComponent(\"el-switch\")!\n  const _component_Check = _resolveComponent(\"Check\")!\n  const _component_el_icon = _resolveComponent(\"el-icon\")!\n  const _component_el_space = _resolveComponent(\"el-space\")!\n  const _component_el_scrollbar = _resolveComponent(\"el-scrollbar\")!\n  const _component_el_empty = _resolveComponent(\"el-empty\")!\n  const _component_Switch = _resolveComponent(\"Switch\")!\n  const _component_el_radio_button = _resolveComponent(\"el-radio-button\")!\n  const _component_el_radio_group = _resolveComponent(\"el-radio-group\")!\n  const _component_VideoPlay = _resolveComponent(\"VideoPlay\")!\n  const _component_el_slider = _resolveComponent(\"el-slider\")!\n  const _component_Sort = _resolveComponent(\"Sort\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _hoisted_3,\n      _createVNode(_component_el_switch, {\n        modelValue: config.visible,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((config.visible) = $event)),\n        onChange: onChangeAnimationSwitch\n      }, null, 8, [\"modelValue\"])\n    ]),\n    _createElementVNode(\"div\", {\n      class: _normalizeClass([\"options\", optionDisabled.value])\n    }, [\n      (state.modelAnimation.length)\n        ? (_openBlock(), _createBlock(_component_el_scrollbar, {\n            key: 0,\n            \"max-height\": \"250px\"\n          }, {\n            default: _withCtx(() => [\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(state.modelAnimation, (animation) => {\n                return (_openBlock(), _createElementBlock(\"div\", {\n                  class: _normalizeClass([\"option\", config.animationName == animation.name ? 'option-active' : '']),\n                  onClick: ($event: any) => (onChangeAnimationType(animation)),\n                  key: animation.name\n                }, [\n                  _createVNode(_component_el_space, null, {\n                    default: _withCtx(() => [\n                      _createElementVNode(\"div\", _hoisted_5, _toDisplayString(animation.name), 1),\n                      _withDirectives(_createElementVNode(\"div\", _hoisted_6, [\n                        _createVNode(_component_el_icon, {\n                          size: \"20px\",\n                          color: \"#2a3ff6\"\n                        }, {\n                          default: _withCtx(() => [\n                            _createVNode(_component_Check)\n                          ]),\n                          _: 1\n                        })\n                      ], 512), [\n                        [_vShow, config.animationName == animation.name]\n                      ])\n                    ]),\n                    _: 2\n                  }, 1024)\n                ], 10, _hoisted_4))\n              }), 128))\n            ]),\n            _: 1\n          }))\n        : (_openBlock(), _createBlock(_component_el_empty, {\n            key: 1,\n            description: \"暂无动画\",\n            \"image-size\": 120\n          }))\n    ], 2),\n    _hoisted_7,\n    _createElementVNode(\"div\", {\n      class: _normalizeClass([\"options\", optionDisabled.value])\n    }, [\n      _createElementVNode(\"div\", _hoisted_8, [\n        _createVNode(_component_el_space, null, {\n          default: _withCtx(() => [\n            _createVNode(_component_el_icon, null, {\n              default: _withCtx(() => [\n                _createVNode(_component_Switch)\n              ]),\n              _: 1\n            }),\n            _hoisted_9\n          ]),\n          _: 1\n        })\n      ]),\n      _createElementVNode(\"div\", _hoisted_10, [\n        _createVNode(_component_el_radio_group, {\n          modelValue: config.loop,\n          \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((config.loop) = $event)),\n          onChange: onUplateAnimation\n        }, {\n          default: _withCtx(() => [\n            _createVNode(_component_el_radio_button, { label: \"LoopOnce\" }, {\n              default: _withCtx(() => [\n                _createTextVNode(\"只执行一次\")\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_radio_button, { label: \"LoopRepeat\" }, {\n              default: _withCtx(() => [\n                _createTextVNode(\"无限循环\")\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_radio_button, { label: \"LoopPingPong\" }, {\n              default: _withCtx(() => [\n                _createTextVNode(\"来回循环\")\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        }, 8, [\"modelValue\"])\n      ]),\n      _createElementVNode(\"div\", _hoisted_11, [\n        _createVNode(_component_el_space, null, {\n          default: _withCtx(() => [\n            _createVNode(_component_el_icon, null, {\n              default: _withCtx(() => [\n                _createVNode(_component_VideoPlay)\n              ]),\n              _: 1\n            }),\n            _hoisted_12\n          ]),\n          _: 1\n        })\n      ]),\n      _createElementVNode(\"div\", _hoisted_13, [\n        _createVNode(_component_el_slider, {\n          \"show-input\": \"\",\n          modelValue: config.timeScale,\n          \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((config.timeScale) = $event)),\n          onChange: onUplateAnimation,\n          step: 0.01,\n          min: 0,\n          max: 1\n        }, null, 8, [\"modelValue\"])\n      ]),\n      _createElementVNode(\"div\", _hoisted_14, [\n        _createVNode(_component_el_space, null, {\n          default: _withCtx(() => [\n            _createVNode(_component_el_icon, null, {\n              default: _withCtx(() => [\n                _createVNode(_component_Sort)\n              ]),\n              _: 1\n            }),\n            _hoisted_15\n          ]),\n          _: 1\n        })\n      ]),\n      _createElementVNode(\"div\", _hoisted_16, [\n        _createVNode(_component_el_slider, {\n          \"show-input\": \"\",\n          modelValue: config.weight,\n          \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((config.weight) = $event)),\n          onChange: onUplateAnimation,\n          step: 0.01,\n          min: 0,\n          max: 1\n        }, null, 8, [\"modelValue\"])\n      ])\n    ], 2),\n    _createElementVNode(\"div\", _hoisted_17, [\n      _hoisted_18,\n      _createVNode(_component_el_switch, {\n        modelValue: config.rotationVisible,\n        \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event: any) => ((config.rotationVisible) = $event)),\n        onChange: onRotationAnimation\n      }, null, 8, [\"modelValue\"])\n    ]),\n    _createElementVNode(\"div\", _hoisted_19, [\n      _createElementVNode(\"div\", {\n        class: _normalizeClass([\"option\", optionRotation.value])\n      }, [\n        _createVNode(_component_el_space, null, {\n          default: _withCtx(() => [\n            _hoisted_20,\n            _createVNode(_component_el_radio_group, {\n              modelValue: config.rotationType,\n              \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event: any) => ((config.rotationType) = $event)),\n              onChange: onRotationType\n            }, {\n              default: _withCtx(() => [\n                _createVNode(_component_el_radio_button, { label: \"x\" }, {\n                  default: _withCtx(() => [\n                    _createTextVNode(\"X轴\")\n                  ]),\n                  _: 1\n                }),\n                _createVNode(_component_el_radio_button, { label: \"y\" }, {\n                  default: _withCtx(() => [\n                    _createTextVNode(\"Y轴\")\n                  ]),\n                  _: 1\n                }),\n                _createVNode(_component_el_radio_button, { label: \"z\" }, {\n                  default: _withCtx(() => [\n                    _createTextVNode(\"Z轴\")\n                  ]),\n                  _: 1\n                })\n              ]),\n              _: 1\n            }, 8, [\"modelValue\"])\n          ]),\n          _: 1\n        })\n      ], 2),\n      _createElementVNode(\"div\", {\n        class: _normalizeClass([\"option\", optionRotation.value])\n      }, [\n        _createVNode(_component_el_space, null, {\n          default: _withCtx(() => [\n            _createVNode(_component_el_icon, null, {\n              default: _withCtx(() => [\n                _createVNode(_component_VideoPlay)\n              ]),\n              _: 1\n            }),\n            _hoisted_21\n          ]),\n          _: 1\n        })\n      ], 2),\n      _createElementVNode(\"div\", {\n        class: _normalizeClass([\"option\", optionRotation.value])\n      }, [\n        _createVNode(_component_el_slider, {\n          onInput: onRotationAnimation,\n          \"show-input\": \"\",\n          modelValue: config.rotationSpeed,\n          \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event: any) => ((config.rotationSpeed) = $event)),\n          step: 0.01,\n          min: 1,\n          max: 10\n        }, null, 8, [\"modelValue\"])\n      ], 2)\n    ])\n  ]))\n}\n}\n\n})","<template>\r\n  <div class=\"edit-box\">\r\n    <div class=\"header\">\r\n      <span>模型动画</span>\r\n      <el-switch v-model=\"config.visible\" @change=\"onChangeAnimationSwitch\" />\r\n    </div>\r\n    <!-- 动画列表 -->\r\n    <div class=\"options\" :class=\"optionDisabled\">\r\n      <el-scrollbar max-height=\"250px\" v-if=\"state.modelAnimation.length\">\r\n        <div class=\"option\" :class=\"config.animationName == animation.name ? 'option-active' : ''\"\r\n          @click=\"onChangeAnimationType(animation)\" v-for=\"animation in state.modelAnimation\" :key=\"animation.name\">\r\n          <el-space>\r\n            <div class=\"icon-name\">\r\n              {{ animation.name }}\r\n            </div>\r\n            <div class=\"check\" v-show=\"config.animationName == animation.name\">\r\n              <el-icon size=\"20px\" color=\"#2a3ff6\">\r\n                <Check />\r\n              </el-icon>\r\n            </div>\r\n          </el-space>\r\n        </div>\r\n      </el-scrollbar>\r\n      <el-empty v-else description=\"暂无动画\" :image-size=\"120\" />\r\n    </div>\r\n    <!-- 动画配置 -->\r\n    <div class=\"header\">\r\n      <span>动画配置</span>\r\n    </div>\r\n    <div class=\"options\" :class=\"optionDisabled\">\r\n      <div class=\"option\">\r\n        <el-space>\r\n          <el-icon>\r\n            <Switch />\r\n          </el-icon>\r\n          <span> 循环方式 </span>\r\n        </el-space>\r\n      </div>\r\n      <div class=\"option\">\r\n        <el-radio-group v-model=\"config.loop\" @change=\"onUplateAnimation\">\r\n          <el-radio-button label=\"LoopOnce\">只执行一次</el-radio-button>\r\n          <el-radio-button label=\"LoopRepeat\">无限循环</el-radio-button>\r\n          <el-radio-button label=\"LoopPingPong\">来回循环</el-radio-button>\r\n        </el-radio-group>\r\n      </div>\r\n      <div class=\"option\">\r\n        <el-space>\r\n          <el-icon>\r\n            <VideoPlay />\r\n          </el-icon>\r\n          <span> 播放速度 </span>\r\n        </el-space>\r\n      </div>\r\n      <div class=\"option\">\r\n        <el-slider show-input v-model=\"config.timeScale\" @change=\"onUplateAnimation\" :step=\"0.01\" :min=\"0\" :max=\"1\" />\r\n      </div>\r\n      <div class=\"option\">\r\n        <el-space>\r\n          <el-icon>\r\n            <Sort />\r\n          </el-icon>\r\n          <span> 动作幅度 </span>\r\n        </el-space>\r\n      </div>\r\n      <div class=\"option\">\r\n        <el-slider show-input v-model=\"config.weight\" @change=\"onUplateAnimation\" :step=\"0.01\" :min=\"0\" :max=\"1\" />\r\n      </div>\r\n    </div>\r\n    <!-- 轴动画 -->\r\n    <div class=\"header\">\r\n      <span>轴动画</span>\r\n      <el-switch v-model=\"config.rotationVisible\" @change=\"onRotationAnimation\" />\r\n    </div>\r\n    <div class=\"options\">\r\n      <div class=\"option\" :class=\"optionRotation\">\r\n        <el-space>\r\n          <span> 轴方向 </span>\r\n          <el-radio-group v-model=\"config.rotationType\" @change=\"onRotationType\">\r\n            <el-radio-button label=\"x\">X轴</el-radio-button>\r\n            <el-radio-button label=\"y\">Y轴</el-radio-button>\r\n            <el-radio-button label=\"z\">Z轴</el-radio-button>\r\n          </el-radio-group>\r\n        </el-space>\r\n      </div>\r\n      <div class=\"option\" :class=\"optionRotation\">\r\n        <el-space>\r\n          <el-icon>\r\n            <VideoPlay />\r\n          </el-icon>\r\n          <span> 播放速度 </span>\r\n        </el-space>\r\n      </div>\r\n      <div class=\"option\" :class=\"optionRotation\">\r\n        <el-slider @input=\"onRotationAnimation\" show-input v-model=\"config.rotationSpeed\" :step=\"0.01\" :min=\"1\"\r\n          :max=\"10\" />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script setup lang=\"ts\">\r\nimport { reactive, computed, onMounted, getCurrentInstance } from \"vue\";\r\nimport { useStore } from \"vuex\";\r\nconst store = useStore();\r\nconst { $bus } = (getCurrentInstance() as any).proxy;\r\nconst config = reactive({\r\n  visible: false,\r\n  animationName: null, //动画名称\r\n  loop: \"LoopRepeat\", // 循环方式 TODO:LoopOnce 执行一次 LoopRepeat 循环执行  LoopPingPong 来回执行\r\n  timeScale: 1, // 播放速度\r\n  weight: 1, // 动作幅度\r\n  rotationVisible: false, //轴动画开关\r\n  rotationType: \"y\", // 轴类型\r\n  rotationSpeed: 1, // 旋转速度\r\n});\r\nconst optionDisabled = computed(() => {\r\n  return config.visible ? \"\" : \"disabled\";\r\n});\r\nconst optionRotation = computed(() => {\r\n  return config.rotationVisible ? \"\" : \"disabled\";\r\n});\r\n\r\nconst state = reactive({\r\n  modelApi: computed(() => {\r\n    return store.state.modelApi;\r\n  }),\r\n  // 模型动画\r\n  modelAnimation: computed(() => {\r\n    if (store.state.modelApi) {\r\n      return store.state.modelApi.modelAnimation;\r\n    }\r\n    return [];\r\n  }),\r\n});\r\n\r\nonMounted(() => {\r\n  if (state.modelAnimation.length) {\r\n    config.animationName = state.modelAnimation[0].name;\r\n  }\r\n  // 监听模型变化\r\n  $bus.on(\"model-update\", () => {\r\n    if (state.modelAnimation.length) {\r\n      const animationName = state.modelAnimation[0].name;\r\n      config.animationName = animationName;\r\n    }\r\n    // 重置动画数据\r\n    Object.assign(config, {\r\n      visible: false,\r\n      loop: \"LoopRepeat\", // 循环方式 TODO:LoopOnce 执行一次 LoopRepeat 循环执行  LoopPingPong 来回执行\r\n      timeScale: 1, // 播放速度\r\n      weight: 1, // 动作幅度\r\n      rotationVisible: false, //轴动画开关\r\n      rotationType: \"y\", // 轴类型\r\n      rotationSpeed: 1, // 旋转速度\r\n    });\r\n  });\r\n});\r\n\r\n// 动画开启/关闭\r\nconst onChangeAnimationSwitch = () => {\r\n  const { visible } = config;\r\n  if (visible) {\r\n    onUplateAnimation();\r\n  } else {\r\n    state.modelApi.onClearAnimation();\r\n  }\r\n};\r\n// 选择动画\r\nconst onChangeAnimationType = (animation: { name: any; }) => {\r\n  const { name } = animation\r\n  config.animationName = name;\r\n  state.modelApi.onStartModelAnimaion(config);\r\n};\r\n// 更新模型状态\r\nconst onUplateAnimation = () => {\r\n  state.modelApi.onStartModelAnimaion(config);\r\n};\r\n\r\n// 设置模型轴动画\r\nconst onRotationAnimation = () => {\r\n  state.modelApi.onSetRotation(config);\r\n};\r\n// 设置模型轴动画类型\r\nconst onRotationType = () => {\r\n  state.modelApi.onSetRotationType(config);\r\n};\r\n\r\ndefineExpose({\r\n  config,\r\n});\r\n</script>\r\n<style scoped lang=\"scss\"></style>\r\n","import script from \"./EditAnimation.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./EditAnimation.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, normalizeClass as _normalizeClass, unref as _unref, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"edit-box\" }\nconst _hoisted_2 = { class: \"header\" }\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"span\", null, \"辅助线/轴配置\", -1)\nconst _hoisted_4 = { class: \"option space-between\" }\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"span\", null, \" 模型轴旋转 \", -1)\nconst _hoisted_6 = { class: \"option\" }\nconst _hoisted_7 = { class: \"option\" }\nconst _hoisted_8 = { class: \"option\" }\nconst _hoisted_9 = { class: \"option space-between\" }\nconst _hoisted_10 = /*#__PURE__*/_createElementVNode(\"span\", null, \" 模型位置 \", -1)\nconst _hoisted_11 = { class: \"option\" }\nconst _hoisted_12 = { class: \"grid-txt\" }\nconst _hoisted_13 = { class: \"grid-silder\" }\nconst _hoisted_14 = { class: \"option\" }\nconst _hoisted_15 = { class: \"grid-txt\" }\nconst _hoisted_16 = { class: \"grid-silder\" }\nconst _hoisted_17 = { class: \"option\" }\nconst _hoisted_18 = { class: \"grid-txt\" }\nconst _hoisted_19 = { class: \"grid-silder\" }\nconst _hoisted_20 = { class: \"option space-between\" }\nconst _hoisted_21 = /*#__PURE__*/_createElementVNode(\"span\", null, \" 模型骨架 \", -1)\nconst _hoisted_22 = { class: \"option space-between\" }\nconst _hoisted_23 = /*#__PURE__*/_createElementVNode(\"span\", null, \" 网格辅助线 \", -1)\nconst _hoisted_24 = { class: \"option\" }\nconst _hoisted_25 = { class: \"grid-txt\" }\nconst _hoisted_26 = { class: \"grid-silder\" }\nconst _hoisted_27 = { class: \"option\" }\nconst _hoisted_28 = { class: \"grid-txt\" }\nconst _hoisted_29 = { class: \"grid-silder\" }\nconst _hoisted_30 = { class: \"option\" }\nconst _hoisted_31 = { class: \"grid-txt\" }\nconst _hoisted_32 = { class: \"grid-silder\" }\nconst _hoisted_33 = { class: \"option\" }\nconst _hoisted_34 = { class: \"option\" }\nconst _hoisted_35 = { class: \"option space-between\" }\nconst _hoisted_36 = /*#__PURE__*/_createElementVNode(\"span\", null, \" 坐标轴辅助线 \", -1)\nconst _hoisted_37 = { class: \"grid-txt\" }\nconst _hoisted_38 = { class: \"grid-silder\" }\n\nimport { reactive, computed, onMounted, getCurrentInstance } from \"vue\";\r\nimport { PREDEFINE_COLORS } from \"@/config/constant\";\r\nimport { useStore } from \"vuex\";\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'EditAttribute',\n  setup(__props, { expose: __expose }) {\n\r\nconst store = useStore();\r\nconst { $bus } = (getCurrentInstance() as any).proxy;\r\nconst config = reactive({\r\n  visible: true,\r\n  skeletonHelper: false,\r\n  gridHelper: false,\r\n  x: 0,\r\n  y: -0.59,\r\n  z: -0.1,\r\n  positionX: 0,\r\n  positionY: -0.5,\r\n  positionZ: 0,\r\n  divisions: 10,\r\n  size: 4,\r\n  color: \"rgb(193,193,193)\",\r\n  axesHelper: false,\r\n  axesSize: 1.8,\r\n\r\n});\r\nconst predefineColors = PREDEFINE_COLORS;\r\nconst optionDisabled = computed(() => {\r\n  return config.visible ? \"\" : \"disabled\";\r\n});\r\nconst gridDisabled = computed(() => {\r\n  const { visible, gridHelper } = config;\r\n  return gridHelper && visible ? \"\" : \"disabled\";\r\n});\r\nconst axesDisabled = computed(() => {\r\n  const { visible, axesHelper } = config;\r\n  return axesHelper && visible ? \"\" : \"disabled\";\r\n});\r\nconst state = reactive({\r\n  modelApi: computed(() => {\r\n    return store.state.modelApi;\r\n  }),\r\n});\r\nonMounted(() => {\r\n  $bus.on(\"model-update\", () => {\r\n    // 重置动画数据\r\n    Object.assign(config, {\r\n      visible: true,\r\n      skeletonHelper: false,\r\n      gridHelper: false,\r\n      x: 0,\r\n      y: -0.59,\r\n      z: -0.1,\r\n      positionX: 0,\r\n      positionY: -0.5,\r\n      positionZ: 0,\r\n      divisions: 10,\r\n      size: 4,\r\n      color: \"rgb(193,193,193)\",\r\n      axesHelper: false,\r\n      axesSize: 1.8,\r\n    });\r\n  });\r\n});\r\nconst onChangeAttributeSwitch = () => { };\r\n// 设置模型轴角度\r\nconst onSetRotateOnAxis = (type: any, direction: string) => {\r\n  const flag = direction == \"right\" ? true : false;\r\n  state.modelApi.onSetModelRotateOnAxis(type, flag)\r\n};\r\n// 重置模型角度\r\nconst onResultRotate = () => {\r\n  state.modelApi.onResultModelRotateOnAxis();\r\n};\r\n\r\n// 设置模型位置\r\nconst onSetPosition = () => {\r\n  state.modelApi.onSetModelPosition(config);\r\n};\r\n// 重置模型位置\r\nconst onResultPosition = () => {\r\n  config.positionX = 0;\r\n  config.positionY = -0.5;\r\n  config.positionZ = 0;\r\n  state.modelApi.onResultModelPosition(config);\r\n};\r\n\r\nconst onSetModelHelper = () => {\r\n  state.modelApi.onSetModelHelper(config.skeletonHelper);\r\n};\r\nconst activeChangeColor = (color: string) => {\r\n  config.color = color;\r\n  state.modelApi.onSetModelGridHelper(config);\r\n};\r\n// 设置网格辅助线位置/颜色\r\nconst onChangeGridHelper = () => {\r\n  state.modelApi.onSetModelGridHelper(config);\r\n};\r\n// 设置网格数量大小\r\nconst onChangeGridHelperSize = () => {\r\n  state.modelApi.onSetModelGridHelperSize(config);\r\n};\r\n\r\n//设置坐标轴辅助线\r\nconst onChangeAxesHelper = () => {\r\n  state.modelApi.onSetModelAxesHelper(config);\r\n};\r\nconst getAttrbuteConfig = () => {\r\n  const { x, y, z } = state.modelApi.model.rotation\r\n  let rotationX = x\r\n  let rotationY = y\r\n  let rotationZ = z\r\n  return {\r\n    ...config,\r\n    rotationX,\r\n    rotationY,\r\n    rotationZ,\r\n\r\n  }\r\n}\r\n__expose({\r\n  getAttrbuteConfig\r\n});\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_switch = _resolveComponent(\"el-switch\")!\n  const _component_Setting = _resolveComponent(\"Setting\")!\n  const _component_el_icon = _resolveComponent(\"el-icon\")!\n  const _component_el_space = _resolveComponent(\"el-space\")!\n  const _component_el_button = _resolveComponent(\"el-button\")!\n  const _component_Location = _resolveComponent(\"Location\")!\n  const _component_el_slider = _resolveComponent(\"el-slider\")!\n  const _component_Eleme = _resolveComponent(\"Eleme\")!\n  const _component_Grid = _resolveComponent(\"Grid\")!\n  const _component_el_input_number = _resolveComponent(\"el-input-number\")!\n  const _component_el_color_picker = _resolveComponent(\"el-color-picker\")!\n  const _component_Rank = _resolveComponent(\"Rank\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _hoisted_3,\n      _createVNode(_component_el_switch, {\n        modelValue: config.visible,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((config.visible) = $event)),\n        onChange: onChangeAttributeSwitch\n      }, null, 8, [\"modelValue\"])\n    ]),\n    _createElementVNode(\"div\", {\n      class: _normalizeClass([\"options\", optionDisabled.value])\n    }, [\n      _createElementVNode(\"div\", _hoisted_4, [\n        _createVNode(_component_el_space, null, {\n          default: _withCtx(() => [\n            _createVNode(_component_el_icon, null, {\n              default: _withCtx(() => [\n                _createVNode(_component_Setting)\n              ]),\n              _: 1\n            }),\n            _hoisted_5\n          ]),\n          _: 1\n        }),\n        _createVNode(_component_el_button, {\n          type: \"primary\",\n          link: \"\",\n          icon: \"Refresh\",\n          onClick: onResultRotate\n        }, {\n          default: _withCtx(() => [\n            _createTextVNode(\" 重置 \")\n          ]),\n          _: 1\n        })\n      ]),\n      _createElementVNode(\"div\", _hoisted_6, [\n        _createVNode(_component_el_button, {\n          type: \"info\",\n          icon: \"RefreshRight\",\n          onClick: _cache[1] || (_cache[1] = ($event: any) => (onSetRotateOnAxis('x', 'right')))\n        }),\n        _createVNode(_component_el_button, {\n          type: \"primary\",\n          link: \"\"\n        }, {\n          default: _withCtx(() => [\n            _createTextVNode(\"X轴\")\n          ]),\n          _: 1\n        }),\n        _createVNode(_component_el_button, {\n          type: \"info\",\n          icon: \"RefreshLeft\",\n          onClick: _cache[2] || (_cache[2] = ($event: any) => (onSetRotateOnAxis('x', 'left')))\n        })\n      ]),\n      _createElementVNode(\"div\", _hoisted_7, [\n        _createVNode(_component_el_button, {\n          type: \"info\",\n          icon: \"RefreshRight\",\n          onClick: _cache[3] || (_cache[3] = ($event: any) => (onSetRotateOnAxis('y', 'right')))\n        }),\n        _createVNode(_component_el_button, {\n          type: \"primary\",\n          link: \"\"\n        }, {\n          default: _withCtx(() => [\n            _createTextVNode(\"Y轴\")\n          ]),\n          _: 1\n        }),\n        _createVNode(_component_el_button, {\n          type: \"info\",\n          icon: \"RefreshLeft\",\n          onClick: _cache[4] || (_cache[4] = ($event: any) => (onSetRotateOnAxis('y', 'left')))\n        })\n      ]),\n      _createElementVNode(\"div\", _hoisted_8, [\n        _createVNode(_component_el_button, {\n          type: \"info\",\n          icon: \"RefreshRight\",\n          onClick: _cache[5] || (_cache[5] = ($event: any) => (onSetRotateOnAxis('z', 'right')))\n        }),\n        _createVNode(_component_el_button, {\n          type: \"primary\",\n          link: \"\"\n        }, {\n          default: _withCtx(() => [\n            _createTextVNode(\"Z轴\")\n          ]),\n          _: 1\n        }),\n        _createVNode(_component_el_button, {\n          type: \"info\",\n          icon: \"RefreshLeft\",\n          onClick: _cache[6] || (_cache[6] = ($event: any) => (onSetRotateOnAxis('z', 'left')))\n        })\n      ]),\n      _createElementVNode(\"div\", _hoisted_9, [\n        _createVNode(_component_el_space, null, {\n          default: _withCtx(() => [\n            _createVNode(_component_el_icon, null, {\n              default: _withCtx(() => [\n                _createVNode(_component_Location)\n              ]),\n              _: 1\n            }),\n            _hoisted_10\n          ]),\n          _: 1\n        }),\n        _createVNode(_component_el_button, {\n          type: \"primary\",\n          link: \"\",\n          icon: \"Refresh\",\n          onClick: onResultPosition\n        }, {\n          default: _withCtx(() => [\n            _createTextVNode(\" 重置 \")\n          ]),\n          _: 1\n        })\n      ]),\n      _createElementVNode(\"div\", _hoisted_11, [\n        _createElementVNode(\"div\", _hoisted_12, [\n          _createVNode(_component_el_button, {\n            type: \"primary\",\n            link: \"\"\n          }, {\n            default: _withCtx(() => [\n              _createTextVNode(\"X 轴\")\n            ]),\n            _: 1\n          })\n        ]),\n        _createElementVNode(\"div\", _hoisted_13, [\n          _createVNode(_component_el_slider, {\n            onInput: onSetPosition,\n            \"show-input\": \"\",\n            modelValue: config.positionX,\n            \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event: any) => ((config.positionX) = $event)),\n            min: -10,\n            max: 10,\n            step: 0.1\n          }, null, 8, [\"modelValue\"])\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_14, [\n        _createElementVNode(\"div\", _hoisted_15, [\n          _createVNode(_component_el_button, {\n            type: \"primary\",\n            link: \"\"\n          }, {\n            default: _withCtx(() => [\n              _createTextVNode(\"Y 轴\")\n            ]),\n            _: 1\n          })\n        ]),\n        _createElementVNode(\"div\", _hoisted_16, [\n          _createVNode(_component_el_slider, {\n            onInput: onSetPosition,\n            \"show-input\": \"\",\n            modelValue: config.positionY,\n            \"onUpdate:modelValue\": _cache[8] || (_cache[8] = ($event: any) => ((config.positionY) = $event)),\n            min: -10,\n            max: 10,\n            step: 0.1\n          }, null, 8, [\"modelValue\"])\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_17, [\n        _createElementVNode(\"div\", _hoisted_18, [\n          _createVNode(_component_el_button, {\n            type: \"primary\",\n            link: \"\"\n          }, {\n            default: _withCtx(() => [\n              _createTextVNode(\"Z 轴\")\n            ]),\n            _: 1\n          })\n        ]),\n        _createElementVNode(\"div\", _hoisted_19, [\n          _createVNode(_component_el_slider, {\n            onInput: onSetPosition,\n            \"show-input\": \"\",\n            modelValue: config.positionZ,\n            \"onUpdate:modelValue\": _cache[9] || (_cache[9] = ($event: any) => ((config.positionZ) = $event)),\n            min: -10,\n            max: 10,\n            step: 0.1\n          }, null, 8, [\"modelValue\"])\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_20, [\n        _createVNode(_component_el_space, null, {\n          default: _withCtx(() => [\n            _createVNode(_component_el_icon, null, {\n              default: _withCtx(() => [\n                _createVNode(_component_Eleme)\n              ]),\n              _: 1\n            }),\n            _hoisted_21\n          ]),\n          _: 1\n        }),\n        _createVNode(_component_el_switch, {\n          modelValue: config.skeletonHelper,\n          \"onUpdate:modelValue\": _cache[10] || (_cache[10] = ($event: any) => ((config.skeletonHelper) = $event)),\n          onChange: onSetModelHelper\n        }, null, 8, [\"modelValue\"])\n      ])\n    ], 2),\n    _createElementVNode(\"div\", {\n      class: _normalizeClass([\"options\", optionDisabled.value])\n    }, [\n      _createElementVNode(\"div\", _hoisted_22, [\n        _createVNode(_component_el_space, null, {\n          default: _withCtx(() => [\n            _createVNode(_component_el_icon, null, {\n              default: _withCtx(() => [\n                _createVNode(_component_Grid)\n              ]),\n              _: 1\n            }),\n            _hoisted_23\n          ]),\n          _: 1\n        }),\n        _createVNode(_component_el_switch, {\n          modelValue: config.gridHelper,\n          \"onUpdate:modelValue\": _cache[11] || (_cache[11] = ($event: any) => ((config.gridHelper) = $event)),\n          onChange: onChangeGridHelper\n        }, null, 8, [\"modelValue\"])\n      ])\n    ], 2),\n    _createElementVNode(\"div\", {\n      class: _normalizeClass([\"options\", gridDisabled.value])\n    }, [\n      _createElementVNode(\"div\", _hoisted_24, [\n        _createElementVNode(\"div\", _hoisted_25, [\n          _createVNode(_component_el_button, {\n            type: \"primary\",\n            link: \"\"\n          }, {\n            default: _withCtx(() => [\n              _createTextVNode(\"X 轴\")\n            ]),\n            _: 1\n          })\n        ]),\n        _createElementVNode(\"div\", _hoisted_26, [\n          _createVNode(_component_el_slider, {\n            \"show-input\": \"\",\n            onInput: onChangeGridHelper,\n            modelValue: config.x,\n            \"onUpdate:modelValue\": _cache[12] || (_cache[12] = ($event: any) => ((config.x) = $event)),\n            min: -2,\n            max: 4,\n            step: 0.01\n          }, null, 8, [\"modelValue\"])\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_27, [\n        _createElementVNode(\"div\", _hoisted_28, [\n          _createVNode(_component_el_button, {\n            type: \"primary\",\n            link: \"\"\n          }, {\n            default: _withCtx(() => [\n              _createTextVNode(\"Y 轴\")\n            ]),\n            _: 1\n          })\n        ]),\n        _createElementVNode(\"div\", _hoisted_29, [\n          _createVNode(_component_el_slider, {\n            \"show-input\": \"\",\n            onInput: onChangeGridHelper,\n            modelValue: config.y,\n            \"onUpdate:modelValue\": _cache[13] || (_cache[13] = ($event: any) => ((config.y) = $event)),\n            min: -2,\n            max: 4,\n            step: 0.01\n          }, null, 8, [\"modelValue\"])\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_30, [\n        _createElementVNode(\"div\", _hoisted_31, [\n          _createVNode(_component_el_button, {\n            type: \"primary\",\n            link: \"\"\n          }, {\n            default: _withCtx(() => [\n              _createTextVNode(\"Z 轴\")\n            ]),\n            _: 1\n          })\n        ]),\n        _createElementVNode(\"div\", _hoisted_32, [\n          _createVNode(_component_el_slider, {\n            \"show-input\": \"\",\n            onInput: onChangeGridHelper,\n            modelValue: config.z,\n            \"onUpdate:modelValue\": _cache[14] || (_cache[14] = ($event: any) => ((config.z) = $event)),\n            min: -2,\n            max: 4,\n            step: 0.01\n          }, null, 8, [\"modelValue\"])\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_33, [\n        _createElementVNode(\"div\", null, [\n          _createVNode(_component_el_button, {\n            type: \"primary\",\n            link: \"\"\n          }, {\n            default: _withCtx(() => [\n              _createTextVNode(\"大小\")\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_el_input_number, {\n            controls: true,\n            onChange: onChangeGridHelperSize,\n            modelValue: config.size,\n            \"onUpdate:modelValue\": _cache[15] || (_cache[15] = ($event: any) => ((config.size) = $event)),\n            min: 1,\n            max: 40\n          }, null, 8, [\"modelValue\"])\n        ]),\n        _createElementVNode(\"div\", null, [\n          _createVNode(_component_el_button, {\n            type: \"primary\",\n            link: \"\"\n          }, {\n            default: _withCtx(() => [\n              _createTextVNode(\"分割数\")\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_el_input_number, {\n            controls: true,\n            onChange: onChangeGridHelperSize,\n            modelValue: config.divisions,\n            \"onUpdate:modelValue\": _cache[16] || (_cache[16] = ($event: any) => ((config.divisions) = $event)),\n            min: 1,\n            max: 40\n          }, null, 8, [\"modelValue\"])\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_34, [\n        _createVNode(_component_el_space, null, {\n          default: _withCtx(() => [\n            _createVNode(_component_el_button, {\n              type: \"primary\",\n              link: \"\"\n            }, {\n              default: _withCtx(() => [\n                _createTextVNode(\"网格颜色\")\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_color_picker, {\n              \"color-format\": \"hex\",\n              predefine: _unref(predefineColors),\n              onChange: onChangeGridHelper,\n              onActiveChange: activeChangeColor,\n              modelValue: config.color,\n              \"onUpdate:modelValue\": _cache[17] || (_cache[17] = ($event: any) => ((config.color) = $event))\n            }, null, 8, [\"predefine\", \"modelValue\"])\n          ]),\n          _: 1\n        })\n      ])\n    ], 2),\n    _createElementVNode(\"div\", {\n      class: _normalizeClass([\"options\", optionDisabled.value])\n    }, [\n      _createElementVNode(\"div\", _hoisted_35, [\n        _createVNode(_component_el_space, null, {\n          default: _withCtx(() => [\n            _createVNode(_component_el_icon, null, {\n              default: _withCtx(() => [\n                _createVNode(_component_Rank)\n              ]),\n              _: 1\n            }),\n            _hoisted_36\n          ]),\n          _: 1\n        }),\n        _createVNode(_component_el_switch, {\n          modelValue: config.axesHelper,\n          \"onUpdate:modelValue\": _cache[18] || (_cache[18] = ($event: any) => ((config.axesHelper) = $event)),\n          onChange: onChangeAxesHelper\n        }, null, 8, [\"modelValue\"])\n      ]),\n      _createElementVNode(\"div\", {\n        class: _normalizeClass([\"option\", axesDisabled.value])\n      }, [\n        _createElementVNode(\"div\", _hoisted_37, [\n          _createVNode(_component_el_button, {\n            type: \"primary\",\n            link: \"\"\n          }, {\n            default: _withCtx(() => [\n              _createTextVNode(\"轴长度\")\n            ]),\n            _: 1\n          })\n        ]),\n        _createElementVNode(\"div\", _hoisted_38, [\n          _createVNode(_component_el_slider, {\n            onInput: onChangeAxesHelper,\n            modelValue: config.axesSize,\n            \"onUpdate:modelValue\": _cache[19] || (_cache[19] = ($event: any) => ((config.axesSize) = $event)),\n            min: 1,\n            max: 10,\n            step: 0.2\n          }, null, 8, [\"modelValue\"])\n        ])\n      ], 2)\n    ], 2)\n  ]))\n}\n}\n\n})","<template>\r\n  <div class=\"edit-box\">\r\n    <div class=\"header\">\r\n      <span>辅助线/轴配置</span>\r\n      <el-switch v-model=\"config.visible\" @change=\"onChangeAttributeSwitch\" />\r\n    </div>\r\n    <!-- 模型旋转 -->\r\n    <div class=\"options\" :class=\"optionDisabled\">\r\n      <div class=\"option space-between\">\r\n        <el-space>\r\n          <el-icon>\r\n            <Setting />\r\n          </el-icon>\r\n          <span> 模型轴旋转 </span>\r\n        </el-space>\r\n        <el-button type=\"primary\" link icon=\"Refresh\" @click=\"onResultRotate\">\r\n          重置\r\n        </el-button>\r\n      </div>\r\n      <div class=\"option\">\r\n        <el-button type=\"info\" icon=\"RefreshRight\" @click=\"onSetRotateOnAxis('x', 'right')\" />\r\n        <el-button type=\"primary\" link>X轴</el-button>\r\n        <el-button type=\"info\" icon=\"RefreshLeft\" @click=\"onSetRotateOnAxis('x', 'left')\" />\r\n      </div>\r\n      <div class=\"option\">\r\n        <el-button type=\"info\" icon=\"RefreshRight\" @click=\"onSetRotateOnAxis('y', 'right')\" />\r\n        <el-button type=\"primary\" link>Y轴</el-button>\r\n        <el-button type=\"info\" icon=\"RefreshLeft\" @click=\"onSetRotateOnAxis('y', 'left')\" />\r\n      </div>\r\n      <div class=\"option\">\r\n        <el-button type=\"info\" icon=\"RefreshRight\" @click=\"onSetRotateOnAxis('z', 'right')\" />\r\n        <el-button type=\"primary\" link>Z轴</el-button>\r\n        <el-button type=\"info\" icon=\"RefreshLeft\" @click=\"onSetRotateOnAxis('z', 'left')\" />\r\n      </div>\r\n      <!-- 模型位置 -->\r\n      <div class=\"option space-between\">\r\n        <el-space>\r\n          <el-icon>\r\n            <Location />\r\n          </el-icon>\r\n          <span> 模型位置 </span>\r\n        </el-space>\r\n        <el-button type=\"primary\" link icon=\"Refresh\" @click=\"onResultPosition\">\r\n          重置\r\n        </el-button>\r\n      </div>\r\n      <div class=\"option\">\r\n        <div class=\"grid-txt\">\r\n          <el-button type=\"primary\" link>X 轴</el-button>\r\n        </div>\r\n        <div class=\"grid-silder\">\r\n          <el-slider @input=\"onSetPosition\" show-input v-model=\"config.positionX\" :min=\"-10\" :max=\"10\" :step=\"0.1\" />\r\n        </div>\r\n      </div>\r\n      <div class=\"option\">\r\n        <div class=\"grid-txt\">\r\n          <el-button type=\"primary\" link>Y 轴</el-button>\r\n        </div>\r\n        <div class=\"grid-silder\">\r\n          <el-slider @input=\"onSetPosition\" show-input v-model=\"config.positionY\" :min=\"-10\" :max=\"10\" :step=\"0.1\" />\r\n        </div>\r\n      </div>\r\n      <div class=\"option\">\r\n        <div class=\"grid-txt\">\r\n          <el-button type=\"primary\" link>Z 轴</el-button>\r\n        </div>\r\n        <div class=\"grid-silder\">\r\n          <el-slider @input=\"onSetPosition\" show-input v-model=\"config.positionZ\" :min=\"-10\" :max=\"10\" :step=\"0.1\" />\r\n        </div>\r\n      </div>\r\n      <!-- 模型骨架 -->\r\n      <div class=\"option space-between\">\r\n        <el-space>\r\n          <el-icon>\r\n            <Eleme />\r\n          </el-icon>\r\n          <span> 模型骨架 </span>\r\n        </el-space>\r\n        <el-switch v-model=\"config.skeletonHelper\" @change=\"onSetModelHelper\" />\r\n      </div>\r\n    </div>\r\n    <!-- 网格辅助线 -->\r\n    <div class=\"options\" :class=\"optionDisabled\">\r\n      <div class=\"option space-between\">\r\n        <el-space>\r\n          <el-icon>\r\n            <Grid />\r\n          </el-icon>\r\n          <span> 网格辅助线 </span>\r\n        </el-space>\r\n        <el-switch v-model=\"config.gridHelper\" @change=\"onChangeGridHelper\" />\r\n      </div>\r\n    </div>\r\n    <div class=\"options\" :class=\"gridDisabled\">\r\n      <!-- x轴 -->\r\n      <div class=\"option\">\r\n        <div class=\"grid-txt\">\r\n          <el-button type=\"primary\" link>X 轴</el-button>\r\n        </div>\r\n        <div class=\"grid-silder\">\r\n          <el-slider show-input @input=\"onChangeGridHelper\" v-model=\"config.x\" :min=\"-2\" :max=\"4\" :step=\"0.01\" />\r\n        </div>\r\n      </div>\r\n      <!-- Y轴 -->\r\n      <div class=\"option\">\r\n        <div class=\"grid-txt\">\r\n          <el-button type=\"primary\" link>Y 轴</el-button>\r\n        </div>\r\n        <div class=\"grid-silder\">\r\n          <el-slider show-input @input=\"onChangeGridHelper\" v-model=\"config.y\" :min=\"-2\" :max=\"4\" :step=\"0.01\" />\r\n        </div>\r\n      </div>\r\n      <!-- Z轴 -->\r\n      <div class=\"option\">\r\n        <div class=\"grid-txt\">\r\n          <el-button type=\"primary\" link>Z 轴</el-button>\r\n        </div>\r\n        <div class=\"grid-silder\">\r\n          <el-slider show-input @input=\"onChangeGridHelper\" v-model=\"config.z\" :min=\"-2\" :max=\"4\" :step=\"0.01\" />\r\n        </div>\r\n      </div>\r\n      <!-- 网格数量/大小 -->\r\n      <div class=\"option\">\r\n        <div>\r\n          <el-button type=\"primary\" link>大小</el-button>\r\n          <el-input-number :controls=\"true\" @change=\"onChangeGridHelperSize\" v-model=\"config.size\" :min=\"1\" :max=\"40\" />\r\n        </div>\r\n        <div>\r\n          <el-button type=\"primary\" link>分割数</el-button>\r\n          <el-input-number :controls=\"true\" @change=\"onChangeGridHelperSize\" v-model=\"config.divisions\" :min=\"1\"\r\n            :max=\"40\" />\r\n        </div>\r\n      </div>\r\n      <!-- 网格颜色 -->\r\n      <div class=\"option\">\r\n        <el-space>\r\n          <el-button type=\"primary\" link>网格颜色</el-button>\r\n          <el-color-picker color-format=\"hex\" :predefine=\"predefineColors\" @change=\"onChangeGridHelper\"\r\n            @active-change=\"activeChangeColor\" v-model=\"config.color\" />\r\n        </el-space>\r\n      </div>\r\n    </div>\r\n    <!-- 坐标轴辅助线 -->\r\n    <div class=\"options\" :class=\"optionDisabled\">\r\n      <div class=\"option space-between\">\r\n        <el-space>\r\n          <el-icon>\r\n            <Rank />\r\n          </el-icon>\r\n          <span> 坐标轴辅助线 </span>\r\n        </el-space>\r\n        <el-switch v-model=\"config.axesHelper\" @change=\"onChangeAxesHelper\" />\r\n      </div>\r\n      <div class=\"option\" :class=\"axesDisabled\">\r\n        <div class=\"grid-txt\">\r\n          <el-button type=\"primary\" link>轴长度</el-button>\r\n        </div>\r\n        <div class=\"grid-silder\">\r\n          <el-slider @input=\"onChangeAxesHelper\" v-model=\"config.axesSize\" :min=\"1\" :max=\"10\" :step=\"0.2\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { reactive, computed, onMounted, getCurrentInstance } from \"vue\";\r\nimport { PREDEFINE_COLORS } from \"@/config/constant\";\r\nimport { useStore } from \"vuex\";\r\nconst store = useStore();\r\nconst { $bus } = (getCurrentInstance() as any).proxy;\r\nconst config = reactive({\r\n  visible: true,\r\n  skeletonHelper: false,\r\n  gridHelper: false,\r\n  x: 0,\r\n  y: -0.59,\r\n  z: -0.1,\r\n  positionX: 0,\r\n  positionY: -0.5,\r\n  positionZ: 0,\r\n  divisions: 10,\r\n  size: 4,\r\n  color: \"rgb(193,193,193)\",\r\n  axesHelper: false,\r\n  axesSize: 1.8,\r\n\r\n});\r\nconst predefineColors = PREDEFINE_COLORS;\r\nconst optionDisabled = computed(() => {\r\n  return config.visible ? \"\" : \"disabled\";\r\n});\r\nconst gridDisabled = computed(() => {\r\n  const { visible, gridHelper } = config;\r\n  return gridHelper && visible ? \"\" : \"disabled\";\r\n});\r\nconst axesDisabled = computed(() => {\r\n  const { visible, axesHelper } = config;\r\n  return axesHelper && visible ? \"\" : \"disabled\";\r\n});\r\nconst state = reactive({\r\n  modelApi: computed(() => {\r\n    return store.state.modelApi;\r\n  }),\r\n});\r\nonMounted(() => {\r\n  $bus.on(\"model-update\", () => {\r\n    // 重置动画数据\r\n    Object.assign(config, {\r\n      visible: true,\r\n      skeletonHelper: false,\r\n      gridHelper: false,\r\n      x: 0,\r\n      y: -0.59,\r\n      z: -0.1,\r\n      positionX: 0,\r\n      positionY: -0.5,\r\n      positionZ: 0,\r\n      divisions: 10,\r\n      size: 4,\r\n      color: \"rgb(193,193,193)\",\r\n      axesHelper: false,\r\n      axesSize: 1.8,\r\n    });\r\n  });\r\n});\r\nconst onChangeAttributeSwitch = () => { };\r\n// 设置模型轴角度\r\nconst onSetRotateOnAxis = (type: any, direction: string) => {\r\n  const flag = direction == \"right\" ? true : false;\r\n  state.modelApi.onSetModelRotateOnAxis(type, flag)\r\n};\r\n// 重置模型角度\r\nconst onResultRotate = () => {\r\n  state.modelApi.onResultModelRotateOnAxis();\r\n};\r\n\r\n// 设置模型位置\r\nconst onSetPosition = () => {\r\n  state.modelApi.onSetModelPosition(config);\r\n};\r\n// 重置模型位置\r\nconst onResultPosition = () => {\r\n  config.positionX = 0;\r\n  config.positionY = -0.5;\r\n  config.positionZ = 0;\r\n  state.modelApi.onResultModelPosition(config);\r\n};\r\n\r\nconst onSetModelHelper = () => {\r\n  state.modelApi.onSetModelHelper(config.skeletonHelper);\r\n};\r\nconst activeChangeColor = (color: string) => {\r\n  config.color = color;\r\n  state.modelApi.onSetModelGridHelper(config);\r\n};\r\n// 设置网格辅助线位置/颜色\r\nconst onChangeGridHelper = () => {\r\n  state.modelApi.onSetModelGridHelper(config);\r\n};\r\n// 设置网格数量大小\r\nconst onChangeGridHelperSize = () => {\r\n  state.modelApi.onSetModelGridHelperSize(config);\r\n};\r\n\r\n//设置坐标轴辅助线\r\nconst onChangeAxesHelper = () => {\r\n  state.modelApi.onSetModelAxesHelper(config);\r\n};\r\nconst getAttrbuteConfig = () => {\r\n  const { x, y, z } = state.modelApi.model.rotation\r\n  let rotationX = x\r\n  let rotationY = y\r\n  let rotationZ = z\r\n  return {\r\n    ...config,\r\n    rotationX,\r\n    rotationY,\r\n    rotationZ,\r\n\r\n  }\r\n}\r\ndefineExpose({\r\n  getAttrbuteConfig\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\" scoped></style>\r\n","import script from \"./EditAttribute.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./EditAttribute.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, unref as _unref, normalizeClass as _normalizeClass, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-77542eb5\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"edit-box\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"header\" }, [\n  /*#__PURE__*/_createElementVNode(\"span\", null, \"模型灯光\")\n], -1))\nconst _hoisted_3 = { class: \"options\" }\nconst _hoisted_4 = { class: \"option space-between\" }\nconst _hoisted_5 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", null, \"光源平面\", -1))\nconst _hoisted_6 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", null, \"平面颜色\", -1))\nconst _hoisted_7 = { class: \"grid-txt\" }\nconst _hoisted_8 = { class: \"grid-silder\" }\nconst _hoisted_9 = { class: \"grid-txt\" }\nconst _hoisted_10 = { class: \"grid-silder\" }\nconst _hoisted_11 = { class: \"options\" }\nconst _hoisted_12 = { class: \"option space-between\" }\nconst _hoisted_13 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", null, \"环境光\", -1))\nconst _hoisted_14 = { class: \"color\" }\nconst _hoisted_15 = { class: \"silder\" }\nconst _hoisted_16 = { class: \"options\" }\nconst _hoisted_17 = { class: \"option space-between\" }\nconst _hoisted_18 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", null, \"平行光\", -1))\nconst _hoisted_19 = { class: \"color\" }\nconst _hoisted_20 = { class: \"silder\" }\nconst _hoisted_21 = { class: \"grid-txt\" }\nconst _hoisted_22 = { class: \"grid-silder\" }\nconst _hoisted_23 = { class: \"grid-txt\" }\nconst _hoisted_24 = { class: \"grid-silder\" }\nconst _hoisted_25 = { class: \"grid-txt\" }\nconst _hoisted_26 = { class: \"grid-silder\" }\nconst _hoisted_27 = { class: \"grid-txt\" }\nconst _hoisted_28 = { class: \"grid-silder\" }\nconst _hoisted_29 = { class: \"grid-txt\" }\nconst _hoisted_30 = { class: \"grid-silder\" }\nconst _hoisted_31 = { class: \"options\" }\nconst _hoisted_32 = { class: \"option space-between\" }\nconst _hoisted_33 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", null, \"点光源\", -1))\nconst _hoisted_34 = { class: \"grid-txt\" }\nconst _hoisted_35 = { class: \"grid-silder\" }\nconst _hoisted_36 = { class: \"color\" }\nconst _hoisted_37 = { class: \"silder\" }\nconst _hoisted_38 = { class: \"grid-txt\" }\nconst _hoisted_39 = { class: \"grid-silder\" }\nconst _hoisted_40 = { class: \"grid-txt\" }\nconst _hoisted_41 = { class: \"grid-silder\" }\nconst _hoisted_42 = { class: \"grid-txt\" }\nconst _hoisted_43 = { class: \"grid-silder\" }\nconst _hoisted_44 = { class: \"options\" }\nconst _hoisted_45 = { class: \"option space-between\" }\nconst _hoisted_46 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", null, \"聚光灯\", -1))\nconst _hoisted_47 = { class: \"color\" }\nconst _hoisted_48 = { class: \"silder\" }\nconst _hoisted_49 = { class: \"grid-txt\" }\nconst _hoisted_50 = { class: \"grid-silder\" }\nconst _hoisted_51 = { class: \"grid-txt\" }\nconst _hoisted_52 = { class: \"grid-silder\" }\nconst _hoisted_53 = { class: \"grid-txt\" }\nconst _hoisted_54 = { class: \"grid-silder\" }\nconst _hoisted_55 = { class: \"grid-txt\" }\nconst _hoisted_56 = { class: \"grid-silder\" }\nconst _hoisted_57 = { class: \"grid-txt\" }\nconst _hoisted_58 = { class: \"grid-silder\" }\nconst _hoisted_59 = { class: \"grid-txt\" }\nconst _hoisted_60 = { class: \"grid-silder\" }\nconst _hoisted_61 = { class: \"grid-txt\" }\nconst _hoisted_62 = { class: \"grid-silder\" }\nconst _hoisted_63 = { class: \"grid-txt\" }\nconst _hoisted_64 = { class: \"grid-silder\" }\nconst _hoisted_65 = { class: \"grid-txt\" }\nconst _hoisted_66 = { class: \"grid-silder\" }\n\nimport { reactive, computed, onMounted, getCurrentInstance } from \"vue\";\r\nimport { useStore } from \"vuex\";\r\nimport { PREDEFINE_COLORS } from \"@/config/constant\";\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'EditLight',\n  setup(__props, { expose: __expose }) {\n\r\nconst store = useStore();\r\nconst { $bus } = (getCurrentInstance() as any).proxy;\r\nconst config = reactive({\r\n  //光源平面\r\n  planeGeometry: false,\r\n  planeColor: \"#000000\",\r\n  planeWidth: 7,\r\n  planeHeight: 7,\r\n  //环境光\r\n  ambientLight: true,\r\n  ambientLightColor: \"#fff\",\r\n  ambientLightIntensity: 0.8,\r\n  //平行光\r\n  directionalLight: false,\r\n  directionalLightHelper: true,\r\n  directionalLightColor: \"#fff\",\r\n  directionalLightIntensity: 5,\r\n  directionalHorizontal: -1.26,\r\n  directionalVertical: -3.85,\r\n  directionalSistance: 2.98,\r\n  directionaShadow: true,\r\n  //点光源\r\n  pointLight: false,\r\n  pointLightHelper: true,\r\n  pointLightColor: \"#1E90FF\",\r\n  pointLightIntensity: 10,\r\n  pointHorizontal: -4.21,\r\n  pointVertical: -4.1,\r\n  pointSistance: 2.53,\r\n  //聚光灯\r\n  spotLight: false,\r\n  spotLightColor: \"#00BABD\",\r\n  spotLightIntensity: 900,\r\n  spotHorizontal: -3.49,\r\n  spotVertical: -4.37,\r\n  spotSistance: 4.09,\r\n  spotAngle: 0.5,\r\n  spotPenumbra: 1,\r\n  spotFocus: 1,\r\n  spotCastShadow: true,\r\n  spotLightHelper: true,\r\n  spotDistance: 20\r\n});\r\n\r\nconst predefineColors = PREDEFINE_COLORS;\r\nconst ambientDisabled = computed(() => {\r\n  const { ambientLight } = config;\r\n  return ambientLight ? \"\" : \"disabled\";\r\n});\r\nconst directionaDisabled = computed(() => {\r\n  const { directionalLight } = config;\r\n  return directionalLight ? \"\" : \"disabled\";\r\n});\r\nconst pointDisabled = computed(() => {\r\n  const { pointLight } = config;\r\n  return pointLight ? \"\" : \"disabled\";\r\n});\r\nconst spotDisabled = computed(() => {\r\n  const { spotLight } = config;\r\n  return spotLight ? \"\" : \"disabled\";\r\n});\r\nconst planetDisabled = computed(() => {\r\n  const { planeGeometry } = config;\r\n  return planeGeometry ? \"\" : \"disabled\";\r\n});\r\n\r\nconst state = reactive({\r\n  modelApi: computed(() => {\r\n    return store.state.modelApi;\r\n  })\r\n});\r\n\r\nonMounted(() => {\r\n  $bus.on(\"model-update\", () => {\r\n    Object.assign(config, {\r\n      //光源平面\r\n      planeGeometry: false,\r\n      planeColor: \"#000000\",\r\n      planeWidth: 7,\r\n      planeHeight: 7,\r\n      //环境光\r\n      ambientLight: true,\r\n      ambientLightColor: \"#fff\",\r\n      ambientLightIntensity: 0.8,\r\n      //平行光\r\n      directionalLight: false,\r\n      directionalLightHelper: true,\r\n      directionalLightColor: \"#fff\",\r\n      directionalLightIntensity: 5,\r\n      directionalHorizontal: -1.26,\r\n      directionalVertical: -3.85,\r\n      directionalSistance: 2.98,\r\n      directionaShadow: true,\r\n      //点光源\r\n      pointLight: false,\r\n      pointLightHelper: true,\r\n      pointLightColor: \"#1E90FF\",\r\n      pointLightIntensity: 10,\r\n      pointHorizontal: -4.21,\r\n      pointVertical: -4.1,\r\n      pointSistance: 2.53,\r\n      //聚光灯\r\n      spotLight: false,\r\n      spotLightColor: \"#00BABD\",\r\n      spotLightIntensity: 900,\r\n      spotHorizontal: -3.49,\r\n      spotVertical: -4.37,\r\n      spotSistance: 4.09,\r\n      spotAngle: 0.5,\r\n      spotPenumbra: 1,\r\n      spotFocus: 1,\r\n      spotCastShadow: true,\r\n      spotLightHelper: true,\r\n      spotDistance: 20\r\n    });\r\n  });\r\n});\r\n\r\nconst changeAmbientLightColor = (ambientLightColor: string) => {\r\n  config.ambientLightColor = ambientLightColor;\r\n  state.modelApi.onSetModelAmbientLight(config);\r\n};\r\n\r\n// 设置环境光\r\nconst onChangeAmbientLight = () => {\r\n  state.modelApi.onSetModelAmbientLight(config);\r\n};\r\n\r\nconst changeDirectionalLightColor = (directionalLightColor: string) => {\r\n  config.directionalLightColor = directionalLightColor;\r\n  state.modelApi.onSetModelDirectionalLight(config);\r\n};\r\n\r\n// 设置平行光\r\nconst onChangeDirectionalLight = () => {\r\n  if (config.directionalLight) {\r\n    config.planeGeometry = true;\r\n    state.modelApi.onSetModelPlaneGeometry(config);\r\n  }\r\n  state.modelApi.onSetModelDirectionalLight(config);\r\n};\r\n\r\nconst changePointLightColor = (pointLightColor: string) => {\r\n  config.pointLightColor = pointLightColor;\r\n  state.modelApi.onSetModelPointLight(config);\r\n};\r\n\r\n// 设置点光源\r\nconst onChangePointLight = () => {\r\n  state.modelApi.onSetModelPointLight(config);\r\n};\r\n\r\n// 设置聚颜色\r\nconst changeSpotLightColor = (spotLightColor: string) => {\r\n  config.spotLightColor = spotLightColor;\r\n  state.modelApi.onSetModelSpotLight(config);\r\n};\r\n// 设置聚光灯\r\nconst onChangeSpotLight = () => {\r\n  if (config.spotLight) {\r\n    config.planeGeometry = true;\r\n    state.modelApi.onSetModelPlaneGeometry(config);\r\n  }\r\n  state.modelApi.onSetModelSpotLight(config);\r\n};\r\n\r\nconst changePlaneGeometryColor = (planeColor: string) => {\r\n  config.planeColor = planeColor;\r\n  state.modelApi.onSetModelPlaneGeometry(config);\r\n};\r\n// 设置模型平面\r\nconst onChangePlaneGeometry = () => {\r\n  state.modelApi.onSetModelPlaneGeometry(config);\r\n};\r\n\r\n__expose({\r\n  config\r\n});\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_Odometer = _resolveComponent(\"Odometer\")!\n  const _component_el_icon = _resolveComponent(\"el-icon\")!\n  const _component_el_space = _resolveComponent(\"el-space\")!\n  const _component_el_switch = _resolveComponent(\"el-switch\")!\n  const _component_el_color_picker = _resolveComponent(\"el-color-picker\")!\n  const _component_el_button = _resolveComponent(\"el-button\")!\n  const _component_el_slider = _resolveComponent(\"el-slider\")!\n  const _component_SetUp = _resolveComponent(\"SetUp\")!\n  const _component_Place = _resolveComponent(\"Place\")!\n  const _component_Orange = _resolveComponent(\"Orange\")!\n  const _component_el_scrollbar = _resolveComponent(\"el-scrollbar\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _hoisted_2,\n    _createVNode(_component_el_scrollbar, { height: \"calc(100vh - 130px)\" }, {\n      default: _withCtx(() => [\n        _createElementVNode(\"div\", _hoisted_3, [\n          _createElementVNode(\"div\", _hoisted_4, [\n            _createVNode(_component_el_space, null, {\n              default: _withCtx(() => [\n                _createVNode(_component_el_icon, null, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_Odometer)\n                  ]),\n                  _: 1\n                }),\n                _hoisted_5\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_switch, {\n              modelValue: config.planeGeometry,\n              \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((config.planeGeometry) = $event)),\n              onChange: onChangePlaneGeometry\n            }, null, 8, [\"modelValue\"])\n          ]),\n          _createElementVNode(\"div\", {\n            class: _normalizeClass([\"option\", planetDisabled.value])\n          }, [\n            _createVNode(_component_el_space, null, {\n              default: _withCtx(() => [\n                _hoisted_6,\n                _createVNode(_component_el_color_picker, {\n                  \"color-format\": \"hex\",\n                  modelValue: config.planeColor,\n                  \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((config.planeColor) = $event)),\n                  predefine: _unref(predefineColors),\n                  onChange: onChangePlaneGeometry,\n                  onActiveChange: changePlaneGeometryColor\n                }, null, 8, [\"modelValue\", \"predefine\"])\n              ]),\n              _: 1\n            })\n          ], 2),\n          _createElementVNode(\"div\", {\n            class: _normalizeClass([\"option\", planetDisabled.value])\n          }, [\n            _createElementVNode(\"div\", _hoisted_7, [\n              _createVNode(_component_el_button, {\n                type: \"primary\",\n                link: \"\"\n              }, {\n                default: _withCtx(() => [\n                  _createTextVNode(\"宽度\")\n                ]),\n                _: 1\n              })\n            ]),\n            _createElementVNode(\"div\", _hoisted_8, [\n              _createVNode(_component_el_slider, {\n                \"show-input\": \"\",\n                onInput: onChangePlaneGeometry,\n                modelValue: config.planeWidth,\n                \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((config.planeWidth) = $event)),\n                min: 0,\n                max: 100,\n                step: 0.1\n              }, null, 8, [\"modelValue\"])\n            ])\n          ], 2),\n          _createElementVNode(\"div\", {\n            class: _normalizeClass([\"option\", planetDisabled.value])\n          }, [\n            _createElementVNode(\"div\", _hoisted_9, [\n              _createVNode(_component_el_button, {\n                type: \"primary\",\n                link: \"\"\n              }, {\n                default: _withCtx(() => [\n                  _createTextVNode(\"高度\")\n                ]),\n                _: 1\n              })\n            ]),\n            _createElementVNode(\"div\", _hoisted_10, [\n              _createVNode(_component_el_slider, {\n                \"show-input\": \"\",\n                onInput: onChangePlaneGeometry,\n                modelValue: config.planeHeight,\n                \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((config.planeHeight) = $event)),\n                min: 0,\n                max: 100,\n                step: 0.1\n              }, null, 8, [\"modelValue\"])\n            ])\n          ], 2)\n        ]),\n        _createElementVNode(\"div\", _hoisted_11, [\n          _createElementVNode(\"div\", _hoisted_12, [\n            _createVNode(_component_el_space, null, {\n              default: _withCtx(() => [\n                _createVNode(_component_el_icon, null, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_Odometer)\n                  ]),\n                  _: 1\n                }),\n                _hoisted_13\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_switch, {\n              modelValue: config.ambientLight,\n              \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event: any) => ((config.ambientLight) = $event)),\n              onChange: onChangeAmbientLight\n            }, null, 8, [\"modelValue\"])\n          ]),\n          _createElementVNode(\"div\", {\n            class: _normalizeClass([\"option\", ambientDisabled.value])\n          }, [\n            _createElementVNode(\"div\", _hoisted_14, [\n              _createVNode(_component_el_color_picker, {\n                \"color-format\": \"hex\",\n                modelValue: config.ambientLightColor,\n                \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event: any) => ((config.ambientLightColor) = $event)),\n                predefine: _unref(predefineColors),\n                onChange: onChangeAmbientLight,\n                onActiveChange: changeAmbientLightColor\n              }, null, 8, [\"modelValue\", \"predefine\"])\n            ]),\n            _createElementVNode(\"div\", _hoisted_15, [\n              _createVNode(_component_el_slider, {\n                \"show-input\": \"\",\n                onInput: onChangeAmbientLight,\n                modelValue: config.ambientLightIntensity,\n                \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event: any) => ((config.ambientLightIntensity) = $event)),\n                min: -5,\n                max: 5,\n                step: 0.01\n              }, null, 8, [\"modelValue\"])\n            ])\n          ], 2)\n        ]),\n        _createElementVNode(\"div\", _hoisted_16, [\n          _createElementVNode(\"div\", _hoisted_17, [\n            _createVNode(_component_el_space, null, {\n              default: _withCtx(() => [\n                _createVNode(_component_el_icon, null, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_SetUp)\n                  ]),\n                  _: 1\n                }),\n                _hoisted_18\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_switch, {\n              modelValue: config.directionalLight,\n              \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event: any) => ((config.directionalLight) = $event)),\n              onChange: onChangeDirectionalLight\n            }, null, 8, [\"modelValue\"])\n          ]),\n          _createElementVNode(\"div\", {\n            class: _normalizeClass([\"option\", directionaDisabled.value])\n          }, [\n            _createElementVNode(\"div\", _hoisted_19, [\n              _createVNode(_component_el_color_picker, {\n                \"color-format\": \"hex\",\n                modelValue: config.directionalLightColor,\n                \"onUpdate:modelValue\": _cache[8] || (_cache[8] = ($event: any) => ((config.directionalLightColor) = $event)),\n                predefine: _unref(predefineColors),\n                onChange: onChangeDirectionalLight,\n                onActiveChange: changeDirectionalLightColor\n              }, null, 8, [\"modelValue\", \"predefine\"])\n            ]),\n            _createElementVNode(\"div\", _hoisted_20, [\n              _createVNode(_component_el_slider, {\n                \"show-input\": \"\",\n                onInput: onChangeDirectionalLight,\n                modelValue: config.directionalLightIntensity,\n                \"onUpdate:modelValue\": _cache[9] || (_cache[9] = ($event: any) => ((config.directionalLightIntensity) = $event)),\n                min: -5,\n                max: 15,\n                step: 0.01\n              }, null, 8, [\"modelValue\"])\n            ])\n          ], 2),\n          _createElementVNode(\"div\", {\n            class: _normalizeClass([\"option\", directionaDisabled.value])\n          }, [\n            _createElementVNode(\"div\", _hoisted_21, [\n              _createVNode(_component_el_button, {\n                type: \"primary\",\n                link: \"\"\n              }, {\n                default: _withCtx(() => [\n                  _createTextVNode(\"是否开启阴影\")\n                ]),\n                _: 1\n              })\n            ]),\n            _createElementVNode(\"div\", _hoisted_22, [\n              _createVNode(_component_el_switch, {\n                modelValue: config.directionaShadow,\n                \"onUpdate:modelValue\": _cache[10] || (_cache[10] = ($event: any) => ((config.directionaShadow) = $event)),\n                onChange: onChangeDirectionalLight\n              }, null, 8, [\"modelValue\"])\n            ]),\n            _createVNode(_component_el_space, null, {\n              default: _withCtx(() => [\n                _createElementVNode(\"div\", _hoisted_23, [\n                  _createVNode(_component_el_button, {\n                    type: \"primary\",\n                    link: \"\"\n                  }, {\n                    default: _withCtx(() => [\n                      _createTextVNode(\"辅助线\")\n                    ]),\n                    _: 1\n                  })\n                ]),\n                _createElementVNode(\"div\", _hoisted_24, [\n                  _createVNode(_component_el_switch, {\n                    modelValue: config.directionalLightHelper,\n                    \"onUpdate:modelValue\": _cache[11] || (_cache[11] = ($event: any) => ((config.directionalLightHelper) = $event)),\n                    onChange: onChangeDirectionalLight\n                  }, null, 8, [\"modelValue\"])\n                ])\n              ]),\n              _: 1\n            })\n          ], 2),\n          _createElementVNode(\"div\", {\n            class: _normalizeClass([\"option\", directionaDisabled.value])\n          }, [\n            _createElementVNode(\"div\", _hoisted_25, [\n              _createVNode(_component_el_button, {\n                type: \"primary\",\n                link: \"\"\n              }, {\n                default: _withCtx(() => [\n                  _createTextVNode(\"水平方向\")\n                ]),\n                _: 1\n              })\n            ]),\n            _createElementVNode(\"div\", _hoisted_26, [\n              _createVNode(_component_el_slider, {\n                \"show-input\": \"\",\n                onInput: onChangeDirectionalLight,\n                modelValue: config.directionalHorizontal,\n                \"onUpdate:modelValue\": _cache[12] || (_cache[12] = ($event: any) => ((config.directionalHorizontal) = $event)),\n                min: -10,\n                max: 10,\n                step: 0.01\n              }, null, 8, [\"modelValue\"])\n            ])\n          ], 2),\n          _createElementVNode(\"div\", {\n            class: _normalizeClass([\"option\", directionaDisabled.value])\n          }, [\n            _createElementVNode(\"div\", _hoisted_27, [\n              _createVNode(_component_el_button, {\n                type: \"primary\",\n                link: \"\"\n              }, {\n                default: _withCtx(() => [\n                  _createTextVNode(\"垂直方向\")\n                ]),\n                _: 1\n              })\n            ]),\n            _createElementVNode(\"div\", _hoisted_28, [\n              _createVNode(_component_el_slider, {\n                \"show-input\": \"\",\n                onInput: onChangeDirectionalLight,\n                modelValue: config.directionalVertical,\n                \"onUpdate:modelValue\": _cache[13] || (_cache[13] = ($event: any) => ((config.directionalVertical) = $event)),\n                min: -10,\n                max: 10,\n                step: 0.01\n              }, null, 8, [\"modelValue\"])\n            ])\n          ], 2),\n          _createElementVNode(\"div\", {\n            class: _normalizeClass([\"option\", directionaDisabled.value])\n          }, [\n            _createElementVNode(\"div\", _hoisted_29, [\n              _createVNode(_component_el_button, {\n                type: \"primary\",\n                link: \"\"\n              }, {\n                default: _withCtx(() => [\n                  _createTextVNode(\"光源距离\")\n                ]),\n                _: 1\n              })\n            ]),\n            _createElementVNode(\"div\", _hoisted_30, [\n              _createVNode(_component_el_slider, {\n                \"show-input\": \"\",\n                onInput: onChangeDirectionalLight,\n                modelValue: config.directionalSistance,\n                \"onUpdate:modelValue\": _cache[14] || (_cache[14] = ($event: any) => ((config.directionalSistance) = $event)),\n                min: 0,\n                max: 10,\n                step: 0.01\n              }, null, 8, [\"modelValue\"])\n            ])\n          ], 2)\n        ]),\n        _createElementVNode(\"div\", _hoisted_31, [\n          _createElementVNode(\"div\", _hoisted_32, [\n            _createVNode(_component_el_space, null, {\n              default: _withCtx(() => [\n                _createVNode(_component_el_icon, null, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_Place)\n                  ]),\n                  _: 1\n                }),\n                _hoisted_33\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_switch, {\n              modelValue: config.pointLight,\n              \"onUpdate:modelValue\": _cache[15] || (_cache[15] = ($event: any) => ((config.pointLight) = $event)),\n              onChange: onChangePointLight\n            }, null, 8, [\"modelValue\"])\n          ]),\n          _createElementVNode(\"div\", {\n            class: _normalizeClass([\"option\", pointDisabled.value])\n          }, [\n            _createVNode(_component_el_space, null, {\n              default: _withCtx(() => [\n                _createElementVNode(\"div\", _hoisted_34, [\n                  _createVNode(_component_el_button, {\n                    type: \"primary\",\n                    link: \"\"\n                  }, {\n                    default: _withCtx(() => [\n                      _createTextVNode(\"辅助线\")\n                    ]),\n                    _: 1\n                  })\n                ]),\n                _createElementVNode(\"div\", _hoisted_35, [\n                  _createVNode(_component_el_switch, {\n                    modelValue: config.pointLightHelper,\n                    \"onUpdate:modelValue\": _cache[16] || (_cache[16] = ($event: any) => ((config.pointLightHelper) = $event)),\n                    onChange: onChangePointLight\n                  }, null, 8, [\"modelValue\"])\n                ])\n              ]),\n              _: 1\n            })\n          ], 2),\n          _createElementVNode(\"div\", {\n            class: _normalizeClass([\"option\", pointDisabled.value])\n          }, [\n            _createElementVNode(\"div\", _hoisted_36, [\n              _createVNode(_component_el_color_picker, {\n                \"color-format\": \"hex\",\n                modelValue: config.pointLightColor,\n                \"onUpdate:modelValue\": _cache[17] || (_cache[17] = ($event: any) => ((config.pointLightColor) = $event)),\n                predefine: _unref(predefineColors),\n                onChange: onChangePointLight,\n                onActiveChange: changePointLightColor\n              }, null, 8, [\"modelValue\", \"predefine\"])\n            ]),\n            _createElementVNode(\"div\", _hoisted_37, [\n              _createVNode(_component_el_slider, {\n                \"show-input\": \"\",\n                onInput: onChangePointLight,\n                modelValue: config.pointLightIntensity,\n                \"onUpdate:modelValue\": _cache[18] || (_cache[18] = ($event: any) => ((config.pointLightIntensity) = $event)),\n                min: -20,\n                max: 60,\n                step: 0.1\n              }, null, 8, [\"modelValue\"])\n            ])\n          ], 2),\n          _createElementVNode(\"div\", {\n            class: _normalizeClass([\"option\", pointDisabled.value])\n          }, [\n            _createElementVNode(\"div\", _hoisted_38, [\n              _createVNode(_component_el_button, {\n                type: \"primary\",\n                link: \"\"\n              }, {\n                default: _withCtx(() => [\n                  _createTextVNode(\"水平方向\")\n                ]),\n                _: 1\n              })\n            ]),\n            _createElementVNode(\"div\", _hoisted_39, [\n              _createVNode(_component_el_slider, {\n                \"show-input\": \"\",\n                onInput: onChangePointLight,\n                modelValue: config.pointHorizontal,\n                \"onUpdate:modelValue\": _cache[19] || (_cache[19] = ($event: any) => ((config.pointHorizontal) = $event)),\n                min: -10,\n                max: 10,\n                step: 0.11\n              }, null, 8, [\"modelValue\"])\n            ])\n          ], 2),\n          _createElementVNode(\"div\", {\n            class: _normalizeClass([\"option\", pointDisabled.value])\n          }, [\n            _createElementVNode(\"div\", _hoisted_40, [\n              _createVNode(_component_el_button, {\n                type: \"primary\",\n                link: \"\"\n              }, {\n                default: _withCtx(() => [\n                  _createTextVNode(\"垂直方向\")\n                ]),\n                _: 1\n              })\n            ]),\n            _createElementVNode(\"div\", _hoisted_41, [\n              _createVNode(_component_el_slider, {\n                \"show-input\": \"\",\n                onInput: onChangePointLight,\n                modelValue: config.pointVertical,\n                \"onUpdate:modelValue\": _cache[20] || (_cache[20] = ($event: any) => ((config.pointVertical) = $event)),\n                min: -10,\n                max: 10,\n                step: 0.1\n              }, null, 8, [\"modelValue\"])\n            ])\n          ], 2),\n          _createElementVNode(\"div\", {\n            class: _normalizeClass([\"option\", pointDisabled.value])\n          }, [\n            _createElementVNode(\"div\", _hoisted_42, [\n              _createVNode(_component_el_button, {\n                type: \"primary\",\n                link: \"\"\n              }, {\n                default: _withCtx(() => [\n                  _createTextVNode(\"光源距离\")\n                ]),\n                _: 1\n              })\n            ]),\n            _createElementVNode(\"div\", _hoisted_43, [\n              _createVNode(_component_el_slider, {\n                \"show-input\": \"\",\n                onInput: onChangePointLight,\n                modelValue: config.pointSistance,\n                \"onUpdate:modelValue\": _cache[21] || (_cache[21] = ($event: any) => ((config.pointSistance) = $event)),\n                min: 0,\n                max: 10,\n                step: 0.1\n              }, null, 8, [\"modelValue\"])\n            ])\n          ], 2)\n        ]),\n        _createElementVNode(\"div\", _hoisted_44, [\n          _createElementVNode(\"div\", _hoisted_45, [\n            _createVNode(_component_el_space, null, {\n              default: _withCtx(() => [\n                _createVNode(_component_el_icon, null, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_Orange)\n                  ]),\n                  _: 1\n                }),\n                _hoisted_46\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_switch, {\n              modelValue: config.spotLight,\n              \"onUpdate:modelValue\": _cache[22] || (_cache[22] = ($event: any) => ((config.spotLight) = $event)),\n              onChange: onChangeSpotLight\n            }, null, 8, [\"modelValue\"])\n          ]),\n          _createElementVNode(\"div\", {\n            class: _normalizeClass([\"option\", spotDisabled.value])\n          }, [\n            _createElementVNode(\"div\", _hoisted_47, [\n              _createVNode(_component_el_color_picker, {\n                \"color-format\": \"hex\",\n                modelValue: config.spotLightColor,\n                \"onUpdate:modelValue\": _cache[23] || (_cache[23] = ($event: any) => ((config.spotLightColor) = $event)),\n                predefine: _unref(predefineColors),\n                onChange: onChangeSpotLight,\n                onActiveChange: changeSpotLightColor\n              }, null, 8, [\"modelValue\", \"predefine\"])\n            ]),\n            _createElementVNode(\"div\", _hoisted_48, [\n              _createVNode(_component_el_slider, {\n                \"show-input\": \"\",\n                onInput: onChangeSpotLight,\n                modelValue: config.spotLightIntensity,\n                \"onUpdate:modelValue\": _cache[24] || (_cache[24] = ($event: any) => ((config.spotLightIntensity) = $event)),\n                min: 0,\n                max: 2000,\n                step: 0.1\n              }, null, 8, [\"modelValue\"])\n            ])\n          ], 2),\n          _createElementVNode(\"div\", {\n            class: _normalizeClass([\"option\", spotDisabled.value])\n          }, [\n            _createElementVNode(\"div\", _hoisted_49, [\n              _createVNode(_component_el_button, {\n                type: \"primary\",\n                link: \"\"\n              }, {\n                default: _withCtx(() => [\n                  _createTextVNode(\"是否开启阴影\")\n                ]),\n                _: 1\n              })\n            ]),\n            _createElementVNode(\"div\", _hoisted_50, [\n              _createVNode(_component_el_switch, {\n                modelValue: config.spotCastShadow,\n                \"onUpdate:modelValue\": _cache[25] || (_cache[25] = ($event: any) => ((config.spotCastShadow) = $event)),\n                onChange: onChangeSpotLight\n              }, null, 8, [\"modelValue\"])\n            ]),\n            _createVNode(_component_el_space, null, {\n              default: _withCtx(() => [\n                _createElementVNode(\"div\", _hoisted_51, [\n                  _createVNode(_component_el_button, {\n                    type: \"primary\",\n                    link: \"\"\n                  }, {\n                    default: _withCtx(() => [\n                      _createTextVNode(\"辅助线\")\n                    ]),\n                    _: 1\n                  })\n                ]),\n                _createElementVNode(\"div\", _hoisted_52, [\n                  _createVNode(_component_el_switch, {\n                    modelValue: config.spotLightHelper,\n                    \"onUpdate:modelValue\": _cache[26] || (_cache[26] = ($event: any) => ((config.spotLightHelper) = $event)),\n                    onChange: onChangeSpotLight\n                  }, null, 8, [\"modelValue\"])\n                ])\n              ]),\n              _: 1\n            })\n          ], 2),\n          _createElementVNode(\"div\", {\n            class: _normalizeClass([\"option\", spotDisabled.value])\n          }, [\n            _createElementVNode(\"div\", _hoisted_53, [\n              _createVNode(_component_el_button, {\n                type: \"primary\",\n                link: \"\"\n              }, {\n                default: _withCtx(() => [\n                  _createTextVNode(\"水平方向\")\n                ]),\n                _: 1\n              })\n            ]),\n            _createElementVNode(\"div\", _hoisted_54, [\n              _createVNode(_component_el_slider, {\n                \"show-input\": \"\",\n                onInput: onChangeSpotLight,\n                modelValue: config.spotHorizontal,\n                \"onUpdate:modelValue\": _cache[27] || (_cache[27] = ($event: any) => ((config.spotHorizontal) = $event)),\n                min: -10,\n                max: 10,\n                step: 0.1\n              }, null, 8, [\"modelValue\"])\n            ])\n          ], 2),\n          _createElementVNode(\"div\", {\n            class: _normalizeClass([\"option\", spotDisabled.value])\n          }, [\n            _createElementVNode(\"div\", _hoisted_55, [\n              _createVNode(_component_el_button, {\n                type: \"primary\",\n                link: \"\"\n              }, {\n                default: _withCtx(() => [\n                  _createTextVNode(\"垂直方向\")\n                ]),\n                _: 1\n              })\n            ]),\n            _createElementVNode(\"div\", _hoisted_56, [\n              _createVNode(_component_el_slider, {\n                \"show-input\": \"\",\n                onInput: onChangeSpotLight,\n                modelValue: config.spotVertical,\n                \"onUpdate:modelValue\": _cache[28] || (_cache[28] = ($event: any) => ((config.spotVertical) = $event)),\n                min: -10,\n                max: 10,\n                step: 0.1\n              }, null, 8, [\"modelValue\"])\n            ])\n          ], 2),\n          _createElementVNode(\"div\", {\n            class: _normalizeClass([\"option\", spotDisabled.value])\n          }, [\n            _createElementVNode(\"div\", _hoisted_57, [\n              _createVNode(_component_el_button, {\n                type: \"primary\",\n                link: \"\"\n              }, {\n                default: _withCtx(() => [\n                  _createTextVNode(\"光源距离\")\n                ]),\n                _: 1\n              })\n            ]),\n            _createElementVNode(\"div\", _hoisted_58, [\n              _createVNode(_component_el_slider, {\n                \"show-input\": \"\",\n                onInput: onChangeSpotLight,\n                modelValue: config.spotSistance,\n                \"onUpdate:modelValue\": _cache[29] || (_cache[29] = ($event: any) => ((config.spotSistance) = $event)),\n                min: 0,\n                max: 10,\n                step: 0.1\n              }, null, 8, [\"modelValue\"])\n            ])\n          ], 2),\n          _createElementVNode(\"div\", {\n            class: _normalizeClass([\"option\", spotDisabled.value])\n          }, [\n            _createElementVNode(\"div\", _hoisted_59, [\n              _createVNode(_component_el_button, {\n                type: \"primary\",\n                link: \"\"\n              }, {\n                default: _withCtx(() => [\n                  _createTextVNode(\"光线照射范围\")\n                ]),\n                _: 1\n              })\n            ]),\n            _createElementVNode(\"div\", _hoisted_60, [\n              _createVNode(_component_el_slider, {\n                \"show-input\": \"\",\n                onInput: onChangeSpotLight,\n                modelValue: config.spotAngle,\n                \"onUpdate:modelValue\": _cache[30] || (_cache[30] = ($event: any) => ((config.spotAngle) = $event)),\n                min: 0,\n                max: 2,\n                step: 0.01\n              }, null, 8, [\"modelValue\"])\n            ])\n          ], 2),\n          _createElementVNode(\"div\", {\n            class: _normalizeClass([\"option\", spotDisabled.value])\n          }, [\n            _createElementVNode(\"div\", _hoisted_61, [\n              _createVNode(_component_el_button, {\n                type: \"primary\",\n                link: \"\"\n              }, {\n                default: _withCtx(() => [\n                  _createTextVNode(\"边缘聚光度\")\n                ]),\n                _: 1\n              })\n            ]),\n            _createElementVNode(\"div\", _hoisted_62, [\n              _createVNode(_component_el_slider, {\n                \"show-input\": \"\",\n                onInput: onChangeSpotLight,\n                modelValue: config.spotPenumbra,\n                \"onUpdate:modelValue\": _cache[31] || (_cache[31] = ($event: any) => ((config.spotPenumbra) = $event)),\n                min: 0,\n                max: 1,\n                step: 0.01\n              }, null, 8, [\"modelValue\"])\n            ])\n          ], 2),\n          _createElementVNode(\"div\", {\n            class: _normalizeClass([\"option\", spotDisabled.value])\n          }, [\n            _createElementVNode(\"div\", _hoisted_63, [\n              _createVNode(_component_el_button, {\n                type: \"primary\",\n                link: \"\"\n              }, {\n                default: _withCtx(() => [\n                  _createTextVNode(\"投影聚焦度\")\n                ]),\n                _: 1\n              })\n            ]),\n            _createElementVNode(\"div\", _hoisted_64, [\n              _createVNode(_component_el_slider, {\n                \"show-input\": \"\",\n                onInput: onChangeSpotLight,\n                modelValue: config.spotFocus,\n                \"onUpdate:modelValue\": _cache[32] || (_cache[32] = ($event: any) => ((config.spotFocus) = $event)),\n                min: 0,\n                max: 3,\n                step: 0.01\n              }, null, 8, [\"modelValue\"])\n            ])\n          ], 2),\n          _createElementVNode(\"div\", {\n            class: _normalizeClass([\"option\", spotDisabled.value])\n          }, [\n            _createElementVNode(\"div\", _hoisted_65, [\n              _createVNode(_component_el_button, {\n                type: \"primary\",\n                link: \"\"\n              }, {\n                default: _withCtx(() => [\n                  _createTextVNode(\"光源照射距离\")\n                ]),\n                _: 1\n              })\n            ]),\n            _createElementVNode(\"div\", _hoisted_66, [\n              _createVNode(_component_el_slider, {\n                \"show-input\": \"\",\n                onInput: onChangeSpotLight,\n                modelValue: config.spotDistance,\n                \"onUpdate:modelValue\": _cache[33] || (_cache[33] = ($event: any) => ((config.spotDistance) = $event)),\n                min: 1,\n                max: 500,\n                step: 1\n              }, null, 8, [\"modelValue\"])\n            ])\n          ], 2)\n        ])\n      ]),\n      _: 1\n    })\n  ]))\n}\n}\n\n})","<template>\r\n  <div class=\"edit-box\">\r\n    <div class=\"header\">\r\n      <span>模型灯光</span>\r\n    </div>\r\n    <el-scrollbar height=\"calc(100vh - 130px)\">\r\n      <!-- 光源平面 -->\r\n      <div class=\"options\">\r\n        <div class=\"option space-between\">\r\n          <el-space>\r\n            <el-icon>\r\n              <Odometer />\r\n            </el-icon>\r\n            <span>光源平面</span>\r\n          </el-space>\r\n          <el-switch v-model=\"config.planeGeometry\" @change=\"onChangePlaneGeometry\" />\r\n        </div>\r\n        <div class=\"option\" :class=\"planetDisabled\">\r\n          <el-space>\r\n            <span>平面颜色</span>\r\n            <el-color-picker color-format=\"hex\" v-model=\"config.planeColor\" :predefine=\"predefineColors\"\r\n              @change=\"onChangePlaneGeometry\" @active-change=\"changePlaneGeometryColor\" />\r\n          </el-space>\r\n        </div>\r\n        <div class=\"option\" :class=\"planetDisabled\">\r\n          <div class=\"grid-txt\">\r\n            <el-button type=\"primary\" link>宽度</el-button>\r\n          </div>\r\n          <div class=\"grid-silder\">\r\n            <el-slider show-input @input=\"onChangePlaneGeometry\" v-model=\"config.planeWidth\" :min=\"0\" :max=\"100\"\r\n              :step=\"0.1\" />\r\n          </div>\r\n        </div>\r\n        <div class=\"option\" :class=\"planetDisabled\">\r\n          <div class=\"grid-txt\">\r\n            <el-button type=\"primary\" link>高度</el-button>\r\n          </div>\r\n          <div class=\"grid-silder\">\r\n            <el-slider show-input @input=\"onChangePlaneGeometry\" v-model=\"config.planeHeight\" :min=\"0\" :max=\"100\"\r\n              :step=\"0.1\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <!-- 环境光 -->\r\n      <div class=\"options\">\r\n        <div class=\"option space-between\">\r\n          <el-space>\r\n            <el-icon>\r\n              <Odometer />\r\n            </el-icon>\r\n            <span>环境光</span>\r\n          </el-space>\r\n          <el-switch v-model=\"config.ambientLight\" @change=\"onChangeAmbientLight\" />\r\n        </div>\r\n        <div class=\"option\" :class=\"ambientDisabled\">\r\n          <div class=\"color\">\r\n            <el-color-picker color-format=\"hex\" v-model=\"config.ambientLightColor\" :predefine=\"predefineColors\"\r\n              @change=\"onChangeAmbientLight\" @active-change=\"changeAmbientLightColor\" />\r\n          </div>\r\n          <div class=\"silder\">\r\n            <el-slider show-input @input=\"onChangeAmbientLight\" v-model=\"config.ambientLightIntensity\" :min=\"-5\" :max=\"5\"\r\n              :step=\"0.01\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <!-- 平行光 -->\r\n      <div class=\"options\">\r\n        <div class=\"option space-between\">\r\n          <el-space>\r\n            <el-icon>\r\n              <SetUp />\r\n            </el-icon>\r\n            <span>平行光</span>\r\n          </el-space>\r\n          <el-switch v-model=\"config.directionalLight\" @change=\"onChangeDirectionalLight\" />\r\n        </div>\r\n        <div class=\"option\" :class=\"directionaDisabled\">\r\n          <div class=\"color\">\r\n            <el-color-picker color-format=\"hex\" v-model=\"config.directionalLightColor\" :predefine=\"predefineColors\"\r\n              @change=\"onChangeDirectionalLight\" @active-change=\"changeDirectionalLightColor\" />\r\n          </div>\r\n          <div class=\"silder\">\r\n            <el-slider show-input @input=\"onChangeDirectionalLight\" v-model=\"config.directionalLightIntensity\" :min=\"-5\"\r\n              :max=\"15\" :step=\"0.01\" />\r\n          </div>\r\n        </div>\r\n        <div class=\"option\" :class=\"directionaDisabled\">\r\n          <!-- 阴影 -->\r\n          <div class=\"grid-txt\">\r\n            <el-button type=\"primary\" link>是否开启阴影</el-button>\r\n          </div>\r\n          <div class=\"grid-silder\">\r\n            <el-switch v-model=\"config.directionaShadow\" @change=\"onChangeDirectionalLight\" />\r\n          </div>\r\n          <!-- 辅助线 -->\r\n          <el-space>\r\n            <div class=\"grid-txt\">\r\n              <el-button type=\"primary\" link>辅助线</el-button>\r\n            </div>\r\n            <div class=\"grid-silder\">\r\n              <el-switch v-model=\"config.directionalLightHelper\" @change=\"onChangeDirectionalLight\" />\r\n            </div>\r\n          </el-space>\r\n        </div>\r\n        <!-- 水平方向 -->\r\n        <div class=\"option\" :class=\"directionaDisabled\">\r\n          <div class=\"grid-txt\">\r\n            <el-button type=\"primary\" link>水平方向</el-button>\r\n          </div>\r\n          <div class=\"grid-silder\">\r\n            <el-slider show-input @input=\"onChangeDirectionalLight\" v-model=\"config.directionalHorizontal\" :min=\"-10\"\r\n              :max=\"10\" :step=\"0.01\" />\r\n          </div>\r\n        </div>\r\n        <!-- 垂直方向方向 -->\r\n        <div class=\"option\" :class=\"directionaDisabled\">\r\n          <div class=\"grid-txt\">\r\n            <el-button type=\"primary\" link>垂直方向</el-button>\r\n          </div>\r\n          <div class=\"grid-silder\">\r\n            <el-slider show-input @input=\"onChangeDirectionalLight\" v-model=\"config.directionalVertical\" :min=\"-10\"\r\n              :max=\"10\" :step=\"0.01\" />\r\n          </div>\r\n        </div>\r\n        <!-- 光源距离 -->\r\n        <div class=\"option\" :class=\"directionaDisabled\">\r\n          <div class=\"grid-txt\">\r\n            <el-button type=\"primary\" link>光源距离</el-button>\r\n          </div>\r\n          <div class=\"grid-silder\">\r\n            <el-slider show-input @input=\"onChangeDirectionalLight\" v-model=\"config.directionalSistance\" :min=\"0\"\r\n              :max=\"10\" :step=\"0.01\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <!-- 点光源 -->\r\n      <div class=\"options\">\r\n        <div class=\"option space-between\">\r\n          <el-space>\r\n            <el-icon>\r\n              <Place />\r\n            </el-icon>\r\n            <span>点光源</span>\r\n          </el-space>\r\n          <el-switch v-model=\"config.pointLight\" @change=\"onChangePointLight\" />\r\n        </div>\r\n        <div class=\"option\" :class=\"pointDisabled\">\r\n          <!-- 辅助线 -->\r\n          <el-space>\r\n            <div class=\"grid-txt\">\r\n              <el-button type=\"primary\" link>辅助线</el-button>\r\n            </div>\r\n            <div class=\"grid-silder\">\r\n              <el-switch v-model=\"config.pointLightHelper\" @change=\"onChangePointLight\" />\r\n            </div>\r\n          </el-space>\r\n        </div>\r\n        <div class=\"option\" :class=\"pointDisabled\">\r\n          <div class=\"color\">\r\n            <el-color-picker color-format=\"hex\" v-model=\"config.pointLightColor\" :predefine=\"predefineColors\"\r\n              @change=\"onChangePointLight\" @active-change=\"changePointLightColor\" />\r\n          </div>\r\n          <div class=\"silder\">\r\n            <el-slider show-input @input=\"onChangePointLight\" v-model=\"config.pointLightIntensity\" :min=\"-20\" :max=\"60\"\r\n              :step=\"0.1\" />\r\n          </div>\r\n        </div>\r\n        <!-- 水平方向 -->\r\n        <div class=\"option\" :class=\"pointDisabled\">\r\n          <div class=\"grid-txt\">\r\n            <el-button type=\"primary\" link>水平方向</el-button>\r\n          </div>\r\n          <div class=\"grid-silder\">\r\n            <el-slider show-input @input=\"onChangePointLight\" v-model=\"config.pointHorizontal\" :min=\"-10\" :max=\"10\"\r\n              :step=\"0.11\" />\r\n          </div>\r\n        </div>\r\n        <!-- 垂直方向方向 -->\r\n        <div class=\"option\" :class=\"pointDisabled\">\r\n          <div class=\"grid-txt\">\r\n            <el-button type=\"primary\" link>垂直方向</el-button>\r\n          </div>\r\n          <div class=\"grid-silder\">\r\n            <el-slider show-input @input=\"onChangePointLight\" v-model=\"config.pointVertical\" :min=\"-10\" :max=\"10\"\r\n              :step=\"0.1\" />\r\n          </div>\r\n        </div>\r\n        <!-- 光源距离 -->\r\n        <div class=\"option\" :class=\"pointDisabled\">\r\n          <div class=\"grid-txt\">\r\n            <el-button type=\"primary\" link>光源距离</el-button>\r\n          </div>\r\n          <div class=\"grid-silder\">\r\n            <el-slider show-input @input=\"onChangePointLight\" v-model=\"config.pointSistance\" :min=\"0\" :max=\"10\"\r\n              :step=\"0.1\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <!-- 聚光灯 -->\r\n      <div class=\"options\">\r\n        <div class=\"option space-between\">\r\n          <el-space>\r\n            <el-icon>\r\n              <Orange />\r\n            </el-icon>\r\n            <span>聚光灯</span>\r\n          </el-space>\r\n          <el-switch v-model=\"config.spotLight\" @change=\"onChangeSpotLight\" />\r\n        </div>\r\n        <div class=\"option\" :class=\"spotDisabled\">\r\n          <div class=\"color\">\r\n            <el-color-picker color-format=\"hex\" v-model=\"config.spotLightColor\" :predefine=\"predefineColors\"\r\n              @change=\"onChangeSpotLight\" @active-change=\"changeSpotLightColor\" />\r\n          </div>\r\n          <div class=\"silder\">\r\n            <el-slider show-input @input=\"onChangeSpotLight\" v-model=\"config.spotLightIntensity\" :min=\"0\" :max=\"2000\"\r\n              :step=\"0.1\" />\r\n          </div>\r\n        </div>\r\n        <!-- 阴影 -->\r\n        <div class=\"option\" :class=\"spotDisabled\">\r\n          <div class=\"grid-txt\">\r\n            <el-button type=\"primary\" link>是否开启阴影</el-button>\r\n          </div>\r\n          <div class=\"grid-silder\">\r\n            <el-switch v-model=\"config.spotCastShadow\" @change=\"onChangeSpotLight\" />\r\n          </div>\r\n          <!-- 辅助线 -->\r\n          <el-space>\r\n            <div class=\"grid-txt\">\r\n              <el-button type=\"primary\" link>辅助线</el-button>\r\n            </div>\r\n            <div class=\"grid-silder\">\r\n              <el-switch v-model=\"config.spotLightHelper\" @change=\"onChangeSpotLight\" />\r\n            </div>\r\n          </el-space>\r\n        </div>\r\n        <!-- 水平方向 -->\r\n        <div class=\"option\" :class=\"spotDisabled\">\r\n          <div class=\"grid-txt\">\r\n            <el-button type=\"primary\" link>水平方向</el-button>\r\n          </div>\r\n          <div class=\"grid-silder\">\r\n            <el-slider show-input @input=\"onChangeSpotLight\" v-model=\"config.spotHorizontal\" :min=\"-10\" :max=\"10\"\r\n              :step=\"0.1\" />\r\n          </div>\r\n        </div>\r\n        <!-- 垂直方向方向 -->\r\n        <div class=\"option\" :class=\"spotDisabled\">\r\n          <div class=\"grid-txt\">\r\n            <el-button type=\"primary\" link>垂直方向</el-button>\r\n          </div>\r\n          <div class=\"grid-silder\">\r\n            <el-slider show-input @input=\"onChangeSpotLight\" v-model=\"config.spotVertical\" :min=\"-10\" :max=\"10\"\r\n              :step=\"0.1\" />\r\n          </div>\r\n        </div>\r\n        <!-- 光源距离 -->\r\n        <div class=\"option\" :class=\"spotDisabled\">\r\n          <div class=\"grid-txt\">\r\n            <el-button type=\"primary\" link>光源距离</el-button>\r\n          </div>\r\n          <div class=\"grid-silder\">\r\n            <el-slider show-input @input=\"onChangeSpotLight\" v-model=\"config.spotSistance\" :min=\"0\" :max=\"10\"\r\n              :step=\"0.1\" />\r\n          </div>\r\n        </div>\r\n        <!-- 光线照射范围 -->\r\n        <div class=\"option\" :class=\"spotDisabled\">\r\n          <div class=\"grid-txt\">\r\n            <el-button type=\"primary\" link>光线照射范围</el-button>\r\n          </div>\r\n          <div class=\"grid-silder\">\r\n            <el-slider show-input @input=\"onChangeSpotLight\" v-model=\"config.spotAngle\" :min=\"0\" :max=\"2\" :step=\"0.01\" />\r\n          </div>\r\n        </div>\r\n        <!-- 边缘聚光度 -->\r\n        <div class=\"option\" :class=\"spotDisabled\">\r\n          <div class=\"grid-txt\">\r\n            <el-button type=\"primary\" link>边缘聚光度</el-button>\r\n          </div>\r\n          <div class=\"grid-silder\">\r\n            <el-slider show-input @input=\"onChangeSpotLight\" v-model=\"config.spotPenumbra\" :min=\"0\" :max=\"1\"\r\n              :step=\"0.01\" />\r\n          </div>\r\n        </div>\r\n        <!-- 聚光度 强度-->\r\n        <div class=\"option\" :class=\"spotDisabled\">\r\n          <div class=\"grid-txt\">\r\n            <el-button type=\"primary\" link>投影聚焦度</el-button>\r\n          </div>\r\n          <div class=\"grid-silder\">\r\n            <el-slider show-input @input=\"onChangeSpotLight\" v-model=\"config.spotFocus\" :min=\"0\" :max=\"3\" :step=\"0.01\" />\r\n          </div>\r\n        </div>\r\n        <!--  光源照射距离-->\r\n        <div class=\"option\" :class=\"spotDisabled\">\r\n          <div class=\"grid-txt\">\r\n            <el-button type=\"primary\" link>光源照射距离</el-button>\r\n          </div>\r\n          <div class=\"grid-silder\">\r\n            <el-slider show-input @input=\"onChangeSpotLight\" v-model=\"config.spotDistance\" :min=\"1\" :max=\"500\"\r\n              :step=\"1\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </el-scrollbar>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { reactive, computed, onMounted, getCurrentInstance } from \"vue\";\r\nimport { useStore } from \"vuex\";\r\nimport { PREDEFINE_COLORS } from \"@/config/constant\";\r\nconst store = useStore();\r\nconst { $bus } = (getCurrentInstance() as any).proxy;\r\nconst config = reactive({\r\n  //光源平面\r\n  planeGeometry: false,\r\n  planeColor: \"#000000\",\r\n  planeWidth: 7,\r\n  planeHeight: 7,\r\n  //环境光\r\n  ambientLight: true,\r\n  ambientLightColor: \"#fff\",\r\n  ambientLightIntensity: 0.8,\r\n  //平行光\r\n  directionalLight: false,\r\n  directionalLightHelper: true,\r\n  directionalLightColor: \"#fff\",\r\n  directionalLightIntensity: 5,\r\n  directionalHorizontal: -1.26,\r\n  directionalVertical: -3.85,\r\n  directionalSistance: 2.98,\r\n  directionaShadow: true,\r\n  //点光源\r\n  pointLight: false,\r\n  pointLightHelper: true,\r\n  pointLightColor: \"#1E90FF\",\r\n  pointLightIntensity: 10,\r\n  pointHorizontal: -4.21,\r\n  pointVertical: -4.1,\r\n  pointSistance: 2.53,\r\n  //聚光灯\r\n  spotLight: false,\r\n  spotLightColor: \"#00BABD\",\r\n  spotLightIntensity: 900,\r\n  spotHorizontal: -3.49,\r\n  spotVertical: -4.37,\r\n  spotSistance: 4.09,\r\n  spotAngle: 0.5,\r\n  spotPenumbra: 1,\r\n  spotFocus: 1,\r\n  spotCastShadow: true,\r\n  spotLightHelper: true,\r\n  spotDistance: 20\r\n});\r\n\r\nconst predefineColors = PREDEFINE_COLORS;\r\nconst ambientDisabled = computed(() => {\r\n  const { ambientLight } = config;\r\n  return ambientLight ? \"\" : \"disabled\";\r\n});\r\nconst directionaDisabled = computed(() => {\r\n  const { directionalLight } = config;\r\n  return directionalLight ? \"\" : \"disabled\";\r\n});\r\nconst pointDisabled = computed(() => {\r\n  const { pointLight } = config;\r\n  return pointLight ? \"\" : \"disabled\";\r\n});\r\nconst spotDisabled = computed(() => {\r\n  const { spotLight } = config;\r\n  return spotLight ? \"\" : \"disabled\";\r\n});\r\nconst planetDisabled = computed(() => {\r\n  const { planeGeometry } = config;\r\n  return planeGeometry ? \"\" : \"disabled\";\r\n});\r\n\r\nconst state = reactive({\r\n  modelApi: computed(() => {\r\n    return store.state.modelApi;\r\n  })\r\n});\r\n\r\nonMounted(() => {\r\n  $bus.on(\"model-update\", () => {\r\n    Object.assign(config, {\r\n      //光源平面\r\n      planeGeometry: false,\r\n      planeColor: \"#000000\",\r\n      planeWidth: 7,\r\n      planeHeight: 7,\r\n      //环境光\r\n      ambientLight: true,\r\n      ambientLightColor: \"#fff\",\r\n      ambientLightIntensity: 0.8,\r\n      //平行光\r\n      directionalLight: false,\r\n      directionalLightHelper: true,\r\n      directionalLightColor: \"#fff\",\r\n      directionalLightIntensity: 5,\r\n      directionalHorizontal: -1.26,\r\n      directionalVertical: -3.85,\r\n      directionalSistance: 2.98,\r\n      directionaShadow: true,\r\n      //点光源\r\n      pointLight: false,\r\n      pointLightHelper: true,\r\n      pointLightColor: \"#1E90FF\",\r\n      pointLightIntensity: 10,\r\n      pointHorizontal: -4.21,\r\n      pointVertical: -4.1,\r\n      pointSistance: 2.53,\r\n      //聚光灯\r\n      spotLight: false,\r\n      spotLightColor: \"#00BABD\",\r\n      spotLightIntensity: 900,\r\n      spotHorizontal: -3.49,\r\n      spotVertical: -4.37,\r\n      spotSistance: 4.09,\r\n      spotAngle: 0.5,\r\n      spotPenumbra: 1,\r\n      spotFocus: 1,\r\n      spotCastShadow: true,\r\n      spotLightHelper: true,\r\n      spotDistance: 20\r\n    });\r\n  });\r\n});\r\n\r\nconst changeAmbientLightColor = (ambientLightColor: string) => {\r\n  config.ambientLightColor = ambientLightColor;\r\n  state.modelApi.onSetModelAmbientLight(config);\r\n};\r\n\r\n// 设置环境光\r\nconst onChangeAmbientLight = () => {\r\n  state.modelApi.onSetModelAmbientLight(config);\r\n};\r\n\r\nconst changeDirectionalLightColor = (directionalLightColor: string) => {\r\n  config.directionalLightColor = directionalLightColor;\r\n  state.modelApi.onSetModelDirectionalLight(config);\r\n};\r\n\r\n// 设置平行光\r\nconst onChangeDirectionalLight = () => {\r\n  if (config.directionalLight) {\r\n    config.planeGeometry = true;\r\n    state.modelApi.onSetModelPlaneGeometry(config);\r\n  }\r\n  state.modelApi.onSetModelDirectionalLight(config);\r\n};\r\n\r\nconst changePointLightColor = (pointLightColor: string) => {\r\n  config.pointLightColor = pointLightColor;\r\n  state.modelApi.onSetModelPointLight(config);\r\n};\r\n\r\n// 设置点光源\r\nconst onChangePointLight = () => {\r\n  state.modelApi.onSetModelPointLight(config);\r\n};\r\n\r\n// 设置聚颜色\r\nconst changeSpotLightColor = (spotLightColor: string) => {\r\n  config.spotLightColor = spotLightColor;\r\n  state.modelApi.onSetModelSpotLight(config);\r\n};\r\n// 设置聚光灯\r\nconst onChangeSpotLight = () => {\r\n  if (config.spotLight) {\r\n    config.planeGeometry = true;\r\n    state.modelApi.onSetModelPlaneGeometry(config);\r\n  }\r\n  state.modelApi.onSetModelSpotLight(config);\r\n};\r\n\r\nconst changePlaneGeometryColor = (planeColor: string) => {\r\n  config.planeColor = planeColor;\r\n  state.modelApi.onSetModelPlaneGeometry(config);\r\n};\r\n// 设置模型平面\r\nconst onChangePlaneGeometry = () => {\r\n  state.modelApi.onSetModelPlaneGeometry(config);\r\n};\r\n\r\ndefineExpose({\r\n  config\r\n});\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.edit-box {\r\n  height: auto;\r\n}\r\n\r\n.silder {\r\n  padding-left: 12px;\r\n  width: 270px;\r\n}\r\n\r\n.anambient-img {\r\n  padding: 0px 10px;\r\n  ul {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n  }\r\n  .anambient-active {\r\n    border: 2px solid #4d57fd;\r\n    box-sizing: border-box;\r\n  }\r\n  li {\r\n    margin: 0px 4px;\r\n    position: relative;\r\n    cursor: pointer;\r\n  }\r\n}</style>\r\n","import script from \"./EditLight.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./EditLight.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./EditLight.vue?vue&type=style&index=0&id=77542eb5&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-77542eb5\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, unref as _unref, normalizeClass as _normalizeClass, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"edit-box\" }\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"header\" }, [\n  /*#__PURE__*/_createElementVNode(\"span\", null, \"后期处理\")\n], -1)\nconst _hoisted_3 = { class: \"options\" }\nconst _hoisted_4 = { class: \"option space-between\" }\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"span\", null, \" 辉光 \", -1)\nconst _hoisted_6 = { class: \"option\" }\nconst _hoisted_7 = { class: \"grid-txt\" }\nconst _hoisted_8 = { class: \"grid-silder\" }\nconst _hoisted_9 = { class: \"option\" }\nconst _hoisted_10 = { class: \"grid-txt\" }\nconst _hoisted_11 = { class: \"grid-silder\" }\nconst _hoisted_12 = { class: \"option\" }\nconst _hoisted_13 = { class: \"grid-txt\" }\nconst _hoisted_14 = { class: \"grid-silder\" }\nconst _hoisted_15 = { class: \"option\" }\nconst _hoisted_16 = { class: \"grid-txt\" }\nconst _hoisted_17 = { class: \"grid-silder\" }\nconst _hoisted_18 = { class: \"options\" }\nconst _hoisted_19 = { class: \"option space-between\" }\nconst _hoisted_20 = /*#__PURE__*/_createElementVNode(\"span\", null, \" 色调曝光度 \", -1)\nconst _hoisted_21 = { class: \"grid-silder\" }\nconst _hoisted_22 = { class: \"header\" }\nconst _hoisted_23 = /*#__PURE__*/_createElementVNode(\"span\", null, \"模型操作\", -1)\nconst _hoisted_24 = { class: \"options\" }\nconst _hoisted_25 = /*#__PURE__*/_createElementVNode(\"span\", null, \" 模型分解 \", -1)\nconst _hoisted_26 = { class: \"grid-silder\" }\nconst _hoisted_27 = /*#__PURE__*/_createElementVNode(\"span\", null, \" 模型材质拖拽 \", -1)\nconst _hoisted_28 = { class: \"grid-silder\" }\n\nimport { reactive, computed, getCurrentInstance, onMounted } from \"vue\";\r\nimport { useStore } from \"vuex\";\r\nimport { PREDEFINE_COLORS } from \"@/config/constant\";\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'EditLaterStage',\n  setup(__props, { expose: __expose }) {\n\r\nconst store = useStore();\r\nconst { $bus } = (getCurrentInstance() as any).proxy;\r\nconst state = reactive({\r\n  modelApi: computed(() => {\r\n    return store.state.modelApi;\r\n  }),\r\n});\r\nconst optionsDisable = computed(() => {\r\n  const { glow } = config;\r\n  return glow ? \"\" : \"disabled\";\r\n});\r\n\r\nconst decomposeDisable = computed(() => {\r\n  const modelMaterialList = state.modelApi.modelMaterialList;\r\n  const decomposeMesh = modelMaterialList.filter((v: any) => v.type == \"Mesh\");\r\n  return (decomposeMesh.length <= 1) || decomposeMesh.length != modelMaterialList.length || config.modelDrag ? \"disabled\" : \"\";\r\n});\r\nconst moveDisable = computed(() => {\r\n  const modelMaterialList = state.modelApi.modelMaterialList;\r\n  const decomposeMesh = modelMaterialList.filter((v: any) => v.type == \"Mesh\");\r\n  return decomposeMesh.length <= 1 || decomposeMesh.length != modelMaterialList.length ? \"disabled\" : \"\";\r\n});\r\n\r\n\r\nconst config = reactive({\r\n  glow: false,\r\n  threshold: 0.05,\r\n  strength: 0.6,\r\n  radius: 1,\r\n  decompose: 0,\r\n  modelDrag: false,\r\n  toneMappingExposure: 2,\r\n  color: ''\r\n});\r\n\r\nonMounted(() => {\r\n  $bus.on(\"model-update\", () => {\r\n    Object.assign(config, {\r\n      glow: false,\r\n      threshold: 0.05,\r\n      strength: 0.6,\r\n      radius: 1,\r\n      decompose: 0,\r\n      modelDrag: false,\r\n      toneMappingExposure: 2,\r\n    });\r\n  });\r\n});\r\n\r\nconst onChangeColor = () => {\r\n  state.modelApi.onSetFlowColor(config.color);\r\n};\r\nconst activeChangeColor = (color: string) => {\r\n  config.color = color\r\n  state.modelApi.onSetFlowColor(config.color);\r\n};\r\n\r\nconst onChangeFlow = () => {\r\n  state.modelApi.onSetUnrealBloomPass(config);\r\n};\r\n\r\nconst onChangeDecompose = () => {\r\n  state.modelApi.setModelMeshDecompose(config);\r\n};\r\n\r\nconst onChangeDrag = () => {\r\n  config.decompose = 0;\r\n  state.modelApi.setModelMeshDecompose(config);\r\n  state.modelApi.setModelMeshDrag(config);\r\n};\r\n\r\nconst getStageConfig = () => {\r\n  return {\r\n    meshPositonList: state.modelApi.getMeshDragPosition(),\r\n    ...config,\r\n  };\r\n};\r\n__expose({\r\n  getStageConfig,\r\n});\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_Sunny = _resolveComponent(\"Sunny\")!\n  const _component_el_icon = _resolveComponent(\"el-icon\")!\n  const _component_el_space = _resolveComponent(\"el-space\")!\n  const _component_el_switch = _resolveComponent(\"el-switch\")!\n  const _component_el_button = _resolveComponent(\"el-button\")!\n  const _component_el_color_picker = _resolveComponent(\"el-color-picker\")!\n  const _component_el_slider = _resolveComponent(\"el-slider\")!\n  const _component_Umbrella = _resolveComponent(\"Umbrella\")!\n  const _component_WarnTriangleFilled = _resolveComponent(\"WarnTriangleFilled\")!\n  const _component_el_tooltip = _resolveComponent(\"el-tooltip\")!\n  const _component_Cpu = _resolveComponent(\"Cpu\")!\n  const _component_Rank = _resolveComponent(\"Rank\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _hoisted_2,\n    _createElementVNode(\"div\", _hoisted_3, [\n      _createElementVNode(\"div\", _hoisted_4, [\n        _createVNode(_component_el_space, null, {\n          default: _withCtx(() => [\n            _createVNode(_component_el_icon, null, {\n              default: _withCtx(() => [\n                _createVNode(_component_Sunny)\n              ]),\n              _: 1\n            }),\n            _hoisted_5\n          ]),\n          _: 1\n        }),\n        _createVNode(_component_el_switch, {\n          modelValue: config.glow,\n          \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((config.glow) = $event)),\n          onChange: onChangeFlow\n        }, null, 8, [\"modelValue\"])\n      ])\n    ]),\n    _createElementVNode(\"div\", {\n      class: _normalizeClass([\"options\", optionsDisable.value])\n    }, [\n      _createElementVNode(\"div\", _hoisted_6, [\n        _createElementVNode(\"div\", _hoisted_7, [\n          _createVNode(_component_el_button, {\n            type: \"primary\",\n            link: \"\"\n          }, {\n            default: _withCtx(() => [\n              _createTextVNode(\"颜色\")\n            ]),\n            _: 1\n          })\n        ]),\n        _createElementVNode(\"div\", _hoisted_8, [\n          _createVNode(_component_el_color_picker, {\n            \"color-format\": \"hex\",\n            predefine: _unref(PREDEFINE_COLORS),\n            onChange: onChangeColor,\n            onActiveChange: activeChangeColor,\n            modelValue: config.color,\n            \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((config.color) = $event))\n          }, null, 8, [\"predefine\", \"modelValue\"])\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_9, [\n        _createElementVNode(\"div\", _hoisted_10, [\n          _createVNode(_component_el_button, {\n            type: \"primary\",\n            link: \"\"\n          }, {\n            default: _withCtx(() => [\n              _createTextVNode(\"强度\")\n            ]),\n            _: 1\n          })\n        ]),\n        _createElementVNode(\"div\", _hoisted_11, [\n          _createVNode(_component_el_slider, {\n            \"show-input\": \"\",\n            modelValue: config.strength,\n            \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((config.strength) = $event)),\n            onInput: onChangeFlow,\n            step: 0.01,\n            min: 0,\n            max: 8\n          }, null, 8, [\"modelValue\"])\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_12, [\n        _createElementVNode(\"div\", _hoisted_13, [\n          _createVNode(_component_el_button, {\n            type: \"primary\",\n            link: \"\"\n          }, {\n            default: _withCtx(() => [\n              _createTextVNode(\"半径\")\n            ]),\n            _: 1\n          })\n        ]),\n        _createElementVNode(\"div\", _hoisted_14, [\n          _createVNode(_component_el_slider, {\n            \"show-input\": \"\",\n            modelValue: config.radius,\n            \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((config.radius) = $event)),\n            onInput: onChangeFlow,\n            step: 0.01,\n            min: 0,\n            max: 5\n          }, null, 8, [\"modelValue\"])\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_15, [\n        _createElementVNode(\"div\", _hoisted_16, [\n          _createVNode(_component_el_button, {\n            type: \"primary\",\n            link: \"\"\n          }, {\n            default: _withCtx(() => [\n              _createTextVNode(\"阈值\")\n            ]),\n            _: 1\n          })\n        ]),\n        _createElementVNode(\"div\", _hoisted_17, [\n          _createVNode(_component_el_slider, {\n            \"show-input\": \"\",\n            modelValue: config.threshold,\n            \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event: any) => ((config.threshold) = $event)),\n            onInput: onChangeFlow,\n            step: 0.01,\n            min: 0,\n            max: 1\n          }, null, 8, [\"modelValue\"])\n        ])\n      ])\n    ], 2),\n    _createElementVNode(\"div\", _hoisted_18, [\n      _createElementVNode(\"div\", _hoisted_19, [\n        _createVNode(_component_el_space, null, {\n          default: _withCtx(() => [\n            _createVNode(_component_el_icon, null, {\n              default: _withCtx(() => [\n                _createVNode(_component_Umbrella)\n              ]),\n              _: 1\n            }),\n            _hoisted_20\n          ]),\n          _: 1\n        }),\n        _createElementVNode(\"div\", _hoisted_21, [\n          _createVNode(_component_el_slider, {\n            \"show-input\": \"\",\n            modelValue: config.toneMappingExposure,\n            \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event: any) => ((config.toneMappingExposure) = $event)),\n            onInput: onChangeFlow,\n            step: 0.01,\n            min: 0.5,\n            max: 10\n          }, null, 8, [\"modelValue\"])\n        ])\n      ])\n    ]),\n    _createElementVNode(\"div\", _hoisted_22, [\n      _createVNode(_component_el_space, null, {\n        default: _withCtx(() => [\n          _hoisted_23,\n          (decomposeDisable.value == 'disabled')\n            ? (_openBlock(), _createBlock(_component_el_tooltip, {\n                key: 0,\n                effect: \"dark\",\n                content: \"当前模型不可进行以下操作\",\n                placement: \"top\"\n              }, {\n                default: _withCtx(() => [\n                  _createVNode(_component_el_icon, null, {\n                    default: _withCtx(() => [\n                      _createVNode(_component_WarnTriangleFilled, {\n                        size: 20,\n                        color: \"#ffb940\"\n                      })\n                    ]),\n                    _: 1\n                  })\n                ]),\n                _: 1\n              }))\n            : _createCommentVNode(\"\", true)\n        ]),\n        _: 1\n      })\n    ]),\n    _createElementVNode(\"div\", _hoisted_24, [\n      _createElementVNode(\"div\", {\n        class: _normalizeClass([\"option space-between\", decomposeDisable.value])\n      }, [\n        _createVNode(_component_el_space, null, {\n          default: _withCtx(() => [\n            _createVNode(_component_el_icon, null, {\n              default: _withCtx(() => [\n                _createVNode(_component_Cpu)\n              ]),\n              _: 1\n            }),\n            _hoisted_25\n          ]),\n          _: 1\n        }),\n        _createElementVNode(\"div\", _hoisted_26, [\n          _createVNode(_component_el_slider, {\n            \"show-input\": \"\",\n            modelValue: config.decompose,\n            \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event: any) => ((config.decompose) = $event)),\n            onInput: onChangeDecompose,\n            step: 0.01,\n            min: 0,\n            max: 20\n          }, null, 8, [\"modelValue\"])\n        ])\n      ], 2),\n      _createElementVNode(\"div\", {\n        class: _normalizeClass([\"option\", moveDisable.value])\n      }, [\n        _createVNode(_component_el_space, null, {\n          default: _withCtx(() => [\n            _createVNode(_component_el_icon, null, {\n              default: _withCtx(() => [\n                _createVNode(_component_Rank, { size: 20 })\n              ]),\n              _: 1\n            }),\n            _hoisted_27\n          ]),\n          _: 1\n        }),\n        _createElementVNode(\"div\", _hoisted_28, [\n          _createVNode(_component_el_switch, {\n            modelValue: config.modelDrag,\n            \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event: any) => ((config.modelDrag) = $event)),\n            onChange: onChangeDrag\n          }, null, 8, [\"modelValue\"])\n        ])\n      ], 2)\n    ])\n  ]))\n}\n}\n\n})","<template>\r\n  <div class=\"edit-box\">\r\n    <div class=\"header\">\r\n      <span>后期处理</span>\r\n    </div>\r\n    <!-- 辉光 -->\r\n    <div class=\"options\">\r\n      <div class=\"option space-between\">\r\n        <el-space>\r\n          <el-icon>\r\n            <Sunny />\r\n          </el-icon>\r\n          <span> 辉光 </span>\r\n        </el-space>\r\n        <el-switch v-model=\"config.glow\" @change=\"onChangeFlow\" />\r\n      </div>\r\n    </div>\r\n    <div class=\"options\" :class=\"optionsDisable\">\r\n      <div class=\"option\">\r\n        <div class=\"grid-txt\">\r\n          <el-button type=\"primary\" link>颜色</el-button>\r\n        </div>\r\n        <div class=\"grid-silder\">\r\n          <el-color-picker color-format=\"hex\" :predefine=\"PREDEFINE_COLORS\" @change=\"onChangeColor\"\r\n            @active-change=\"activeChangeColor\" v-model=\"config.color\" />\r\n        </div>\r\n      </div>\r\n      <div class=\"option\">\r\n        <div class=\"grid-txt\">\r\n          <el-button type=\"primary\" link>强度</el-button>\r\n        </div>\r\n        <div class=\"grid-silder\">\r\n          <el-slider show-input v-model=\"config.strength\" @input=\"onChangeFlow\" :step=\"0.01\" :min=\"0\" :max=\"8\" />\r\n        </div>\r\n      </div>\r\n      <div class=\"option\">\r\n        <div class=\"grid-txt\">\r\n          <el-button type=\"primary\" link>半径</el-button>\r\n        </div>\r\n        <div class=\"grid-silder\">\r\n          <el-slider show-input v-model=\"config.radius\" @input=\"onChangeFlow\" :step=\"0.01\" :min=\"0\" :max=\"5\" />\r\n        </div>\r\n      </div>\r\n      <div class=\"option\">\r\n        <div class=\"grid-txt\">\r\n          <el-button type=\"primary\" link>阈值</el-button>\r\n        </div>\r\n        <div class=\"grid-silder\">\r\n          <el-slider show-input v-model=\"config.threshold\" @input=\"onChangeFlow\" :step=\"0.01\" :min=\"0\" :max=\"1\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- 曝光度 -->\r\n    <div class=\"options\">\r\n      <div class=\"option space-between\">\r\n        <el-space>\r\n          <el-icon>\r\n            <Umbrella />\r\n          </el-icon>\r\n          <span> 色调曝光度 </span>\r\n        </el-space>\r\n        <div class=\"grid-silder\">\r\n          <el-slider show-input v-model=\"config.toneMappingExposure\" @input=\"onChangeFlow\" :step=\"0.01\" :min=\"0.5\"\r\n            :max=\"10\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"header\">\r\n      <el-space>\r\n        <span>模型操作</span>\r\n        <el-tooltip v-if=\"decomposeDisable == 'disabled'\" effect=\"dark\" content=\"当前模型不可进行以下操作\" placement=\"top\">\r\n          <el-icon>\r\n            <WarnTriangleFilled :size=\"20\" color=\"#ffb940\" />\r\n          </el-icon>\r\n        </el-tooltip>\r\n      </el-space>\r\n    </div>\r\n    <!-- 模型拆分 -->\r\n    <div class=\"options\">\r\n      <div class=\"option space-between\" :class=\"decomposeDisable\">\r\n        <el-space>\r\n          <el-icon>\r\n            <Cpu />\r\n          </el-icon>\r\n          <span> 模型分解 </span>\r\n        </el-space>\r\n        <div class=\"grid-silder\">\r\n          <el-slider show-input v-model=\"config.decompose\" @input=\"onChangeDecompose\" :step=\"0.01\" :min=\"0\" :max=\"20\" />\r\n        </div>\r\n      </div>\r\n      <div class=\"option\" :class=\"moveDisable\">\r\n        <el-space>\r\n          <el-icon>\r\n            <Rank :size=\"20\" />\r\n          </el-icon>\r\n          <span> 模型材质拖拽 </span>\r\n        </el-space>\r\n        <div class=\"grid-silder\">\r\n          <el-switch v-model=\"config.modelDrag\" @change=\"onChangeDrag\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script setup lang=\"ts\">\r\nimport { reactive, computed, getCurrentInstance, onMounted } from \"vue\";\r\nimport { useStore } from \"vuex\";\r\nimport { PREDEFINE_COLORS } from \"@/config/constant\";\r\n\r\nconst store = useStore();\r\nconst { $bus } = (getCurrentInstance() as any).proxy;\r\nconst state = reactive({\r\n  modelApi: computed(() => {\r\n    return store.state.modelApi;\r\n  }),\r\n});\r\nconst optionsDisable = computed(() => {\r\n  const { glow } = config;\r\n  return glow ? \"\" : \"disabled\";\r\n});\r\n\r\nconst decomposeDisable = computed(() => {\r\n  const modelMaterialList = state.modelApi.modelMaterialList;\r\n  const decomposeMesh = modelMaterialList.filter((v: any) => v.type == \"Mesh\");\r\n  return (decomposeMesh.length <= 1) || decomposeMesh.length != modelMaterialList.length || config.modelDrag ? \"disabled\" : \"\";\r\n});\r\nconst moveDisable = computed(() => {\r\n  const modelMaterialList = state.modelApi.modelMaterialList;\r\n  const decomposeMesh = modelMaterialList.filter((v: any) => v.type == \"Mesh\");\r\n  return decomposeMesh.length <= 1 || decomposeMesh.length != modelMaterialList.length ? \"disabled\" : \"\";\r\n});\r\n\r\n\r\nconst config = reactive({\r\n  glow: false,\r\n  threshold: 0.05,\r\n  strength: 0.6,\r\n  radius: 1,\r\n  decompose: 0,\r\n  modelDrag: false,\r\n  toneMappingExposure: 2,\r\n  color: ''\r\n});\r\n\r\nonMounted(() => {\r\n  $bus.on(\"model-update\", () => {\r\n    Object.assign(config, {\r\n      glow: false,\r\n      threshold: 0.05,\r\n      strength: 0.6,\r\n      radius: 1,\r\n      decompose: 0,\r\n      modelDrag: false,\r\n      toneMappingExposure: 2,\r\n    });\r\n  });\r\n});\r\n\r\nconst onChangeColor = () => {\r\n  state.modelApi.onSetFlowColor(config.color);\r\n};\r\nconst activeChangeColor = (color: string) => {\r\n  config.color = color\r\n  state.modelApi.onSetFlowColor(config.color);\r\n};\r\n\r\nconst onChangeFlow = () => {\r\n  state.modelApi.onSetUnrealBloomPass(config);\r\n};\r\n\r\nconst onChangeDecompose = () => {\r\n  state.modelApi.setModelMeshDecompose(config);\r\n};\r\n\r\nconst onChangeDrag = () => {\r\n  config.decompose = 0;\r\n  state.modelApi.setModelMeshDecompose(config);\r\n  state.modelApi.setModelMeshDrag(config);\r\n};\r\n\r\nconst getStageConfig = () => {\r\n  return {\r\n    meshPositonList: state.modelApi.getMeshDragPosition(),\r\n    ...config,\r\n  };\r\n};\r\ndefineExpose({\r\n  getStageConfig,\r\n});\r\n</script>\r\n<style lang=\"scss\" scoped></style>\r\n","import script from \"./EditLaterStage.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./EditLaterStage.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, vShow as _vShow, withDirectives as _withDirectives, withModifiers as _withModifiers, normalizeClass as _normalizeClass, createTextVNode as _createTextVNode, createBlock as _createBlock, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-1e8e190f\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"edit-box\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"header\" }, [\n  /*#__PURE__*/_createElementVNode(\"span\", null, \"几何体模型材质列表\")\n], -1))\nconst _hoisted_3 = { class: \"options\" }\nconst _hoisted_4 = [\"onClick\"]\nconst _hoisted_5 = { class: \"icon-name\" }\nconst _hoisted_6 = { class: \"check\" }\nconst _hoisted_7 = { class: \"icon-delete\" }\nconst _hoisted_8 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"header\" }, [\n  /*#__PURE__*/_createElementVNode(\"span\", null, \"几何体模型编辑\")\n], -1))\nconst _hoisted_9 = { class: \"options\" }\nconst _hoisted_10 = { class: \"grid-txt\" }\nconst _hoisted_11 = { class: \"grid-silder\" }\nconst _hoisted_12 = { key: 1 }\n\nimport { ref, reactive, computed, watch, Ref } from \"vue\";\r\nimport { useStore } from \"vuex\";\r\nimport { ElMessage } from \"element-plus\";\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'EditGeometry',\n  setup(__props) {\n\r\nconst store = useStore();\r\nconst config = reactive({\r\n  meaterialName: null,\r\n  type: null,\r\n});\r\n\r\nconst activeGeometry: Ref<any> = ref(null);\r\nconst geometryConfigList: Ref<any> = ref([]);\r\n\r\nconst disabled = computed(() => {\r\n  const geometrylen = state.modelMaterialList.filter((v: { userData: { geometry: any; }; }) => v.userData.geometry);\r\n  return geometrylen == 0 ? false : true;\r\n});\r\n\r\nconst state = reactive({\r\n  modelMaterialList: computed(() => {\r\n    return store.state.modelApi.modelMaterialList;\r\n  }),\r\n  modelApi: computed(() => {\r\n    return store.state.modelApi;\r\n  }),\r\n  selectMeshUuid: computed(() => store.getters.selectMeshUuid),\r\n});\r\nwatch(\r\n  () => store.getters.selectMeshUuid,\r\n  (val) => {\r\n    const { geometry } = state.modelMaterialList.find((v: { uuid: any; }) => v.uuid == val) || {};\r\n    if (geometry) {\r\n      const { type } = geometry;\r\n      activeGeometry.value = {\r\n        ...geometry.parameters,\r\n      };\r\n      config.type = type;\r\n      geometryConfigList.value = Object.keys(activeGeometry.value);\r\n    } else {\r\n      geometryConfigList.value = [];\r\n    }\r\n  }\r\n);\r\n\r\n// 选择材质\r\nconst onChangeMaterialType = (mesh: { name: string, material: any }) => {\r\n  const { name, material } = mesh\r\n  config.meaterialName = material.name;\r\n  state.modelApi.onChangeModelMeaterial(name);\r\n};\r\n\r\n//修改材质信息\r\nconst onSetGeometry = () => {\r\n  state.modelApi.onSetGeometryMesh(activeGeometry.value, config.type);\r\n};\r\n\r\n// 删除材质\r\nconst onDeleteGeometry = (uuid: string) => {\r\n  state.modelApi.onDeleteGeometryMesh(uuid);\r\n  ElMessage.success(\"删除成功\");\r\n};\r\n\r\nconst inputRange = (key: string) => {\r\n  let range = {\r\n    min: 1,\r\n    max: 80,\r\n    step: 0.01,\r\n  };\r\n  if (\r\n    [\r\n      \"width\",\r\n      \"height\",\r\n      \"radius\",\r\n      \"length\",\r\n      \"thetaLength\",\r\n      \"radiusTop\",\r\n      \"innerRadius\",\r\n      \"radiusBottom\",\r\n      \"q\",\r\n      \"outerRadius\",\r\n      \"arc\",\r\n      \"tube\",\r\n      \"p\",\r\n    ].includes(key)\r\n  ) {\r\n    range = {\r\n      min: 0.1,\r\n      max: 10,\r\n      step: 0.01,\r\n    };\r\n  }\r\n  if (\r\n    [\"detail\", 'capSegments', 'radialSegments', \"thetaStart\", \"depthSegments\", \"widthSegments\", \"heightSegments\"].includes(\r\n      key\r\n    )\r\n  ) {\r\n    range = {\r\n      min: 0,\r\n      max: 10,\r\n      step: 1,\r\n    };\r\n  }\r\n  return range;\r\n};\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_Check = _resolveComponent(\"Check\")!\n  const _component_el_icon = _resolveComponent(\"el-icon\")!\n  const _component_Delete = _resolveComponent(\"Delete\")!\n  const _component_el_space = _resolveComponent(\"el-space\")!\n  const _component_el_scrollbar = _resolveComponent(\"el-scrollbar\")!\n  const _component_el_button = _resolveComponent(\"el-button\")!\n  const _component_el_slider = _resolveComponent(\"el-slider\")!\n  const _component_el_switch = _resolveComponent(\"el-switch\")!\n  const _component_el_empty = _resolveComponent(\"el-empty\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    (disabled.value)\n      ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n          _hoisted_2,\n          _createElementVNode(\"div\", _hoisted_3, [\n            _createVNode(_component_el_scrollbar, { \"max-height\": \"300px\" }, {\n              default: _withCtx(() => [\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(state.modelMaterialList, (mesh) => {\n                  return (_openBlock(), _createElementBlock(\"div\", {\n                    class: _normalizeClass([\"option\", state.selectMeshUuid == mesh.uuid ? 'option-active' : '']),\n                    onClick: ($event: any) => (onChangeMaterialType(mesh)),\n                    key: mesh.uuid\n                  }, [\n                    _createElementVNode(\"div\", _hoisted_5, _toDisplayString(mesh.name), 1),\n                    _createVNode(_component_el_space, null, {\n                      default: _withCtx(() => [\n                        _withDirectives(_createElementVNode(\"div\", _hoisted_6, [\n                          _createVNode(_component_el_icon, {\n                            size: \"20px\",\n                            color: \"#2a3ff6\"\n                          }, {\n                            default: _withCtx(() => [\n                              _createVNode(_component_Check)\n                            ]),\n                            _: 1\n                          })\n                        ], 512), [\n                          [_vShow, state.selectMeshUuid == mesh.uuid]\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_7, [\n                          _createVNode(_component_el_icon, {\n                            size: \"18px\",\n                            color: \"#2a3ff6\"\n                          }, {\n                            default: _withCtx(() => [\n                              _createVNode(_component_Delete, {\n                                onClick: _withModifiers(($event: any) => (onDeleteGeometry(mesh.uuid)), [\"stop\"])\n                              }, null, 8, [\"onClick\"])\n                            ]),\n                            _: 2\n                          }, 1024)\n                        ])\n                      ]),\n                      _: 2\n                    }, 1024)\n                  ], 10, _hoisted_4))\n                }), 128))\n              ]),\n              _: 1\n            })\n          ]),\n          _hoisted_8,\n          _createElementVNode(\"div\", _hoisted_9, [\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(geometryConfigList.value, (key) => {\n              return (_openBlock(), _createElementBlock(\"div\", {\n                class: \"option\",\n                key: key\n              }, [\n                _createElementVNode(\"div\", _hoisted_10, [\n                  _createVNode(_component_el_button, {\n                    type: \"primary\",\n                    link: \"\"\n                  }, {\n                    default: _withCtx(() => [\n                      _createTextVNode(_toDisplayString(key), 1)\n                    ]),\n                    _: 2\n                  }, 1024)\n                ]),\n                _createElementVNode(\"div\", _hoisted_11, [\n                  (typeof activeGeometry.value[key] == 'number')\n                    ? (_openBlock(), _createBlock(_component_el_slider, {\n                        key: 0,\n                        \"show-input\": \"\",\n                        modelValue: activeGeometry.value[key],\n                        \"onUpdate:modelValue\": ($event: any) => ((activeGeometry.value[key]) = $event),\n                        min: inputRange(key).min,\n                        max: inputRange(key).max,\n                        step: inputRange(key).step,\n                        onInput: onSetGeometry\n                      }, null, 8, [\"modelValue\", \"onUpdate:modelValue\", \"min\", \"max\", \"step\"]))\n                    : (typeof activeGeometry.value[key] == 'string')\n                      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_12, _toDisplayString(activeGeometry.value[key]), 1))\n                      : (typeof activeGeometry.value[key] == 'boolean')\n                        ? (_openBlock(), _createBlock(_component_el_switch, {\n                            key: 2,\n                            onChange: onSetGeometry,\n                            modelValue: activeGeometry.value[key],\n                            \"onUpdate:modelValue\": ($event: any) => ((activeGeometry.value[key]) = $event)\n                          }, null, 8, [\"modelValue\", \"onUpdate:modelValue\"]))\n                        : _createCommentVNode(\"\", true)\n                ])\n              ]))\n            }), 128))\n          ])\n        ], 64))\n      : (_openBlock(), _createBlock(_component_el_empty, {\n          key: 1,\n          description: \"当前模型不支持使用该功能\",\n          \"image-size\": 120\n        }))\n  ]))\n}\n}\n\n})","<template>\r\n  <div class=\"edit-box\">\r\n    <template v-if=\"disabled\">\r\n      <div class=\"header\">\r\n        <span>几何体模型材质列表</span>\r\n      </div>\r\n      <!-- 材质列表 -->\r\n      <div class=\"options\">\r\n        <el-scrollbar max-height=\"300px\">\r\n          <div class=\"option\" :class=\"state.selectMeshUuid == mesh.uuid ? 'option-active' : ''\"\r\n            @click=\"onChangeMaterialType(mesh)\" v-for=\"mesh in state.modelMaterialList\" :key=\"mesh.uuid\">\r\n            <div class=\"icon-name\">\r\n              {{ mesh.name }}\r\n            </div>\r\n            <el-space>\r\n              <div class=\"check\" v-show=\"state.selectMeshUuid == mesh.uuid\">\r\n                <el-icon size=\"20px\" color=\"#2a3ff6\">\r\n                  <Check />\r\n                </el-icon>\r\n              </div>\r\n              <div class=\"icon-delete\">\r\n                <el-icon size=\"18px\" color=\"#2a3ff6\">\r\n                  <Delete @click.stop=\"onDeleteGeometry(mesh.uuid)\" />\r\n                </el-icon>\r\n              </div>\r\n            </el-space>\r\n          </div>\r\n        </el-scrollbar>\r\n      </div>\r\n      <div class=\"header\">\r\n        <span>几何体模型编辑</span>\r\n      </div>\r\n      <div class=\"options\">\r\n        <div class=\"option\" v-for=\"key in geometryConfigList\" :key=\"key\">\r\n          <div class=\"grid-txt\">\r\n            <el-button type=\"primary\" link>{{ key }} </el-button>\r\n          </div>\r\n          <div class=\"grid-silder\">\r\n            <el-slider show-input v-if=\"typeof activeGeometry[key] == 'number'\" v-model=\"activeGeometry[key]\"\r\n              :min=\"inputRange(key).min\" :max=\"inputRange(key).max\" :step=\"inputRange(key).step\" @input=\"onSetGeometry\" />\r\n            <div v-else-if=\"typeof activeGeometry[key] == 'string'\">\r\n              {{ activeGeometry[key] }}\r\n            </div>\r\n            <el-switch @change=\"onSetGeometry\" v-else-if=\"typeof activeGeometry[key] == 'boolean'\"\r\n              v-model=\"activeGeometry[key]\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </template>\r\n    <el-empty v-else description=\"当前模型不支持使用该功能\" :image-size=\"120\" />\r\n  </div>\r\n</template>\r\n<script setup lang=\"ts\">\r\nimport { ref, reactive, computed, watch, Ref } from \"vue\";\r\nimport { useStore } from \"vuex\";\r\nimport { ElMessage } from \"element-plus\";\r\n\r\nconst store = useStore();\r\nconst config = reactive({\r\n  meaterialName: null,\r\n  type: null,\r\n});\r\n\r\nconst activeGeometry: Ref<any> = ref(null);\r\nconst geometryConfigList: Ref<any> = ref([]);\r\n\r\nconst disabled = computed(() => {\r\n  const geometrylen = state.modelMaterialList.filter((v: { userData: { geometry: any; }; }) => v.userData.geometry);\r\n  return geometrylen == 0 ? false : true;\r\n});\r\n\r\nconst state = reactive({\r\n  modelMaterialList: computed(() => {\r\n    return store.state.modelApi.modelMaterialList;\r\n  }),\r\n  modelApi: computed(() => {\r\n    return store.state.modelApi;\r\n  }),\r\n  selectMeshUuid: computed(() => store.getters.selectMeshUuid),\r\n});\r\nwatch(\r\n  () => store.getters.selectMeshUuid,\r\n  (val) => {\r\n    const { geometry } = state.modelMaterialList.find((v: { uuid: any; }) => v.uuid == val) || {};\r\n    if (geometry) {\r\n      const { type } = geometry;\r\n      activeGeometry.value = {\r\n        ...geometry.parameters,\r\n      };\r\n      config.type = type;\r\n      geometryConfigList.value = Object.keys(activeGeometry.value);\r\n    } else {\r\n      geometryConfigList.value = [];\r\n    }\r\n  }\r\n);\r\n\r\n// 选择材质\r\nconst onChangeMaterialType = (mesh: { name: string, material: any }) => {\r\n  const { name, material } = mesh\r\n  config.meaterialName = material.name;\r\n  state.modelApi.onChangeModelMeaterial(name);\r\n};\r\n\r\n//修改材质信息\r\nconst onSetGeometry = () => {\r\n  state.modelApi.onSetGeometryMesh(activeGeometry.value, config.type);\r\n};\r\n\r\n// 删除材质\r\nconst onDeleteGeometry = (uuid: string) => {\r\n  state.modelApi.onDeleteGeometryMesh(uuid);\r\n  ElMessage.success(\"删除成功\");\r\n};\r\n\r\nconst inputRange = (key: string) => {\r\n  let range = {\r\n    min: 1,\r\n    max: 80,\r\n    step: 0.01,\r\n  };\r\n  if (\r\n    [\r\n      \"width\",\r\n      \"height\",\r\n      \"radius\",\r\n      \"length\",\r\n      \"thetaLength\",\r\n      \"radiusTop\",\r\n      \"innerRadius\",\r\n      \"radiusBottom\",\r\n      \"q\",\r\n      \"outerRadius\",\r\n      \"arc\",\r\n      \"tube\",\r\n      \"p\",\r\n    ].includes(key)\r\n  ) {\r\n    range = {\r\n      min: 0.1,\r\n      max: 10,\r\n      step: 0.01,\r\n    };\r\n  }\r\n  if (\r\n    [\"detail\", 'capSegments', 'radialSegments', \"thetaStart\", \"depthSegments\", \"widthSegments\", \"heightSegments\"].includes(\r\n      key\r\n    )\r\n  ) {\r\n    range = {\r\n      min: 0,\r\n      max: 10,\r\n      step: 1,\r\n    };\r\n  }\r\n  return range;\r\n};\r\n</script>\r\n<style scoped lang=\"scss\">\r\n.icon-name {\r\n  width: 240px;\r\n  max-width: 240px;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n}\r\n\r\n.option {\r\n  justify-content: space-between;\r\n}\r\n\r\n.grid-txt {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  align-items: center;\r\n}\r\n</style>\r\n","import script from \"./EditGeometry.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./EditGeometry.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./EditGeometry.vue?vue&type=style&index=0&id=1e8e190f&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-1e8e190f\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveDynamicComponent as _resolveDynamicComponent, createBlock as _createBlock, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, vShow as _vShow, withDirectives as _withDirectives, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-6d88af7d\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"model-panel\" }\nconst _hoisted_2 = { class: \"panel-tabs\" }\nconst _hoisted_3 = [\"onClick\"]\nconst _hoisted_4 = { class: \"tab\" }\nconst _hoisted_5 = { class: \"panel-edit\" }\n\nimport { ref, Ref } from \"vue\";\r\nimport EditBackground from \"./EditBackground.vue\";\r\nimport EditMaterial from \"./EditMaterial.vue\";\r\nimport EditAnimation from \"./EditAnimation.vue\";\r\nimport EditAttribute from \"./EditAttribute.vue\";\r\nimport EditLight from \"./EditLight.vue\";\r\nimport EditLaterStage from \"./EditLaterStage.vue\";\r\nimport EditGeometry from \"./EditGeometry.vue\";\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'index',\n  setup(__props, { expose: __expose }) {\n\r\nconst panelTabs = [\r\n  {\r\n    name: \"背景\",\r\n    key: \"EditBackground\",\r\n    icon: \"Picture\",\r\n  },\r\n  {\r\n    name: \"材质\",\r\n    key: \"EditMaterial\",\r\n    icon: \"DataAnalysis\",\r\n  },\r\n  {\r\n    name: \"后期/操作\",\r\n    key: \"EditLaterStage\",\r\n    icon: \"MagicStick\",\r\n  },\r\n  {\r\n    name: \"灯光\",\r\n    key: \"EditLight\",\r\n    icon: \"Sunrise\",\r\n  },\r\n  {\r\n    name: \"模型动画\",\r\n    key: \"EditAnimation\",\r\n    icon: \"VideoCameraFilled\",\r\n  },\r\n  {\r\n    name: \"辅助线/轴配置\",\r\n    key: \"EditAttribute\",\r\n    icon: \"Box\",\r\n  },\r\n  {\r\n    name: \"几何体模型配置\",\r\n    key: \"EditGeometry\",\r\n    icon: \"Cellphone\",\r\n  },\r\n];\r\nconst activeTab = ref(\"EditMaterial\");\r\nconst background: Ref<any> = ref(null);\r\nconst material: Ref<any> = ref(null);\r\nconst animation: Ref<any> = ref(null);\r\nconst attribute: Ref<any> = ref(null);\r\nconst light: Ref<any> = ref(null);\r\nconst stage: Ref<any> = ref(null);\r\nconst geometry: Ref<any> = ref(null)\r\n// 获取所有面板配置\r\nconst getPanelConfig = () => {\r\n  return {\r\n    background: background.value.config,\r\n    material: material.value.getMeshConfig(),\r\n    animation: animation.value.config,\r\n    attribute: attribute.value.getAttrbuteConfig(),\r\n    light: light.value.config,\r\n    stage: stage.value.getStageConfig(),\r\n  };\r\n};\r\n__expose({\r\n  getPanelConfig,\r\n});\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_icon = _resolveComponent(\"el-icon\")!\n  const _component_el_tooltip = _resolveComponent(\"el-tooltip\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"ul\", _hoisted_2, [\n      (_openBlock(), _createElementBlock(_Fragment, null, _renderList(panelTabs, (tab) => {\n        return _createElementVNode(\"li\", {\n          key: tab.key,\n          class: _normalizeClass(activeTab.value == tab.key ? 'active' : ''),\n          onClick: ($event: any) => (activeTab.value = tab.key)\n        }, [\n          _createVNode(_component_el_tooltip, {\n            effect: \"light\",\n            content: tab.name,\n            placement: \"top\"\n          }, {\n            default: _withCtx(() => [\n              _createElementVNode(\"div\", _hoisted_4, [\n                _createVNode(_component_el_icon, {\n                  size: \"20px\",\n                  color: activeTab.value == tab.key ? '#fff' : ''\n                }, {\n                  default: _withCtx(() => [\n                    (_openBlock(), _createBlock(_resolveDynamicComponent(tab.icon)))\n                  ]),\n                  _: 2\n                }, 1032, [\"color\"])\n              ])\n            ]),\n            _: 2\n          }, 1032, [\"content\"])\n        ], 10, _hoisted_3)\n      }), 64))\n    ]),\n    _createElementVNode(\"div\", _hoisted_5, [\n      _withDirectives(_createElementVNode(\"div\", null, [\n        _createVNode(EditBackground, {\n          ref_key: \"background\",\n          ref: background\n        }, null, 512)\n      ], 512), [\n        [_vShow, activeTab.value == 'EditBackground']\n      ]),\n      _withDirectives(_createElementVNode(\"div\", null, [\n        _createVNode(EditMaterial, {\n          ref_key: \"material\",\n          ref: material\n        }, null, 512)\n      ], 512), [\n        [_vShow, activeTab.value == 'EditMaterial']\n      ]),\n      _withDirectives(_createElementVNode(\"div\", null, [\n        _createVNode(EditLaterStage, {\n          ref_key: \"stage\",\n          ref: stage\n        }, null, 512)\n      ], 512), [\n        [_vShow, activeTab.value == 'EditLaterStage']\n      ]),\n      _withDirectives(_createElementVNode(\"div\", null, [\n        _createVNode(EditAnimation, {\n          ref_key: \"animation\",\n          ref: animation\n        }, null, 512)\n      ], 512), [\n        [_vShow, activeTab.value == 'EditAnimation']\n      ]),\n      _withDirectives(_createElementVNode(\"div\", null, [\n        _createVNode(EditLight, {\n          ref_key: \"light\",\n          ref: light\n        }, null, 512)\n      ], 512), [\n        [_vShow, activeTab.value == 'EditLight']\n      ]),\n      _withDirectives(_createElementVNode(\"div\", null, [\n        _createVNode(EditAttribute, {\n          ref_key: \"attribute\",\n          ref: attribute\n        }, null, 512)\n      ], 512), [\n        [_vShow, activeTab.value == 'EditAttribute']\n      ]),\n      _withDirectives(_createElementVNode(\"div\", null, [\n        _createVNode(EditGeometry, {\n          ref_key: \"geometry\",\n          ref: geometry\n        }, null, 512)\n      ], 512), [\n        [_vShow, activeTab.value == 'EditGeometry']\n      ])\n    ])\n  ]))\n}\n}\n\n})","<template>\r\n  <div class=\"model-panel\">\r\n    <ul class=\"panel-tabs\">\r\n      <li v-for=\"tab in panelTabs\" :key=\"tab.key\" :class=\"activeTab == tab.key ? 'active' : ''\"\r\n        @click=\"activeTab = tab.key\">\r\n        <el-tooltip effect=\"light\" :content=\"tab.name\" placement=\"top\">\r\n          <div class=\"tab\">\r\n            <el-icon size=\"20px\" :color=\"activeTab == tab.key ? '#fff' : ''\">\r\n              <component :is=\"tab.icon\"></component>\r\n            </el-icon>\r\n          </div>\r\n        </el-tooltip>\r\n      </li>\r\n    </ul>\r\n    <div class=\"panel-edit\">\r\n      <!-- 背景 -->\r\n      <div v-show=\"activeTab == 'EditBackground'\">\r\n        <edit-background ref=\"background\"></edit-background>\r\n      </div>\r\n      <!-- 材质 -->\r\n      <div v-show=\"activeTab == 'EditMaterial'\">\r\n        <edit-material ref=\"material\"></edit-material>\r\n      </div>\r\n      <!-- 后期 -->\r\n      <div v-show=\"activeTab == 'EditLaterStage'\">\r\n        <edit-later-stage ref=\"stage\"></edit-later-stage>\r\n      </div>\r\n      <!-- 动画 -->\r\n      <div v-show=\"activeTab == 'EditAnimation'\">\r\n        <edit-animation ref=\"animation\"></edit-animation>\r\n      </div>\r\n      <!-- 灯光 -->\r\n      <div v-show=\"activeTab == 'EditLight'\">\r\n        <edit-light ref=\"light\"></edit-light>\r\n      </div>\r\n      <!-- 属性 -->\r\n      <div v-show=\"activeTab == 'EditAttribute'\">\r\n        <edit-attribute ref=\"attribute\"></edit-attribute>\r\n      </div>\r\n      <!-- 几何体配置 -->\r\n      <div v-show=\"activeTab == 'EditGeometry'\">\r\n        <edit-geometry ref=\"geometry\"></edit-geometry>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script setup lang=\"ts\">\r\nimport { ref, Ref } from \"vue\";\r\nimport EditBackground from \"./EditBackground.vue\";\r\nimport EditMaterial from \"./EditMaterial.vue\";\r\nimport EditAnimation from \"./EditAnimation.vue\";\r\nimport EditAttribute from \"./EditAttribute.vue\";\r\nimport EditLight from \"./EditLight.vue\";\r\nimport EditLaterStage from \"./EditLaterStage.vue\";\r\nimport EditGeometry from \"./EditGeometry.vue\";\r\nconst panelTabs = [\r\n  {\r\n    name: \"背景\",\r\n    key: \"EditBackground\",\r\n    icon: \"Picture\",\r\n  },\r\n  {\r\n    name: \"材质\",\r\n    key: \"EditMaterial\",\r\n    icon: \"DataAnalysis\",\r\n  },\r\n  {\r\n    name: \"后期/操作\",\r\n    key: \"EditLaterStage\",\r\n    icon: \"MagicStick\",\r\n  },\r\n  {\r\n    name: \"灯光\",\r\n    key: \"EditLight\",\r\n    icon: \"Sunrise\",\r\n  },\r\n  {\r\n    name: \"模型动画\",\r\n    key: \"EditAnimation\",\r\n    icon: \"VideoCameraFilled\",\r\n  },\r\n  {\r\n    name: \"辅助线/轴配置\",\r\n    key: \"EditAttribute\",\r\n    icon: \"Box\",\r\n  },\r\n  {\r\n    name: \"几何体模型配置\",\r\n    key: \"EditGeometry\",\r\n    icon: \"Cellphone\",\r\n  },\r\n];\r\nconst activeTab = ref(\"EditMaterial\");\r\nconst background: Ref<any> = ref(null);\r\nconst material: Ref<any> = ref(null);\r\nconst animation: Ref<any> = ref(null);\r\nconst attribute: Ref<any> = ref(null);\r\nconst light: Ref<any> = ref(null);\r\nconst stage: Ref<any> = ref(null);\r\nconst geometry: Ref<any> = ref(null)\r\n// 获取所有面板配置\r\nconst getPanelConfig = () => {\r\n  return {\r\n    background: background.value.config,\r\n    material: material.value.getMeshConfig(),\r\n    animation: animation.value.config,\r\n    attribute: attribute.value.getAttrbuteConfig(),\r\n    light: light.value.config,\r\n    stage: stage.value.getStageConfig(),\r\n  };\r\n};\r\ndefineExpose({\r\n  getPanelConfig,\r\n});\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.model-panel {\r\n  background-color: #1b1c23;\r\n  min-width: 380px;\r\n  height: calc(100vh - 35px);\r\n\r\n  .panel-tabs {\r\n    display: flex;\r\n\r\n    .active {\r\n      background-color: #4d57fd;\r\n    }\r\n\r\n    li {\r\n      cursor: pointer;\r\n      color: #888;\r\n      background: #272830;\r\n      padding: 10px;\r\n      border-right: 1px solid #0a0a0a;\r\n      display: flex;\r\n      align-items: center;\r\n\r\n      .tab {\r\n        line-height: initial;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import script from \"./index.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=6d88af7d&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-6d88af7d\"]])\n\nexport default __exports__","import {\n\tBufferAttribute,\n\tBufferGeometry,\n\tColor,\n\tFileLoader,\n\tLoader,\n\tLinearSRGBColorSpace,\n\tSRGBColorSpace\n} from 'three';\n\nconst _taskCache = new WeakMap();\n\nclass DRACOLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t\tthis.decoderPath = '';\n\t\tthis.decoderConfig = {};\n\t\tthis.decoderBinary = null;\n\t\tthis.decoderPending = null;\n\n\t\tthis.workerLimit = 4;\n\t\tthis.workerPool = [];\n\t\tthis.workerNextTaskID = 1;\n\t\tthis.workerSourceURL = '';\n\n\t\tthis.defaultAttributeIDs = {\n\t\t\tposition: 'POSITION',\n\t\t\tnormal: 'NORMAL',\n\t\t\tcolor: 'COLOR',\n\t\t\tuv: 'TEX_COORD'\n\t\t};\n\t\tthis.defaultAttributeTypes = {\n\t\t\tposition: 'Float32Array',\n\t\t\tnormal: 'Float32Array',\n\t\t\tcolor: 'Float32Array',\n\t\t\tuv: 'Float32Array'\n\t\t};\n\n\t}\n\n\tsetDecoderPath( path ) {\n\n\t\tthis.decoderPath = path;\n\n\t\treturn this;\n\n\t}\n\n\tsetDecoderConfig( config ) {\n\n\t\tthis.decoderConfig = config;\n\n\t\treturn this;\n\n\t}\n\n\tsetWorkerLimit( workerLimit ) {\n\n\t\tthis.workerLimit = workerLimit;\n\n\t\treturn this;\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst loader = new FileLoader( this.manager );\n\n\t\tloader.setPath( this.path );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\tloader.load( url, ( buffer ) => {\n\n\t\t\tthis.parse( buffer, onLoad, onError );\n\n\t\t}, onProgress, onError );\n\n\t}\n\n\tparse( buffer, onLoad, onError ) {\n\n\t\tthis.decodeDracoFile( buffer, onLoad, null, null, SRGBColorSpace ).catch( onError );\n\n\t}\n\n\tdecodeDracoFile( buffer, callback, attributeIDs, attributeTypes, vertexColorSpace = LinearSRGBColorSpace ) {\n\n\t\tconst taskConfig = {\n\t\t\tattributeIDs: attributeIDs || this.defaultAttributeIDs,\n\t\t\tattributeTypes: attributeTypes || this.defaultAttributeTypes,\n\t\t\tuseUniqueIDs: !! attributeIDs,\n\t\t\tvertexColorSpace: vertexColorSpace,\n\t\t};\n\n\t\treturn this.decodeGeometry( buffer, taskConfig ).then( callback );\n\n\t}\n\n\tdecodeGeometry( buffer, taskConfig ) {\n\n\t\tconst taskKey = JSON.stringify( taskConfig );\n\n\t\t// Check for an existing task using this buffer. A transferred buffer cannot be transferred\n\t\t// again from this thread.\n\t\tif ( _taskCache.has( buffer ) ) {\n\n\t\t\tconst cachedTask = _taskCache.get( buffer );\n\n\t\t\tif ( cachedTask.key === taskKey ) {\n\n\t\t\t\treturn cachedTask.promise;\n\n\t\t\t} else if ( buffer.byteLength === 0 ) {\n\n\t\t\t\t// Technically, it would be possible to wait for the previous task to complete,\n\t\t\t\t// transfer the buffer back, and decode again with the second configuration. That\n\t\t\t\t// is complex, and I don't know of any reason to decode a Draco buffer twice in\n\t\t\t\t// different ways, so this is left unimplemented.\n\t\t\t\tthrow new Error(\n\n\t\t\t\t\t'THREE.DRACOLoader: Unable to re-decode a buffer with different ' +\n\t\t\t\t\t'settings. Buffer has already been transferred.'\n\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tlet worker;\n\t\tconst taskID = this.workerNextTaskID ++;\n\t\tconst taskCost = buffer.byteLength;\n\n\t\t// Obtain a worker and assign a task, and construct a geometry instance\n\t\t// when the task completes.\n\t\tconst geometryPending = this._getWorker( taskID, taskCost )\n\t\t\t.then( ( _worker ) => {\n\n\t\t\t\tworker = _worker;\n\n\t\t\t\treturn new Promise( ( resolve, reject ) => {\n\n\t\t\t\t\tworker._callbacks[ taskID ] = { resolve, reject };\n\n\t\t\t\t\tworker.postMessage( { type: 'decode', id: taskID, taskConfig, buffer }, [ buffer ] );\n\n\t\t\t\t\t// this.debug();\n\n\t\t\t\t} );\n\n\t\t\t} )\n\t\t\t.then( ( message ) => this._createGeometry( message.geometry ) );\n\n\t\t// Remove task from the task list.\n\t\t// Note: replaced '.finally()' with '.catch().then()' block - iOS 11 support (#19416)\n\t\tgeometryPending\n\t\t\t.catch( () => true )\n\t\t\t.then( () => {\n\n\t\t\t\tif ( worker && taskID ) {\n\n\t\t\t\t\tthis._releaseTask( worker, taskID );\n\n\t\t\t\t\t// this.debug();\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t// Cache the task result.\n\t\t_taskCache.set( buffer, {\n\n\t\t\tkey: taskKey,\n\t\t\tpromise: geometryPending\n\n\t\t} );\n\n\t\treturn geometryPending;\n\n\t}\n\n\t_createGeometry( geometryData ) {\n\n\t\tconst geometry = new BufferGeometry();\n\n\t\tif ( geometryData.index ) {\n\n\t\t\tgeometry.setIndex( new BufferAttribute( geometryData.index.array, 1 ) );\n\n\t\t}\n\n\t\tfor ( let i = 0; i < geometryData.attributes.length; i ++ ) {\n\n\t\t\tconst result = geometryData.attributes[ i ];\n\t\t\tconst name = result.name;\n\t\t\tconst array = result.array;\n\t\t\tconst itemSize = result.itemSize;\n\n\t\t\tconst attribute = new BufferAttribute( array, itemSize );\n\n\t\t\tif ( name === 'color' ) {\n\n\t\t\t\tthis._assignVertexColorSpace( attribute, result.vertexColorSpace );\n\n\t\t\t\tattribute.normalized = ( array instanceof Float32Array ) === false;\n\n\t\t\t}\n\n\t\t\tgeometry.setAttribute( name, attribute );\n\n\t\t}\n\n\t\treturn geometry;\n\n\t}\n\n\t_assignVertexColorSpace( attribute, inputColorSpace ) {\n\n\t\t// While .drc files do not specify colorspace, the only 'official' tooling\n\t\t// is PLY and OBJ converters, which use sRGB. We'll assume sRGB when a .drc\n\t\t// file is passed into .load() or .parse(). GLTFLoader uses internal APIs\n\t\t// to decode geometry, and vertex colors are already Linear-sRGB in there.\n\n\t\tif ( inputColorSpace !== SRGBColorSpace ) return;\n\n\t\tconst _color = new Color();\n\n\t\tfor ( let i = 0, il = attribute.count; i < il; i ++ ) {\n\n\t\t\t_color.fromBufferAttribute( attribute, i ).convertSRGBToLinear();\n\t\t\tattribute.setXYZ( i, _color.r, _color.g, _color.b );\n\n\t\t}\n\n\t}\n\n\t_loadLibrary( url, responseType ) {\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.decoderPath );\n\t\tloader.setResponseType( responseType );\n\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\treturn new Promise( ( resolve, reject ) => {\n\n\t\t\tloader.load( url, resolve, undefined, reject );\n\n\t\t} );\n\n\t}\n\n\tpreload() {\n\n\t\tthis._initDecoder();\n\n\t\treturn this;\n\n\t}\n\n\t_initDecoder() {\n\n\t\tif ( this.decoderPending ) return this.decoderPending;\n\n\t\tconst useJS = typeof WebAssembly !== 'object' || this.decoderConfig.type === 'js';\n\t\tconst librariesPending = [];\n\n\t\tif ( useJS ) {\n\n\t\t\tlibrariesPending.push( this._loadLibrary( 'draco_decoder.js', 'text' ) );\n\n\t\t} else {\n\n\t\t\tlibrariesPending.push( this._loadLibrary( 'draco_wasm_wrapper.js', 'text' ) );\n\t\t\tlibrariesPending.push( this._loadLibrary( 'draco_decoder.wasm', 'arraybuffer' ) );\n\n\t\t}\n\n\t\tthis.decoderPending = Promise.all( librariesPending )\n\t\t\t.then( ( libraries ) => {\n\n\t\t\t\tconst jsContent = libraries[ 0 ];\n\n\t\t\t\tif ( ! useJS ) {\n\n\t\t\t\t\tthis.decoderConfig.wasmBinary = libraries[ 1 ];\n\n\t\t\t\t}\n\n\t\t\t\tconst fn = DRACOWorker.toString();\n\n\t\t\t\tconst body = [\n\t\t\t\t\t'/* draco decoder */',\n\t\t\t\t\tjsContent,\n\t\t\t\t\t'',\n\t\t\t\t\t'/* worker */',\n\t\t\t\t\tfn.substring( fn.indexOf( '{' ) + 1, fn.lastIndexOf( '}' ) )\n\t\t\t\t].join( '\\n' );\n\n\t\t\t\tthis.workerSourceURL = URL.createObjectURL( new Blob( [ body ] ) );\n\n\t\t\t} );\n\n\t\treturn this.decoderPending;\n\n\t}\n\n\t_getWorker( taskID, taskCost ) {\n\n\t\treturn this._initDecoder().then( () => {\n\n\t\t\tif ( this.workerPool.length < this.workerLimit ) {\n\n\t\t\t\tconst worker = new Worker( this.workerSourceURL );\n\n\t\t\t\tworker._callbacks = {};\n\t\t\t\tworker._taskCosts = {};\n\t\t\t\tworker._taskLoad = 0;\n\n\t\t\t\tworker.postMessage( { type: 'init', decoderConfig: this.decoderConfig } );\n\n\t\t\t\tworker.onmessage = function ( e ) {\n\n\t\t\t\t\tconst message = e.data;\n\n\t\t\t\t\tswitch ( message.type ) {\n\n\t\t\t\t\t\tcase 'decode':\n\t\t\t\t\t\t\tworker._callbacks[ message.id ].resolve( message );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'error':\n\t\t\t\t\t\t\tworker._callbacks[ message.id ].reject( message );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.error( 'THREE.DRACOLoader: Unexpected message, \"' + message.type + '\"' );\n\n\t\t\t\t\t}\n\n\t\t\t\t};\n\n\t\t\t\tthis.workerPool.push( worker );\n\n\t\t\t} else {\n\n\t\t\t\tthis.workerPool.sort( function ( a, b ) {\n\n\t\t\t\t\treturn a._taskLoad > b._taskLoad ? - 1 : 1;\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\tconst worker = this.workerPool[ this.workerPool.length - 1 ];\n\t\t\tworker._taskCosts[ taskID ] = taskCost;\n\t\t\tworker._taskLoad += taskCost;\n\t\t\treturn worker;\n\n\t\t} );\n\n\t}\n\n\t_releaseTask( worker, taskID ) {\n\n\t\tworker._taskLoad -= worker._taskCosts[ taskID ];\n\t\tdelete worker._callbacks[ taskID ];\n\t\tdelete worker._taskCosts[ taskID ];\n\n\t}\n\n\tdebug() {\n\n\t\tconsole.log( 'Task load: ', this.workerPool.map( ( worker ) => worker._taskLoad ) );\n\n\t}\n\n\tdispose() {\n\n\t\tfor ( let i = 0; i < this.workerPool.length; ++ i ) {\n\n\t\t\tthis.workerPool[ i ].terminate();\n\n\t\t}\n\n\t\tthis.workerPool.length = 0;\n\n\t\tif ( this.workerSourceURL !== '' ) {\n\n\t\t\tURL.revokeObjectURL( this.workerSourceURL );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n}\n\n/* WEB WORKER */\n\nfunction DRACOWorker() {\n\n\tlet decoderConfig;\n\tlet decoderPending;\n\n\tonmessage = function ( e ) {\n\n\t\tconst message = e.data;\n\n\t\tswitch ( message.type ) {\n\n\t\t\tcase 'init':\n\t\t\t\tdecoderConfig = message.decoderConfig;\n\t\t\t\tdecoderPending = new Promise( function ( resolve/*, reject*/ ) {\n\n\t\t\t\t\tdecoderConfig.onModuleLoaded = function ( draco ) {\n\n\t\t\t\t\t\t// Module is Promise-like. Wrap before resolving to avoid loop.\n\t\t\t\t\t\tresolve( { draco: draco } );\n\n\t\t\t\t\t};\n\n\t\t\t\t\tDracoDecoderModule( decoderConfig ); // eslint-disable-line no-undef\n\n\t\t\t\t} );\n\t\t\t\tbreak;\n\n\t\t\tcase 'decode':\n\t\t\t\tconst buffer = message.buffer;\n\t\t\t\tconst taskConfig = message.taskConfig;\n\t\t\t\tdecoderPending.then( ( module ) => {\n\n\t\t\t\t\tconst draco = module.draco;\n\t\t\t\t\tconst decoder = new draco.Decoder();\n\n\t\t\t\t\ttry {\n\n\t\t\t\t\t\tconst geometry = decodeGeometry( draco, decoder, new Int8Array( buffer ), taskConfig );\n\n\t\t\t\t\t\tconst buffers = geometry.attributes.map( ( attr ) => attr.array.buffer );\n\n\t\t\t\t\t\tif ( geometry.index ) buffers.push( geometry.index.array.buffer );\n\n\t\t\t\t\t\tself.postMessage( { type: 'decode', id: message.id, geometry }, buffers );\n\n\t\t\t\t\t} catch ( error ) {\n\n\t\t\t\t\t\tconsole.error( error );\n\n\t\t\t\t\t\tself.postMessage( { type: 'error', id: message.id, error: error.message } );\n\n\t\t\t\t\t} finally {\n\n\t\t\t\t\t\tdraco.destroy( decoder );\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t};\n\n\tfunction decodeGeometry( draco, decoder, array, taskConfig ) {\n\n\t\tconst attributeIDs = taskConfig.attributeIDs;\n\t\tconst attributeTypes = taskConfig.attributeTypes;\n\n\t\tlet dracoGeometry;\n\t\tlet decodingStatus;\n\n\t\tconst geometryType = decoder.GetEncodedGeometryType( array );\n\n\t\tif ( geometryType === draco.TRIANGULAR_MESH ) {\n\n\t\t\tdracoGeometry = new draco.Mesh();\n\t\t\tdecodingStatus = decoder.DecodeArrayToMesh( array, array.byteLength, dracoGeometry );\n\n\t\t} else if ( geometryType === draco.POINT_CLOUD ) {\n\n\t\t\tdracoGeometry = new draco.PointCloud();\n\t\t\tdecodingStatus = decoder.DecodeArrayToPointCloud( array, array.byteLength, dracoGeometry );\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'THREE.DRACOLoader: Unexpected geometry type.' );\n\n\t\t}\n\n\t\tif ( ! decodingStatus.ok() || dracoGeometry.ptr === 0 ) {\n\n\t\t\tthrow new Error( 'THREE.DRACOLoader: Decoding failed: ' + decodingStatus.error_msg() );\n\n\t\t}\n\n\t\tconst geometry = { index: null, attributes: [] };\n\n\t\t// Gather all vertex attributes.\n\t\tfor ( const attributeName in attributeIDs ) {\n\n\t\t\tconst attributeType = self[ attributeTypes[ attributeName ] ];\n\n\t\t\tlet attribute;\n\t\t\tlet attributeID;\n\n\t\t\t// A Draco file may be created with default vertex attributes, whose attribute IDs\n\t\t\t// are mapped 1:1 from their semantic name (POSITION, NORMAL, ...). Alternatively,\n\t\t\t// a Draco file may contain a custom set of attributes, identified by known unique\n\t\t\t// IDs. glTF files always do the latter, and `.drc` files typically do the former.\n\t\t\tif ( taskConfig.useUniqueIDs ) {\n\n\t\t\t\tattributeID = attributeIDs[ attributeName ];\n\t\t\t\tattribute = decoder.GetAttributeByUniqueId( dracoGeometry, attributeID );\n\n\t\t\t} else {\n\n\t\t\t\tattributeID = decoder.GetAttributeId( dracoGeometry, draco[ attributeIDs[ attributeName ] ] );\n\n\t\t\t\tif ( attributeID === - 1 ) continue;\n\n\t\t\t\tattribute = decoder.GetAttribute( dracoGeometry, attributeID );\n\n\t\t\t}\n\n\t\t\tconst attributeResult = decodeAttribute( draco, decoder, dracoGeometry, attributeName, attributeType, attribute );\n\n\t\t\tif ( attributeName === 'color' ) {\n\n\t\t\t\tattributeResult.vertexColorSpace = taskConfig.vertexColorSpace;\n\n\t\t\t}\n\n\t\t\tgeometry.attributes.push( attributeResult );\n\n\t\t}\n\n\t\t// Add index.\n\t\tif ( geometryType === draco.TRIANGULAR_MESH ) {\n\n\t\t\tgeometry.index = decodeIndex( draco, decoder, dracoGeometry );\n\n\t\t}\n\n\t\tdraco.destroy( dracoGeometry );\n\n\t\treturn geometry;\n\n\t}\n\n\tfunction decodeIndex( draco, decoder, dracoGeometry ) {\n\n\t\tconst numFaces = dracoGeometry.num_faces();\n\t\tconst numIndices = numFaces * 3;\n\t\tconst byteLength = numIndices * 4;\n\n\t\tconst ptr = draco._malloc( byteLength );\n\t\tdecoder.GetTrianglesUInt32Array( dracoGeometry, byteLength, ptr );\n\t\tconst index = new Uint32Array( draco.HEAPF32.buffer, ptr, numIndices ).slice();\n\t\tdraco._free( ptr );\n\n\t\treturn { array: index, itemSize: 1 };\n\n\t}\n\n\tfunction decodeAttribute( draco, decoder, dracoGeometry, attributeName, attributeType, attribute ) {\n\n\t\tconst numComponents = attribute.num_components();\n\t\tconst numPoints = dracoGeometry.num_points();\n\t\tconst numValues = numPoints * numComponents;\n\t\tconst byteLength = numValues * attributeType.BYTES_PER_ELEMENT;\n\t\tconst dataType = getDracoDataType( draco, attributeType );\n\n\t\tconst ptr = draco._malloc( byteLength );\n\t\tdecoder.GetAttributeDataArrayForAllPoints( dracoGeometry, attribute, dataType, byteLength, ptr );\n\t\tconst array = new attributeType( draco.HEAPF32.buffer, ptr, numValues ).slice();\n\t\tdraco._free( ptr );\n\n\t\treturn {\n\t\t\tname: attributeName,\n\t\t\tarray: array,\n\t\t\titemSize: numComponents\n\t\t};\n\n\t}\n\n\tfunction getDracoDataType( draco, attributeType ) {\n\n\t\tswitch ( attributeType ) {\n\n\t\t\tcase Float32Array: return draco.DT_FLOAT32;\n\t\t\tcase Int8Array: return draco.DT_INT8;\n\t\t\tcase Int16Array: return draco.DT_INT16;\n\t\t\tcase Int32Array: return draco.DT_INT32;\n\t\t\tcase Uint8Array: return draco.DT_UINT8;\n\t\t\tcase Uint16Array: return draco.DT_UINT16;\n\t\t\tcase Uint32Array: return draco.DT_UINT32;\n\n\t\t}\n\n\t}\n\n}\n\nexport { DRACOLoader };\n","import {\n\tPlaneGeometry,\n\tShaderMaterial,\n\tUniform,\n\tMesh,\n\tPerspectiveCamera,\n\tScene,\n\tWebGLRenderer,\n\tTexture,\n\tSRGBColorSpace\n} from 'three';\n\nlet _renderer;\nlet fullscreenQuadGeometry;\nlet fullscreenQuadMaterial;\nlet fullscreenQuad;\n\nexport function decompress( texture, maxTextureSize = Infinity, renderer = null ) {\n\n\tif ( ! fullscreenQuadGeometry ) fullscreenQuadGeometry = new PlaneGeometry( 2, 2, 1, 1 );\n\tif ( ! fullscreenQuadMaterial ) fullscreenQuadMaterial = new ShaderMaterial( {\n\t\tuniforms: { blitTexture: new Uniform( texture ) },\n\t\tvertexShader: `\n            varying vec2 vUv;\n            void main(){\n                vUv = uv;\n                gl_Position = vec4(position.xy * 1.0,0.,.999999);\n            }`,\n\t\tfragmentShader: `\n            uniform sampler2D blitTexture; \n            varying vec2 vUv;\n\n            void main(){ \n                gl_FragColor = vec4(vUv.xy, 0, 1);\n                \n                #ifdef IS_SRGB\n                gl_FragColor = LinearTosRGB( texture2D( blitTexture, vUv) );\n                #else\n                gl_FragColor = texture2D( blitTexture, vUv);\n                #endif\n            }`\n\t} );\n\n\tfullscreenQuadMaterial.uniforms.blitTexture.value = texture;\n\tfullscreenQuadMaterial.defines.IS_SRGB = texture.colorSpace == SRGBColorSpace;\n\tfullscreenQuadMaterial.needsUpdate = true;\n\n\tif ( ! fullscreenQuad ) {\n\n\t\tfullscreenQuad = new Mesh( fullscreenQuadGeometry, fullscreenQuadMaterial );\n\t\tfullscreenQuad.frustrumCulled = false;\n\n\t}\n\n\tconst _camera = new PerspectiveCamera();\n\tconst _scene = new Scene();\n\t_scene.add( fullscreenQuad );\n\n\tif ( ! renderer ) {\n\n\t\trenderer = _renderer = new WebGLRenderer( { antialias: false } );\n\n\t}\n\n\trenderer.setSize( Math.min( texture.image.width, maxTextureSize ), Math.min( texture.image.height, maxTextureSize ) );\n\trenderer.clear();\n\trenderer.render( _scene, _camera );\n\n\tconst readableTexture = new Texture( renderer.domElement );\n\n\treadableTexture.minFilter = texture.minFilter;\n\treadableTexture.magFilter = texture.magFilter;\n\treadableTexture.wrapS = texture.wrapS;\n\treadableTexture.wrapT = texture.wrapT;\n\treadableTexture.name = texture.name;\n\n\tif ( _renderer ) {\n\n\t\t_renderer.dispose();\n\t\t_renderer = null;\n\n\t}\n\n\treturn readableTexture;\n\n}\n","import {\n\tBufferAttribute,\n\tClampToEdgeWrapping,\n\tColor,\n\tDoubleSide,\n\tInterpolateDiscrete,\n\tInterpolateLinear,\n\tNoColorSpace,\n\tLinearFilter,\n\tLinearMipmapLinearFilter,\n\tLinearMipmapNearestFilter,\n\tMathUtils,\n\tMatrix4,\n\tMirroredRepeatWrapping,\n\tNearestFilter,\n\tNearestMipmapLinearFilter,\n\tNearestMipmapNearestFilter,\n\tPropertyBinding,\n\tRGBAFormat,\n\tRepeatWrapping,\n\tScene,\n\tSource,\n\tSRGBColorSpace,\n\tCompressedTexture,\n\tVector3,\n\tQuaternion,\n} from 'three';\nimport { decompress } from './../utils/TextureUtils.js';\n\n\n/**\n * The KHR_mesh_quantization extension allows these extra attribute component types\n *\n * @see https://github.com/KhronosGroup/glTF/blob/main/extensions/2.0/Khronos/KHR_mesh_quantization/README.md#extending-mesh-attributes\n */\nconst KHR_mesh_quantization_ExtraAttrTypes = {\n\tPOSITION: [\n\t\t'byte',\n\t\t'byte normalized',\n\t\t'unsigned byte',\n\t\t'unsigned byte normalized',\n\t\t'short',\n\t\t'short normalized',\n\t\t'unsigned short',\n\t\t'unsigned short normalized',\n\t],\n\tNORMAL: [\n\t\t'byte normalized',\n\t\t'short normalized',\n\t],\n\tTANGENT: [\n\t\t'byte normalized',\n\t\t'short normalized',\n\t],\n\tTEXCOORD: [\n\t\t'byte',\n\t\t'byte normalized',\n\t\t'unsigned byte',\n\t\t'short',\n\t\t'short normalized',\n\t\t'unsigned short',\n\t],\n};\n\n\nclass GLTFExporter {\n\n\tconstructor() {\n\n\t\tthis.pluginCallbacks = [];\n\n\t\tthis.register( function ( writer ) {\n\n\t\t\treturn new GLTFLightExtension( writer );\n\n\t\t} );\n\n\t\tthis.register( function ( writer ) {\n\n\t\t\treturn new GLTFMaterialsUnlitExtension( writer );\n\n\t\t} );\n\n\t\tthis.register( function ( writer ) {\n\n\t\t\treturn new GLTFMaterialsTransmissionExtension( writer );\n\n\t\t} );\n\n\t\tthis.register( function ( writer ) {\n\n\t\t\treturn new GLTFMaterialsVolumeExtension( writer );\n\n\t\t} );\n\n\t\tthis.register( function ( writer ) {\n\n\t\t\treturn new GLTFMaterialsIorExtension( writer );\n\n\t\t} );\n\n\t\tthis.register( function ( writer ) {\n\n\t\t\treturn new GLTFMaterialsSpecularExtension( writer );\n\n\t\t} );\n\n\t\tthis.register( function ( writer ) {\n\n\t\t\treturn new GLTFMaterialsClearcoatExtension( writer );\n\n\t\t} );\n\n\t\tthis.register( function ( writer ) {\n\n\t\t\treturn new GLTFMaterialsIridescenceExtension( writer );\n\n\t\t} );\n\n\t\tthis.register( function ( writer ) {\n\n\t\t\treturn new GLTFMaterialsSheenExtension( writer );\n\n\t\t} );\n\n\t\tthis.register( function ( writer ) {\n\n\t\t\treturn new GLTFMaterialsAnisotropyExtension( writer );\n\n\t\t} );\n\n\t\tthis.register( function ( writer ) {\n\n\t\t\treturn new GLTFMaterialsEmissiveStrengthExtension( writer );\n\n\t\t} );\n\n\t\tthis.register( function ( writer ) {\n\n\t\t\treturn new GLTFMeshGpuInstancing( writer );\n\n\t\t} );\n\n\t}\n\n\tregister( callback ) {\n\n\t\tif ( this.pluginCallbacks.indexOf( callback ) === - 1 ) {\n\n\t\t\tthis.pluginCallbacks.push( callback );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tunregister( callback ) {\n\n\t\tif ( this.pluginCallbacks.indexOf( callback ) !== - 1 ) {\n\n\t\t\tthis.pluginCallbacks.splice( this.pluginCallbacks.indexOf( callback ), 1 );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Parse scenes and generate GLTF output\n\t * @param  {Scene or [THREE.Scenes]} input   Scene or Array of THREE.Scenes\n\t * @param  {Function} onDone  Callback on completed\n\t * @param  {Function} onError  Callback on errors\n\t * @param  {Object} options options\n\t */\n\tparse( input, onDone, onError, options ) {\n\n\t\tconst writer = new GLTFWriter();\n\t\tconst plugins = [];\n\n\t\tfor ( let i = 0, il = this.pluginCallbacks.length; i < il; i ++ ) {\n\n\t\t\tplugins.push( this.pluginCallbacks[ i ]( writer ) );\n\n\t\t}\n\n\t\twriter.setPlugins( plugins );\n\t\twriter.write( input, onDone, options ).catch( onError );\n\n\t}\n\n\tparseAsync( input, options ) {\n\n\t\tconst scope = this;\n\n\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\tscope.parse( input, resolve, reject, options );\n\n\t\t} );\n\n\t}\n\n}\n\n//------------------------------------------------------------------------------\n// Constants\n//------------------------------------------------------------------------------\n\nconst WEBGL_CONSTANTS = {\n\tPOINTS: 0x0000,\n\tLINES: 0x0001,\n\tLINE_LOOP: 0x0002,\n\tLINE_STRIP: 0x0003,\n\tTRIANGLES: 0x0004,\n\tTRIANGLE_STRIP: 0x0005,\n\tTRIANGLE_FAN: 0x0006,\n\n\tBYTE: 0x1400,\n\tUNSIGNED_BYTE: 0x1401,\n\tSHORT: 0x1402,\n\tUNSIGNED_SHORT: 0x1403,\n\tINT: 0x1404,\n\tUNSIGNED_INT: 0x1405,\n\tFLOAT: 0x1406,\n\n\tARRAY_BUFFER: 0x8892,\n\tELEMENT_ARRAY_BUFFER: 0x8893,\n\n\tNEAREST: 0x2600,\n\tLINEAR: 0x2601,\n\tNEAREST_MIPMAP_NEAREST: 0x2700,\n\tLINEAR_MIPMAP_NEAREST: 0x2701,\n\tNEAREST_MIPMAP_LINEAR: 0x2702,\n\tLINEAR_MIPMAP_LINEAR: 0x2703,\n\n\tCLAMP_TO_EDGE: 33071,\n\tMIRRORED_REPEAT: 33648,\n\tREPEAT: 10497\n};\n\nconst KHR_MESH_QUANTIZATION = 'KHR_mesh_quantization';\n\nconst THREE_TO_WEBGL = {};\n\nTHREE_TO_WEBGL[ NearestFilter ] = WEBGL_CONSTANTS.NEAREST;\nTHREE_TO_WEBGL[ NearestMipmapNearestFilter ] = WEBGL_CONSTANTS.NEAREST_MIPMAP_NEAREST;\nTHREE_TO_WEBGL[ NearestMipmapLinearFilter ] = WEBGL_CONSTANTS.NEAREST_MIPMAP_LINEAR;\nTHREE_TO_WEBGL[ LinearFilter ] = WEBGL_CONSTANTS.LINEAR;\nTHREE_TO_WEBGL[ LinearMipmapNearestFilter ] = WEBGL_CONSTANTS.LINEAR_MIPMAP_NEAREST;\nTHREE_TO_WEBGL[ LinearMipmapLinearFilter ] = WEBGL_CONSTANTS.LINEAR_MIPMAP_LINEAR;\n\nTHREE_TO_WEBGL[ ClampToEdgeWrapping ] = WEBGL_CONSTANTS.CLAMP_TO_EDGE;\nTHREE_TO_WEBGL[ RepeatWrapping ] = WEBGL_CONSTANTS.REPEAT;\nTHREE_TO_WEBGL[ MirroredRepeatWrapping ] = WEBGL_CONSTANTS.MIRRORED_REPEAT;\n\nconst PATH_PROPERTIES = {\n\tscale: 'scale',\n\tposition: 'translation',\n\tquaternion: 'rotation',\n\tmorphTargetInfluences: 'weights'\n};\n\nconst DEFAULT_SPECULAR_COLOR = new Color();\n\n// GLB constants\n// https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#glb-file-format-specification\n\nconst GLB_HEADER_BYTES = 12;\nconst GLB_HEADER_MAGIC = 0x46546C67;\nconst GLB_VERSION = 2;\n\nconst GLB_CHUNK_PREFIX_BYTES = 8;\nconst GLB_CHUNK_TYPE_JSON = 0x4E4F534A;\nconst GLB_CHUNK_TYPE_BIN = 0x004E4942;\n\n//------------------------------------------------------------------------------\n// Utility functions\n//------------------------------------------------------------------------------\n\n/**\n * Compare two arrays\n * @param  {Array} array1 Array 1 to compare\n * @param  {Array} array2 Array 2 to compare\n * @return {Boolean}        Returns true if both arrays are equal\n */\nfunction equalArray( array1, array2 ) {\n\n\treturn ( array1.length === array2.length ) && array1.every( function ( element, index ) {\n\n\t\treturn element === array2[ index ];\n\n\t} );\n\n}\n\n/**\n * Converts a string to an ArrayBuffer.\n * @param  {string} text\n * @return {ArrayBuffer}\n */\nfunction stringToArrayBuffer( text ) {\n\n\treturn new TextEncoder().encode( text ).buffer;\n\n}\n\n/**\n * Is identity matrix\n *\n * @param {Matrix4} matrix\n * @returns {Boolean} Returns true, if parameter is identity matrix\n */\nfunction isIdentityMatrix( matrix ) {\n\n\treturn equalArray( matrix.elements, [ 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1 ] );\n\n}\n\n/**\n * Get the min and max vectors from the given attribute\n * @param  {BufferAttribute} attribute Attribute to find the min/max in range from start to start + count\n * @param  {Integer} start\n * @param  {Integer} count\n * @return {Object} Object containing the `min` and `max` values (As an array of attribute.itemSize components)\n */\nfunction getMinMax( attribute, start, count ) {\n\n\tconst output = {\n\n\t\tmin: new Array( attribute.itemSize ).fill( Number.POSITIVE_INFINITY ),\n\t\tmax: new Array( attribute.itemSize ).fill( Number.NEGATIVE_INFINITY )\n\n\t};\n\n\tfor ( let i = start; i < start + count; i ++ ) {\n\n\t\tfor ( let a = 0; a < attribute.itemSize; a ++ ) {\n\n\t\t\tlet value;\n\n\t\t\tif ( attribute.itemSize > 4 ) {\n\n\t\t\t\t // no support for interleaved data for itemSize > 4\n\n\t\t\t\tvalue = attribute.array[ i * attribute.itemSize + a ];\n\n\t\t\t} else {\n\n\t\t\t\tif ( a === 0 ) value = attribute.getX( i );\n\t\t\t\telse if ( a === 1 ) value = attribute.getY( i );\n\t\t\t\telse if ( a === 2 ) value = attribute.getZ( i );\n\t\t\t\telse if ( a === 3 ) value = attribute.getW( i );\n\n\t\t\t\tif ( attribute.normalized === true ) {\n\n\t\t\t\t\tvalue = MathUtils.normalize( value, attribute.array );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\toutput.min[ a ] = Math.min( output.min[ a ], value );\n\t\t\toutput.max[ a ] = Math.max( output.max[ a ], value );\n\n\t\t}\n\n\t}\n\n\treturn output;\n\n}\n\n/**\n * Get the required size + padding for a buffer, rounded to the next 4-byte boundary.\n * https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#data-alignment\n *\n * @param {Integer} bufferSize The size the original buffer.\n * @returns {Integer} new buffer size with required padding.\n *\n */\nfunction getPaddedBufferSize( bufferSize ) {\n\n\treturn Math.ceil( bufferSize / 4 ) * 4;\n\n}\n\n/**\n * Returns a buffer aligned to 4-byte boundary.\n *\n * @param {ArrayBuffer} arrayBuffer Buffer to pad\n * @param {Integer} paddingByte (Optional)\n * @returns {ArrayBuffer} The same buffer if it's already aligned to 4-byte boundary or a new buffer\n */\nfunction getPaddedArrayBuffer( arrayBuffer, paddingByte = 0 ) {\n\n\tconst paddedLength = getPaddedBufferSize( arrayBuffer.byteLength );\n\n\tif ( paddedLength !== arrayBuffer.byteLength ) {\n\n\t\tconst array = new Uint8Array( paddedLength );\n\t\tarray.set( new Uint8Array( arrayBuffer ) );\n\n\t\tif ( paddingByte !== 0 ) {\n\n\t\t\tfor ( let i = arrayBuffer.byteLength; i < paddedLength; i ++ ) {\n\n\t\t\t\tarray[ i ] = paddingByte;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn array.buffer;\n\n\t}\n\n\treturn arrayBuffer;\n\n}\n\nfunction getCanvas() {\n\n\tif ( typeof document === 'undefined' && typeof OffscreenCanvas !== 'undefined' ) {\n\n\t\treturn new OffscreenCanvas( 1, 1 );\n\n\t}\n\n\treturn document.createElement( 'canvas' );\n\n}\n\nfunction getToBlobPromise( canvas, mimeType ) {\n\n\tif ( canvas.toBlob !== undefined ) {\n\n\t\treturn new Promise( ( resolve ) => canvas.toBlob( resolve, mimeType ) );\n\n\t}\n\n\tlet quality;\n\n\t// Blink's implementation of convertToBlob seems to default to a quality level of 100%\n\t// Use the Blink default quality levels of toBlob instead so that file sizes are comparable.\n\tif ( mimeType === 'image/jpeg' ) {\n\n\t\tquality = 0.92;\n\n\t} else if ( mimeType === 'image/webp' ) {\n\n\t\tquality = 0.8;\n\n\t}\n\n\treturn canvas.convertToBlob( {\n\n\t\ttype: mimeType,\n\t\tquality: quality\n\n\t} );\n\n}\n\n/**\n * Writer\n */\nclass GLTFWriter {\n\n\tconstructor() {\n\n\t\tthis.plugins = [];\n\n\t\tthis.options = {};\n\t\tthis.pending = [];\n\t\tthis.buffers = [];\n\n\t\tthis.byteOffset = 0;\n\t\tthis.buffers = [];\n\t\tthis.nodeMap = new Map();\n\t\tthis.skins = [];\n\n\t\tthis.extensionsUsed = {};\n\t\tthis.extensionsRequired = {};\n\n\t\tthis.uids = new Map();\n\t\tthis.uid = 0;\n\n\t\tthis.json = {\n\t\t\tasset: {\n\t\t\t\tversion: '2.0',\n\t\t\t\tgenerator: 'THREE.GLTFExporter'\n\t\t\t}\n\t\t};\n\n\t\tthis.cache = {\n\t\t\tmeshes: new Map(),\n\t\t\tattributes: new Map(),\n\t\t\tattributesNormalized: new Map(),\n\t\t\tmaterials: new Map(),\n\t\t\ttextures: new Map(),\n\t\t\timages: new Map()\n\t\t};\n\n\t}\n\n\tsetPlugins( plugins ) {\n\n\t\tthis.plugins = plugins;\n\n\t}\n\n\t/**\n\t * Parse scenes and generate GLTF output\n\t * @param  {Scene or [THREE.Scenes]} input   Scene or Array of THREE.Scenes\n\t * @param  {Function} onDone  Callback on completed\n\t * @param  {Object} options options\n\t */\n\tasync write( input, onDone, options = {} ) {\n\n\t\tthis.options = Object.assign( {\n\t\t\t// default options\n\t\t\tbinary: false,\n\t\t\ttrs: false,\n\t\t\tonlyVisible: true,\n\t\t\tmaxTextureSize: Infinity,\n\t\t\tanimations: [],\n\t\t\tincludeCustomExtensions: false\n\t\t}, options );\n\n\t\tif ( this.options.animations.length > 0 ) {\n\n\t\t\t// Only TRS properties, and not matrices, may be targeted by animation.\n\t\t\tthis.options.trs = true;\n\n\t\t}\n\n\t\tthis.processInput( input );\n\n\t\tawait Promise.all( this.pending );\n\n\t\tconst writer = this;\n\t\tconst buffers = writer.buffers;\n\t\tconst json = writer.json;\n\t\toptions = writer.options;\n\n\t\tconst extensionsUsed = writer.extensionsUsed;\n\t\tconst extensionsRequired = writer.extensionsRequired;\n\n\t\t// Merge buffers.\n\t\tconst blob = new Blob( buffers, { type: 'application/octet-stream' } );\n\n\t\t// Declare extensions.\n\t\tconst extensionsUsedList = Object.keys( extensionsUsed );\n\t\tconst extensionsRequiredList = Object.keys( extensionsRequired );\n\n\t\tif ( extensionsUsedList.length > 0 ) json.extensionsUsed = extensionsUsedList;\n\t\tif ( extensionsRequiredList.length > 0 ) json.extensionsRequired = extensionsRequiredList;\n\n\t\t// Update bytelength of the single buffer.\n\t\tif ( json.buffers && json.buffers.length > 0 ) json.buffers[ 0 ].byteLength = blob.size;\n\n\t\tif ( options.binary === true ) {\n\n\t\t\t// https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#glb-file-format-specification\n\n\t\t\tconst reader = new FileReader();\n\t\t\treader.readAsArrayBuffer( blob );\n\t\t\treader.onloadend = function () {\n\n\t\t\t\t// Binary chunk.\n\t\t\t\tconst binaryChunk = getPaddedArrayBuffer( reader.result );\n\t\t\t\tconst binaryChunkPrefix = new DataView( new ArrayBuffer( GLB_CHUNK_PREFIX_BYTES ) );\n\t\t\t\tbinaryChunkPrefix.setUint32( 0, binaryChunk.byteLength, true );\n\t\t\t\tbinaryChunkPrefix.setUint32( 4, GLB_CHUNK_TYPE_BIN, true );\n\n\t\t\t\t// JSON chunk.\n\t\t\t\tconst jsonChunk = getPaddedArrayBuffer( stringToArrayBuffer( JSON.stringify( json ) ), 0x20 );\n\t\t\t\tconst jsonChunkPrefix = new DataView( new ArrayBuffer( GLB_CHUNK_PREFIX_BYTES ) );\n\t\t\t\tjsonChunkPrefix.setUint32( 0, jsonChunk.byteLength, true );\n\t\t\t\tjsonChunkPrefix.setUint32( 4, GLB_CHUNK_TYPE_JSON, true );\n\n\t\t\t\t// GLB header.\n\t\t\t\tconst header = new ArrayBuffer( GLB_HEADER_BYTES );\n\t\t\t\tconst headerView = new DataView( header );\n\t\t\t\theaderView.setUint32( 0, GLB_HEADER_MAGIC, true );\n\t\t\t\theaderView.setUint32( 4, GLB_VERSION, true );\n\t\t\t\tconst totalByteLength = GLB_HEADER_BYTES\n\t\t\t\t\t+ jsonChunkPrefix.byteLength + jsonChunk.byteLength\n\t\t\t\t\t+ binaryChunkPrefix.byteLength + binaryChunk.byteLength;\n\t\t\t\theaderView.setUint32( 8, totalByteLength, true );\n\n\t\t\t\tconst glbBlob = new Blob( [\n\t\t\t\t\theader,\n\t\t\t\t\tjsonChunkPrefix,\n\t\t\t\t\tjsonChunk,\n\t\t\t\t\tbinaryChunkPrefix,\n\t\t\t\t\tbinaryChunk\n\t\t\t\t], { type: 'application/octet-stream' } );\n\n\t\t\t\tconst glbReader = new FileReader();\n\t\t\t\tglbReader.readAsArrayBuffer( glbBlob );\n\t\t\t\tglbReader.onloadend = function () {\n\n\t\t\t\t\tonDone( glbReader.result );\n\n\t\t\t\t};\n\n\t\t\t};\n\n\t\t} else {\n\n\t\t\tif ( json.buffers && json.buffers.length > 0 ) {\n\n\t\t\t\tconst reader = new FileReader();\n\t\t\t\treader.readAsDataURL( blob );\n\t\t\t\treader.onloadend = function () {\n\n\t\t\t\t\tconst base64data = reader.result;\n\t\t\t\t\tjson.buffers[ 0 ].uri = base64data;\n\t\t\t\t\tonDone( json );\n\n\t\t\t\t};\n\n\t\t\t} else {\n\n\t\t\t\tonDone( json );\n\n\t\t\t}\n\n\t\t}\n\n\n\t}\n\n\t/**\n\t * Serializes a userData.\n\t *\n\t * @param {THREE.Object3D|THREE.Material} object\n\t * @param {Object} objectDef\n\t */\n\tserializeUserData( object, objectDef ) {\n\n\t\tif ( Object.keys( object.userData ).length === 0 ) return;\n\n\t\tconst options = this.options;\n\t\tconst extensionsUsed = this.extensionsUsed;\n\n\t\ttry {\n\n\t\t\tconst json = JSON.parse( JSON.stringify( object.userData ) );\n\n\t\t\tif ( options.includeCustomExtensions && json.gltfExtensions ) {\n\n\t\t\t\tif ( objectDef.extensions === undefined ) objectDef.extensions = {};\n\n\t\t\t\tfor ( const extensionName in json.gltfExtensions ) {\n\n\t\t\t\t\tobjectDef.extensions[ extensionName ] = json.gltfExtensions[ extensionName ];\n\t\t\t\t\textensionsUsed[ extensionName ] = true;\n\n\t\t\t\t}\n\n\t\t\t\tdelete json.gltfExtensions;\n\n\t\t\t}\n\n\t\t\tif ( Object.keys( json ).length > 0 ) objectDef.extras = json;\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFExporter: userData of \\'' + object.name + '\\' ' +\n\t\t\t\t'won\\'t be serialized because of JSON.stringify error - ' + error.message );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Returns ids for buffer attributes.\n\t * @param  {Object} object\n\t * @return {Integer}\n\t */\n\tgetUID( attribute, isRelativeCopy = false ) {\n\n\t\tif ( this.uids.has( attribute ) === false ) {\n\n\t\t\tconst uids = new Map();\n\n\t\t\tuids.set( true, this.uid ++ );\n\t\t\tuids.set( false, this.uid ++ );\n\n\t\t\tthis.uids.set( attribute, uids );\n\n\t\t}\n\n\t\tconst uids = this.uids.get( attribute );\n\n\t\treturn uids.get( isRelativeCopy );\n\n\t}\n\n\t/**\n\t * Checks if normal attribute values are normalized.\n\t *\n\t * @param {BufferAttribute} normal\n\t * @returns {Boolean}\n\t */\n\tisNormalizedNormalAttribute( normal ) {\n\n\t\tconst cache = this.cache;\n\n\t\tif ( cache.attributesNormalized.has( normal ) ) return false;\n\n\t\tconst v = new Vector3();\n\n\t\tfor ( let i = 0, il = normal.count; i < il; i ++ ) {\n\n\t\t\t// 0.0005 is from glTF-validator\n\t\t\tif ( Math.abs( v.fromBufferAttribute( normal, i ).length() - 1.0 ) > 0.0005 ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\t/**\n\t * Creates normalized normal buffer attribute.\n\t *\n\t * @param {BufferAttribute} normal\n\t * @returns {BufferAttribute}\n\t *\n\t */\n\tcreateNormalizedNormalAttribute( normal ) {\n\n\t\tconst cache = this.cache;\n\n\t\tif ( cache.attributesNormalized.has( normal ) )\treturn cache.attributesNormalized.get( normal );\n\n\t\tconst attribute = normal.clone();\n\t\tconst v = new Vector3();\n\n\t\tfor ( let i = 0, il = attribute.count; i < il; i ++ ) {\n\n\t\t\tv.fromBufferAttribute( attribute, i );\n\n\t\t\tif ( v.x === 0 && v.y === 0 && v.z === 0 ) {\n\n\t\t\t\t// if values can't be normalized set (1, 0, 0)\n\t\t\t\tv.setX( 1.0 );\n\n\t\t\t} else {\n\n\t\t\t\tv.normalize();\n\n\t\t\t}\n\n\t\t\tattribute.setXYZ( i, v.x, v.y, v.z );\n\n\t\t}\n\n\t\tcache.attributesNormalized.set( normal, attribute );\n\n\t\treturn attribute;\n\n\t}\n\n\t/**\n\t * Applies a texture transform, if present, to the map definition. Requires\n\t * the KHR_texture_transform extension.\n\t *\n\t * @param {Object} mapDef\n\t * @param {THREE.Texture} texture\n\t */\n\tapplyTextureTransform( mapDef, texture ) {\n\n\t\tlet didTransform = false;\n\t\tconst transformDef = {};\n\n\t\tif ( texture.offset.x !== 0 || texture.offset.y !== 0 ) {\n\n\t\t\ttransformDef.offset = texture.offset.toArray();\n\t\t\tdidTransform = true;\n\n\t\t}\n\n\t\tif ( texture.rotation !== 0 ) {\n\n\t\t\ttransformDef.rotation = texture.rotation;\n\t\t\tdidTransform = true;\n\n\t\t}\n\n\t\tif ( texture.repeat.x !== 1 || texture.repeat.y !== 1 ) {\n\n\t\t\ttransformDef.scale = texture.repeat.toArray();\n\t\t\tdidTransform = true;\n\n\t\t}\n\n\t\tif ( didTransform ) {\n\n\t\t\tmapDef.extensions = mapDef.extensions || {};\n\t\t\tmapDef.extensions[ 'KHR_texture_transform' ] = transformDef;\n\t\t\tthis.extensionsUsed[ 'KHR_texture_transform' ] = true;\n\n\t\t}\n\n\t}\n\n\tbuildMetalRoughTexture( metalnessMap, roughnessMap ) {\n\n\t\tif ( metalnessMap === roughnessMap ) return metalnessMap;\n\n\t\tfunction getEncodingConversion( map ) {\n\n\t\t\tif ( map.colorSpace === SRGBColorSpace ) {\n\n\t\t\t\treturn function SRGBToLinear( c ) {\n\n\t\t\t\t\treturn ( c < 0.04045 ) ? c * 0.0773993808 : Math.pow( c * 0.9478672986 + 0.0521327014, 2.4 );\n\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\treturn function LinearToLinear( c ) {\n\n\t\t\t\treturn c;\n\n\t\t\t};\n\n\t\t}\n\n\t\tconsole.warn( 'THREE.GLTFExporter: Merged metalnessMap and roughnessMap textures.' );\n\n\t\tif ( metalnessMap instanceof CompressedTexture ) {\n\n\t\t\tmetalnessMap = decompress( metalnessMap );\n\n\t\t}\n\n\t\tif ( roughnessMap instanceof CompressedTexture ) {\n\n\t\t\troughnessMap = decompress( roughnessMap );\n\n\t\t}\n\n\t\tconst metalness = metalnessMap ? metalnessMap.image : null;\n\t\tconst roughness = roughnessMap ? roughnessMap.image : null;\n\n\t\tconst width = Math.max( metalness ? metalness.width : 0, roughness ? roughness.width : 0 );\n\t\tconst height = Math.max( metalness ? metalness.height : 0, roughness ? roughness.height : 0 );\n\n\t\tconst canvas = getCanvas();\n\t\tcanvas.width = width;\n\t\tcanvas.height = height;\n\n\t\tconst context = canvas.getContext( '2d' );\n\t\tcontext.fillStyle = '#00ffff';\n\t\tcontext.fillRect( 0, 0, width, height );\n\n\t\tconst composite = context.getImageData( 0, 0, width, height );\n\n\t\tif ( metalness ) {\n\n\t\t\tcontext.drawImage( metalness, 0, 0, width, height );\n\n\t\t\tconst convert = getEncodingConversion( metalnessMap );\n\t\t\tconst data = context.getImageData( 0, 0, width, height ).data;\n\n\t\t\tfor ( let i = 2; i < data.length; i += 4 ) {\n\n\t\t\t\tcomposite.data[ i ] = convert( data[ i ] / 256 ) * 256;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( roughness ) {\n\n\t\t\tcontext.drawImage( roughness, 0, 0, width, height );\n\n\t\t\tconst convert = getEncodingConversion( roughnessMap );\n\t\t\tconst data = context.getImageData( 0, 0, width, height ).data;\n\n\t\t\tfor ( let i = 1; i < data.length; i += 4 ) {\n\n\t\t\t\tcomposite.data[ i ] = convert( data[ i ] / 256 ) * 256;\n\n\t\t\t}\n\n\t\t}\n\n\t\tcontext.putImageData( composite, 0, 0 );\n\n\t\t//\n\n\t\tconst reference = metalnessMap || roughnessMap;\n\n\t\tconst texture = reference.clone();\n\n\t\ttexture.source = new Source( canvas );\n\t\ttexture.colorSpace = NoColorSpace;\n\t\ttexture.channel = ( metalnessMap || roughnessMap ).channel;\n\n\t\tif ( metalnessMap && roughnessMap && metalnessMap.channel !== roughnessMap.channel ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFExporter: UV channels for metalnessMap and roughnessMap textures must match.' );\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n\t/**\n\t * Process a buffer to append to the default one.\n\t * @param  {ArrayBuffer} buffer\n\t * @return {Integer}\n\t */\n\tprocessBuffer( buffer ) {\n\n\t\tconst json = this.json;\n\t\tconst buffers = this.buffers;\n\n\t\tif ( ! json.buffers ) json.buffers = [ { byteLength: 0 } ];\n\n\t\t// All buffers are merged before export.\n\t\tbuffers.push( buffer );\n\n\t\treturn 0;\n\n\t}\n\n\t/**\n\t * Process and generate a BufferView\n\t * @param  {BufferAttribute} attribute\n\t * @param  {number} componentType\n\t * @param  {number} start\n\t * @param  {number} count\n\t * @param  {number} target (Optional) Target usage of the BufferView\n\t * @return {Object}\n\t */\n\tprocessBufferView( attribute, componentType, start, count, target ) {\n\n\t\tconst json = this.json;\n\n\t\tif ( ! json.bufferViews ) json.bufferViews = [];\n\n\t\t// Create a new dataview and dump the attribute's array into it\n\n\t\tlet componentSize;\n\n\t\tswitch ( componentType ) {\n\n\t\t\tcase WEBGL_CONSTANTS.BYTE:\n\t\t\tcase WEBGL_CONSTANTS.UNSIGNED_BYTE:\n\n\t\t\t\tcomponentSize = 1;\n\n\t\t\t\tbreak;\n\n\t\t\tcase WEBGL_CONSTANTS.SHORT:\n\t\t\tcase WEBGL_CONSTANTS.UNSIGNED_SHORT:\n\n\t\t\t\tcomponentSize = 2;\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tcomponentSize = 4;\n\n\t\t}\n\n\t\tconst byteLength = getPaddedBufferSize( count * attribute.itemSize * componentSize );\n\t\tconst dataView = new DataView( new ArrayBuffer( byteLength ) );\n\t\tlet offset = 0;\n\n\t\tfor ( let i = start; i < start + count; i ++ ) {\n\n\t\t\tfor ( let a = 0; a < attribute.itemSize; a ++ ) {\n\n\t\t\t\tlet value;\n\n\t\t\t\tif ( attribute.itemSize > 4 ) {\n\n\t\t\t\t\t // no support for interleaved data for itemSize > 4\n\n\t\t\t\t\tvalue = attribute.array[ i * attribute.itemSize + a ];\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( a === 0 ) value = attribute.getX( i );\n\t\t\t\t\telse if ( a === 1 ) value = attribute.getY( i );\n\t\t\t\t\telse if ( a === 2 ) value = attribute.getZ( i );\n\t\t\t\t\telse if ( a === 3 ) value = attribute.getW( i );\n\n\t\t\t\t\tif ( attribute.normalized === true ) {\n\n\t\t\t\t\t\tvalue = MathUtils.normalize( value, attribute.array );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( componentType === WEBGL_CONSTANTS.FLOAT ) {\n\n\t\t\t\t\tdataView.setFloat32( offset, value, true );\n\n\t\t\t\t} else if ( componentType === WEBGL_CONSTANTS.INT ) {\n\n\t\t\t\t\tdataView.setInt32( offset, value, true );\n\n\t\t\t\t} else if ( componentType === WEBGL_CONSTANTS.UNSIGNED_INT ) {\n\n\t\t\t\t\tdataView.setUint32( offset, value, true );\n\n\t\t\t\t} else if ( componentType === WEBGL_CONSTANTS.SHORT ) {\n\n\t\t\t\t\tdataView.setInt16( offset, value, true );\n\n\t\t\t\t} else if ( componentType === WEBGL_CONSTANTS.UNSIGNED_SHORT ) {\n\n\t\t\t\t\tdataView.setUint16( offset, value, true );\n\n\t\t\t\t} else if ( componentType === WEBGL_CONSTANTS.BYTE ) {\n\n\t\t\t\t\tdataView.setInt8( offset, value );\n\n\t\t\t\t} else if ( componentType === WEBGL_CONSTANTS.UNSIGNED_BYTE ) {\n\n\t\t\t\t\tdataView.setUint8( offset, value );\n\n\t\t\t\t}\n\n\t\t\t\toffset += componentSize;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst bufferViewDef = {\n\n\t\t\tbuffer: this.processBuffer( dataView.buffer ),\n\t\t\tbyteOffset: this.byteOffset,\n\t\t\tbyteLength: byteLength\n\n\t\t};\n\n\t\tif ( target !== undefined ) bufferViewDef.target = target;\n\n\t\tif ( target === WEBGL_CONSTANTS.ARRAY_BUFFER ) {\n\n\t\t\t// Only define byteStride for vertex attributes.\n\t\t\tbufferViewDef.byteStride = attribute.itemSize * componentSize;\n\n\t\t}\n\n\t\tthis.byteOffset += byteLength;\n\n\t\tjson.bufferViews.push( bufferViewDef );\n\n\t\t// @TODO Merge bufferViews where possible.\n\t\tconst output = {\n\n\t\t\tid: json.bufferViews.length - 1,\n\t\t\tbyteLength: 0\n\n\t\t};\n\n\t\treturn output;\n\n\t}\n\n\t/**\n\t * Process and generate a BufferView from an image Blob.\n\t * @param {Blob} blob\n\t * @return {Promise<Integer>}\n\t */\n\tprocessBufferViewImage( blob ) {\n\n\t\tconst writer = this;\n\t\tconst json = writer.json;\n\n\t\tif ( ! json.bufferViews ) json.bufferViews = [];\n\n\t\treturn new Promise( function ( resolve ) {\n\n\t\t\tconst reader = new FileReader();\n\t\t\treader.readAsArrayBuffer( blob );\n\t\t\treader.onloadend = function () {\n\n\t\t\t\tconst buffer = getPaddedArrayBuffer( reader.result );\n\n\t\t\t\tconst bufferViewDef = {\n\t\t\t\t\tbuffer: writer.processBuffer( buffer ),\n\t\t\t\t\tbyteOffset: writer.byteOffset,\n\t\t\t\t\tbyteLength: buffer.byteLength\n\t\t\t\t};\n\n\t\t\t\twriter.byteOffset += buffer.byteLength;\n\t\t\t\tresolve( json.bufferViews.push( bufferViewDef ) - 1 );\n\n\t\t\t};\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Process attribute to generate an accessor\n\t * @param  {BufferAttribute} attribute Attribute to process\n\t * @param  {THREE.BufferGeometry} geometry (Optional) Geometry used for truncated draw range\n\t * @param  {Integer} start (Optional)\n\t * @param  {Integer} count (Optional)\n\t * @return {Integer|null} Index of the processed accessor on the \"accessors\" array\n\t */\n\tprocessAccessor( attribute, geometry, start, count ) {\n\n\t\tconst json = this.json;\n\n\t\tconst types = {\n\n\t\t\t1: 'SCALAR',\n\t\t\t2: 'VEC2',\n\t\t\t3: 'VEC3',\n\t\t\t4: 'VEC4',\n\t\t\t9: 'MAT3',\n\t\t\t16: 'MAT4'\n\n\t\t};\n\n\t\tlet componentType;\n\n\t\t// Detect the component type of the attribute array\n\t\tif ( attribute.array.constructor === Float32Array ) {\n\n\t\t\tcomponentType = WEBGL_CONSTANTS.FLOAT;\n\n\t\t} else if ( attribute.array.constructor === Int32Array ) {\n\n\t\t\tcomponentType = WEBGL_CONSTANTS.INT;\n\n\t\t} else if ( attribute.array.constructor === Uint32Array ) {\n\n\t\t\tcomponentType = WEBGL_CONSTANTS.UNSIGNED_INT;\n\n\t\t} else if ( attribute.array.constructor === Int16Array ) {\n\n\t\t\tcomponentType = WEBGL_CONSTANTS.SHORT;\n\n\t\t} else if ( attribute.array.constructor === Uint16Array ) {\n\n\t\t\tcomponentType = WEBGL_CONSTANTS.UNSIGNED_SHORT;\n\n\t\t} else if ( attribute.array.constructor === Int8Array ) {\n\n\t\t\tcomponentType = WEBGL_CONSTANTS.BYTE;\n\n\t\t} else if ( attribute.array.constructor === Uint8Array ) {\n\n\t\t\tcomponentType = WEBGL_CONSTANTS.UNSIGNED_BYTE;\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'THREE.GLTFExporter: Unsupported bufferAttribute component type: ' + attribute.array.constructor.name );\n\n\t\t}\n\n\t\tif ( start === undefined ) start = 0;\n\t\tif ( count === undefined || count === Infinity ) count = attribute.count;\n\n\t\t// Skip creating an accessor if the attribute doesn't have data to export\n\t\tif ( count === 0 ) return null;\n\n\t\tconst minMax = getMinMax( attribute, start, count );\n\t\tlet bufferViewTarget;\n\n\t\t// If geometry isn't provided, don't infer the target usage of the bufferView. For\n\t\t// animation samplers, target must not be set.\n\t\tif ( geometry !== undefined ) {\n\n\t\t\tbufferViewTarget = attribute === geometry.index ? WEBGL_CONSTANTS.ELEMENT_ARRAY_BUFFER : WEBGL_CONSTANTS.ARRAY_BUFFER;\n\n\t\t}\n\n\t\tconst bufferView = this.processBufferView( attribute, componentType, start, count, bufferViewTarget );\n\n\t\tconst accessorDef = {\n\n\t\t\tbufferView: bufferView.id,\n\t\t\tbyteOffset: bufferView.byteOffset,\n\t\t\tcomponentType: componentType,\n\t\t\tcount: count,\n\t\t\tmax: minMax.max,\n\t\t\tmin: minMax.min,\n\t\t\ttype: types[ attribute.itemSize ]\n\n\t\t};\n\n\t\tif ( attribute.normalized === true ) accessorDef.normalized = true;\n\t\tif ( ! json.accessors ) json.accessors = [];\n\n\t\treturn json.accessors.push( accessorDef ) - 1;\n\n\t}\n\n\t/**\n\t * Process image\n\t * @param  {Image} image to process\n\t * @param  {Integer} format of the image (RGBAFormat)\n\t * @param  {Boolean} flipY before writing out the image\n\t * @param  {String} mimeType export format\n\t * @return {Integer}     Index of the processed texture in the \"images\" array\n\t */\n\tprocessImage( image, format, flipY, mimeType = 'image/png' ) {\n\n\t\tif ( image !== null ) {\n\n\t\t\tconst writer = this;\n\t\t\tconst cache = writer.cache;\n\t\t\tconst json = writer.json;\n\t\t\tconst options = writer.options;\n\t\t\tconst pending = writer.pending;\n\n\t\t\tif ( ! cache.images.has( image ) ) cache.images.set( image, {} );\n\n\t\t\tconst cachedImages = cache.images.get( image );\n\n\t\t\tconst key = mimeType + ':flipY/' + flipY.toString();\n\n\t\t\tif ( cachedImages[ key ] !== undefined ) return cachedImages[ key ];\n\n\t\t\tif ( ! json.images ) json.images = [];\n\n\t\t\tconst imageDef = { mimeType: mimeType };\n\n\t\t\tconst canvas = getCanvas();\n\n\t\t\tcanvas.width = Math.min( image.width, options.maxTextureSize );\n\t\t\tcanvas.height = Math.min( image.height, options.maxTextureSize );\n\n\t\t\tconst ctx = canvas.getContext( '2d' );\n\n\t\t\tif ( flipY === true ) {\n\n\t\t\t\tctx.translate( 0, canvas.height );\n\t\t\t\tctx.scale( 1, - 1 );\n\n\t\t\t}\n\n\t\t\tif ( image.data !== undefined ) { // THREE.DataTexture\n\n\t\t\t\tif ( format !== RGBAFormat ) {\n\n\t\t\t\t\tconsole.error( 'GLTFExporter: Only RGBAFormat is supported.', format );\n\n\t\t\t\t}\n\n\t\t\t\tif ( image.width > options.maxTextureSize || image.height > options.maxTextureSize ) {\n\n\t\t\t\t\tconsole.warn( 'GLTFExporter: Image size is bigger than maxTextureSize', image );\n\n\t\t\t\t}\n\n\t\t\t\tconst data = new Uint8ClampedArray( image.height * image.width * 4 );\n\n\t\t\t\tfor ( let i = 0; i < data.length; i += 4 ) {\n\n\t\t\t\t\tdata[ i + 0 ] = image.data[ i + 0 ];\n\t\t\t\t\tdata[ i + 1 ] = image.data[ i + 1 ];\n\t\t\t\t\tdata[ i + 2 ] = image.data[ i + 2 ];\n\t\t\t\t\tdata[ i + 3 ] = image.data[ i + 3 ];\n\n\t\t\t\t}\n\n\t\t\t\tctx.putImageData( new ImageData( data, image.width, image.height ), 0, 0 );\n\n\t\t\t} else {\n\n\t\t\t\tctx.drawImage( image, 0, 0, canvas.width, canvas.height );\n\n\t\t\t}\n\n\t\t\tif ( options.binary === true ) {\n\n\t\t\t\tpending.push(\n\n\t\t\t\t\tgetToBlobPromise( canvas, mimeType )\n\t\t\t\t\t\t.then( blob => writer.processBufferViewImage( blob ) )\n\t\t\t\t\t\t.then( bufferViewIndex => {\n\n\t\t\t\t\t\t\timageDef.bufferView = bufferViewIndex;\n\n\t\t\t\t\t\t} )\n\n\t\t\t\t);\n\n\t\t\t} else {\n\n\t\t\t\tif ( canvas.toDataURL !== undefined ) {\n\n\t\t\t\t\timageDef.uri = canvas.toDataURL( mimeType );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tpending.push(\n\n\t\t\t\t\t\tgetToBlobPromise( canvas, mimeType )\n\t\t\t\t\t\t\t.then( blob => new FileReader().readAsDataURL( blob ) )\n\t\t\t\t\t\t\t.then( dataURL => {\n\n\t\t\t\t\t\t\t\timageDef.uri = dataURL;\n\n\t\t\t\t\t\t\t} )\n\n\t\t\t\t\t);\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst index = json.images.push( imageDef ) - 1;\n\t\t\tcachedImages[ key ] = index;\n\t\t\treturn index;\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'THREE.GLTFExporter: No valid image data found. Unable to process texture.' );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Process sampler\n\t * @param  {Texture} map Texture to process\n\t * @return {Integer}     Index of the processed texture in the \"samplers\" array\n\t */\n\tprocessSampler( map ) {\n\n\t\tconst json = this.json;\n\n\t\tif ( ! json.samplers ) json.samplers = [];\n\n\t\tconst samplerDef = {\n\t\t\tmagFilter: THREE_TO_WEBGL[ map.magFilter ],\n\t\t\tminFilter: THREE_TO_WEBGL[ map.minFilter ],\n\t\t\twrapS: THREE_TO_WEBGL[ map.wrapS ],\n\t\t\twrapT: THREE_TO_WEBGL[ map.wrapT ]\n\t\t};\n\n\t\treturn json.samplers.push( samplerDef ) - 1;\n\n\t}\n\n\t/**\n\t * Process texture\n\t * @param  {Texture} map Map to process\n\t * @return {Integer} Index of the processed texture in the \"textures\" array\n\t */\n\tprocessTexture( map ) {\n\n\t\tconst writer = this;\n\t\tconst options = writer.options;\n\t\tconst cache = this.cache;\n\t\tconst json = this.json;\n\n\t\tif ( cache.textures.has( map ) ) return cache.textures.get( map );\n\n\t\tif ( ! json.textures ) json.textures = [];\n\n\t\t// make non-readable textures (e.g. CompressedTexture) readable by blitting them into a new texture\n\t\tif ( map instanceof CompressedTexture ) {\n\n\t\t\tmap = decompress( map, options.maxTextureSize );\n\n\t\t}\n\n\t\tlet mimeType = map.userData.mimeType;\n\n\t\tif ( mimeType === 'image/webp' ) mimeType = 'image/png';\n\n\t\tconst textureDef = {\n\t\t\tsampler: this.processSampler( map ),\n\t\t\tsource: this.processImage( map.image, map.format, map.flipY, mimeType )\n\t\t};\n\n\t\tif ( map.name ) textureDef.name = map.name;\n\n\t\tthis._invokeAll( function ( ext ) {\n\n\t\t\text.writeTexture && ext.writeTexture( map, textureDef );\n\n\t\t} );\n\n\t\tconst index = json.textures.push( textureDef ) - 1;\n\t\tcache.textures.set( map, index );\n\t\treturn index;\n\n\t}\n\n\t/**\n\t * Process material\n\t * @param  {THREE.Material} material Material to process\n\t * @return {Integer|null} Index of the processed material in the \"materials\" array\n\t */\n\tprocessMaterial( material ) {\n\n\t\tconst cache = this.cache;\n\t\tconst json = this.json;\n\n\t\tif ( cache.materials.has( material ) ) return cache.materials.get( material );\n\n\t\tif ( material.isShaderMaterial ) {\n\n\t\t\tconsole.warn( 'GLTFExporter: THREE.ShaderMaterial not supported.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tif ( ! json.materials ) json.materials = [];\n\n\t\t// @QUESTION Should we avoid including any attribute that has the default value?\n\t\tconst materialDef = {\tpbrMetallicRoughness: {} };\n\n\t\tif ( material.isMeshStandardMaterial !== true && material.isMeshBasicMaterial !== true ) {\n\n\t\t\tconsole.warn( 'GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.' );\n\n\t\t}\n\n\t\t// pbrMetallicRoughness.baseColorFactor\n\t\tconst color = material.color.toArray().concat( [ material.opacity ] );\n\n\t\tif ( ! equalArray( color, [ 1, 1, 1, 1 ] ) ) {\n\n\t\t\tmaterialDef.pbrMetallicRoughness.baseColorFactor = color;\n\n\t\t}\n\n\t\tif ( material.isMeshStandardMaterial ) {\n\n\t\t\tmaterialDef.pbrMetallicRoughness.metallicFactor = material.metalness;\n\t\t\tmaterialDef.pbrMetallicRoughness.roughnessFactor = material.roughness;\n\n\t\t} else {\n\n\t\t\tmaterialDef.pbrMetallicRoughness.metallicFactor = 0.5;\n\t\t\tmaterialDef.pbrMetallicRoughness.roughnessFactor = 0.5;\n\n\t\t}\n\n\t\t// pbrMetallicRoughness.metallicRoughnessTexture\n\t\tif ( material.metalnessMap || material.roughnessMap ) {\n\n\t\t\tconst metalRoughTexture = this.buildMetalRoughTexture( material.metalnessMap, material.roughnessMap );\n\n\t\t\tconst metalRoughMapDef = {\n\t\t\t\tindex: this.processTexture( metalRoughTexture ),\n\t\t\t\tchannel: metalRoughTexture.channel\n\t\t\t};\n\t\t\tthis.applyTextureTransform( metalRoughMapDef, metalRoughTexture );\n\t\t\tmaterialDef.pbrMetallicRoughness.metallicRoughnessTexture = metalRoughMapDef;\n\n\t\t}\n\n\t\t// pbrMetallicRoughness.baseColorTexture\n\t\tif ( material.map ) {\n\n\t\t\tconst baseColorMapDef = {\n\t\t\t\tindex: this.processTexture( material.map ),\n\t\t\t\ttexCoord: material.map.channel\n\t\t\t};\n\t\t\tthis.applyTextureTransform( baseColorMapDef, material.map );\n\t\t\tmaterialDef.pbrMetallicRoughness.baseColorTexture = baseColorMapDef;\n\n\t\t}\n\n\t\tif ( material.emissive ) {\n\n\t\t\tconst emissive = material.emissive;\n\t\t\tconst maxEmissiveComponent = Math.max( emissive.r, emissive.g, emissive.b );\n\n\t\t\tif ( maxEmissiveComponent > 0 ) {\n\n\t\t\t\tmaterialDef.emissiveFactor = material.emissive.toArray();\n\n\t\t\t}\n\n\t\t\t// emissiveTexture\n\t\t\tif ( material.emissiveMap ) {\n\n\t\t\t\tconst emissiveMapDef = {\n\t\t\t\t\tindex: this.processTexture( material.emissiveMap ),\n\t\t\t\t\ttexCoord: material.emissiveMap.channel\n\t\t\t\t};\n\t\t\t\tthis.applyTextureTransform( emissiveMapDef, material.emissiveMap );\n\t\t\t\tmaterialDef.emissiveTexture = emissiveMapDef;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// normalTexture\n\t\tif ( material.normalMap ) {\n\n\t\t\tconst normalMapDef = {\n\t\t\t\tindex: this.processTexture( material.normalMap ),\n\t\t\t\ttexCoord: material.normalMap.channel\n\t\t\t};\n\n\t\t\tif ( material.normalScale && material.normalScale.x !== 1 ) {\n\n\t\t\t\t// glTF normal scale is univariate. Ignore `y`, which may be flipped.\n\t\t\t\t// Context: https://github.com/mrdoob/three.js/issues/11438#issuecomment-507003995\n\t\t\t\tnormalMapDef.scale = material.normalScale.x;\n\n\t\t\t}\n\n\t\t\tthis.applyTextureTransform( normalMapDef, material.normalMap );\n\t\t\tmaterialDef.normalTexture = normalMapDef;\n\n\t\t}\n\n\t\t// occlusionTexture\n\t\tif ( material.aoMap ) {\n\n\t\t\tconst occlusionMapDef = {\n\t\t\t\tindex: this.processTexture( material.aoMap ),\n\t\t\t\ttexCoord: material.aoMap.channel\n\t\t\t};\n\n\t\t\tif ( material.aoMapIntensity !== 1.0 ) {\n\n\t\t\t\tocclusionMapDef.strength = material.aoMapIntensity;\n\n\t\t\t}\n\n\t\t\tthis.applyTextureTransform( occlusionMapDef, material.aoMap );\n\t\t\tmaterialDef.occlusionTexture = occlusionMapDef;\n\n\t\t}\n\n\t\t// alphaMode\n\t\tif ( material.transparent ) {\n\n\t\t\tmaterialDef.alphaMode = 'BLEND';\n\n\t\t} else {\n\n\t\t\tif ( material.alphaTest > 0.0 ) {\n\n\t\t\t\tmaterialDef.alphaMode = 'MASK';\n\t\t\t\tmaterialDef.alphaCutoff = material.alphaTest;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// doubleSided\n\t\tif ( material.side === DoubleSide ) materialDef.doubleSided = true;\n\t\tif ( material.name !== '' ) materialDef.name = material.name;\n\n\t\tthis.serializeUserData( material, materialDef );\n\n\t\tthis._invokeAll( function ( ext ) {\n\n\t\t\text.writeMaterial && ext.writeMaterial( material, materialDef );\n\n\t\t} );\n\n\t\tconst index = json.materials.push( materialDef ) - 1;\n\t\tcache.materials.set( material, index );\n\t\treturn index;\n\n\t}\n\n\t/**\n\t * Process mesh\n\t * @param  {THREE.Mesh} mesh Mesh to process\n\t * @return {Integer|null} Index of the processed mesh in the \"meshes\" array\n\t */\n\tprocessMesh( mesh ) {\n\n\t\tconst cache = this.cache;\n\t\tconst json = this.json;\n\n\t\tconst meshCacheKeyParts = [ mesh.geometry.uuid ];\n\n\t\tif ( Array.isArray( mesh.material ) ) {\n\n\t\t\tfor ( let i = 0, l = mesh.material.length; i < l; i ++ ) {\n\n\t\t\t\tmeshCacheKeyParts.push( mesh.material[ i ].uuid\t);\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tmeshCacheKeyParts.push( mesh.material.uuid );\n\n\t\t}\n\n\t\tconst meshCacheKey = meshCacheKeyParts.join( ':' );\n\n\t\tif ( cache.meshes.has( meshCacheKey ) ) return cache.meshes.get( meshCacheKey );\n\n\t\tconst geometry = mesh.geometry;\n\n\t\tlet mode;\n\n\t\t// Use the correct mode\n\t\tif ( mesh.isLineSegments ) {\n\n\t\t\tmode = WEBGL_CONSTANTS.LINES;\n\n\t\t} else if ( mesh.isLineLoop ) {\n\n\t\t\tmode = WEBGL_CONSTANTS.LINE_LOOP;\n\n\t\t} else if ( mesh.isLine ) {\n\n\t\t\tmode = WEBGL_CONSTANTS.LINE_STRIP;\n\n\t\t} else if ( mesh.isPoints ) {\n\n\t\t\tmode = WEBGL_CONSTANTS.POINTS;\n\n\t\t} else {\n\n\t\t\tmode = mesh.material.wireframe ? WEBGL_CONSTANTS.LINES : WEBGL_CONSTANTS.TRIANGLES;\n\n\t\t}\n\n\t\tconst meshDef = {};\n\t\tconst attributes = {};\n\t\tconst primitives = [];\n\t\tconst targets = [];\n\n\t\t// Conversion between attributes names in threejs and gltf spec\n\t\tconst nameConversion = {\n\t\t\tuv: 'TEXCOORD_0',\n\t\t\tuv1: 'TEXCOORD_1',\n\t\t\tuv2: 'TEXCOORD_2',\n\t\t\tuv3: 'TEXCOORD_3',\n\t\t\tcolor: 'COLOR_0',\n\t\t\tskinWeight: 'WEIGHTS_0',\n\t\t\tskinIndex: 'JOINTS_0'\n\t\t};\n\n\t\tconst originalNormal = geometry.getAttribute( 'normal' );\n\n\t\tif ( originalNormal !== undefined && ! this.isNormalizedNormalAttribute( originalNormal ) ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one.' );\n\n\t\t\tgeometry.setAttribute( 'normal', this.createNormalizedNormalAttribute( originalNormal ) );\n\n\t\t}\n\n\t\t// @QUESTION Detect if .vertexColors = true?\n\t\t// For every attribute create an accessor\n\t\tlet modifiedAttribute = null;\n\n\t\tfor ( let attributeName in geometry.attributes ) {\n\n\t\t\t// Ignore morph target attributes, which are exported later.\n\t\t\tif ( attributeName.slice( 0, 5 ) === 'morph' ) continue;\n\n\t\t\tconst attribute = geometry.attributes[ attributeName ];\n\t\t\tattributeName = nameConversion[ attributeName ] || attributeName.toUpperCase();\n\n\t\t\t// Prefix all geometry attributes except the ones specifically\n\t\t\t// listed in the spec; non-spec attributes are considered custom.\n\t\t\tconst validVertexAttributes =\n\t\t\t\t\t/^(POSITION|NORMAL|TANGENT|TEXCOORD_\\d+|COLOR_\\d+|JOINTS_\\d+|WEIGHTS_\\d+)$/;\n\n\t\t\tif ( ! validVertexAttributes.test( attributeName ) ) attributeName = '_' + attributeName;\n\n\t\t\tif ( cache.attributes.has( this.getUID( attribute ) ) ) {\n\n\t\t\t\tattributes[ attributeName ] = cache.attributes.get( this.getUID( attribute ) );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\t// JOINTS_0 must be UNSIGNED_BYTE or UNSIGNED_SHORT.\n\t\t\tmodifiedAttribute = null;\n\t\t\tconst array = attribute.array;\n\n\t\t\tif ( attributeName === 'JOINTS_0' &&\n\t\t\t\t! ( array instanceof Uint16Array ) &&\n\t\t\t\t! ( array instanceof Uint8Array ) ) {\n\n\t\t\t\tconsole.warn( 'GLTFExporter: Attribute \"skinIndex\" converted to type UNSIGNED_SHORT.' );\n\t\t\t\tmodifiedAttribute = new BufferAttribute( new Uint16Array( array ), attribute.itemSize, attribute.normalized );\n\n\t\t\t}\n\n\t\t\tconst accessor = this.processAccessor( modifiedAttribute || attribute, geometry );\n\n\t\t\tif ( accessor !== null ) {\n\n\t\t\t\tif ( ! attributeName.startsWith( '_' ) ) {\n\n\t\t\t\t\tthis.detectMeshQuantization( attributeName, attribute );\n\n\t\t\t\t}\n\n\t\t\t\tattributes[ attributeName ] = accessor;\n\t\t\t\tcache.attributes.set( this.getUID( attribute ), accessor );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( originalNormal !== undefined ) geometry.setAttribute( 'normal', originalNormal );\n\n\t\t// Skip if no exportable attributes found\n\t\tif ( Object.keys( attributes ).length === 0 ) return null;\n\n\t\t// Morph targets\n\t\tif ( mesh.morphTargetInfluences !== undefined && mesh.morphTargetInfluences.length > 0 ) {\n\n\t\t\tconst weights = [];\n\t\t\tconst targetNames = [];\n\t\t\tconst reverseDictionary = {};\n\n\t\t\tif ( mesh.morphTargetDictionary !== undefined ) {\n\n\t\t\t\tfor ( const key in mesh.morphTargetDictionary ) {\n\n\t\t\t\t\treverseDictionary[ mesh.morphTargetDictionary[ key ] ] = key;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfor ( let i = 0; i < mesh.morphTargetInfluences.length; ++ i ) {\n\n\t\t\t\tconst target = {};\n\t\t\t\tlet warned = false;\n\n\t\t\t\tfor ( const attributeName in geometry.morphAttributes ) {\n\n\t\t\t\t\t// glTF 2.0 morph supports only POSITION/NORMAL/TANGENT.\n\t\t\t\t\t// Three.js doesn't support TANGENT yet.\n\n\t\t\t\t\tif ( attributeName !== 'position' && attributeName !== 'normal' ) {\n\n\t\t\t\t\t\tif ( ! warned ) {\n\n\t\t\t\t\t\t\tconsole.warn( 'GLTFExporter: Only POSITION and NORMAL morph are supported.' );\n\t\t\t\t\t\t\twarned = true;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst attribute = geometry.morphAttributes[ attributeName ][ i ];\n\t\t\t\t\tconst gltfAttributeName = attributeName.toUpperCase();\n\n\t\t\t\t\t// Three.js morph attribute has absolute values while the one of glTF has relative values.\n\t\t\t\t\t//\n\t\t\t\t\t// glTF 2.0 Specification:\n\t\t\t\t\t// https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#morph-targets\n\n\t\t\t\t\tconst baseAttribute = geometry.attributes[ attributeName ];\n\n\t\t\t\t\tif ( cache.attributes.has( this.getUID( attribute, true ) ) ) {\n\n\t\t\t\t\t\ttarget[ gltfAttributeName ] = cache.attributes.get( this.getUID( attribute, true ) );\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Clones attribute not to override\n\t\t\t\t\tconst relativeAttribute = attribute.clone();\n\n\t\t\t\t\tif ( ! geometry.morphTargetsRelative ) {\n\n\t\t\t\t\t\tfor ( let j = 0, jl = attribute.count; j < jl; j ++ ) {\n\n\t\t\t\t\t\t\tfor ( let a = 0; a < attribute.itemSize; a ++ ) {\n\n\t\t\t\t\t\t\t\tif ( a === 0 ) relativeAttribute.setX( j, attribute.getX( j ) - baseAttribute.getX( j ) );\n\t\t\t\t\t\t\t\tif ( a === 1 ) relativeAttribute.setY( j, attribute.getY( j ) - baseAttribute.getY( j ) );\n\t\t\t\t\t\t\t\tif ( a === 2 ) relativeAttribute.setZ( j, attribute.getZ( j ) - baseAttribute.getZ( j ) );\n\t\t\t\t\t\t\t\tif ( a === 3 ) relativeAttribute.setW( j, attribute.getW( j ) - baseAttribute.getW( j ) );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttarget[ gltfAttributeName ] = this.processAccessor( relativeAttribute, geometry );\n\t\t\t\t\tcache.attributes.set( this.getUID( baseAttribute, true ), target[ gltfAttributeName ] );\n\n\t\t\t\t}\n\n\t\t\t\ttargets.push( target );\n\n\t\t\t\tweights.push( mesh.morphTargetInfluences[ i ] );\n\n\t\t\t\tif ( mesh.morphTargetDictionary !== undefined ) targetNames.push( reverseDictionary[ i ] );\n\n\t\t\t}\n\n\t\t\tmeshDef.weights = weights;\n\n\t\t\tif ( targetNames.length > 0 ) {\n\n\t\t\t\tmeshDef.extras = {};\n\t\t\t\tmeshDef.extras.targetNames = targetNames;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst isMultiMaterial = Array.isArray( mesh.material );\n\n\t\tif ( isMultiMaterial && geometry.groups.length === 0 ) return null;\n\n\t\tconst materials = isMultiMaterial ? mesh.material : [ mesh.material ];\n\t\tconst groups = isMultiMaterial ? geometry.groups : [ { materialIndex: 0, start: undefined, count: undefined } ];\n\n\t\tfor ( let i = 0, il = groups.length; i < il; i ++ ) {\n\n\t\t\tconst primitive = {\n\t\t\t\tmode: mode,\n\t\t\t\tattributes: attributes,\n\t\t\t};\n\n\t\t\tthis.serializeUserData( geometry, primitive );\n\n\t\t\tif ( targets.length > 0 ) primitive.targets = targets;\n\n\t\t\tif ( geometry.index !== null ) {\n\n\t\t\t\tlet cacheKey = this.getUID( geometry.index );\n\n\t\t\t\tif ( groups[ i ].start !== undefined || groups[ i ].count !== undefined ) {\n\n\t\t\t\t\tcacheKey += ':' + groups[ i ].start + ':' + groups[ i ].count;\n\n\t\t\t\t}\n\n\t\t\t\tif ( cache.attributes.has( cacheKey ) ) {\n\n\t\t\t\t\tprimitive.indices = cache.attributes.get( cacheKey );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tprimitive.indices = this.processAccessor( geometry.index, geometry, groups[ i ].start, groups[ i ].count );\n\t\t\t\t\tcache.attributes.set( cacheKey, primitive.indices );\n\n\t\t\t\t}\n\n\t\t\t\tif ( primitive.indices === null ) delete primitive.indices;\n\n\t\t\t}\n\n\t\t\tconst material = this.processMaterial( materials[ groups[ i ].materialIndex ] );\n\n\t\t\tif ( material !== null ) primitive.material = material;\n\n\t\t\tprimitives.push( primitive );\n\n\t\t}\n\n\t\tmeshDef.primitives = primitives;\n\n\t\tif ( ! json.meshes ) json.meshes = [];\n\n\t\tthis._invokeAll( function ( ext ) {\n\n\t\t\text.writeMesh && ext.writeMesh( mesh, meshDef );\n\n\t\t} );\n\n\t\tconst index = json.meshes.push( meshDef ) - 1;\n\t\tcache.meshes.set( meshCacheKey, index );\n\t\treturn index;\n\n\t}\n\n\t/**\n\t * If a vertex attribute with a\n\t * [non-standard data type](https://registry.khronos.org/glTF/specs/2.0/glTF-2.0.html#meshes-overview)\n\t * is used, it is checked whether it is a valid data type according to the\n\t * [KHR_mesh_quantization](https://github.com/KhronosGroup/glTF/blob/main/extensions/2.0/Khronos/KHR_mesh_quantization/README.md)\n\t * extension.\n\t * In this case the extension is automatically added to the list of used extensions.\n\t *\n\t * @param {string} attributeName\n\t * @param {THREE.BufferAttribute} attribute\n\t */\n\tdetectMeshQuantization( attributeName, attribute ) {\n\n\t\tif ( this.extensionsUsed[ KHR_MESH_QUANTIZATION ] ) return;\n\n\t\tlet attrType = undefined;\n\n\t\tswitch ( attribute.array.constructor ) {\n\n\t\t\tcase Int8Array:\n\n\t\t\t\tattrType = 'byte';\n\n\t\t\t\tbreak;\n\n\t\t\tcase Uint8Array:\n\n\t\t\t\tattrType = 'unsigned byte';\n\n\t\t\t\tbreak;\n\n\t\t\tcase Int16Array:\n\n\t\t\t\tattrType = 'short';\n\n\t\t\t\tbreak;\n\n\t\t\tcase Uint16Array:\n\n\t\t\t\tattrType = 'unsigned short';\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\treturn;\n\n\t\t}\n\n\t\tif ( attribute.normalized ) attrType += ' normalized';\n\n\t\tconst attrNamePrefix = attributeName.split( '_', 1 )[ 0 ];\n\n\t\tif ( KHR_mesh_quantization_ExtraAttrTypes[ attrNamePrefix ] && KHR_mesh_quantization_ExtraAttrTypes[ attrNamePrefix ].includes( attrType ) ) {\n\n\t\t\tthis.extensionsUsed[ KHR_MESH_QUANTIZATION ] = true;\n\t\t\tthis.extensionsRequired[ KHR_MESH_QUANTIZATION ] = true;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Process camera\n\t * @param  {THREE.Camera} camera Camera to process\n\t * @return {Integer}      Index of the processed mesh in the \"camera\" array\n\t */\n\tprocessCamera( camera ) {\n\n\t\tconst json = this.json;\n\n\t\tif ( ! json.cameras ) json.cameras = [];\n\n\t\tconst isOrtho = camera.isOrthographicCamera;\n\n\t\tconst cameraDef = {\n\t\t\ttype: isOrtho ? 'orthographic' : 'perspective'\n\t\t};\n\n\t\tif ( isOrtho ) {\n\n\t\t\tcameraDef.orthographic = {\n\t\t\t\txmag: camera.right * 2,\n\t\t\t\tymag: camera.top * 2,\n\t\t\t\tzfar: camera.far <= 0 ? 0.001 : camera.far,\n\t\t\t\tznear: camera.near < 0 ? 0 : camera.near\n\t\t\t};\n\n\t\t} else {\n\n\t\t\tcameraDef.perspective = {\n\t\t\t\taspectRatio: camera.aspect,\n\t\t\t\tyfov: MathUtils.degToRad( camera.fov ),\n\t\t\t\tzfar: camera.far <= 0 ? 0.001 : camera.far,\n\t\t\t\tznear: camera.near < 0 ? 0 : camera.near\n\t\t\t};\n\n\t\t}\n\n\t\t// Question: Is saving \"type\" as name intentional?\n\t\tif ( camera.name !== '' ) cameraDef.name = camera.type;\n\n\t\treturn json.cameras.push( cameraDef ) - 1;\n\n\t}\n\n\t/**\n\t * Creates glTF animation entry from AnimationClip object.\n\t *\n\t * Status:\n\t * - Only properties listed in PATH_PROPERTIES may be animated.\n\t *\n\t * @param {THREE.AnimationClip} clip\n\t * @param {THREE.Object3D} root\n\t * @return {number|null}\n\t */\n\tprocessAnimation( clip, root ) {\n\n\t\tconst json = this.json;\n\t\tconst nodeMap = this.nodeMap;\n\n\t\tif ( ! json.animations ) json.animations = [];\n\n\t\tclip = GLTFExporter.Utils.mergeMorphTargetTracks( clip.clone(), root );\n\n\t\tconst tracks = clip.tracks;\n\t\tconst channels = [];\n\t\tconst samplers = [];\n\n\t\tfor ( let i = 0; i < tracks.length; ++ i ) {\n\n\t\t\tconst track = tracks[ i ];\n\t\t\tconst trackBinding = PropertyBinding.parseTrackName( track.name );\n\t\t\tlet trackNode = PropertyBinding.findNode( root, trackBinding.nodeName );\n\t\t\tconst trackProperty = PATH_PROPERTIES[ trackBinding.propertyName ];\n\n\t\t\tif ( trackBinding.objectName === 'bones' ) {\n\n\t\t\t\tif ( trackNode.isSkinnedMesh === true ) {\n\n\t\t\t\t\ttrackNode = trackNode.skeleton.getBoneByName( trackBinding.objectIndex );\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttrackNode = undefined;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( ! trackNode || ! trackProperty ) {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFExporter: Could not export animation track \"%s\".', track.name );\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tconst inputItemSize = 1;\n\t\t\tlet outputItemSize = track.values.length / track.times.length;\n\n\t\t\tif ( trackProperty === PATH_PROPERTIES.morphTargetInfluences ) {\n\n\t\t\t\toutputItemSize /= trackNode.morphTargetInfluences.length;\n\n\t\t\t}\n\n\t\t\tlet interpolation;\n\n\t\t\t// @TODO export CubicInterpolant(InterpolateSmooth) as CUBICSPLINE\n\n\t\t\t// Detecting glTF cubic spline interpolant by checking factory method's special property\n\t\t\t// GLTFCubicSplineInterpolant is a custom interpolant and track doesn't return\n\t\t\t// valid value from .getInterpolation().\n\t\t\tif ( track.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline === true ) {\n\n\t\t\t\tinterpolation = 'CUBICSPLINE';\n\n\t\t\t\t// itemSize of CUBICSPLINE keyframe is 9\n\t\t\t\t// (VEC3 * 3: inTangent, splineVertex, and outTangent)\n\t\t\t\t// but needs to be stored as VEC3 so dividing by 3 here.\n\t\t\t\toutputItemSize /= 3;\n\n\t\t\t} else if ( track.getInterpolation() === InterpolateDiscrete ) {\n\n\t\t\t\tinterpolation = 'STEP';\n\n\t\t\t} else {\n\n\t\t\t\tinterpolation = 'LINEAR';\n\n\t\t\t}\n\n\t\t\tsamplers.push( {\n\t\t\t\tinput: this.processAccessor( new BufferAttribute( track.times, inputItemSize ) ),\n\t\t\t\toutput: this.processAccessor( new BufferAttribute( track.values, outputItemSize ) ),\n\t\t\t\tinterpolation: interpolation\n\t\t\t} );\n\n\t\t\tchannels.push( {\n\t\t\t\tsampler: samplers.length - 1,\n\t\t\t\ttarget: {\n\t\t\t\t\tnode: nodeMap.get( trackNode ),\n\t\t\t\t\tpath: trackProperty\n\t\t\t\t}\n\t\t\t} );\n\n\t\t}\n\n\t\tjson.animations.push( {\n\t\t\tname: clip.name || 'clip_' + json.animations.length,\n\t\t\tsamplers: samplers,\n\t\t\tchannels: channels\n\t\t} );\n\n\t\treturn json.animations.length - 1;\n\n\t}\n\n\t/**\n\t * @param {THREE.Object3D} object\n\t * @return {number|null}\n\t */\n\t processSkin( object ) {\n\n\t\tconst json = this.json;\n\t\tconst nodeMap = this.nodeMap;\n\n\t\tconst node = json.nodes[ nodeMap.get( object ) ];\n\n\t\tconst skeleton = object.skeleton;\n\n\t\tif ( skeleton === undefined ) return null;\n\n\t\tconst rootJoint = object.skeleton.bones[ 0 ];\n\n\t\tif ( rootJoint === undefined ) return null;\n\n\t\tconst joints = [];\n\t\tconst inverseBindMatrices = new Float32Array( skeleton.bones.length * 16 );\n\t\tconst temporaryBoneInverse = new Matrix4();\n\n\t\tfor ( let i = 0; i < skeleton.bones.length; ++ i ) {\n\n\t\t\tjoints.push( nodeMap.get( skeleton.bones[ i ] ) );\n\t\t\ttemporaryBoneInverse.copy( skeleton.boneInverses[ i ] );\n\t\t\ttemporaryBoneInverse.multiply( object.bindMatrix ).toArray( inverseBindMatrices, i * 16 );\n\n\t\t}\n\n\t\tif ( json.skins === undefined ) json.skins = [];\n\n\t\tjson.skins.push( {\n\t\t\tinverseBindMatrices: this.processAccessor( new BufferAttribute( inverseBindMatrices, 16 ) ),\n\t\t\tjoints: joints,\n\t\t\tskeleton: nodeMap.get( rootJoint )\n\t\t} );\n\n\t\tconst skinIndex = node.skin = json.skins.length - 1;\n\n\t\treturn skinIndex;\n\n\t}\n\n\t/**\n\t * Process Object3D node\n\t * @param  {THREE.Object3D} node Object3D to processNode\n\t * @return {Integer} Index of the node in the nodes list\n\t */\n\tprocessNode( object ) {\n\n\t\tconst json = this.json;\n\t\tconst options = this.options;\n\t\tconst nodeMap = this.nodeMap;\n\n\t\tif ( ! json.nodes ) json.nodes = [];\n\n\t\tconst nodeDef = {};\n\n\t\tif ( options.trs ) {\n\n\t\t\tconst rotation = object.quaternion.toArray();\n\t\t\tconst position = object.position.toArray();\n\t\t\tconst scale = object.scale.toArray();\n\n\t\t\tif ( ! equalArray( rotation, [ 0, 0, 0, 1 ] ) ) {\n\n\t\t\t\tnodeDef.rotation = rotation;\n\n\t\t\t}\n\n\t\t\tif ( ! equalArray( position, [ 0, 0, 0 ] ) ) {\n\n\t\t\t\tnodeDef.translation = position;\n\n\t\t\t}\n\n\t\t\tif ( ! equalArray( scale, [ 1, 1, 1 ] ) ) {\n\n\t\t\t\tnodeDef.scale = scale;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tif ( object.matrixAutoUpdate ) {\n\n\t\t\t\tobject.updateMatrix();\n\n\t\t\t}\n\n\t\t\tif ( isIdentityMatrix( object.matrix ) === false ) {\n\n\t\t\t\tnodeDef.matrix = object.matrix.elements;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// We don't export empty strings name because it represents no-name in Three.js.\n\t\tif ( object.name !== '' ) nodeDef.name = String( object.name );\n\n\t\tthis.serializeUserData( object, nodeDef );\n\n\t\tif ( object.isMesh || object.isLine || object.isPoints ) {\n\n\t\t\tconst meshIndex = this.processMesh( object );\n\n\t\t\tif ( meshIndex !== null ) nodeDef.mesh = meshIndex;\n\n\t\t} else if ( object.isCamera ) {\n\n\t\t\tnodeDef.camera = this.processCamera( object );\n\n\t\t}\n\n\t\tif ( object.isSkinnedMesh ) this.skins.push( object );\n\n\t\tif ( object.children.length > 0 ) {\n\n\t\t\tconst children = [];\n\n\t\t\tfor ( let i = 0, l = object.children.length; i < l; i ++ ) {\n\n\t\t\t\tconst child = object.children[ i ];\n\n\t\t\t\tif ( child.visible || options.onlyVisible === false ) {\n\n\t\t\t\t\tconst nodeIndex = this.processNode( child );\n\n\t\t\t\t\tif ( nodeIndex !== null ) children.push( nodeIndex );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( children.length > 0 ) nodeDef.children = children;\n\n\t\t}\n\n\t\tthis._invokeAll( function ( ext ) {\n\n\t\t\text.writeNode && ext.writeNode( object, nodeDef );\n\n\t\t} );\n\n\t\tconst nodeIndex = json.nodes.push( nodeDef ) - 1;\n\t\tnodeMap.set( object, nodeIndex );\n\t\treturn nodeIndex;\n\n\t}\n\n\t/**\n\t * Process Scene\n\t * @param  {Scene} node Scene to process\n\t */\n\tprocessScene( scene ) {\n\n\t\tconst json = this.json;\n\t\tconst options = this.options;\n\n\t\tif ( ! json.scenes ) {\n\n\t\t\tjson.scenes = [];\n\t\t\tjson.scene = 0;\n\n\t\t}\n\n\t\tconst sceneDef = {};\n\n\t\tif ( scene.name !== '' ) sceneDef.name = scene.name;\n\n\t\tjson.scenes.push( sceneDef );\n\n\t\tconst nodes = [];\n\n\t\tfor ( let i = 0, l = scene.children.length; i < l; i ++ ) {\n\n\t\t\tconst child = scene.children[ i ];\n\n\t\t\tif ( child.visible || options.onlyVisible === false ) {\n\n\t\t\t\tconst nodeIndex = this.processNode( child );\n\n\t\t\t\tif ( nodeIndex !== null ) nodes.push( nodeIndex );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( nodes.length > 0 ) sceneDef.nodes = nodes;\n\n\t\tthis.serializeUserData( scene, sceneDef );\n\n\t}\n\n\t/**\n\t * Creates a Scene to hold a list of objects and parse it\n\t * @param  {Array} objects List of objects to process\n\t */\n\tprocessObjects( objects ) {\n\n\t\tconst scene = new Scene();\n\t\tscene.name = 'AuxScene';\n\n\t\tfor ( let i = 0; i < objects.length; i ++ ) {\n\n\t\t\t// We push directly to children instead of calling `add` to prevent\n\t\t\t// modify the .parent and break its original scene and hierarchy\n\t\t\tscene.children.push( objects[ i ] );\n\n\t\t}\n\n\t\tthis.processScene( scene );\n\n\t}\n\n\t/**\n\t * @param {THREE.Object3D|Array<THREE.Object3D>} input\n\t */\n\tprocessInput( input ) {\n\n\t\tconst options = this.options;\n\n\t\tinput = input instanceof Array ? input : [ input ];\n\n\t\tthis._invokeAll( function ( ext ) {\n\n\t\t\text.beforeParse && ext.beforeParse( input );\n\n\t\t} );\n\n\t\tconst objectsWithoutScene = [];\n\n\t\tfor ( let i = 0; i < input.length; i ++ ) {\n\n\t\t\tif ( input[ i ] instanceof Scene ) {\n\n\t\t\t\tthis.processScene( input[ i ] );\n\n\t\t\t} else {\n\n\t\t\t\tobjectsWithoutScene.push( input[ i ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( objectsWithoutScene.length > 0 ) this.processObjects( objectsWithoutScene );\n\n\t\tfor ( let i = 0; i < this.skins.length; ++ i ) {\n\n\t\t\tthis.processSkin( this.skins[ i ] );\n\n\t\t}\n\n\t\tfor ( let i = 0; i < options.animations.length; ++ i ) {\n\n\t\t\tthis.processAnimation( options.animations[ i ], input[ 0 ] );\n\n\t\t}\n\n\t\tthis._invokeAll( function ( ext ) {\n\n\t\t\text.afterParse && ext.afterParse( input );\n\n\t\t} );\n\n\t}\n\n\t_invokeAll( func ) {\n\n\t\tfor ( let i = 0, il = this.plugins.length; i < il; i ++ ) {\n\n\t\t\tfunc( this.plugins[ i ] );\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * Punctual Lights Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_lights_punctual\n */\nclass GLTFLightExtension {\n\n\tconstructor( writer ) {\n\n\t\tthis.writer = writer;\n\t\tthis.name = 'KHR_lights_punctual';\n\n\t}\n\n\twriteNode( light, nodeDef ) {\n\n\t\tif ( ! light.isLight ) return;\n\n\t\tif ( ! light.isDirectionalLight && ! light.isPointLight && ! light.isSpotLight ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFExporter: Only directional, point, and spot lights are supported.', light );\n\t\t\treturn;\n\n\t\t}\n\n\t\tconst writer = this.writer;\n\t\tconst json = writer.json;\n\t\tconst extensionsUsed = writer.extensionsUsed;\n\n\t\tconst lightDef = {};\n\n\t\tif ( light.name ) lightDef.name = light.name;\n\n\t\tlightDef.color = light.color.toArray();\n\n\t\tlightDef.intensity = light.intensity;\n\n\t\tif ( light.isDirectionalLight ) {\n\n\t\t\tlightDef.type = 'directional';\n\n\t\t} else if ( light.isPointLight ) {\n\n\t\t\tlightDef.type = 'point';\n\n\t\t\tif ( light.distance > 0 ) lightDef.range = light.distance;\n\n\t\t} else if ( light.isSpotLight ) {\n\n\t\t\tlightDef.type = 'spot';\n\n\t\t\tif ( light.distance > 0 ) lightDef.range = light.distance;\n\n\t\t\tlightDef.spot = {};\n\t\t\tlightDef.spot.innerConeAngle = ( 1.0 - light.penumbra ) * light.angle;\n\t\t\tlightDef.spot.outerConeAngle = light.angle;\n\n\t\t}\n\n\t\tif ( light.decay !== undefined && light.decay !== 2 ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, '\n\t\t\t\t+ 'and expects light.decay=2.' );\n\n\t\t}\n\n\t\tif ( light.target\n\t\t\t\t&& ( light.target.parent !== light\n\t\t\t\t|| light.target.position.x !== 0\n\t\t\t\t|| light.target.position.y !== 0\n\t\t\t\t|| light.target.position.z !== - 1 ) ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFExporter: Light direction may be lost. For best results, '\n\t\t\t\t+ 'make light.target a child of the light with position 0,0,-1.' );\n\n\t\t}\n\n\t\tif ( ! extensionsUsed[ this.name ] ) {\n\n\t\t\tjson.extensions = json.extensions || {};\n\t\t\tjson.extensions[ this.name ] = { lights: [] };\n\t\t\textensionsUsed[ this.name ] = true;\n\n\t\t}\n\n\t\tconst lights = json.extensions[ this.name ].lights;\n\t\tlights.push( lightDef );\n\n\t\tnodeDef.extensions = nodeDef.extensions || {};\n\t\tnodeDef.extensions[ this.name ] = { light: lights.length - 1 };\n\n\t}\n\n}\n\n/**\n * Unlit Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_unlit\n */\nclass GLTFMaterialsUnlitExtension {\n\n\tconstructor( writer ) {\n\n\t\tthis.writer = writer;\n\t\tthis.name = 'KHR_materials_unlit';\n\n\t}\n\n\twriteMaterial( material, materialDef ) {\n\n\t\tif ( ! material.isMeshBasicMaterial ) return;\n\n\t\tconst writer = this.writer;\n\t\tconst extensionsUsed = writer.extensionsUsed;\n\n\t\tmaterialDef.extensions = materialDef.extensions || {};\n\t\tmaterialDef.extensions[ this.name ] = {};\n\n\t\textensionsUsed[ this.name ] = true;\n\n\t\tmaterialDef.pbrMetallicRoughness.metallicFactor = 0.0;\n\t\tmaterialDef.pbrMetallicRoughness.roughnessFactor = 0.9;\n\n\t}\n\n}\n\n/**\n * Clearcoat Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_clearcoat\n */\nclass GLTFMaterialsClearcoatExtension {\n\n\tconstructor( writer ) {\n\n\t\tthis.writer = writer;\n\t\tthis.name = 'KHR_materials_clearcoat';\n\n\t}\n\n\twriteMaterial( material, materialDef ) {\n\n\t\tif ( ! material.isMeshPhysicalMaterial || material.clearcoat === 0 ) return;\n\n\t\tconst writer = this.writer;\n\t\tconst extensionsUsed = writer.extensionsUsed;\n\n\t\tconst extensionDef = {};\n\n\t\textensionDef.clearcoatFactor = material.clearcoat;\n\n\t\tif ( material.clearcoatMap ) {\n\n\t\t\tconst clearcoatMapDef = {\n\t\t\t\tindex: writer.processTexture( material.clearcoatMap ),\n\t\t\t\ttexCoord: material.clearcoatMap.channel\n\t\t\t};\n\t\t\twriter.applyTextureTransform( clearcoatMapDef, material.clearcoatMap );\n\t\t\textensionDef.clearcoatTexture = clearcoatMapDef;\n\n\t\t}\n\n\t\textensionDef.clearcoatRoughnessFactor = material.clearcoatRoughness;\n\n\t\tif ( material.clearcoatRoughnessMap ) {\n\n\t\t\tconst clearcoatRoughnessMapDef = {\n\t\t\t\tindex: writer.processTexture( material.clearcoatRoughnessMap ),\n\t\t\t\ttexCoord: material.clearcoatRoughnessMap.channel\n\t\t\t};\n\t\t\twriter.applyTextureTransform( clearcoatRoughnessMapDef, material.clearcoatRoughnessMap );\n\t\t\textensionDef.clearcoatRoughnessTexture = clearcoatRoughnessMapDef;\n\n\t\t}\n\n\t\tif ( material.clearcoatNormalMap ) {\n\n\t\t\tconst clearcoatNormalMapDef = {\n\t\t\t\tindex: writer.processTexture( material.clearcoatNormalMap ),\n\t\t\t\ttexCoord: material.clearcoatNormalMap.channel\n\t\t\t};\n\t\t\twriter.applyTextureTransform( clearcoatNormalMapDef, material.clearcoatNormalMap );\n\t\t\textensionDef.clearcoatNormalTexture = clearcoatNormalMapDef;\n\n\t\t}\n\n\t\tmaterialDef.extensions = materialDef.extensions || {};\n\t\tmaterialDef.extensions[ this.name ] = extensionDef;\n\n\t\textensionsUsed[ this.name ] = true;\n\n\n\t}\n\n}\n\n/**\n * Iridescence Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_iridescence\n */\nclass GLTFMaterialsIridescenceExtension {\n\n\tconstructor( writer ) {\n\n\t\tthis.writer = writer;\n\t\tthis.name = 'KHR_materials_iridescence';\n\n\t}\n\n\twriteMaterial( material, materialDef ) {\n\n\t\tif ( ! material.isMeshPhysicalMaterial || material.iridescence === 0 ) return;\n\n\t\tconst writer = this.writer;\n\t\tconst extensionsUsed = writer.extensionsUsed;\n\n\t\tconst extensionDef = {};\n\n\t\textensionDef.iridescenceFactor = material.iridescence;\n\n\t\tif ( material.iridescenceMap ) {\n\n\t\t\tconst iridescenceMapDef = {\n\t\t\t\tindex: writer.processTexture( material.iridescenceMap ),\n\t\t\t\ttexCoord: material.iridescenceMap.channel\n\t\t\t};\n\t\t\twriter.applyTextureTransform( iridescenceMapDef, material.iridescenceMap );\n\t\t\textensionDef.iridescenceTexture = iridescenceMapDef;\n\n\t\t}\n\n\t\textensionDef.iridescenceIor = material.iridescenceIOR;\n\t\textensionDef.iridescenceThicknessMinimum = material.iridescenceThicknessRange[ 0 ];\n\t\textensionDef.iridescenceThicknessMaximum = material.iridescenceThicknessRange[ 1 ];\n\n\t\tif ( material.iridescenceThicknessMap ) {\n\n\t\t\tconst iridescenceThicknessMapDef = {\n\t\t\t\tindex: writer.processTexture( material.iridescenceThicknessMap ),\n\t\t\t\ttexCoord: material.iridescenceThicknessMap.channel\n\t\t\t};\n\t\t\twriter.applyTextureTransform( iridescenceThicknessMapDef, material.iridescenceThicknessMap );\n\t\t\textensionDef.iridescenceThicknessTexture = iridescenceThicknessMapDef;\n\n\t\t}\n\n\t\tmaterialDef.extensions = materialDef.extensions || {};\n\t\tmaterialDef.extensions[ this.name ] = extensionDef;\n\n\t\textensionsUsed[ this.name ] = true;\n\n\t}\n\n}\n\n/**\n * Transmission Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_transmission\n */\nclass GLTFMaterialsTransmissionExtension {\n\n\tconstructor( writer ) {\n\n\t\tthis.writer = writer;\n\t\tthis.name = 'KHR_materials_transmission';\n\n\t}\n\n\twriteMaterial( material, materialDef ) {\n\n\t\tif ( ! material.isMeshPhysicalMaterial || material.transmission === 0 ) return;\n\n\t\tconst writer = this.writer;\n\t\tconst extensionsUsed = writer.extensionsUsed;\n\n\t\tconst extensionDef = {};\n\n\t\textensionDef.transmissionFactor = material.transmission;\n\n\t\tif ( material.transmissionMap ) {\n\n\t\t\tconst transmissionMapDef = {\n\t\t\t\tindex: writer.processTexture( material.transmissionMap ),\n\t\t\t\ttexCoord: material.transmissionMap.channel\n\t\t\t};\n\t\t\twriter.applyTextureTransform( transmissionMapDef, material.transmissionMap );\n\t\t\textensionDef.transmissionTexture = transmissionMapDef;\n\n\t\t}\n\n\t\tmaterialDef.extensions = materialDef.extensions || {};\n\t\tmaterialDef.extensions[ this.name ] = extensionDef;\n\n\t\textensionsUsed[ this.name ] = true;\n\n\t}\n\n}\n\n/**\n * Materials Volume Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_volume\n */\nclass GLTFMaterialsVolumeExtension {\n\n\tconstructor( writer ) {\n\n\t\tthis.writer = writer;\n\t\tthis.name = 'KHR_materials_volume';\n\n\t}\n\n\twriteMaterial( material, materialDef ) {\n\n\t\tif ( ! material.isMeshPhysicalMaterial || material.transmission === 0 ) return;\n\n\t\tconst writer = this.writer;\n\t\tconst extensionsUsed = writer.extensionsUsed;\n\n\t\tconst extensionDef = {};\n\n\t\textensionDef.thicknessFactor = material.thickness;\n\n\t\tif ( material.thicknessMap ) {\n\n\t\t\tconst thicknessMapDef = {\n\t\t\t\tindex: writer.processTexture( material.thicknessMap ),\n\t\t\t\ttexCoord: material.thicknessMap.channel\n\t\t\t};\n\t\t\twriter.applyTextureTransform( thicknessMapDef, material.thicknessMap );\n\t\t\textensionDef.thicknessTexture = thicknessMapDef;\n\n\t\t}\n\n\t\textensionDef.attenuationDistance = material.attenuationDistance;\n\t\textensionDef.attenuationColor = material.attenuationColor.toArray();\n\n\t\tmaterialDef.extensions = materialDef.extensions || {};\n\t\tmaterialDef.extensions[ this.name ] = extensionDef;\n\n\t\textensionsUsed[ this.name ] = true;\n\n\t}\n\n}\n\n/**\n * Materials ior Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_ior\n */\nclass GLTFMaterialsIorExtension {\n\n\tconstructor( writer ) {\n\n\t\tthis.writer = writer;\n\t\tthis.name = 'KHR_materials_ior';\n\n\t}\n\n\twriteMaterial( material, materialDef ) {\n\n\t\tif ( ! material.isMeshPhysicalMaterial || material.ior === 1.5 ) return;\n\n\t\tconst writer = this.writer;\n\t\tconst extensionsUsed = writer.extensionsUsed;\n\n\t\tconst extensionDef = {};\n\n\t\textensionDef.ior = material.ior;\n\n\t\tmaterialDef.extensions = materialDef.extensions || {};\n\t\tmaterialDef.extensions[ this.name ] = extensionDef;\n\n\t\textensionsUsed[ this.name ] = true;\n\n\t}\n\n}\n\n/**\n * Materials specular Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_specular\n */\nclass GLTFMaterialsSpecularExtension {\n\n\tconstructor( writer ) {\n\n\t\tthis.writer = writer;\n\t\tthis.name = 'KHR_materials_specular';\n\n\t}\n\n\twriteMaterial( material, materialDef ) {\n\n\t\tif ( ! material.isMeshPhysicalMaterial || ( material.specularIntensity === 1.0 &&\n\t\t       material.specularColor.equals( DEFAULT_SPECULAR_COLOR ) &&\n\t\t     ! material.specularIntensityMap && ! material.specularColorTexture ) ) return;\n\n\t\tconst writer = this.writer;\n\t\tconst extensionsUsed = writer.extensionsUsed;\n\n\t\tconst extensionDef = {};\n\n\t\tif ( material.specularIntensityMap ) {\n\n\t\t\tconst specularIntensityMapDef = {\n\t\t\t\tindex: writer.processTexture( material.specularIntensityMap ),\n\t\t\t\ttexCoord: material.specularIntensityMap.channel\n\t\t\t};\n\t\t\twriter.applyTextureTransform( specularIntensityMapDef, material.specularIntensityMap );\n\t\t\textensionDef.specularTexture = specularIntensityMapDef;\n\n\t\t}\n\n\t\tif ( material.specularColorMap ) {\n\n\t\t\tconst specularColorMapDef = {\n\t\t\t\tindex: writer.processTexture( material.specularColorMap ),\n\t\t\t\ttexCoord: material.specularColorMap.channel\n\t\t\t};\n\t\t\twriter.applyTextureTransform( specularColorMapDef, material.specularColorMap );\n\t\t\textensionDef.specularColorTexture = specularColorMapDef;\n\n\t\t}\n\n\t\textensionDef.specularFactor = material.specularIntensity;\n\t\textensionDef.specularColorFactor = material.specularColor.toArray();\n\n\t\tmaterialDef.extensions = materialDef.extensions || {};\n\t\tmaterialDef.extensions[ this.name ] = extensionDef;\n\n\t\textensionsUsed[ this.name ] = true;\n\n\t}\n\n}\n\n/**\n * Sheen Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/main/extensions/2.0/Khronos/KHR_materials_sheen\n */\nclass GLTFMaterialsSheenExtension {\n\n\tconstructor( writer ) {\n\n\t\tthis.writer = writer;\n\t\tthis.name = 'KHR_materials_sheen';\n\n\t}\n\n\twriteMaterial( material, materialDef ) {\n\n\t\tif ( ! material.isMeshPhysicalMaterial || material.sheen == 0.0 ) return;\n\n\t\tconst writer = this.writer;\n\t\tconst extensionsUsed = writer.extensionsUsed;\n\n\t\tconst extensionDef = {};\n\n\t\tif ( material.sheenRoughnessMap ) {\n\n\t\t\tconst sheenRoughnessMapDef = {\n\t\t\t\tindex: writer.processTexture( material.sheenRoughnessMap ),\n\t\t\t\ttexCoord: material.sheenRoughnessMap.channel\n\t\t\t};\n\t\t\twriter.applyTextureTransform( sheenRoughnessMapDef, material.sheenRoughnessMap );\n\t\t\textensionDef.sheenRoughnessTexture = sheenRoughnessMapDef;\n\n\t\t}\n\n\t\tif ( material.sheenColorMap ) {\n\n\t\t\tconst sheenColorMapDef = {\n\t\t\t\tindex: writer.processTexture( material.sheenColorMap ),\n\t\t\t\ttexCoord: material.sheenColorMap.channel\n\t\t\t};\n\t\t\twriter.applyTextureTransform( sheenColorMapDef, material.sheenColorMap );\n\t\t\textensionDef.sheenColorTexture = sheenColorMapDef;\n\n\t\t}\n\n\t\textensionDef.sheenRoughnessFactor = material.sheenRoughness;\n\t\textensionDef.sheenColorFactor = material.sheenColor.toArray();\n\n\t\tmaterialDef.extensions = materialDef.extensions || {};\n\t\tmaterialDef.extensions[ this.name ] = extensionDef;\n\n\t\textensionsUsed[ this.name ] = true;\n\n\t}\n\n}\n\n/**\n * Anisotropy Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/main/extensions/2.0/Khronos/KHR_materials_anisotropy\n */\nclass GLTFMaterialsAnisotropyExtension {\n\n\tconstructor( writer ) {\n\n\t\tthis.writer = writer;\n\t\tthis.name = 'KHR_materials_anisotropy';\n\n\t}\n\n\twriteMaterial( material, materialDef ) {\n\n\t\tif ( ! material.isMeshPhysicalMaterial || material.anisotropy == 0.0 ) return;\n\n\t\tconst writer = this.writer;\n\t\tconst extensionsUsed = writer.extensionsUsed;\n\n\t\tconst extensionDef = {};\n\n\t\tif ( material.anisotropyMap ) {\n\n\t\t\tconst anisotropyMapDef = { index: writer.processTexture( material.anisotropyMap ) };\n\t\t\twriter.applyTextureTransform( anisotropyMapDef, material.anisotropyMap );\n\t\t\textensionDef.anisotropyTexture = anisotropyMapDef;\n\n\t\t}\n\n\t\textensionDef.anisotropyStrength = material.anisotropy;\n\t\textensionDef.anisotropyRotation = material.anisotropyRotation;\n\n\t\tmaterialDef.extensions = materialDef.extensions || {};\n\t\tmaterialDef.extensions[ this.name ] = extensionDef;\n\n\t\textensionsUsed[ this.name ] = true;\n\n\t}\n\n}\n\n/**\n * Materials Emissive Strength Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/blob/5768b3ce0ef32bc39cdf1bef10b948586635ead3/extensions/2.0/Khronos/KHR_materials_emissive_strength/README.md\n */\nclass GLTFMaterialsEmissiveStrengthExtension {\n\n\tconstructor( writer ) {\n\n\t\tthis.writer = writer;\n\t\tthis.name = 'KHR_materials_emissive_strength';\n\n\t}\n\n\twriteMaterial( material, materialDef ) {\n\n\t\tif ( ! material.isMeshStandardMaterial || material.emissiveIntensity === 1.0 ) return;\n\n\t\tconst writer = this.writer;\n\t\tconst extensionsUsed = writer.extensionsUsed;\n\n\t\tconst extensionDef = {};\n\n\t\textensionDef.emissiveStrength = material.emissiveIntensity;\n\n\t\tmaterialDef.extensions = materialDef.extensions || {};\n\t\tmaterialDef.extensions[ this.name ] = extensionDef;\n\n\t\textensionsUsed[ this.name ] = true;\n\n\t}\n\n}\n\n/**\n * GPU Instancing Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_mesh_gpu_instancing\n */\nclass GLTFMeshGpuInstancing {\n\n\tconstructor( writer ) {\n\n\t\tthis.writer = writer;\n\t\tthis.name = 'EXT_mesh_gpu_instancing';\n\n\t}\n\n\twriteNode( object, nodeDef ) {\n\n\t\tif ( ! object.isInstancedMesh ) return;\n\n\t\tconst writer = this.writer;\n\n\t\tconst mesh = object;\n\n\t\tconst translationAttr = new Float32Array( mesh.count * 3 );\n\t\tconst rotationAttr = new Float32Array( mesh.count * 4 );\n\t\tconst scaleAttr = new Float32Array( mesh.count * 3 );\n\n\t\tconst matrix = new Matrix4();\n\t\tconst position = new Vector3();\n\t\tconst quaternion = new Quaternion();\n\t\tconst scale = new Vector3();\n\n\t\tfor ( let i = 0; i < mesh.count; i ++ ) {\n\n\t\t\tmesh.getMatrixAt( i, matrix );\n\t\t\tmatrix.decompose( position, quaternion, scale );\n\n\t\t\tposition.toArray( translationAttr, i * 3 );\n\t\t\tquaternion.toArray( rotationAttr, i * 4 );\n\t\t\tscale.toArray( scaleAttr, i * 3 );\n\n\t\t}\n\n\t\tconst attributes = {\n\t\t\tTRANSLATION: writer.processAccessor( new BufferAttribute( translationAttr, 3 ) ),\n\t\t\tROTATION: writer.processAccessor( new BufferAttribute( rotationAttr, 4 ) ),\n\t\t\tSCALE: writer.processAccessor( new BufferAttribute( scaleAttr, 3 ) ),\n\t\t};\n\n\t\tif ( mesh.instanceColor )\n\t\t\tattributes._COLOR_0 = writer.processAccessor( mesh.instanceColor );\n\n\t\tnodeDef.extensions = nodeDef.extensions || {};\n\t\tnodeDef.extensions[ this.name ] = { attributes };\n\n\t\twriter.extensionsUsed[ this.name ] = true;\n\t\twriter.extensionsRequired[ this.name ] = true;\n\n\t}\n\n}\n\n/**\n * Static utility functions\n */\nGLTFExporter.Utils = {\n\n\tinsertKeyframe: function ( track, time ) {\n\n\t\tconst tolerance = 0.001; // 1ms\n\t\tconst valueSize = track.getValueSize();\n\n\t\tconst times = new track.TimeBufferType( track.times.length + 1 );\n\t\tconst values = new track.ValueBufferType( track.values.length + valueSize );\n\t\tconst interpolant = track.createInterpolant( new track.ValueBufferType( valueSize ) );\n\n\t\tlet index;\n\n\t\tif ( track.times.length === 0 ) {\n\n\t\t\ttimes[ 0 ] = time;\n\n\t\t\tfor ( let i = 0; i < valueSize; i ++ ) {\n\n\t\t\t\tvalues[ i ] = 0;\n\n\t\t\t}\n\n\t\t\tindex = 0;\n\n\t\t} else if ( time < track.times[ 0 ] ) {\n\n\t\t\tif ( Math.abs( track.times[ 0 ] - time ) < tolerance ) return 0;\n\n\t\t\ttimes[ 0 ] = time;\n\t\t\ttimes.set( track.times, 1 );\n\n\t\t\tvalues.set( interpolant.evaluate( time ), 0 );\n\t\t\tvalues.set( track.values, valueSize );\n\n\t\t\tindex = 0;\n\n\t\t} else if ( time > track.times[ track.times.length - 1 ] ) {\n\n\t\t\tif ( Math.abs( track.times[ track.times.length - 1 ] - time ) < tolerance ) {\n\n\t\t\t\treturn track.times.length - 1;\n\n\t\t\t}\n\n\t\t\ttimes[ times.length - 1 ] = time;\n\t\t\ttimes.set( track.times, 0 );\n\n\t\t\tvalues.set( track.values, 0 );\n\t\t\tvalues.set( interpolant.evaluate( time ), track.values.length );\n\n\t\t\tindex = times.length - 1;\n\n\t\t} else {\n\n\t\t\tfor ( let i = 0; i < track.times.length; i ++ ) {\n\n\t\t\t\tif ( Math.abs( track.times[ i ] - time ) < tolerance ) return i;\n\n\t\t\t\tif ( track.times[ i ] < time && track.times[ i + 1 ] > time ) {\n\n\t\t\t\t\ttimes.set( track.times.slice( 0, i + 1 ), 0 );\n\t\t\t\t\ttimes[ i + 1 ] = time;\n\t\t\t\t\ttimes.set( track.times.slice( i + 1 ), i + 2 );\n\n\t\t\t\t\tvalues.set( track.values.slice( 0, ( i + 1 ) * valueSize ), 0 );\n\t\t\t\t\tvalues.set( interpolant.evaluate( time ), ( i + 1 ) * valueSize );\n\t\t\t\t\tvalues.set( track.values.slice( ( i + 1 ) * valueSize ), ( i + 2 ) * valueSize );\n\n\t\t\t\t\tindex = i + 1;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\ttrack.times = times;\n\t\ttrack.values = values;\n\n\t\treturn index;\n\n\t},\n\n\tmergeMorphTargetTracks: function ( clip, root ) {\n\n\t\tconst tracks = [];\n\t\tconst mergedTracks = {};\n\t\tconst sourceTracks = clip.tracks;\n\n\t\tfor ( let i = 0; i < sourceTracks.length; ++ i ) {\n\n\t\t\tlet sourceTrack = sourceTracks[ i ];\n\t\t\tconst sourceTrackBinding = PropertyBinding.parseTrackName( sourceTrack.name );\n\t\t\tconst sourceTrackNode = PropertyBinding.findNode( root, sourceTrackBinding.nodeName );\n\n\t\t\tif ( sourceTrackBinding.propertyName !== 'morphTargetInfluences' || sourceTrackBinding.propertyIndex === undefined ) {\n\n\t\t\t\t// Tracks that don't affect morph targets, or that affect all morph targets together, can be left as-is.\n\t\t\t\ttracks.push( sourceTrack );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tif ( sourceTrack.createInterpolant !== sourceTrack.InterpolantFactoryMethodDiscrete\n\t\t\t\t&& sourceTrack.createInterpolant !== sourceTrack.InterpolantFactoryMethodLinear ) {\n\n\t\t\t\tif ( sourceTrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline ) {\n\n\t\t\t\t\t// This should never happen, because glTF morph target animations\n\t\t\t\t\t// affect all targets already.\n\t\t\t\t\tthrow new Error( 'THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.' );\n\n\t\t\t\t}\n\n\t\t\t\tconsole.warn( 'THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead.' );\n\n\t\t\t\tsourceTrack = sourceTrack.clone();\n\t\t\t\tsourceTrack.setInterpolation( InterpolateLinear );\n\n\t\t\t}\n\n\t\t\tconst targetCount = sourceTrackNode.morphTargetInfluences.length;\n\t\t\tconst targetIndex = sourceTrackNode.morphTargetDictionary[ sourceTrackBinding.propertyIndex ];\n\n\t\t\tif ( targetIndex === undefined ) {\n\n\t\t\t\tthrow new Error( 'THREE.GLTFExporter: Morph target name not found: ' + sourceTrackBinding.propertyIndex );\n\n\t\t\t}\n\n\t\t\tlet mergedTrack;\n\n\t\t\t// If this is the first time we've seen this object, create a new\n\t\t\t// track to store merged keyframe data for each morph target.\n\t\t\tif ( mergedTracks[ sourceTrackNode.uuid ] === undefined ) {\n\n\t\t\t\tmergedTrack = sourceTrack.clone();\n\n\t\t\t\tconst values = new mergedTrack.ValueBufferType( targetCount * mergedTrack.times.length );\n\n\t\t\t\tfor ( let j = 0; j < mergedTrack.times.length; j ++ ) {\n\n\t\t\t\t\tvalues[ j * targetCount + targetIndex ] = mergedTrack.values[ j ];\n\n\t\t\t\t}\n\n\t\t\t\t// We need to take into consideration the intended target node\n\t\t\t\t// of our original un-merged morphTarget animation.\n\t\t\t\tmergedTrack.name = ( sourceTrackBinding.nodeName || '' ) + '.morphTargetInfluences';\n\t\t\t\tmergedTrack.values = values;\n\n\t\t\t\tmergedTracks[ sourceTrackNode.uuid ] = mergedTrack;\n\t\t\t\ttracks.push( mergedTrack );\n\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tconst sourceInterpolant = sourceTrack.createInterpolant( new sourceTrack.ValueBufferType( 1 ) );\n\n\t\t\tmergedTrack = mergedTracks[ sourceTrackNode.uuid ];\n\n\t\t\t// For every existing keyframe of the merged track, write a (possibly\n\t\t\t// interpolated) value from the source track.\n\t\t\tfor ( let j = 0; j < mergedTrack.times.length; j ++ ) {\n\n\t\t\t\tmergedTrack.values[ j * targetCount + targetIndex ] = sourceInterpolant.evaluate( mergedTrack.times[ j ] );\n\n\t\t\t}\n\n\t\t\t// For every existing keyframe of the source track, write a (possibly\n\t\t\t// new) keyframe to the merged track. Values from the previous loop may\n\t\t\t// be written again, but keyframes are de-duplicated.\n\t\t\tfor ( let j = 0; j < sourceTrack.times.length; j ++ ) {\n\n\t\t\t\tconst keyframeIndex = this.insertKeyframe( mergedTrack, sourceTrack.times[ j ] );\n\t\t\t\tmergedTrack.values[ keyframeIndex * targetCount + targetIndex ] = sourceTrack.values[ j ];\n\n\t\t\t}\n\n\t\t}\n\n\t\tclip.tracks = tracks;\n\n\t\treturn clip;\n\n\t}\n\n};\n\nexport { GLTFExporter };\n","import {\n\tEventDispatcher,\n\tMatrix4,\n\tPlane,\n\tRaycaster,\n\tVector2,\n\tVector3\n} from 'three';\n\nconst _plane = new Plane();\nconst _raycaster = new Raycaster();\n\nconst _pointer = new Vector2();\nconst _offset = new Vector3();\nconst _intersection = new Vector3();\nconst _worldPosition = new Vector3();\nconst _inverseMatrix = new Matrix4();\n\nclass DragControls extends EventDispatcher {\n\n\tconstructor( _objects, _camera, _domElement ) {\n\n\t\tsuper();\n\n\t\t_domElement.style.touchAction = 'none'; // disable touch scroll\n\n\t\tlet _selected = null, _hovered = null;\n\n\t\tconst _intersections = [];\n\n\t\t//\n\n\t\tconst scope = this;\n\n\t\tfunction activate() {\n\n\t\t\t_domElement.addEventListener( 'pointermove', onPointerMove );\n\t\t\t_domElement.addEventListener( 'pointerdown', onPointerDown );\n\t\t\t_domElement.addEventListener( 'pointerup', onPointerCancel );\n\t\t\t_domElement.addEventListener( 'pointerleave', onPointerCancel );\n\n\t\t}\n\n\t\tfunction deactivate() {\n\n\t\t\t_domElement.removeEventListener( 'pointermove', onPointerMove );\n\t\t\t_domElement.removeEventListener( 'pointerdown', onPointerDown );\n\t\t\t_domElement.removeEventListener( 'pointerup', onPointerCancel );\n\t\t\t_domElement.removeEventListener( 'pointerleave', onPointerCancel );\n\n\t\t\t_domElement.style.cursor = '';\n\n\t\t}\n\n\t\tfunction dispose() {\n\n\t\t\tdeactivate();\n\n\t\t}\n\n\t\tfunction getObjects() {\n\n\t\t\treturn _objects;\n\n\t\t}\n\n\t\tfunction getRaycaster() {\n\n\t\t\treturn _raycaster;\n\n\t\t}\n\n\t\tfunction onPointerMove( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tupdatePointer( event );\n\n\t\t\t_raycaster.setFromCamera( _pointer, _camera );\n\n\t\t\tif ( _selected ) {\n\n\t\t\t\tif ( _raycaster.ray.intersectPlane( _plane, _intersection ) ) {\n\n\t\t\t\t\t_selected.position.copy( _intersection.sub( _offset ).applyMatrix4( _inverseMatrix ) );\n\n\t\t\t\t}\n\n\t\t\t\tscope.dispatchEvent( { type: 'drag', object: _selected } );\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\t// hover support\n\n\t\t\tif ( event.pointerType === 'mouse' || event.pointerType === 'pen' ) {\n\n\t\t\t\t_intersections.length = 0;\n\n\t\t\t\t_raycaster.setFromCamera( _pointer, _camera );\n\t\t\t\t_raycaster.intersectObjects( _objects, scope.recursive, _intersections );\n\n\t\t\t\tif ( _intersections.length > 0 ) {\n\n\t\t\t\t\tconst object = _intersections[ 0 ].object;\n\n\t\t\t\t\t_plane.setFromNormalAndCoplanarPoint( _camera.getWorldDirection( _plane.normal ), _worldPosition.setFromMatrixPosition( object.matrixWorld ) );\n\n\t\t\t\t\tif ( _hovered !== object && _hovered !== null ) {\n\n\t\t\t\t\t\tscope.dispatchEvent( { type: 'hoveroff', object: _hovered } );\n\n\t\t\t\t\t\t_domElement.style.cursor = 'auto';\n\t\t\t\t\t\t_hovered = null;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( _hovered !== object ) {\n\n\t\t\t\t\t\tscope.dispatchEvent( { type: 'hoveron', object: object } );\n\n\t\t\t\t\t\t_domElement.style.cursor = 'pointer';\n\t\t\t\t\t\t_hovered = object;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( _hovered !== null ) {\n\n\t\t\t\t\t\tscope.dispatchEvent( { type: 'hoveroff', object: _hovered } );\n\n\t\t\t\t\t\t_domElement.style.cursor = 'auto';\n\t\t\t\t\t\t_hovered = null;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onPointerDown( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tupdatePointer( event );\n\n\t\t\t_intersections.length = 0;\n\n\t\t\t_raycaster.setFromCamera( _pointer, _camera );\n\t\t\t_raycaster.intersectObjects( _objects, scope.recursive, _intersections );\n\n\t\t\tif ( _intersections.length > 0 ) {\n\n\t\t\t\t_selected = ( scope.transformGroup === true ) ? _objects[ 0 ] : _intersections[ 0 ].object;\n\n\t\t\t\t_plane.setFromNormalAndCoplanarPoint( _camera.getWorldDirection( _plane.normal ), _worldPosition.setFromMatrixPosition( _selected.matrixWorld ) );\n\n\t\t\t\tif ( _raycaster.ray.intersectPlane( _plane, _intersection ) ) {\n\n\t\t\t\t\t_inverseMatrix.copy( _selected.parent.matrixWorld ).invert();\n\t\t\t\t\t_offset.copy( _intersection ).sub( _worldPosition.setFromMatrixPosition( _selected.matrixWorld ) );\n\n\t\t\t\t}\n\n\t\t\t\t_domElement.style.cursor = 'move';\n\n\t\t\t\tscope.dispatchEvent( { type: 'dragstart', object: _selected } );\n\n\t\t\t}\n\n\n\t\t}\n\n\t\tfunction onPointerCancel() {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tif ( _selected ) {\n\n\t\t\t\tscope.dispatchEvent( { type: 'dragend', object: _selected } );\n\n\t\t\t\t_selected = null;\n\n\t\t\t}\n\n\t\t\t_domElement.style.cursor = _hovered ? 'pointer' : 'auto';\n\n\t\t}\n\n\t\tfunction updatePointer( event ) {\n\n\t\t\tconst rect = _domElement.getBoundingClientRect();\n\n\t\t\t_pointer.x = ( event.clientX - rect.left ) / rect.width * 2 - 1;\n\t\t\t_pointer.y = - ( event.clientY - rect.top ) / rect.height * 2 + 1;\n\n\t\t}\n\n\t\tactivate();\n\n\t\t// API\n\n\t\tthis.enabled = true;\n\t\tthis.recursive = true;\n\t\tthis.transformGroup = false;\n\n\t\tthis.activate = activate;\n\t\tthis.deactivate = deactivate;\n\t\tthis.dispose = dispose;\n\t\tthis.getObjects = getObjects;\n\t\tthis.getRaycaster = getRaycaster;\n\n\t}\n\n}\n\nexport { DragControls };\n","/**\n * The Ease class provides a collection of easing functions for use with tween.js.\n */\nvar Easing = {\n    Linear: {\n        None: function (amount) {\n            return amount;\n        },\n    },\n    Quadratic: {\n        In: function (amount) {\n            return amount * amount;\n        },\n        Out: function (amount) {\n            return amount * (2 - amount);\n        },\n        InOut: function (amount) {\n            if ((amount *= 2) < 1) {\n                return 0.5 * amount * amount;\n            }\n            return -0.5 * (--amount * (amount - 2) - 1);\n        },\n    },\n    Cubic: {\n        In: function (amount) {\n            return amount * amount * amount;\n        },\n        Out: function (amount) {\n            return --amount * amount * amount + 1;\n        },\n        InOut: function (amount) {\n            if ((amount *= 2) < 1) {\n                return 0.5 * amount * amount * amount;\n            }\n            return 0.5 * ((amount -= 2) * amount * amount + 2);\n        },\n    },\n    Quartic: {\n        In: function (amount) {\n            return amount * amount * amount * amount;\n        },\n        Out: function (amount) {\n            return 1 - --amount * amount * amount * amount;\n        },\n        InOut: function (amount) {\n            if ((amount *= 2) < 1) {\n                return 0.5 * amount * amount * amount * amount;\n            }\n            return -0.5 * ((amount -= 2) * amount * amount * amount - 2);\n        },\n    },\n    Quintic: {\n        In: function (amount) {\n            return amount * amount * amount * amount * amount;\n        },\n        Out: function (amount) {\n            return --amount * amount * amount * amount * amount + 1;\n        },\n        InOut: function (amount) {\n            if ((amount *= 2) < 1) {\n                return 0.5 * amount * amount * amount * amount * amount;\n            }\n            return 0.5 * ((amount -= 2) * amount * amount * amount * amount + 2);\n        },\n    },\n    Sinusoidal: {\n        In: function (amount) {\n            return 1 - Math.cos((amount * Math.PI) / 2);\n        },\n        Out: function (amount) {\n            return Math.sin((amount * Math.PI) / 2);\n        },\n        InOut: function (amount) {\n            return 0.5 * (1 - Math.cos(Math.PI * amount));\n        },\n    },\n    Exponential: {\n        In: function (amount) {\n            return amount === 0 ? 0 : Math.pow(1024, amount - 1);\n        },\n        Out: function (amount) {\n            return amount === 1 ? 1 : 1 - Math.pow(2, -10 * amount);\n        },\n        InOut: function (amount) {\n            if (amount === 0) {\n                return 0;\n            }\n            if (amount === 1) {\n                return 1;\n            }\n            if ((amount *= 2) < 1) {\n                return 0.5 * Math.pow(1024, amount - 1);\n            }\n            return 0.5 * (-Math.pow(2, -10 * (amount - 1)) + 2);\n        },\n    },\n    Circular: {\n        In: function (amount) {\n            return 1 - Math.sqrt(1 - amount * amount);\n        },\n        Out: function (amount) {\n            return Math.sqrt(1 - --amount * amount);\n        },\n        InOut: function (amount) {\n            if ((amount *= 2) < 1) {\n                return -0.5 * (Math.sqrt(1 - amount * amount) - 1);\n            }\n            return 0.5 * (Math.sqrt(1 - (amount -= 2) * amount) + 1);\n        },\n    },\n    Elastic: {\n        In: function (amount) {\n            if (amount === 0) {\n                return 0;\n            }\n            if (amount === 1) {\n                return 1;\n            }\n            return -Math.pow(2, 10 * (amount - 1)) * Math.sin((amount - 1.1) * 5 * Math.PI);\n        },\n        Out: function (amount) {\n            if (amount === 0) {\n                return 0;\n            }\n            if (amount === 1) {\n                return 1;\n            }\n            return Math.pow(2, -10 * amount) * Math.sin((amount - 0.1) * 5 * Math.PI) + 1;\n        },\n        InOut: function (amount) {\n            if (amount === 0) {\n                return 0;\n            }\n            if (amount === 1) {\n                return 1;\n            }\n            amount *= 2;\n            if (amount < 1) {\n                return -0.5 * Math.pow(2, 10 * (amount - 1)) * Math.sin((amount - 1.1) * 5 * Math.PI);\n            }\n            return 0.5 * Math.pow(2, -10 * (amount - 1)) * Math.sin((amount - 1.1) * 5 * Math.PI) + 1;\n        },\n    },\n    Back: {\n        In: function (amount) {\n            var s = 1.70158;\n            return amount * amount * ((s + 1) * amount - s);\n        },\n        Out: function (amount) {\n            var s = 1.70158;\n            return --amount * amount * ((s + 1) * amount + s) + 1;\n        },\n        InOut: function (amount) {\n            var s = 1.70158 * 1.525;\n            if ((amount *= 2) < 1) {\n                return 0.5 * (amount * amount * ((s + 1) * amount - s));\n            }\n            return 0.5 * ((amount -= 2) * amount * ((s + 1) * amount + s) + 2);\n        },\n    },\n    Bounce: {\n        In: function (amount) {\n            return 1 - Easing.Bounce.Out(1 - amount);\n        },\n        Out: function (amount) {\n            if (amount < 1 / 2.75) {\n                return 7.5625 * amount * amount;\n            }\n            else if (amount < 2 / 2.75) {\n                return 7.5625 * (amount -= 1.5 / 2.75) * amount + 0.75;\n            }\n            else if (amount < 2.5 / 2.75) {\n                return 7.5625 * (amount -= 2.25 / 2.75) * amount + 0.9375;\n            }\n            else {\n                return 7.5625 * (amount -= 2.625 / 2.75) * amount + 0.984375;\n            }\n        },\n        InOut: function (amount) {\n            if (amount < 0.5) {\n                return Easing.Bounce.In(amount * 2) * 0.5;\n            }\n            return Easing.Bounce.Out(amount * 2 - 1) * 0.5 + 0.5;\n        },\n    },\n};\n\nvar now;\n// Include a performance.now polyfill.\n// In node.js, use process.hrtime.\n// eslint-disable-next-line\n// @ts-ignore\nif (typeof self === 'undefined' && typeof process !== 'undefined' && process.hrtime) {\n    now = function () {\n        // eslint-disable-next-line\n        // @ts-ignore\n        var time = process.hrtime();\n        // Convert [seconds, nanoseconds] to milliseconds.\n        return time[0] * 1000 + time[1] / 1000000;\n    };\n}\n// In a browser, use self.performance.now if it is available.\nelse if (typeof self !== 'undefined' && self.performance !== undefined && self.performance.now !== undefined) {\n    // This must be bound, because directly assigning this function\n    // leads to an invocation exception in Chrome.\n    now = self.performance.now.bind(self.performance);\n}\n// Use Date.now if it is available.\nelse if (Date.now !== undefined) {\n    now = Date.now;\n}\n// Otherwise, use 'new Date().getTime()'.\nelse {\n    now = function () {\n        return new Date().getTime();\n    };\n}\nvar now$1 = now;\n\n/**\n * Controlling groups of tweens\n *\n * Using the TWEEN singleton to manage your tweens can cause issues in large apps with many components.\n * In these cases, you may want to create your own smaller groups of tween\n */\nvar Group = /** @class */ (function () {\n    function Group() {\n        this._tweens = {};\n        this._tweensAddedDuringUpdate = {};\n    }\n    Group.prototype.getAll = function () {\n        var _this = this;\n        return Object.keys(this._tweens).map(function (tweenId) {\n            return _this._tweens[tweenId];\n        });\n    };\n    Group.prototype.removeAll = function () {\n        this._tweens = {};\n    };\n    Group.prototype.add = function (tween) {\n        this._tweens[tween.getId()] = tween;\n        this._tweensAddedDuringUpdate[tween.getId()] = tween;\n    };\n    Group.prototype.remove = function (tween) {\n        delete this._tweens[tween.getId()];\n        delete this._tweensAddedDuringUpdate[tween.getId()];\n    };\n    Group.prototype.update = function (time, preserve) {\n        if (time === void 0) { time = now$1(); }\n        if (preserve === void 0) { preserve = false; }\n        var tweenIds = Object.keys(this._tweens);\n        if (tweenIds.length === 0) {\n            return false;\n        }\n        // Tweens are updated in \"batches\". If you add a new tween during an\n        // update, then the new tween will be updated in the next batch.\n        // If you remove a tween during an update, it may or may not be updated.\n        // However, if the removed tween was added during the current batch,\n        // then it will not be updated.\n        while (tweenIds.length > 0) {\n            this._tweensAddedDuringUpdate = {};\n            for (var i = 0; i < tweenIds.length; i++) {\n                var tween = this._tweens[tweenIds[i]];\n                var autoStart = !preserve;\n                if (tween && tween.update(time, autoStart) === false && !preserve) {\n                    delete this._tweens[tweenIds[i]];\n                }\n            }\n            tweenIds = Object.keys(this._tweensAddedDuringUpdate);\n        }\n        return true;\n    };\n    return Group;\n}());\n\n/**\n *\n */\nvar Interpolation = {\n    Linear: function (v, k) {\n        var m = v.length - 1;\n        var f = m * k;\n        var i = Math.floor(f);\n        var fn = Interpolation.Utils.Linear;\n        if (k < 0) {\n            return fn(v[0], v[1], f);\n        }\n        if (k > 1) {\n            return fn(v[m], v[m - 1], m - f);\n        }\n        return fn(v[i], v[i + 1 > m ? m : i + 1], f - i);\n    },\n    Bezier: function (v, k) {\n        var b = 0;\n        var n = v.length - 1;\n        var pw = Math.pow;\n        var bn = Interpolation.Utils.Bernstein;\n        for (var i = 0; i <= n; i++) {\n            b += pw(1 - k, n - i) * pw(k, i) * v[i] * bn(n, i);\n        }\n        return b;\n    },\n    CatmullRom: function (v, k) {\n        var m = v.length - 1;\n        var f = m * k;\n        var i = Math.floor(f);\n        var fn = Interpolation.Utils.CatmullRom;\n        if (v[0] === v[m]) {\n            if (k < 0) {\n                i = Math.floor((f = m * (1 + k)));\n            }\n            return fn(v[(i - 1 + m) % m], v[i], v[(i + 1) % m], v[(i + 2) % m], f - i);\n        }\n        else {\n            if (k < 0) {\n                return v[0] - (fn(v[0], v[0], v[1], v[1], -f) - v[0]);\n            }\n            if (k > 1) {\n                return v[m] - (fn(v[m], v[m], v[m - 1], v[m - 1], f - m) - v[m]);\n            }\n            return fn(v[i ? i - 1 : 0], v[i], v[m < i + 1 ? m : i + 1], v[m < i + 2 ? m : i + 2], f - i);\n        }\n    },\n    Utils: {\n        Linear: function (p0, p1, t) {\n            return (p1 - p0) * t + p0;\n        },\n        Bernstein: function (n, i) {\n            var fc = Interpolation.Utils.Factorial;\n            return fc(n) / fc(i) / fc(n - i);\n        },\n        Factorial: (function () {\n            var a = [1];\n            return function (n) {\n                var s = 1;\n                if (a[n]) {\n                    return a[n];\n                }\n                for (var i = n; i > 1; i--) {\n                    s *= i;\n                }\n                a[n] = s;\n                return s;\n            };\n        })(),\n        CatmullRom: function (p0, p1, p2, p3, t) {\n            var v0 = (p2 - p0) * 0.5;\n            var v1 = (p3 - p1) * 0.5;\n            var t2 = t * t;\n            var t3 = t * t2;\n            return (2 * p1 - 2 * p2 + v0 + v1) * t3 + (-3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 + v0 * t + p1;\n        },\n    },\n};\n\n/**\n * Utils\n */\nvar Sequence = /** @class */ (function () {\n    function Sequence() {\n    }\n    Sequence.nextId = function () {\n        return Sequence._nextId++;\n    };\n    Sequence._nextId = 0;\n    return Sequence;\n}());\n\nvar mainGroup = new Group();\n\n/**\n * Tween.js - Licensed under the MIT license\n * https://github.com/tweenjs/tween.js\n * ----------------------------------------------\n *\n * See https://github.com/tweenjs/tween.js/graphs/contributors for the full list of contributors.\n * Thank you all, you're awesome!\n */\nvar Tween = /** @class */ (function () {\n    function Tween(_object, _group) {\n        if (_group === void 0) { _group = mainGroup; }\n        this._object = _object;\n        this._group = _group;\n        this._isPaused = false;\n        this._pauseStart = 0;\n        this._valuesStart = {};\n        this._valuesEnd = {};\n        this._valuesStartRepeat = {};\n        this._duration = 1000;\n        this._initialRepeat = 0;\n        this._repeat = 0;\n        this._yoyo = false;\n        this._isPlaying = false;\n        this._reversed = false;\n        this._delayTime = 0;\n        this._startTime = 0;\n        this._easingFunction = Easing.Linear.None;\n        this._interpolationFunction = Interpolation.Linear;\n        this._chainedTweens = [];\n        this._onStartCallbackFired = false;\n        this._id = Sequence.nextId();\n        this._isChainStopped = false;\n        this._goToEnd = false;\n    }\n    Tween.prototype.getId = function () {\n        return this._id;\n    };\n    Tween.prototype.isPlaying = function () {\n        return this._isPlaying;\n    };\n    Tween.prototype.isPaused = function () {\n        return this._isPaused;\n    };\n    Tween.prototype.to = function (properties, duration) {\n        // TODO? restore this, then update the 07_dynamic_to example to set fox\n        // tween's to on each update. That way the behavior is opt-in (there's\n        // currently no opt-out).\n        // for (const prop in properties) this._valuesEnd[prop] = properties[prop]\n        this._valuesEnd = Object.create(properties);\n        if (duration !== undefined) {\n            this._duration = duration;\n        }\n        return this;\n    };\n    Tween.prototype.duration = function (d) {\n        this._duration = d;\n        return this;\n    };\n    Tween.prototype.start = function (time) {\n        if (this._isPlaying) {\n            return this;\n        }\n        // eslint-disable-next-line\n        this._group && this._group.add(this);\n        this._repeat = this._initialRepeat;\n        if (this._reversed) {\n            // If we were reversed (f.e. using the yoyo feature) then we need to\n            // flip the tween direction back to forward.\n            this._reversed = false;\n            for (var property in this._valuesStartRepeat) {\n                this._swapEndStartRepeatValues(property);\n                this._valuesStart[property] = this._valuesStartRepeat[property];\n            }\n        }\n        this._isPlaying = true;\n        this._isPaused = false;\n        this._onStartCallbackFired = false;\n        this._isChainStopped = false;\n        this._startTime = time !== undefined ? (typeof time === 'string' ? now$1() + parseFloat(time) : time) : now$1();\n        this._startTime += this._delayTime;\n        this._setupProperties(this._object, this._valuesStart, this._valuesEnd, this._valuesStartRepeat);\n        return this;\n    };\n    Tween.prototype._setupProperties = function (_object, _valuesStart, _valuesEnd, _valuesStartRepeat) {\n        for (var property in _valuesEnd) {\n            var startValue = _object[property];\n            var startValueIsArray = Array.isArray(startValue);\n            var propType = startValueIsArray ? 'array' : typeof startValue;\n            var isInterpolationList = !startValueIsArray && Array.isArray(_valuesEnd[property]);\n            // If `to()` specifies a property that doesn't exist in the source object,\n            // we should not set that property in the object\n            if (propType === 'undefined' || propType === 'function') {\n                continue;\n            }\n            // Check if an Array was provided as property value\n            if (isInterpolationList) {\n                var endValues = _valuesEnd[property];\n                if (endValues.length === 0) {\n                    continue;\n                }\n                // handle an array of relative values\n                endValues = endValues.map(this._handleRelativeValue.bind(this, startValue));\n                // Create a local copy of the Array with the start value at the front\n                _valuesEnd[property] = [startValue].concat(endValues);\n            }\n            // handle the deepness of the values\n            if ((propType === 'object' || startValueIsArray) && startValue && !isInterpolationList) {\n                _valuesStart[property] = startValueIsArray ? [] : {};\n                // eslint-disable-next-line\n                for (var prop in startValue) {\n                    // eslint-disable-next-line\n                    // @ts-ignore FIXME?\n                    _valuesStart[property][prop] = startValue[prop];\n                }\n                _valuesStartRepeat[property] = startValueIsArray ? [] : {}; // TODO? repeat nested values? And yoyo? And array values?\n                // eslint-disable-next-line\n                // @ts-ignore FIXME?\n                this._setupProperties(startValue, _valuesStart[property], _valuesEnd[property], _valuesStartRepeat[property]);\n            }\n            else {\n                // Save the starting value, but only once.\n                if (typeof _valuesStart[property] === 'undefined') {\n                    _valuesStart[property] = startValue;\n                }\n                if (!startValueIsArray) {\n                    // eslint-disable-next-line\n                    // @ts-ignore FIXME?\n                    _valuesStart[property] *= 1.0; // Ensures we're using numbers, not strings\n                }\n                if (isInterpolationList) {\n                    // eslint-disable-next-line\n                    // @ts-ignore FIXME?\n                    _valuesStartRepeat[property] = _valuesEnd[property].slice().reverse();\n                }\n                else {\n                    _valuesStartRepeat[property] = _valuesStart[property] || 0;\n                }\n            }\n        }\n    };\n    Tween.prototype.stop = function () {\n        if (!this._isChainStopped) {\n            this._isChainStopped = true;\n            this.stopChainedTweens();\n        }\n        if (!this._isPlaying) {\n            return this;\n        }\n        // eslint-disable-next-line\n        this._group && this._group.remove(this);\n        this._isPlaying = false;\n        this._isPaused = false;\n        if (this._onStopCallback) {\n            this._onStopCallback(this._object);\n        }\n        return this;\n    };\n    Tween.prototype.end = function () {\n        this._goToEnd = true;\n        this.update(Infinity);\n        return this;\n    };\n    Tween.prototype.pause = function (time) {\n        if (time === void 0) { time = now$1(); }\n        if (this._isPaused || !this._isPlaying) {\n            return this;\n        }\n        this._isPaused = true;\n        this._pauseStart = time;\n        // eslint-disable-next-line\n        this._group && this._group.remove(this);\n        return this;\n    };\n    Tween.prototype.resume = function (time) {\n        if (time === void 0) { time = now$1(); }\n        if (!this._isPaused || !this._isPlaying) {\n            return this;\n        }\n        this._isPaused = false;\n        this._startTime += time - this._pauseStart;\n        this._pauseStart = 0;\n        // eslint-disable-next-line\n        this._group && this._group.add(this);\n        return this;\n    };\n    Tween.prototype.stopChainedTweens = function () {\n        for (var i = 0, numChainedTweens = this._chainedTweens.length; i < numChainedTweens; i++) {\n            this._chainedTweens[i].stop();\n        }\n        return this;\n    };\n    Tween.prototype.group = function (group) {\n        this._group = group;\n        return this;\n    };\n    Tween.prototype.delay = function (amount) {\n        this._delayTime = amount;\n        return this;\n    };\n    Tween.prototype.repeat = function (times) {\n        this._initialRepeat = times;\n        this._repeat = times;\n        return this;\n    };\n    Tween.prototype.repeatDelay = function (amount) {\n        this._repeatDelayTime = amount;\n        return this;\n    };\n    Tween.prototype.yoyo = function (yoyo) {\n        this._yoyo = yoyo;\n        return this;\n    };\n    Tween.prototype.easing = function (easingFunction) {\n        this._easingFunction = easingFunction;\n        return this;\n    };\n    Tween.prototype.interpolation = function (interpolationFunction) {\n        this._interpolationFunction = interpolationFunction;\n        return this;\n    };\n    Tween.prototype.chain = function () {\n        var tweens = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            tweens[_i] = arguments[_i];\n        }\n        this._chainedTweens = tweens;\n        return this;\n    };\n    Tween.prototype.onStart = function (callback) {\n        this._onStartCallback = callback;\n        return this;\n    };\n    Tween.prototype.onUpdate = function (callback) {\n        this._onUpdateCallback = callback;\n        return this;\n    };\n    Tween.prototype.onRepeat = function (callback) {\n        this._onRepeatCallback = callback;\n        return this;\n    };\n    Tween.prototype.onComplete = function (callback) {\n        this._onCompleteCallback = callback;\n        return this;\n    };\n    Tween.prototype.onStop = function (callback) {\n        this._onStopCallback = callback;\n        return this;\n    };\n    /**\n     * @returns true if the tween is still playing after the update, false\n     * otherwise (calling update on a paused tween still returns true because\n     * it is still playing, just paused).\n     */\n    Tween.prototype.update = function (time, autoStart) {\n        if (time === void 0) { time = now$1(); }\n        if (autoStart === void 0) { autoStart = true; }\n        if (this._isPaused)\n            return true;\n        var property;\n        var elapsed;\n        var endTime = this._startTime + this._duration;\n        if (!this._goToEnd && !this._isPlaying) {\n            if (time > endTime)\n                return false;\n            if (autoStart)\n                this.start(time);\n        }\n        this._goToEnd = false;\n        if (time < this._startTime) {\n            return true;\n        }\n        if (this._onStartCallbackFired === false) {\n            if (this._onStartCallback) {\n                this._onStartCallback(this._object);\n            }\n            this._onStartCallbackFired = true;\n        }\n        elapsed = (time - this._startTime) / this._duration;\n        elapsed = this._duration === 0 || elapsed > 1 ? 1 : elapsed;\n        var value = this._easingFunction(elapsed);\n        // properties transformations\n        this._updateProperties(this._object, this._valuesStart, this._valuesEnd, value);\n        if (this._onUpdateCallback) {\n            this._onUpdateCallback(this._object, elapsed);\n        }\n        if (elapsed === 1) {\n            if (this._repeat > 0) {\n                if (isFinite(this._repeat)) {\n                    this._repeat--;\n                }\n                // Reassign starting values, restart by making startTime = now\n                for (property in this._valuesStartRepeat) {\n                    if (!this._yoyo && typeof this._valuesEnd[property] === 'string') {\n                        this._valuesStartRepeat[property] =\n                            // eslint-disable-next-line\n                            // @ts-ignore FIXME?\n                            this._valuesStartRepeat[property] + parseFloat(this._valuesEnd[property]);\n                    }\n                    if (this._yoyo) {\n                        this._swapEndStartRepeatValues(property);\n                    }\n                    this._valuesStart[property] = this._valuesStartRepeat[property];\n                }\n                if (this._yoyo) {\n                    this._reversed = !this._reversed;\n                }\n                if (this._repeatDelayTime !== undefined) {\n                    this._startTime = time + this._repeatDelayTime;\n                }\n                else {\n                    this._startTime = time + this._delayTime;\n                }\n                if (this._onRepeatCallback) {\n                    this._onRepeatCallback(this._object);\n                }\n                return true;\n            }\n            else {\n                if (this._onCompleteCallback) {\n                    this._onCompleteCallback(this._object);\n                }\n                for (var i = 0, numChainedTweens = this._chainedTweens.length; i < numChainedTweens; i++) {\n                    // Make the chained tweens start exactly at the time they should,\n                    // even if the `update()` method was called way past the duration of the tween\n                    this._chainedTweens[i].start(this._startTime + this._duration);\n                }\n                this._isPlaying = false;\n                return false;\n            }\n        }\n        return true;\n    };\n    Tween.prototype._updateProperties = function (_object, _valuesStart, _valuesEnd, value) {\n        for (var property in _valuesEnd) {\n            // Don't update properties that do not exist in the source object\n            if (_valuesStart[property] === undefined) {\n                continue;\n            }\n            var start = _valuesStart[property] || 0;\n            var end = _valuesEnd[property];\n            var startIsArray = Array.isArray(_object[property]);\n            var endIsArray = Array.isArray(end);\n            var isInterpolationList = !startIsArray && endIsArray;\n            if (isInterpolationList) {\n                _object[property] = this._interpolationFunction(end, value);\n            }\n            else if (typeof end === 'object' && end) {\n                // eslint-disable-next-line\n                // @ts-ignore FIXME?\n                this._updateProperties(_object[property], start, end, value);\n            }\n            else {\n                // Parses relative end values with start as base (e.g.: +10, -3)\n                end = this._handleRelativeValue(start, end);\n                // Protect against non numeric properties.\n                if (typeof end === 'number') {\n                    // eslint-disable-next-line\n                    // @ts-ignore FIXME?\n                    _object[property] = start + (end - start) * value;\n                }\n            }\n        }\n    };\n    Tween.prototype._handleRelativeValue = function (start, end) {\n        if (typeof end !== 'string') {\n            return end;\n        }\n        if (end.charAt(0) === '+' || end.charAt(0) === '-') {\n            return start + parseFloat(end);\n        }\n        else {\n            return parseFloat(end);\n        }\n    };\n    Tween.prototype._swapEndStartRepeatValues = function (property) {\n        var tmp = this._valuesStartRepeat[property];\n        var endValue = this._valuesEnd[property];\n        if (typeof endValue === 'string') {\n            this._valuesStartRepeat[property] = this._valuesStartRepeat[property] + parseFloat(endValue);\n        }\n        else {\n            this._valuesStartRepeat[property] = this._valuesEnd[property];\n        }\n        this._valuesEnd[property] = tmp;\n    };\n    return Tween;\n}());\n\nvar VERSION = '18.6.4';\n\n/**\n * Tween.js - Licensed under the MIT license\n * https://github.com/tweenjs/tween.js\n * ----------------------------------------------\n *\n * See https://github.com/tweenjs/tween.js/graphs/contributors for the full list of contributors.\n * Thank you all, you're awesome!\n */\nvar nextId = Sequence.nextId;\n/**\n * Controlling groups of tweens\n *\n * Using the TWEEN singleton to manage your tweens can cause issues in large apps with many components.\n * In these cases, you may want to create your own smaller groups of tweens.\n */\nvar TWEEN = mainGroup;\n// This is the best way to export things in a way that's compatible with both ES\n// Modules and CommonJS, without build hacks, and so as not to break the\n// existing API.\n// https://github.com/rollup/rollup/issues/1961#issuecomment-423037881\nvar getAll = TWEEN.getAll.bind(TWEEN);\nvar removeAll = TWEEN.removeAll.bind(TWEEN);\nvar add = TWEEN.add.bind(TWEEN);\nvar remove = TWEEN.remove.bind(TWEEN);\nvar update = TWEEN.update.bind(TWEEN);\nvar exports = {\n    Easing: Easing,\n    Group: Group,\n    Interpolation: Interpolation,\n    now: now$1,\n    Sequence: Sequence,\n    nextId: nextId,\n    Tween: Tween,\n    VERSION: VERSION,\n    getAll: getAll,\n    removeAll: removeAll,\n    add: add,\n    remove: remove,\n    update: update,\n};\n\nexport default exports;\nexport { Easing, Group, Interpolation, Sequence, Tween, VERSION, add, getAll, nextId, now$1 as now, remove, removeAll, update };\n","import * as THREE from 'three' //导入整个 three.js核心库\r\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls' //导入控制器模块，轨道控制器\r\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader' //导入GLTF模块，模型解析器,根据文件格式来定\r\nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer.js'\r\nimport { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass.js'\r\nimport { OutlinePass } from 'three/examples/jsm/postprocessing/OutlinePass.js'\r\nimport { OutputPass } from 'three/examples/jsm/postprocessing/OutputPass.js'\r\nimport { ShaderPass } from 'three/examples/jsm/postprocessing/ShaderPass.js'\r\nimport { FXAAShader } from 'three/examples/jsm/shaders/FXAAShader.js'\r\nimport { UnrealBloomPass } from 'three/examples/jsm/postprocessing/UnrealBloomPass.js'\r\nimport { OBJLoader } from 'three/examples/jsm/loaders/OBJLoader'\r\nimport { FBXLoader } from 'three/examples/jsm/loaders/FBXLoader'\r\nimport { DRACOLoader } from 'three/examples/jsm/loaders/DRACOLoader'\r\nimport { GLTFExporter } from 'three/examples/jsm/exporters/GLTFExporter.js'\r\nimport { DragControls } from 'three/examples/jsm/controls/DragControls';\r\nimport { ElMessage, ElMessageBox } from 'element-plus';\r\nimport { lightPosition, onlyKey } from '@/utils/utilityFunction'\r\nimport TWEEN from \"@tweenjs/tween.js\";\r\nimport store from '@/store'\r\nimport { vertexShader, fragmentShader, MODEL_DECOMPOSE } from '@/config/constant'\r\nimport { SetModelType, OnSwitchModelType, OnSetModelMapType, OnSetSystemModelMapType, OnGetEditMeshListType, OnSetModelAmbientLightType, OnSetModelDirectionalLightType } from '@/types/renderOptions'\r\n\r\n\r\nclass renderModel {\r\n\tcontainer: any\r\n\tcamera: any\r\n\tscene: THREE.Object3D<THREE.Object3DEventMap> | null | any\r\n\trenderer: any\r\n\tcontrols: any\r\n\tmodel!: THREE.Object3D<THREE.Object3DEventMap> | null | any\r\n\tgeometryGroup: THREE.Group<THREE.Object3DEventMap>\r\n\tgeometryModel: any\r\n\tloadingManager: THREE.LoadingManager\r\n\tfileLoaderMap: {\r\n\t\t[key: string]: any;\r\n\t}\r\n\tmodelAnimation: any\r\n\tanimationMixer: any\r\n\tanimationColock: THREE.Clock | null\r\n\tanimationFrame!: any\r\n\trotationAnimationFrame!: any\r\n\tanimateClipAction: any\r\n\tloopMap: { [key: string]: number }\r\n\tskeletonHelper: any\r\n\tgridHelper: any\r\n\taxesHelper: any\r\n\tambientLight: any\r\n\tdirectionalLight: any\r\n\tdirectionalLightHelper: any\r\n\tpointLight: any\r\n\tpointLightHelper: any\r\n\tspotLight: any\r\n\tspotLightHelper: any\r\n\tplaneGeometry: any\r\n\tmodelMaterialList: any\r\n\teffectComposer: any\r\n\toutlinePass: any\r\n\trenderAnimation!: any\r\n\traycaster: THREE.Raycaster\r\n\tmouse: THREE.Vector2 | null\r\n\tmodelTextureMap: any\r\n\tglowComposer: any\r\n\tunrealBloomPass: any\r\n\tshaderPass: any\r\n\tglowMaterialList: any\r\n\tmaterials: { [key: string]: any }\r\n\tdragControls: any\r\n\tglowUnrealBloomPass: boolean\r\n\tonWindowResizesListener: any\r\n\tonMouseClickListener: any\r\n\tmodelProgressCallback: (e: any) => any\r\n\tdragGeometryModel: {}\r\n\r\n\tconstructor(selector: string) {\r\n\t\tthis.container = document.querySelector(selector)\r\n\t\t// 相机\r\n\t\tthis.camera\r\n\t\t// 场景\r\n\t\tthis.scene\r\n\t\t//渲染器\r\n\t\tthis.renderer\r\n\t\t// 控制器\r\n\t\tthis.controls\r\n\t\t// 模型\r\n\t\tthis.model\r\n\t\t// 几何体模型数组\r\n\t\tthis.geometryGroup = new THREE.Group()\r\n\t\t// 几何体模型\r\n\t\tthis.geometryModel\r\n\t\t// 加载进度监听\r\n\t\tthis.loadingManager = new THREE.LoadingManager()\r\n\t\t//文件加载器类型\r\n\t\tthis.fileLoaderMap = {\r\n\t\t\t'glb': new GLTFLoader(),\r\n\t\t\t'fbx': new FBXLoader(this.loadingManager),\r\n\t\t\t'gltf': new GLTFLoader(),\r\n\t\t\t'obj': new OBJLoader(this.loadingManager),\r\n\t\t}\r\n\t\t//模型动画列表\r\n\t\tthis.modelAnimation\r\n\t\t//模型动画对象\r\n\t\tthis.animationMixer\r\n\t\tthis.animationColock = new THREE.Clock()\r\n\t\t//动画帧\r\n\t\tthis.animationFrame = null\r\n\t\t// 轴动画帧\r\n\t\tthis.rotationAnimationFrame = null\r\n\t\t// 动画构造器\r\n\t\tthis.animateClipAction = null\r\n\t\t// 动画循环方式枚举\r\n\t\tthis.loopMap = {\r\n\t\t\tLoopOnce: THREE.LoopOnce,\r\n\t\t\tLoopRepeat: THREE.LoopRepeat,\r\n\t\t\tLoopPingPong: THREE.LoopPingPong\r\n\t\t}\r\n\t\t// 模型骨架\r\n\t\tthis.skeletonHelper\r\n\t\t// 网格辅助线\r\n\t\tthis.gridHelper\r\n\t\t// 坐标轴辅助线\r\n\t\tthis.axesHelper\r\n\t\t// 环境光\r\n\t\tthis.ambientLight\r\n\t\t//平行光\r\n\t\tthis.directionalLight\r\n\t\t// 平行光辅助线\r\n\t\tthis.directionalLightHelper\r\n\t\t// 点光源\r\n\t\tthis.pointLight\r\n\t\t//点光源辅助线\r\n\t\tthis.pointLightHelper\r\n\t\t//聚光灯\r\n\t\tthis.spotLight\r\n\t\t//聚光灯辅助线\r\n\t\tthis.spotLightHelper\r\n\t\t//模型平面\r\n\t\tthis.planeGeometry\r\n\t\t//模型材质列表\r\n\t\tthis.modelMaterialList\r\n\t\t// 效果合成器\r\n\t\tthis.effectComposer\r\n\r\n\t\tthis.outlinePass\r\n\t\t// 动画渲染器\r\n\t\tthis.renderAnimation = null\r\n\t\t// 碰撞检测\r\n\t\tthis.raycaster = new THREE.Raycaster()\r\n\t\t// 鼠标位置\r\n\t\tthis.mouse = new THREE.Vector2()\r\n\t\t// 模型自带贴图\r\n\t\tthis.modelTextureMap\r\n\t\t// 辉光效果合成器\r\n\t\tthis.glowComposer\r\n\t\t// 辉光着色器\r\n\t\tthis.shaderPass\r\n\t\t// 辉光渲染器\r\n\t\tthis.unrealBloomPass\r\n\t\t// 需要辉光的材质\r\n\t\tthis.glowMaterialList\r\n\t\tthis.materials = {}\r\n\t\t// 拖拽对象控制器\r\n\t\tthis.dragControls\r\n\t\t// 是否开启辉光\r\n\t\tthis.glowUnrealBloomPass = false\r\n\t\t// 窗口变化监听事件\r\n\t\tthis.onWindowResizesListener\r\n\t\t// 鼠标点击事件\r\n\t\tthis.onMouseClickListener\r\n\t\t// 模型上传进度条回调函数\r\n\t\tthis.modelProgressCallback = (e) => e\r\n\t\t// 当前拖拽的几何模型\r\n\t\tthis.dragGeometryModel = {}\r\n\r\n\t}\r\n\r\n\tinit() {\r\n\t\treturn new Promise(async (reslove) => {\r\n\t\t\tthis.initRender()\r\n\t\t\t//初始化相机\r\n\t\t\tthis.initCamera()\r\n\t\t\t//初始化场景\r\n\t\t\tthis.initScene()\r\n\t\t\t//初始化控制器，控制摄像头,控制器一定要在渲染器后\r\n\t\t\tthis.initControls()\r\n\t\t\t// 创建辅助线\r\n\t\t\tthis.createHelper()\r\n\t\t\t// 创建灯光\r\n\t\t\tthis.createLight()\r\n\t\t\tthis.addEvenListMouseLisatener()\r\n\t\t\t// 添加物体模型 TODO：初始化时需要默认一个\r\n\t\t\t// https://images.wanjunshijie.com/demo/threeDemo2/glb/city.glb\r\n\t\t\t//  https://threejs.org/examples/models/gltf/LittlestTokyo.glb\r\n\t\t\tconst modelFile = { filePath: 'threeFile/glb/glb-9.glb', fileType: 'glb', map: null, scale: null, position: null, decomposeName: 'transformers_3' }\r\n\t\t\tconst load = await this.setModel(modelFile)\r\n\t\t\t// 创建效果合成器\r\n\t\t\tthis.createEffectComposer()\r\n\t\t\t//场景渲染\r\n\t\t\tthis.sceneAnimation()\r\n\t\t\treslove(load)\r\n\t\t})\r\n\t}\r\n\t// 创建场景\r\n\tinitScene() {\r\n\t\tthis.scene = new THREE.Scene()\r\n\t\tconst texture = new THREE.TextureLoader().load(require('@/assets/image/view-4.png'))\r\n\t\ttexture.mapping = THREE.EquirectangularReflectionMapping\r\n\t\tthis.scene.background = texture\r\n\t\tthis.scene.environment = texture\r\n\t}\r\n\t// 创建相机\r\n\tinitCamera() {\r\n\t\tconst { clientHeight, clientWidth } = this.container\r\n\t\tthis.camera = new THREE.PerspectiveCamera(50, clientWidth / clientHeight, 0.25, 2000)\r\n\t}\r\n\t// 创建渲染器\r\n\tinitRender() {\r\n\t\tthis.renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true, preserveDrawingBuffer: true }) //设置抗锯齿\r\n\t\t//设置屏幕像素比\r\n\t\tthis.renderer.setPixelRatio(window.devicePixelRatio)\r\n\t\t//渲染的尺寸大小\r\n\t\tconst { clientHeight, clientWidth } = this.container\r\n\t\tthis.renderer.setSize(clientWidth, clientHeight)\r\n\t\t//色调映射\r\n\t\t// this.renderer.toneMapping = THREE.ACESFilmicToneMapping\r\n\t\tthis.renderer.toneMapping = THREE.ReinhardToneMapping\r\n\t\tthis.renderer.autoClear = true\r\n\t\tthis.renderer.outputColorSpace = THREE.SRGBColorSpace\r\n\t\t//曝光\r\n\t\tthis.renderer.toneMappingExposure = 2\r\n\t\tthis.renderer.shadowMap.enabled = true\r\n\t\tthis.renderer.shadowMap.type = THREE.PCFSoftShadowMap\r\n\t\tthis.container.appendChild(this.renderer.domElement)\r\n\t}\r\n\t// 更新场景\r\n\tsceneAnimation() {\r\n\t\tthis.renderAnimation = requestAnimationFrame(() => this.sceneAnimation())\r\n\t\t// 将不需要处理辉光的材质进行存储备份\r\n\t\tthis.scene.traverse((v: any) => {\r\n\t\t\tif (v instanceof THREE.Scene) {\r\n\t\t\t\tthis.materials.scene = v.background\r\n\t\t\t\tv.background = null\r\n\t\t\t}\r\n\r\n\t\t\tif (!this.glowMaterialList.includes(v.name) && v.isMesh) {\r\n\t\t\t\tthis.materials[v.uuid] = v.material\r\n\t\t\t\tv.material = new THREE.MeshStandardMaterial({ color: 'black' })\r\n\t\t\t}\r\n\t\t})\r\n\t\tthis.glowComposer.render()\r\n\t\t// 在辉光渲染器执行完之后在恢复材质原效果\r\n\t\tthis.scene.traverse((v: any) => {\r\n\t\t\tif (this.materials[v.uuid]) {\r\n\t\t\t\tv.material = this.materials[v.uuid]\r\n\t\t\t\tdelete this.materials[v.uuid]\r\n\t\t\t}\r\n\t\t\tif (v instanceof THREE.Scene) {\r\n\t\t\t\tv.background = this.materials.scene\r\n\t\t\t\tdelete this.materials.scene\r\n\t\t\t}\r\n\t\t})\r\n\t\tthis.controls.update()\r\n\t\tTWEEN.update();\r\n\t\tthis.effectComposer.render()\r\n\t}\r\n\t// 监听事件\r\n\taddEvenListMouseLisatener() {\r\n\t\t//监听场景大小改变，跳转渲染尺寸\r\n\t\tthis.onWindowResizesListener = this.onWindowResizes.bind(this)\r\n\t\twindow.addEventListener(\"resize\", this.onWindowResizesListener)\r\n\t\t// 鼠标点击\r\n\t\tthis.onMouseClickListener = this.onMouseClickModel.bind(this)\r\n\t\tthis.container.addEventListener('click', this.onMouseClickListener)\r\n\t}\r\n\t// 创建控制器\r\n\tinitControls() {\r\n\t\tthis.controls = new OrbitControls(this.camera, this.renderer.domElement)\r\n\t\tthis.controls.enablePan = false\r\n\t}\r\n\t// 加载模型\r\n\tsetModel(modelFile: SetModelType) {\r\n\t\tconst { filePath, fileType, scale, map, position, decomposeName } = modelFile\r\n\t\treturn new Promise((resolve) => {\r\n\t\t\tlet loader\r\n\t\t\tif (['glb', 'gltf'].includes(fileType)) {\r\n\t\t\t\tconst dracoLoader = new DRACOLoader()\r\n\t\t\t\tdracoLoader.setDecoderPath(`draco/gltf/`)\r\n\t\t\t\tdracoLoader.setDecoderConfig({ type: 'js' })\r\n\t\t\t\tdracoLoader.preload()\r\n\t\t\t\tloader = new GLTFLoader().setDRACOLoader(dracoLoader)\r\n\t\t\t} else {\r\n\t\t\t\tloader = this.fileLoaderMap[fileType]\r\n\t\t\t}\r\n\t\t\tloader.load(filePath, (result: any) => {\r\n\t\t\t\tswitch (fileType) {\r\n\t\t\t\t\tcase 'glb':\r\n\t\t\t\t\t\tthis.model = result.scene\r\n\t\t\t\t\t\tthis.skeletonHelper = new THREE.SkeletonHelper(result.scene)\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'fbx':\r\n\t\t\t\t\t\tthis.model = result\r\n\t\t\t\t\t\tthis.skeletonHelper = new THREE.SkeletonHelper(result)\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'gltf':\r\n\t\t\t\t\t\tthis.model = result.scene\r\n\t\t\t\t\t\tthis.skeletonHelper = new THREE.SkeletonHelper(result.scene)\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'obj':\r\n\t\t\t\t\t\tthis.model = result\r\n\t\t\t\t\t\tthis.skeletonHelper = new THREE.SkeletonHelper(result)\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tthis.modelAnimation = result.animations || []\r\n\t\t\t\tthis.model.decomposeName = decomposeName\r\n\t\t\t\tthis.getModelMeaterialList()\r\n\t\t\t\tthis.setModelPositionSize()\r\n\t\t\t\t//\t设置模型大小\r\n\t\t\t\tif (scale) {\r\n\t\t\t\t\tthis.model.scale.set(scale, scale, scale);\r\n\t\t\t\t}\r\n\t\t\t\t//设置模型位置 \r\n\t\t\t\tthis.model.position.set(0, -.5, 0)\r\n\t\t\t\tif (position) {\r\n\t\t\t\t\tconst { x, y, z } = position\r\n\t\t\t\t\tthis.model.position.set(x, y, z)\r\n\t\t\t\t}\r\n\t\t\t\tthis.skeletonHelper.visible = false\r\n\t\t\t\tthis.scene.add(this.skeletonHelper)\r\n\r\n\t\t\t\t// 需要辉光的材质\r\n\t\t\t\tthis.glowMaterialList = this.modelMaterialList.map((v: { name: any }) => v.name)\r\n\t\t\t\tthis.scene.add(this.model)\r\n\t\t\t\t// 获取模型材质贴图\r\n\t\t\t\tthis.getModelMeaterialMaps(map)\r\n\t\t\t\tresolve(true)\r\n\r\n\t\t\t}, (xhr: { loaded: any }) => {\r\n\t\t\t\tthis.modelProgressCallback(xhr.loaded)\r\n\t\t\t}, (err: any) => {\r\n\t\t\t\tElMessage.error('文件错误')\r\n\t\t\t\tconsole.log(err)\r\n\t\t\t\tresolve(true)\r\n\t\t\t})\r\n\r\n\t\t})\r\n\t}\r\n\t// 加载几何体模型\r\n\tsetGeometryModel(model: unknown | any) {\r\n\t\treturn new Promise((reslove) => {\r\n\t\t\tconst { clientHeight, clientWidth, offsetLeft, offsetTop } = this.container\r\n\t\t\tif (!this.mouse) return false\r\n\t\t\t// 计算鼠标在屏幕上的坐标\r\n\t\t\tthis.mouse.x = ((model.clientX - offsetLeft) / clientWidth) * 2 - 1\r\n\t\t\tthis.mouse.y = -((model.clientY - offsetTop) / clientHeight) * 2 + 1\r\n\t\t\tthis.raycaster.setFromCamera(this.mouse, this.camera);\r\n\t\t\tconst intersects = this.raycaster.intersectObjects(this.scene.children, true);\r\n\r\n\t\t\tif (intersects.length > 0) {\r\n\t\t\t\t// 在控制台输出鼠标在场景中的位置\r\n\t\t\t\t// 不需要赋值的key\r\n\t\t\t\tconst notGeometrykey = ['id', 'name', 'modelType', 'type']\r\n\t\t\t\tconst geometryData = Object.keys(model).filter(key => !notGeometrykey.includes(key)).map(v => model[v])\r\n\t\t\t\t// 创建几何体\r\n\t\t\t\tconst { type } = model\r\n\t\t\t\tconst geometry = new (THREE as any)[type](...geometryData)\r\n\r\n\t\t\t\tconst colors = ['#FF4500', '#90EE90', '#00CED1', '#1E90FF', '#C71585', '#FF4500', '#FAD400', '#1F93FF', '#90F090', '#C71585']\r\n\t\t\t\t// 随机颜色\r\n\t\t\t\tconst meshColor = colors[Math.ceil(Math.random() * 10)]\r\n\t\t\t\tconst material = new THREE.MeshStandardMaterial({ color: new THREE.Color(meshColor), side: THREE.DoubleSide })\r\n\t\t\t\tconst mesh = new THREE.Mesh(geometry, material)\r\n\t\t\t\tconst { x, y, z } = intersects[0].point\r\n\t\t\t\tmesh.position.set(x, y, z)\r\n\t\t\t\tmesh.name = type + '_' + onlyKey(4, 5)\r\n\t\t\t\tmesh.userData.geometry = true\r\n\t\t\t\tthis.geometryGroup.add(mesh)\r\n\t\t\t\tthis.model = this.geometryGroup\r\n\t\t\t\tthis.onSetGeometryMeshList(mesh)\r\n\t\t\t\tthis.skeletonHelper.visible = false\r\n\t\t\t\tthis.skeletonHelper.dispose()\r\n\t\t\t\tthis.glowMaterialList = this.modelMaterialList.map((v: { name: any }) => v.name)\r\n\t\t\t\tthis.setModelMeshDrag({ modelDrag: true })\r\n\t\t\t\tthis.scene.add(this.model)\r\n\t\t\t\t//计算控制器缩放大小\r\n\t\t\t\tconst box = new THREE.Box3().setFromObject(this.model);\r\n\t\t\t\tconst size = box.getSize(new THREE.Vector3());\r\n\t\t\t\tthis.controls.maxDistance = size.length() * 10\r\n\t\t\t\treslove(true)\r\n\t\t\t} else {\r\n\t\t\t\tElMessage.warning('当前角度无法获取鼠标位置请调整“相机角度”在添加')\r\n\t\t\t}\r\n\r\n\t\t})\r\n\r\n\t}\r\n\t// 模型加载进度条回调函数\r\n\tonProgress(callback: (e: any) => any) {\r\n\t\tif (typeof callback == 'function') {\r\n\t\t\tthis.modelProgressCallback = callback\r\n\t\t}\r\n\t}\r\n\t// 创建辅助线\r\n\tcreateHelper() {\r\n\t\t//网格辅助线\r\n\t\tthis.gridHelper = new THREE.GridHelper(4, 10, 'rgb(193,193,193)', 'rgb(193,193,193)');\r\n\t\tthis.gridHelper.position.set(0, -.59, -.1)\r\n\t\tthis.gridHelper.visible = false\r\n\t\tthis.scene.add(this.gridHelper)\r\n\t\t// 坐标轴辅助线\r\n\t\tthis.axesHelper = new THREE.AxesHelper(2);\r\n\t\tthis.axesHelper.visible = false\r\n\t\tthis.scene.add(this.axesHelper);\r\n\t\t// 开启阴影\r\n\t\tthis.renderer.shadowMap.enabled = true;\r\n\r\n\t}\r\n\t// 创建光源\r\n\tcreateLight() {\r\n\t\t// 创建环境光\r\n\t\tthis.ambientLight = new THREE.AmbientLight('#fff', .8)\r\n\t\tthis.scene.add(this.ambientLight)\r\n\r\n\t\t// 创建平行光\r\n\t\tthis.directionalLight = new THREE.DirectionalLight('#fff', 5)\r\n\t\tthis.directionalLight.position.set(-1.44, 2.2, 1)\r\n\t\tthis.directionalLight.castShadow = true\r\n\t\tthis.directionalLight.visible = false\r\n\t\tthis.scene.add(this.directionalLight)\r\n\t\t// 创建平行光辅助线\r\n\t\tthis.directionalLightHelper = new THREE.DirectionalLightHelper(this.directionalLight, .3)\r\n\t\tthis.directionalLightHelper.visible = false\r\n\t\tthis.scene.add(this.directionalLightHelper)\r\n\r\n\t\t// 创建点光源\r\n\t\tthis.pointLight = new THREE.PointLight(0xff0000, 5, 100)\r\n\t\tthis.pointLight.visible = false\r\n\t\tthis.scene.add(this.pointLight)\r\n\t\t// 创建点光源辅助线\r\n\t\tthis.pointLightHelper = new THREE.PointLightHelper(this.pointLight, .5)\r\n\t\tthis.pointLightHelper.visible = false\r\n\t\tthis.scene.add(this.pointLightHelper)\r\n\r\n\t\t//  创建聚光灯\r\n\t\tthis.spotLight = new THREE.SpotLight('#00BABD', 900);\r\n\t\tthis.spotLight.visible = false\r\n\t\tthis.spotLight.map = new THREE.TextureLoader().load(require('@/assets/image/model-bg-1.jpg'));\r\n\t\tthis.spotLight.decay = 2;\r\n\t\tthis.spotLight.shadow.mapSize.width = 1920;\r\n\t\tthis.spotLight.shadow.mapSize.height = 1080;\r\n\t\tthis.spotLight.shadow.camera.near = 1;\r\n\t\tthis.spotLight.shadow.camera.far = 10;\r\n\t\tthis.scene.add(this.spotLight);\r\n\t\t//创建聚光灯辅助线\r\n\t\tthis.spotLightHelper = new THREE.SpotLightHelper(this.spotLight);\r\n\t\tthis.spotLightHelper.visible = false\r\n\t\tthis.scene.add(this.spotLightHelper)\r\n\r\n\t\t// 模型平面\r\n\t\tconst geometry = new THREE.PlaneGeometry(4, 4);\r\n\t\tvar groundMaterial = new THREE.MeshStandardMaterial({ color: '#000000' });\r\n\t\tthis.planeGeometry = new THREE.Mesh(geometry, groundMaterial);\r\n\t\tthis.planeGeometry.name = 'planeGeometry'\r\n\t\tthis.planeGeometry.rotation.x = -Math.PI / 2\r\n\t\tthis.planeGeometry.position.set(0, -.5, 0)\r\n\r\n\t\t// 让地面接收阴影\r\n\t\tthis.planeGeometry.receiveShadow = true;\r\n\t\tthis.planeGeometry.visible = false\r\n\t\tthis.scene.add(this.planeGeometry);\r\n\t}\r\n\t// 创建效果合成器\r\n\tcreateEffectComposer() {\r\n\t\tconst { clientHeight, clientWidth } = this.container\r\n\t\tthis.effectComposer = new EffectComposer(this.renderer)\r\n\t\tconst renderPass = new RenderPass(this.scene, this.camera)\r\n\t\tthis.effectComposer.addPass(renderPass)\r\n\t\tthis.outlinePass = new OutlinePass(new THREE.Vector2(clientWidth, clientHeight), this.scene, this.camera)\r\n\t\tthis.outlinePass.visibleEdgeColor = new THREE.Color('#FF8C00') // 可见边缘的颜色\r\n\t\tthis.outlinePass.hiddenEdgeColor = new THREE.Color('#8a90f3') // 不可见边缘的颜色\r\n\t\tthis.outlinePass.edgeGlow = 2.0 // 发光强度\r\n\t\tthis.outlinePass.usePatternTexture = false // 是否使用纹理图案\r\n\t\tthis.outlinePass.edgeThickness = 1 // 边缘浓度\r\n\t\tthis.outlinePass.edgeStrength = 4 // 边缘的强度，值越高边框范围越大\r\n\t\tthis.outlinePass.pulsePeriod = 100 // 闪烁频率，值越大频率越低\r\n\t\tthis.effectComposer.addPass(this.outlinePass)\r\n\t\tlet outputPass = new OutputPass()\r\n\t\tthis.effectComposer.addPass(outputPass)\r\n\r\n\t\tlet effectFXAA = new ShaderPass(FXAAShader)\r\n\t\tconst pixelRatio = this.renderer.getPixelRatio()\r\n\t\teffectFXAA.uniforms.resolution.value.set(1 / (clientWidth * pixelRatio), 1 / (clientHeight * pixelRatio))\r\n\t\teffectFXAA.renderToScreen = true\r\n\t\teffectFXAA.needsSwap = true\r\n\t\tthis.effectComposer.addPass(effectFXAA)\r\n\r\n\t\t//创建辉光效果\r\n\t\tthis.unrealBloomPass = new UnrealBloomPass(new THREE.Vector2(clientWidth, clientHeight), 1.5, 0.4, 0.85)\r\n\t\t// 辉光合成器\r\n\t\tconst renderTargetParameters = {\r\n\t\t\tminFilter: THREE.LinearFilter,\r\n\t\t\tformat: THREE.RGBAFormat,\r\n\t\t\tstencilBuffer: false,\r\n\t\t};\r\n\t\tconst glowRender = new THREE.WebGLRenderTarget(clientWidth * 2, clientHeight * 2, renderTargetParameters)\r\n\t\tthis.glowComposer = new EffectComposer(this.renderer, glowRender)\r\n\t\tthis.glowComposer.renderToScreen = false\r\n\t\tthis.glowComposer.addPass(new RenderPass(this.scene, this.camera))\r\n\t\tthis.glowComposer.addPass(this.unrealBloomPass)\r\n\r\n\t\t// // 着色器\r\n\t\tthis.shaderPass = new ShaderPass(new THREE.ShaderMaterial({\r\n\t\t\tuniforms: {\r\n\t\t\t\tbaseTexture: { value: null },\r\n\t\t\t\tbloomTexture: { value: this.glowComposer.renderTarget2.texture },\r\n\t\t\t\ttDiffuse: { value: null },\r\n\t\t\t\tglowColor: { value: null }\r\n\t\t\t},\r\n\t\t\tvertexShader,\r\n\t\t\tfragmentShader,\r\n\t\t\tdefines: {}\r\n\t\t}), 'baseTexture')\r\n\r\n\t\tthis.shaderPass.material.uniforms.glowColor.value = new THREE.Color();\r\n\t\tthis.shaderPass.renderToScreen = true\r\n\t\tthis.shaderPass.needsSwap = true\r\n\t\tthis.effectComposer.addPass(this.shaderPass)\r\n\r\n\t}\r\n\r\n\t// 切换模型\r\n\tonSwitchModel(model: OnSwitchModelType) {\r\n\t\treturn new Promise(async (reslove, reject) => {\r\n\t\t\ttry {\r\n\t\t\t\t// 加载几何模型\r\n\t\t\t\tif (model.modelType && model.modelType == 'geometry') {\r\n\t\t\t\t\t// 重置\"灯光\"模块数据\r\n\t\t\t\t\tthis.modelAnimation = []\r\n\t\t\t\t\tthis.camera.fov = 80\r\n\t\t\t\t\tthis.camera.updateProjectionMatrix()\r\n\t\t\t\t\tconst load = await this.setGeometryModel(model)\r\n\t\t\t\t\treslove(load)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.clearSceneModel()\r\n\t\t\t\t\t// 重置\"灯光\"模块数据\r\n\t\t\t\t\tthis.onResettingLight({ ambientLight: true })\r\n\t\t\t\t\tthis.camera.fov = 50\r\n\t\t\t\t\tthis.geometryGroup.clear()\r\n\t\t\t\t\t// 加载模型\r\n\t\t\t\t\tconst load = await this.setModel(model)\r\n\t\t\t\t\t// 模型加载成功返回 true\r\n\t\t\t\t\treslove({ load, filePath: model.filePath })\r\n\t\t\t\t}\r\n\t\t\t} catch {\r\n\t\t\t\treject()\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\t// 监听窗口变化\r\n\tonWindowResizes() {\r\n\t\tif (!this.container) return false\r\n\t\tconst { clientHeight, clientWidth } = this.container\r\n\t\t//调整屏幕大小\r\n\t\tthis.camera.aspect = clientWidth / clientHeight //摄像机宽高比例\r\n\t\tthis.camera.updateProjectionMatrix() //相机更新矩阵，将3d内容投射到2d面上转换\r\n\t\tthis.renderer.setSize(clientWidth, clientHeight)\r\n\t\tthis.effectComposer.setSize(clientWidth * 2, clientHeight * 2)\r\n\t\tthis.glowComposer.setSize(clientWidth, clientHeight)\r\n\t}\r\n\t// 下载场景封面\r\n\tonDownloadScenCover() {\r\n\t\tvar link = document.createElement('a');\r\n\t\tvar canvas = this.renderer.domElement;\r\n\t\tlink.href = canvas.toDataURL(\"image/png\");\r\n\t\tlink.download = `${new Date().toLocaleString()}.png`\r\n\t\tlink.click();\r\n\t\tElMessage.success('下载成功')\r\n\t}\r\n\t// 导出模型\r\n\tonExporterModel(type: string) {\r\n\t\tconst exporter = new GLTFExporter();\r\n\t\tconst options = {\r\n\t\t\ttrs: true,      // 是否保留位置、旋转、缩放信息\r\n\t\t\tanimations: this.modelAnimation, // 导出的动画\r\n\t\t\tbinary: type == 'glb' ? true : false,  // 是否以二进制格式输出\r\n\t\t\tembedImages: true,//是否嵌入贴图\r\n\t\t\tonlyVisible: true, //是否只导出可见物体\r\n\t\t\tincludeCustomExtensions: true,\r\n\t\t}\r\n\t\texporter.parse(this.scene, function (result) {\r\n\t\t\tif (result instanceof ArrayBuffer) {\r\n\t\t\t\t// 将结果保存为GLB二进制文件\r\n\t\t\t\tsaveArrayBuffer(result, `${new Date().toLocaleString()}.glb`);\r\n\r\n\t\t\t} else {\r\n\t\t\t\t// 将结果保存为GLTF JSON文件\r\n\t\t\t\tsaveString(JSON.stringify(result), `${new Date().toLocaleString()}.gltf`);\r\n\t\t\t}\r\n\t\t\tfunction saveArrayBuffer(buffer: any, filename: string) {\r\n\t\t\t\t// 将二进制数据保存为文件\r\n\t\t\t\tconst blob = new Blob([buffer], { type: 'application/octet-stream' });\r\n\t\t\t\tconst url = URL.createObjectURL(blob);\r\n\t\t\t\tconst link = document.createElement('a');\r\n\t\t\t\tlink.href = url;\r\n\t\t\t\tlink.download = filename;\r\n\t\t\t\tlink.click();\r\n\t\t\t\tURL.revokeObjectURL(url);\r\n\t\t\t\tElMessage.success('导出成功')\r\n\t\t\t}\r\n\t\t\tfunction saveString(text: any, filename: string) {\r\n\t\t\t\t// 将字符串数据保存为文件\r\n\t\t\t\tconst blob = new Blob([text], { type: 'application/json' });\r\n\t\t\t\tconst url = URL.createObjectURL(blob);\r\n\t\t\t\tconst link = document.createElement('a');\r\n\t\t\t\tlink.href = url;\r\n\t\t\t\tlink.download = filename;\r\n\t\t\t\tlink.click();\r\n\t\t\t\tURL.revokeObjectURL(url);\r\n\t\t\t\tElMessage.success('导出成功')\r\n\t\t\t}\r\n\t\t}, (err) => {\r\n\t\t\tElMessage.error(err)\r\n\t\t}, options);\r\n\t}\r\n\t// 清除模型数据\r\n\tonClearModelData() {\r\n\t\tcancelAnimationFrame(this.rotationAnimationFrame)\r\n\t\tcancelAnimationFrame(this.renderAnimation)\r\n\t\tcancelAnimationFrame(this.animationFrame)\r\n\t\tthis.container.removeEventListener('click', this.onMouseClickListener)\r\n\t\twindow.removeEventListener(\"resize\", this.onWindowResizesListener)\r\n\t\tthis.scene.traverse((v: { type: string; geometry: { dispose: () => void }; material: { dispose: () => void } }) => {\r\n\t\t\tif (v.type === 'Mesh') {\r\n\t\t\t\tv.geometry.dispose();\r\n\t\t\t\tv.material.dispose();\r\n\t\t\t}\r\n\t\t})\r\n\t\tthis.scene.clear()\r\n\t\tthis.renderer.dispose()\r\n\t\tthis.renderer.clear()\r\n\t\tthis.container = null\r\n\t\t// 相机\r\n\t\tthis.camera = null\r\n\t\t// 场景\r\n\t\tthis.scene = null\r\n\t\t//渲染器\r\n\t\tthis.renderer = null\r\n\t\t// 控制器\r\n\t\tthis.controls = null\r\n\t\t// 模型\r\n\t\tthis.model = null\r\n\t\t//几何体模型\r\n\t\tthis.geometryModel = null\r\n\t\t//文件加载器类型\r\n\t\tthis.fileLoaderMap = {}\r\n\t\t//模型动画列表\r\n\t\tthis.modelAnimation = null\r\n\t\t//模型动画对象\r\n\t\tthis.animationMixer = null\r\n\t\tthis.animationColock = null\r\n\t\t//动画帧\r\n\t\tthis.animationFrame = null\r\n\t\t// 轴动画帧\r\n\t\tthis.rotationAnimationFrame = null\r\n\t\t// 动画构造器\r\n\t\tthis.animateClipAction = null\r\n\t\t// 动画循环方式枚举\r\n\t\tthis.loopMap = {}\r\n\t\t// 模型骨架\r\n\t\tthis.skeletonHelper = null\r\n\t\t// 网格辅助线\r\n\t\tthis.gridHelper = null\r\n\t\t// 坐标轴辅助线\r\n\t\tthis.axesHelper = null\r\n\t\t// 环境光\r\n\t\tthis.ambientLight = null\r\n\t\t//平行光\r\n\t\tthis.directionalLight = null\r\n\t\t// 平行光辅助线\r\n\t\tthis.directionalLightHelper = null\r\n\t\t// 点光源\r\n\t\tthis.pointLight = null\r\n\t\t//点光源辅助线\r\n\t\tthis.pointLightHelper = null\r\n\t\t//聚光灯\r\n\t\tthis.spotLight = null\r\n\t\t//聚光灯辅助线\r\n\t\tthis.spotLightHelper = null\r\n\t\t//模型平面\r\n\t\tthis.planeGeometry = null\r\n\t\t//模型材质列表\r\n\t\tthis.modelMaterialList = null\r\n\t\t// 效果合成器\r\n\t\tthis.effectComposer = null\r\n\t\tthis.outlinePass = null\r\n\t\t// 动画渲染器\r\n\t\tthis.renderAnimation = null\r\n\t\t// 碰撞检测\r\n\t\tthis.raycaster == null\r\n\t\t// 鼠标位置\r\n\t\tthis.mouse = null\r\n\t\t// 模型自带贴图\r\n\t\tthis.modelTextureMap = null\r\n\t\t// 辉光效果合成器\r\n\t\tthis.glowComposer = null\r\n\t\t// 辉光渲染器\r\n\t\tthis.unrealBloomPass = null\r\n\t\t// 辉光着色器\r\n\t\tthis.shaderPass = null\r\n\t\t// 需要辉光的材质\r\n\t\tthis.glowMaterialList = []\r\n\t\tthis.materials = {}\r\n\t\t// 拖拽对象控制器\r\n\t\tthis.dragControls = null\r\n\t\tthis.dragGeometryModel = {}\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * @describe 左侧面板操作方法\r\n\t * @function clearSceneModel 清除场景模型数据\r\n\t * @function setDragGeometryModel 设置当前被拖拽的几何模型\r\n\t */\r\n\r\n\t// 清除场景模型数据\r\n\tclearSceneModel() {\r\n\t\t//先移除模型 材质释放内存\r\n\t\tthis.scene.traverse((v: { type: string; geometry: { dispose: () => void }; material: { dispose: () => void } }) => {\r\n\t\t\tif (v.type === 'Mesh') {\r\n\t\t\t\tv.geometry.dispose();\r\n\t\t\t\tv.material.dispose();\r\n\t\t\t}\r\n\t\t})\r\n\t\tthis.dragGeometryModel = {}\r\n\t\t//取消动画帧\r\n\t\tcancelAnimationFrame(this.animationFrame)\r\n\t\tcancelAnimationFrame(this.rotationAnimationFrame)\r\n\t\tthis.scene.remove(this.model)\r\n\t\tthis.model = null\r\n\t\tthis.modelTextureMap = []\r\n\t\tthis.glowMaterialList = []\r\n\t\tthis.modelMaterialList = []\r\n\t\tthis.materials = {}\r\n\t\tif (this.dragControls) {\r\n\t\t\tthis.dragControls.dispose()\r\n\t\t}\r\n\t\tthis.renderer.toneMappingExposure = 2\r\n\t\tObject.assign(this.unrealBloomPass, {\r\n\t\t\tthreshold: 0,\r\n\t\t\tstrength: 0,\r\n\t\t\tradius: 0,\r\n\t\t})\r\n\r\n\t\t// 重置\"辅助线/轴配置\"模块数据\r\n\t\tthis.skeletonHelper.visible = false\r\n\t\tconst config = {\r\n\t\t\tgridHelper: false,\r\n\t\t\tx: 0,\r\n\t\t\ty: -0.59,\r\n\t\t\tz: -0.1,\r\n\t\t\tpositionX: 0,\r\n\t\t\tpositionY: -0.5,\r\n\t\t\tpositionZ: 0,\r\n\t\t\tdivisions: 10,\r\n\t\t\tsize: 4,\r\n\t\t\tcolor: \"rgb(193,193,193)\",\r\n\t\t\taxesHelper: false,\r\n\t\t\taxesSize: 1.8,\r\n\t\t}\r\n\t\tthis.onResettingLight({ ambientLight: false })\r\n\t\tthis.onSetModelGridHelper(config)\r\n\t\tthis.onSetModelGridHelperSize(config)\r\n\t\tthis.onSetModelAxesHelper(config)\r\n\t}\r\n\t// 设置当前被拖拽的几何模型\r\n\tsetDragGeometryModel(model: {}) {\r\n\t\tthis.dragGeometryModel = model\r\n\t}\r\n\r\n\t/**\r\n\t * @describe 背景模块方法\r\n\t * @function onSetSceneColor 设置场景颜色\r\n\t * @function onSetSceneImage 设置场景图片\r\n\t * @function onSetSceneViewImage 设置全景图\r\n\t */\r\n\t// 设置场景颜色\r\n\tonSetSceneColor(color: THREE.ColorRepresentation | undefined) {\r\n\t\tthis.scene.background = new THREE.Color(color)\r\n\t}\r\n\t// 设置场景图片\r\n\tonSetSceneImage(url: string) {\r\n\t\tthis.scene.background = new THREE.TextureLoader().load(url);\r\n\t}\r\n\t// 设置全景图\r\n\tonSetSceneViewImage(url: string) {\r\n\t\tconst texture = new THREE.TextureLoader().load(url);\r\n\t\ttexture.mapping = THREE.EquirectangularReflectionMapping\r\n\t\tthis.scene.background = texture\r\n\t\tthis.scene.environment = texture\r\n\t}\r\n\r\n\r\n\r\n\t/**\r\n\t * @describe 材质模块方法\r\n\t * @function getModelMeaterialList 获取当前模型材质\r\n\t * @function setModelPositionSize 设置模型定位缩放大小\r\n\t * @function getModelMaps 获取模型自带贴图\r\n\t * @function onSetModelMaterial 设置材质属性（网格,透明度，颜色，深度写入）\r\n\t * @function onSetModelMap 设置模型贴图（模型自带）\r\n\t * @function onSetSystemModelMap 设置模型贴图（系统贴图）\r\n\t * @function onChangeModelMeaterial 选择材质\r\n\t * @function onGetEditMeshList 获取最新材质信息列表\r\n\t * @function onChangeModelMeshType 切换材质类型\r\n\t * @function onSetGeometryMeshList 设置几何体模型材质\r\n\t */\r\n\t// 获取当前模型材质\r\n\tgetModelMeaterialList() {\r\n\t\tthis.modelMaterialList = []\r\n\t\tthis.model.traverse((v: { isMesh: any; castShadow: boolean; frustumCulled: boolean; material: { clone: () => any } }) => {\r\n\t\t\tif (v.isMesh) {\r\n\t\t\t\tv.castShadow = true\r\n\t\t\t\tv.frustumCulled = false\r\n\t\t\t\tif (v.material) {\r\n\t\t\t\t\tconst newMaterial = v.material.clone()\r\n\t\t\t\t\tv.material = newMaterial\r\n\t\t\t\t\tthis.modelMaterialList.push(v)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\t// 获取当前模型材质贴图\r\n\tgetModelMeaterialMaps(map: string) {\r\n\t\tthis.modelTextureMap = []\r\n\t\t// TODO 获取当前模型材质数量如果超过100个 则不加载模型自带贴图\r\n\t\tconst materials = new Set();\r\n\t\tthis.model.traverse((node: { isMesh: any; material: any }) => {\r\n\t\t\tif (node.isMesh) {\r\n\t\t\t\tconst meshMaterials = Array.isArray(node.material) ? node.material : [node.material];\r\n\t\t\t\tmeshMaterials.forEach((material: unknown) => materials.add(material));\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tconst numMaterials = materials.size;\r\n\t\tif (numMaterials > 100) {\r\n\t\t\tElMessageBox.alert(`当前模型材质数量过大“${numMaterials}个”，编辑器页面可能有卡顿`, '提示', {\r\n\t\t\t\tconfirmButtonText: '确认',\r\n\t\t\t\ttype: 'warning'\r\n\t\t\t})\r\n\t\t\treturn this.modelTextureMap = null\r\n\t\t}\r\n\r\n\t\tconst isMap = map ? true : false\r\n\t\tlet i = 0;\r\n\t\tthis.model.traverse((v: { isMesh?: any; material?: any; name?: any; mapId?: any; uuid?: any }) => {\r\n\t\t\tconst { uuid } = v\r\n\t\t\tif (v.isMesh && v.material) {\r\n\t\t\t\ti++;\r\n\t\t\t\tconst materials = Array.isArray(v.material) ? v.material : [v.material]\r\n\t\t\t\tconst { url, mapId } = this.getModelMaps(materials, uuid) as any\r\n\t\t\t\tconst mesh = {\r\n\t\t\t\t\tmeshName: v.name,\r\n\t\t\t\t\tmaterial: v.material,\r\n\t\t\t\t\turl,\r\n\t\t\t\t\tmapId: mapId + '_' + i\r\n\t\t\t\t}\r\n\t\t\t\t// 获取当前模型材质\r\n\t\t\t\tv.mapId = mapId + '_' + i\r\n\t\t\t\tthis.modelTextureMap.push(mesh)\r\n\t\t\t\t// 部分模型本身没有贴图需 要单独处理\r\n\t\t\t\tif (isMap) {\r\n\t\t\t\t\tconst mapTexture = new THREE.TextureLoader().load(map)\r\n\t\t\t\t\tconst newMaterial = v.material.clone()\r\n\t\t\t\t\tv.material = newMaterial\r\n\t\t\t\t\tv.material.map = mapTexture\r\n\t\t\t\t\tv.mapId = uuid + '_' + i\r\n\t\t\t\t\tthis.modelTextureMap = [{\r\n\t\t\t\t\t\tmeshName: v.name,\r\n\t\t\t\t\t\tmaterial: v.material,\r\n\t\t\t\t\t\turl: map,\r\n\t\t\t\t\t\tmapId: uuid + '_' + i\r\n\t\t\t\t\t}]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t}\r\n\t// 设置模型定位缩放大小\r\n\tsetModelPositionSize() {\r\n\t\t//设置模型位置\r\n\t\tthis.model.updateMatrixWorld()\r\n\t\tconst box = new THREE.Box3().setFromObject(this.model);\r\n\t\tconst size = box.getSize(new THREE.Vector3());\r\n\t\tconst center = box.getCenter(new THREE.Vector3());\r\n\t\t// 计算缩放比例\r\n\t\tconst maxSize = Math.max(size.x, size.y, size.z);\r\n\t\tconst targetSize = 2.5; // 目标大小\r\n\t\tconst scale = targetSize / (maxSize > 1 ? maxSize : .5);\r\n\t\tthis.model.scale.set(scale, scale, scale)\r\n\t\t// 设置模型位置\r\n\t\t// this.model.position.sub(center.multiplyScalar(scale))\r\n\t\t// 设置控制器最小缩放值\r\n\t\tthis.controls.maxDistance = size.length() * 10\r\n\t\t// 设置相机位置\r\n\t\tthis.camera.position.set(0, 2, 6)\r\n\t\t// 设置相机坐标系\r\n\t\tthis.camera.lookAt(center)\r\n\t\tthis.camera.updateProjectionMatrix();\r\n\r\n\t}\r\n\t// 获取模型自带贴图\r\n\tgetModelMaps(materials: any[], uuid: string) {\r\n\t\tlet textureMap = {}\r\n\t\tmaterials.forEach((texture: { map: { image: ImageBitmap } }) => {\r\n\t\t\tif (texture.map && texture.map.image) {\r\n\t\t\t\tconst canvas = document.createElement('canvas')\r\n\t\t\t\tcanvas.width = 75\r\n\t\t\t\tcanvas.height = 75\r\n\t\t\t\tconst context: CanvasRenderingContext2D = canvas.getContext('2d')!\r\n\t\t\t\tcontext.drawImage(texture.map.image, 0, 0)\r\n\t\t\t\ttextureMap = {\r\n\t\t\t\t\turl: canvas.toDataURL('image/png', .5),\r\n\t\t\t\t}\r\n\t\t\t\tcanvas.remove()\r\n\t\t\t}\r\n\t\t})\r\n\t\treturn textureMap\r\n\t}\r\n\t// 设置材质属性\r\n\tonSetModelMaterial(config: any) {\r\n\t\tconst { color, wireframe, depthWrite, opacity } = JSON.parse(JSON.stringify(config))\r\n\t\tconst uuid = store.state.selectMesh.uuid\r\n\t\tconst mesh = this.scene.getObjectByProperty('uuid', uuid)\r\n\t\tif (mesh && mesh.material) {\r\n\t\t\tconst { name, map } = mesh.material\r\n\t\t\tObject.assign(mesh.material, {\r\n\t\t\t\tmap,\r\n\t\t\t\tname,\r\n\t\t\t\ttransparent: true,\r\n\t\t\t\tcolor: new THREE.Color(color),\r\n\t\t\t\twireframe,\r\n\t\t\t\tdepthWrite,\r\n\t\t\t\topacity\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\t// 设置模型贴图（模型自带）\r\n\tonSetModelMap(modelMap: OnSetModelMapType) {\r\n\t\tconst { material, mapId, meshName } = modelMap\r\n\t\tconst uuid = store.state.selectMesh.uuid\r\n\t\tconst mesh = this.scene.getObjectByProperty('uuid', uuid)\r\n\t\tmesh.material = material.clone()\r\n\t\tmesh.mapId = mapId\r\n\t\t// 设置当前材质来源唯一标记值key 用于预览处数据回填需要\r\n\t\tmesh.meshFrom = meshName\r\n\t}\r\n\t// 设置模型贴图（系统贴图）\r\n\tonSetSystemModelMap(map: OnSetSystemModelMapType) {\r\n\t\tconst { id, url } = map\r\n\t\tconst uuid = store.state.selectMesh.uuid\r\n\t\tconst mesh = this.scene.getObjectByProperty('uuid', uuid)\r\n\t\tconst mapTexture = new THREE.TextureLoader().load(url)\r\n\t\tconst newMaterial = mesh.material.clone()\r\n\t\tnewMaterial.map = mapTexture\r\n\t\tmesh.material = newMaterial\r\n\t\tmesh.mapId = id\r\n\t\t// 设置当前材质来源唯一标记值key 用于预览处数据回填需要\r\n\t\tmesh.meshFrom = id\r\n\t}\r\n\t// 选择材质\r\n\tonChangeModelMeaterial(name: any) {\r\n\t\tconst mesh = this.model.getObjectByName(name)\r\n\t\tthis.outlinePass.selectedObjects = [mesh]\r\n\t\tstore.commit('SELECT_MESH', mesh)\r\n\t\treturn mesh\r\n\t}\r\n\r\n\t// 模型点击事件\r\n\tonMouseClickModel(event: { clientX: number; clientY: number }) {\r\n\t\tconst { clientHeight, clientWidth, offsetLeft, offsetTop } = this.container\r\n\t\tif (!this.mouse) return false\r\n\t\tthis.mouse.x = ((event.clientX - offsetLeft) / clientWidth) * 2 - 1\r\n\t\tthis.mouse.y = -((event.clientY - offsetTop) / clientHeight) * 2 + 1\r\n\t\tthis.raycaster.setFromCamera(this.mouse, this.camera)\r\n\t\tconst intersects = this.raycaster.intersectObjects(this.scene.children).filter(item => (item.object as THREE.Mesh).type == 'Mesh')\r\n\t\tif (intersects.length > 0) {\r\n\t\t\tconst intersectedObject = intersects[0].object\r\n\t\t\tthis.outlinePass.selectedObjects = [intersectedObject]\r\n\t\t\tstore.commit('SELECT_MESH', intersectedObject)\r\n\t\t} else {\r\n\t\t\tthis.outlinePass.selectedObjects = []\r\n\t\t\tstore.commit('SELECT_MESH', {})\r\n\t\t}\r\n\t}\r\n\t// 获取最新材质信息列表\r\n\tonGetEditMeshList() {\r\n\t\tconst meshList: OnGetEditMeshListType[] = []\r\n\t\tthis.model.traverse((v: any) => {\r\n\t\t\tif (v.isMesh && v.material) {\r\n\t\t\t\tconst { color, opacity, depthWrite, wireframe } = v.material\r\n\t\t\t\tconst obj = {\r\n\t\t\t\t\tmeshName: v.name,\r\n\t\t\t\t\tmeshFrom: v.meshFrom,\r\n\t\t\t\t\tcolor: color.getStyle(),\r\n\t\t\t\t\topacity, depthWrite, wireframe,\r\n\t\t\t\t\tvisible: v.visible,\r\n\t\t\t\t\ttype: v.material.type\r\n\t\t\t\t}\r\n\t\t\t\tmeshList.push(obj)\r\n\t\t\t}\r\n\t\t})\r\n\t\treturn meshList\r\n\t}\r\n\t// 设置材质类型\r\n\tonChangeModelMeshType(activeMesh: { type: string }) {\r\n\t\tthis.model.traverse((v: any) => {\r\n\t\t\tif (v.isMesh && v.material) {\r\n\t\t\t\tconst { name, color, map, wireframe, depthWrite, opacity } = v.material\r\n\t\t\t\tv.material = new (THREE as any)[activeMesh.type]({\r\n\t\t\t\t\tmap,\r\n\t\t\t\t\ttransparent: true,\r\n\t\t\t\t\tcolor,\r\n\t\t\t\t\tname,\r\n\t\t\t\t});\r\n\t\t\t\tdepthWrite ? v.material.depthWrite = depthWrite : ''\r\n\t\t\t\topacity ? v.material.opacity = opacity : ''\r\n\t\t\t\twireframe ? v.material.wireframe = wireframe : ''\r\n\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\t// 设置几何体材质\r\n\tonSetGeometryMeshList(v: THREE.Mesh<any, THREE.MeshStandardMaterial, THREE.Object3DEventMap>) {\r\n\t\tthis.modelMaterialList = []\r\n\t\tthis.modelTextureMap = []\r\n\t\tthis.model.traverse((v: any) => {\r\n\t\t\tconst { uuid, name } = v\r\n\t\t\tv.castShadow = true\r\n\t\t\tv.frustumCulled = false\r\n\t\t\tif (v.isMesh && v.material) {\r\n\t\t\t\tconst materials = Array.isArray(v.material) ? v.material : [v.material]\r\n\t\t\t\t// 统一将模型材质 设置为 MeshLambertMaterial 类型\r\n\t\t\t\tthis.modelMaterialList.push(v)\r\n\t\t\t\t// 获取模型自动材质贴图\r\n\t\t\t\tconst { url } = this.getModelMaps(materials, uuid) as any\r\n\t\t\t\tconst mesh = {\r\n\t\t\t\t\tmeshName: v.name,\r\n\t\t\t\t\tmaterial: v.material,\r\n\t\t\t\t\turl,\r\n\t\t\t\t\tmapId: name\r\n\t\t\t\t}\r\n\t\t\t\t// 获取当前模型材质\r\n\t\t\t\tv.mapId = name\r\n\t\t\t\tthis.modelTextureMap.push(mesh)\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * @describe 后期/操作模块方法\r\n\t * @function onSetUnrealBloomPass 设置辉光效果\r\n\t * @function setModelMeshDecompose 模型拆分\r\n\t * @function setModelMeshDrag 模型材质可拖拽\r\n\t * @function getMeshDragPosition 获取模型材质位拖拽置\r\n\t * @function onSetFlowColor 修改辉光颜色\r\n\t */\r\n\t// 设置辉光效果\r\n\tonSetUnrealBloomPass(config: { glow: any; threshold: any; strength: any; radius: any; toneMappingExposure: any, color: string }) {\r\n\t\tconst { glow, threshold, strength, radius, toneMappingExposure, color } = config\r\n\t\tthis.glowUnrealBloomPass = glow\r\n\t\tif (glow) {\r\n\t\t\tthis.unrealBloomPass.threshold = threshold\r\n\t\t\tthis.unrealBloomPass.strength = strength\r\n\t\t\tthis.unrealBloomPass.radius = radius\r\n\t\t\tthis.renderer.toneMappingExposure = toneMappingExposure\r\n\t\t\tthis.shaderPass.material.uniforms.glowColor.value = new THREE.Color(color)\r\n\r\n\t\t} else {\r\n\t\t\tthis.unrealBloomPass.threshold = 0\r\n\t\t\tthis.unrealBloomPass.strength = 0\r\n\t\t\tthis.unrealBloomPass.radius = 0\r\n\t\t\tthis.renderer.toneMappingExposure = toneMappingExposure\r\n\t\t\tthis.shaderPass.material.uniforms.glowColor.value = new THREE.Color()\r\n\t\t}\r\n\t}\r\n\t// 模型拆分\r\n\tsetModelMeshDecompose(meshDecompose: { decompose: number }) {\r\n\t\tconst { decompose } = meshDecompose\r\n\t\tif (this.glowMaterialList.length <= 1) return false\r\n\t\tconst modelDecomposeMove = (obj: any, position: { [x: string]: any }) => {\r\n\t\t\tconst Tween = new TWEEN.Tween(obj.position)\r\n\t\t\tTween.to(position, 500)\r\n\t\t\tTween.onUpdate(function (val) {\r\n\t\t\t\tobj.position.set(val.x || 0, val.y || 0, val.z || 0);\r\n\t\t\t})\r\n\t\t\tTween.start()\r\n\t\t}\r\n\t\tconst length = this.glowMaterialList.length\r\n\t\tconst angleStep = (2 * Math.PI) / length;\r\n\t\tthis.glowMaterialList.forEach((name: string | number, i: number) => {\r\n\t\t\tconst mesh = this.model.getObjectByName(name)\r\n\t\t\tconst { decomposeName } = this.model\r\n\t\t\tif (mesh.type == 'Mesh') {\r\n\t\t\t\t// 如果当前模型有设置模型分解的自定义参数\r\n\t\t\t\tif ((MODEL_DECOMPOSE as any)[decomposeName] && (MODEL_DECOMPOSE as any)[decomposeName][name]) {\r\n\t\t\t\t\tconst position = { x: 0, y: 0, z: 0 }\r\n\t\t\t\t\tconst { x: modelX, y: modelY, z: modelZ } = (MODEL_DECOMPOSE as any)[decomposeName][name]\r\n\t\t\t\t\tif (modelX == 'straight') {\r\n\t\t\t\t\t\tposition.x += decompose\r\n\t\t\t\t\t} else if (modelX == 'burden') {\r\n\t\t\t\t\t\tposition.x -= decompose\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (modelY == 'straight') {\r\n\t\t\t\t\t\tposition.y += decompose\r\n\t\t\t\t\t} else if (modelY == 'burden') {\r\n\t\t\t\t\t\tposition.y -= decompose\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (modelZ == 'straight') {\r\n\t\t\t\t\t\tposition.z += decompose\r\n\t\t\t\t\t} else if (modelZ == 'burden') {\r\n\t\t\t\t\t\tposition.z -= decompose\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmodelDecomposeMove(mesh, position)\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// 材质位置计算\r\n\t\t\t\t\tconst angle = i * angleStep;\r\n\t\t\t\t\tconst x = (decompose) * Math.cos(angle);\r\n\t\t\t\t\tconst y = (decompose) * Math.sin(angle);\r\n\t\t\t\t\tconst position = {\r\n\t\t\t\t\t\tx, y, z: 0\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmodelDecomposeMove(mesh, position)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\t// 模型材质可拖拽\r\n\tsetModelMeshDrag(model: { modelDrag: boolean }) {\r\n\t\tconst { modelDrag } = model\r\n\t\t// 先把之前的拖拽信息给清除掉\r\n\t\tif (this.dragControls) this.dragControls.dispose()\r\n\t\tif (modelDrag) {\r\n\t\t\tthis.dragControls = new DragControls(this.modelMaterialList, this.camera, this.renderer.domElement);\r\n\t\t\t// 拖拽事件监听\r\n\t\t\tthis.dragControls.addEventListener('dragstart', () => {\r\n\t\t\t\tthis.controls.enabled = false\r\n\t\t\t})\r\n\r\n\t\t\tthis.dragControls.addEventListener('dragend', () => {\r\n\t\t\t\tthis.controls.enabled = true\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\t// 获取模型材质位拖拽置\r\n\tgetMeshDragPosition() {\r\n\t\tconst positonList: any[] = []\r\n\t\tthis.modelMaterialList.forEach((v: { name: any }) => {\r\n\t\t\tconst mesh = this.model.getObjectByProperty('name', v.name)\r\n\t\t\tconst obj = {\r\n\t\t\t\tname: v.name,\r\n\t\t\t\t...mesh.position\r\n\t\t\t}\r\n\t\t\tpositonList.push(obj)\r\n\t\t})\r\n\t\treturn positonList\r\n\t}\r\n\t// 修改辉光颜色\r\n\tonSetFlowColor(color: string) {\r\n\t\tthis.shaderPass.material.uniforms.glowColor.value = new THREE.Color(color)\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * @describe 灯光模块方法\r\n\t * @function onSetModelAmbientLight 设置环境光\r\n\t * @function onSetModelDirectionalLight 设置平行光\r\n\t * @function onSetModelPointLight 设置点光源\r\n\t * @function onSetModelSpotLight 设置聚光灯\r\n\t * @function onSetModelPlaneGeometry 设置模型平面\r\n\t * @function onResettingLight 重置场景灯光\r\n\t */\r\n\t// 设置环境光\r\n\tonSetModelAmbientLight(config: OnSetModelAmbientLightType) {\r\n\t\tconst { ambientLight, ambientLightIntensity, ambientLightColor } = config\r\n\t\tthis.ambientLight.visible = ambientLight\r\n\t\tthis.ambientLight.intensity = ambientLightIntensity\r\n\t\tthis.ambientLight.color.set(ambientLightColor)\r\n\t}\r\n\t// 设置平行光\r\n\tonSetModelDirectionalLight(config: OnSetModelDirectionalLightType) {\r\n\t\tconst {\r\n\t\t\tdirectionaShadow,\r\n\t\t\tdirectionalHorizontal,\r\n\t\t\tdirectionalVertical,\r\n\t\t\tdirectionalSistance,\r\n\t\t\tdirectionalLight,\r\n\t\t\tdirectionalLightColor,\r\n\t\t\tdirectionalLightIntensity,\r\n\t\t\tdirectionalLightHelper\r\n\t\t} = config\r\n\t\tthis.directionalLight.visible = directionalLight\r\n\t\tthis.directionalLightHelper.visible = directionalLightHelper && directionalLight\r\n\t\tthis.directionalLight.intensity = directionalLightIntensity\r\n\t\tthis.directionalLight.castShadow = directionaShadow\r\n\t\tthis.directionalLight.color.set(directionalLightColor)\r\n\t\tconst { x, y, z } = lightPosition(directionalHorizontal, directionalVertical, directionalSistance)\r\n\t\tthis.directionalLight.position.set(x, y, z)\r\n\t\tthis.directionalLightHelper.update()\r\n\t}\r\n\t// 设置点光源\r\n\tonSetModelPointLight(config: any) {\r\n\t\tconst { pointHorizontal, pointVertical, pointSistance, pointLight, pointLightColor, pointLightIntensity, pointLightHelper } = config\r\n\t\tthis.pointLight.visible = pointLight\r\n\t\tthis.pointLightHelper.visible = pointLight && pointLightHelper\r\n\t\tthis.pointLight.intensity = pointLightIntensity\r\n\t\tthis.pointLight.color.set(pointLightColor)\r\n\t\tconst { x, y, z } = lightPosition(pointHorizontal, pointVertical, pointSistance)\r\n\t\tthis.pointLight.position.set(x, y, z)\r\n\t\tthis.pointLightHelper.update()\r\n\t}\r\n\t// 设置聚光灯\r\n\tonSetModelSpotLight(config: any) {\r\n\t\tconst { spotDistance, spotCastShadow, spotLightHelper, spotFocus, spotPenumbra, spotAngle, spotLight, spotLightColor, spotLightIntensity, spotHorizontal, spotVertical, spotSistance } = config\r\n\t\tthis.spotLight.visible = spotLight\r\n\t\tthis.spotLightHelper.visible = spotLight && spotLightHelper\r\n\t\tthis.spotLight.intensity = spotLightIntensity\r\n\t\tthis.spotLight.angle = spotAngle\r\n\t\tthis.spotLight.penumbra = spotPenumbra\r\n\t\tthis.spotLight.shadow.focus = spotFocus\r\n\t\tthis.spotLight.castShadow = spotCastShadow\r\n\t\tthis.spotLight.distance = spotDistance\r\n\t\tthis.spotLight.color.set(spotLightColor)\r\n\t\tconst { x, y, z } = lightPosition(spotHorizontal, spotVertical, spotSistance)\r\n\t\tthis.spotLight.position.set(x, y, z)\r\n\t\tthis.spotLightHelper.update()\r\n\t}\r\n\t// 设置模型平面\r\n\tonSetModelPlaneGeometry(config: any) {\r\n\t\tconst { planeGeometry, planeColor, planeWidth, planeHeight } = config\r\n\t\tthis.planeGeometry.visible = planeGeometry\r\n\t\tthis.planeGeometry.geometry = new THREE.PlaneGeometry(planeWidth, planeHeight)\r\n\t\tthis.planeGeometry.material.color.set(planeColor)\r\n\t\tthis.planeGeometry.geometry.verticesNeedUpdate = true\r\n\t}\r\n\t// 重置场景灯光\r\n\tonResettingLight(light: any) {\r\n\t\tconst { ambientLight } = light\r\n\t\tconst config = {\r\n\t\t\tplaneGeometry: false,\r\n\t\t\tplaneColor: \"#939393\",\r\n\t\t\tplaneWidth: 7,\r\n\t\t\tplaneHeight: 7,\r\n\t\t\t//环境光\r\n\t\t\tambientLight,\r\n\t\t\tambientLightColor: \"#fff\",\r\n\t\t\tambientLightIntensity: 0.8,\r\n\t\t\t//平行光\r\n\t\t\tdirectionalLight: false,\r\n\t\t\tdirectionalLightHelper: true,\r\n\t\t\tdirectionalLightColor: \"#1E90FF\",\r\n\t\t\tdirectionalLightIntensity: 1,\r\n\t\t\tdirectionalHorizontal: -1.26,\r\n\t\t\tdirectionalVertical: -3.85,\r\n\t\t\tdirectionalSistance: 2.98,\r\n\t\t\tdirectionaShadow: true,\r\n\t\t\t//点光源\r\n\t\t\tpointLight: false,\r\n\t\t\tpointLightHelper: true,\r\n\t\t\tpointLightColor: \"#1E90FF\",\r\n\t\t\tpointLightIntensity: 1,\r\n\t\t\tpointHorizontal: -4.21,\r\n\t\t\tpointVertical: -4.1,\r\n\t\t\tpointSistance: 2.53,\r\n\t\t\t//聚光灯\r\n\t\t\tspotLight: false,\r\n\t\t\tspotLightColor: \"#323636\",\r\n\t\t\tspotLightIntensity: 400,\r\n\t\t\tspotHorizontal: -3.49,\r\n\t\t\tspotVertical: -4.37,\r\n\t\t\tspotSistance: 4.09,\r\n\t\t\tspotAngle: 0.5,\r\n\t\t\tspotPenumbra: 1,\r\n\t\t\tspotFocus: 1,\r\n\t\t\tspotCastShadow: true,\r\n\t\t\tspotLightHelper: true,\r\n\t\t\tspotDistance: 20\r\n\t\t}\r\n\t\tthis.onSetModelAmbientLight(config)\r\n\t\tthis.onSetModelDirectionalLight(config)\r\n\t\tthis.onSetModelPointLight(config)\r\n\t\tthis.onSetModelSpotLight(config)\r\n\t\tthis.onSetModelPlaneGeometry(config)\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * @describe 模型动画模块方法\r\n\t * @function onStartModelAnimaion 开始执行动画\r\n\t * @function onSetModelAnimaion 设置模型动画\r\n\t * @function animationFrameFun 动画帧\r\n\t * @function onClearAnimation 清除动画\r\n\t * @function onSetRotation 设置模型轴动画\r\n\t * @function onSetRotationType 设置模型轴动画类型\r\n\t */\r\n\t// 开始执行动画\r\n\tonStartModelAnimaion(config: { animationName: any; loop: any; timeScale: any; weight: any }) {\r\n\t\tthis.onSetModelAnimaion(config)\r\n\t\tcancelAnimationFrame(this.animationFrame)\r\n\t\tthis.animationFrameFun()\r\n\t}\r\n\t// 设置模型动画\r\n\tonSetModelAnimaion(config: any) {\r\n\t\tconst { animationName, loop, timeScale, weight } = config\r\n\t\tthis.animationMixer = new THREE.AnimationMixer(this.model)\r\n\t\tconst clip = THREE.AnimationClip.findByName(this.modelAnimation, animationName)\r\n\t\tif (clip) {\r\n\t\t\tthis.animateClipAction = this.animationMixer.clipAction(clip)\r\n\t\t\tif (this.animateClipAction) {\r\n\t\t\t\tthis.animateClipAction.setEffectiveTimeScale(timeScale)\r\n\t\t\t\tthis.animateClipAction.setEffectiveWeight(weight)\r\n\t\t\t\tthis.animateClipAction.setLoop(this.loopMap[loop])\r\n\t\t\t\tthis.animateClipAction.play()\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t// 动画帧\r\n\tanimationFrameFun() {\r\n\t\tthis.animationFrame = requestAnimationFrame(() => this.animationFrameFun())\r\n\t\tif (this.animationMixer && this.animationColock) {\r\n\t\t\tthis.animationMixer.update(this.animationColock.getDelta())\r\n\t\t}\r\n\t}\r\n\t// 清除动画\r\n\tonClearAnimation() {\r\n\t\tif (!this.animateClipAction) return\r\n\t\tthis.animationMixer.stopAllAction();\r\n\t\tthis.animationMixer.update(0);\r\n\t\tcancelAnimationFrame(this.animationFrame)\r\n\t}\r\n\t// 设置模型轴动画\r\n\tonSetRotation(config: { rotationVisible: any; rotationType: any; rotationSpeed: any }) {\r\n\t\tconst { rotationVisible, rotationType, rotationSpeed } = config\r\n\t\tif (rotationVisible) {\r\n\t\t\tcancelAnimationFrame(this.rotationAnimationFrame)\r\n\t\t\tthis.rotationAnimationFun(rotationType, rotationSpeed)\r\n\t\t} else {\r\n\t\t\tcancelAnimationFrame(this.rotationAnimationFrame)\r\n\t\t\tthis.model.rotation.set(0, 0, 0)\r\n\t\t}\r\n\t}\r\n\t// 设置轴动画类型\r\n\tonSetRotationType(config: { rotationType: any; rotationSpeed: any }) {\r\n\t\tconst { rotationType, rotationSpeed } = config\r\n\t\tthis.model.rotation.set(0, 0, 0)\r\n\t\tcancelAnimationFrame(this.rotationAnimationFrame)\r\n\t\tthis.rotationAnimationFun(rotationType, rotationSpeed)\r\n\t}\r\n\t// 轴动画帧\r\n\trotationAnimationFun(rotationType: string | number, rotationSpeed: number) {\r\n\t\tthis.rotationAnimationFrame = requestAnimationFrame(() => this.rotationAnimationFun(rotationType, rotationSpeed))\r\n\t\tthis.model.rotation[rotationType] += rotationSpeed / 50\r\n\t}\r\n\r\n\r\n\r\n\t/**\r\n\t * @describe 辅助线/轴配置模块方法\r\n\t * @function onSetModelHelper 设置模型骨架\r\n\t * @function onSetModelRotateOnAxis 设置模型轴旋转\r\n\t * @function onResultModelRotateOnAxis 重置模型轴位置\r\n\t * @function onSetModelPosition 设置模型位置\r\n\t * @function onResultModelPosition 重置模型位置\r\n\t * @function onResetModelCamera 重置相机位置\r\n\t * @function onGetModelCamera 获取相机位置\r\n\t * @function onSetModelGridHelper 设置网格辅助线位置和颜色\r\n\t * @function onSetModelGridHelperSize 设置网格数量和大小\r\n\t * @function onSetModelAxesHelper 设置坐标轴辅助线\r\n\t */\r\n\t// 设置模型骨架\r\n\tonSetModelHelper(visible: any) {\r\n\t\tthis.skeletonHelper.visible = visible\r\n\t}\r\n\t// 设置模型轴旋转\r\n\tonSetModelRotateOnAxis(type: string, flag: any) {\r\n\t\tconst maxAxis = Math.PI / 2\r\n\t\tconst { x, y, z } = this.model.rotation\r\n\t\tconst endPosition: any = {\r\n\t\t\tx, y, z\r\n\t\t}\r\n\t\tendPosition[type] += flag ? maxAxis : -maxAxis\r\n\t\tconst Tween = new TWEEN.Tween({ x, y, z })\r\n\t\tTween.to(endPosition, 500)\r\n\t\tTween.onUpdate((val: any) => {\r\n\t\t\tthis.model.rotation[type] = val[type]\r\n\t\t})\r\n\t\tTween.start();\r\n\t}\r\n\t// 重置模型轴位置\r\n\tonResultModelRotateOnAxis() {\r\n\t\tthis.model.rotation.x = 0\r\n\t\tthis.model.rotation.y = 0\r\n\t\tthis.model.rotation.z = 0\r\n\t}\r\n\t// 设置模型位置\r\n\tonSetModelPosition(position: { positionX: number; positionY: number; positionZ: number }) {\r\n\t\tconst { positionX, positionY, positionZ } = position\r\n\t\tconst Tween = new TWEEN.Tween(this.model.position)\r\n\t\tconst endPosition = {\r\n\t\t\tx: positionX,\r\n\t\t\ty: positionY,\r\n\t\t\tz: positionZ\r\n\t\t}\r\n\t\tTween.to(endPosition, 500)\r\n\t\tTween.onUpdate((val) => {\r\n\t\t\tthis.model.position.set(val.x || 0, val.y || 0, val.z || 0)\r\n\t\t})\r\n\t\tTween.start();\r\n\t}\r\n\t// 重置模型位置\r\n\tonResultModelPosition(position: { positionX: number; positionY: number; positionZ: number }) {\r\n\t\tconst { positionX, positionY, positionZ } = position\r\n\t\tthis.model.position.set(positionX, positionY, positionZ)\r\n\t}\r\n\t// 重置相机位置\r\n\tonResetModelCamera() {\r\n\t\t// 设置相机位置\r\n\t\tthis.camera.position.set(0, 2, 6)\r\n\t\t// 设置相机坐标系\r\n\t\tthis.camera.lookAt(0, 0, 0)\r\n\t}\r\n\t// 获取相机位置\r\n\tonGetModelCamera() {\r\n\t\treturn this.camera.position\r\n\t}\r\n\t// 设置网格辅助线位置和颜色\r\n\tonSetModelGridHelper(grid: any) {\r\n\t\tconst { x, y, z, gridHelper, color } = grid\r\n\t\tthis.gridHelper.visible = gridHelper\r\n\t\tthis.gridHelper.material.color.set(color);\r\n\r\n\t\tconst Tween = new TWEEN.Tween(this.gridHelper.position)\r\n\t\tconst endPosition = {\r\n\t\t\tx, y, z\r\n\t\t}\r\n\t\tTween.to(endPosition, 500)\r\n\t\tTween.onUpdate((val) => {\r\n\t\t\tthis.gridHelper.position.set(val.x || 0, val.y || 0, val.z || 0)\r\n\t\t})\r\n\t\tTween.start();\r\n\t}\r\n\t// 设置网格数量和大小\r\n\tonSetModelGridHelperSize(grid: any) {\r\n\t\tconst { x, y, z, size, divisions, color, gridHelper } = grid\r\n\t\t// 需要先把辅助线移除然后在重新创建\r\n\t\tthis.scene.remove(this.gridHelper)\r\n\t\tthis.gridHelper.geometry.dispose()\r\n\t\tthis.gridHelper.material.dispose()\r\n\t\tthis.gridHelper = new THREE.GridHelper(size, divisions, color, color);\r\n\t\tthis.gridHelper.position.set(x, y, z)\r\n\t\tthis.gridHelper.material.linewidth = 0.1\r\n\t\tthis.gridHelper.material.color.set(color);\r\n\t\tthis.gridHelper.visible = gridHelper\r\n\t\tthis.scene.add(this.gridHelper)\r\n\t}\r\n\t// 设置坐标轴辅助线\r\n\tonSetModelAxesHelper(axes: any) {\r\n\t\tconst { axesHelper, axesSize } = axes\r\n\t\t// 需要先把辅助线移除然后在重新创建\r\n\t\tthis.scene.remove(this.axesHelper)\r\n\t\tthis.axesHelper.geometry.dispose()\r\n\t\tthis.axesHelper.material.dispose()\r\n\t\tthis.axesHelper = new THREE.AxesHelper(axesSize);\r\n\t\tthis.axesHelper.position.set(0, -.50, 0)\r\n\t\tthis.axesHelper.visible = axesHelper\r\n\t\tthis.scene.add(this.axesHelper);\r\n\t}\r\n\r\n\r\n\r\n\t/**\r\n\t * @describe 辅助线/轴配置模块方法\r\n\t * @function onDeleteGeometryMesh 删除几何体材质\r\n\t * @function onSetGeometryMesh 修改几何体材质信息\r\n\t */\r\n\tonDeleteGeometryMesh(uuid: any) {\r\n\t\t// 找到需要删除的材质\r\n\t\tconst mesh = this.scene.getObjectByProperty('uuid', uuid)\r\n\t\tthis.modelMaterialList = this.modelMaterialList.filter((v: { uuid: any }) => v.uuid != uuid)\r\n\t\tthis.glowMaterialList = this.modelMaterialList.map((v: { name: any }) => v.name)\r\n\t\tmesh.clear()\r\n\t\tthis.geometryGroup.remove(mesh)\r\n\t\tthis.dragControls.dispose()\r\n\t\t// 更新拖拽函数的材质对象\r\n\t\tif (this.modelMaterialList.length == 0) {\r\n\t\t\tthis.setModelMeshDrag({ modelDrag: false })\r\n\t\t} else {\r\n\t\t\tthis.setModelMeshDrag({ modelDrag: true })\r\n\t\t}\r\n\t}\r\n\tonSetGeometryMesh(activeGeometry: { [x: string]: any }, type: string | number) {\r\n\t\tconst uuid = store.state.selectMesh.uuid\r\n\t\tconst mesh = this.scene.getObjectByProperty('uuid', uuid)\r\n\t\tconst geometryData = Object.keys(activeGeometry).map(v => activeGeometry[v])\r\n\t\t// 创建几何体\r\n\t\tconst newGeometry = new (THREE as any)[type](...geometryData)\r\n\t\tmesh.geometry = newGeometry\r\n\t}\r\n}\r\n\r\nexport default renderModel","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-17ffefe8\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = {\n  key: 0,\n  id: \"loading-mark\"\n}\nconst _hoisted_2 = { class: \"loading-box\" }\nconst _hoisted_3 = { class: \"loading\" }\nconst _hoisted_4 = [\"src\"]\nconst _hoisted_5 = { class: \"progress-txt\" }\nconst _hoisted_6 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"loading-txt\" }, \"模型文件首次加载时间较长请耐心等待.....\", -1))\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'PageLoading',\n  props: {\n  percentage: {\n    type: Number,\n    default: 0,\n  },\n  loading: {\n    type: Boolean,\n    default: false,\n  },\n},\n  setup(__props) {\n\nconst props = __props;\n\nreturn (_ctx: any,_cache: any) => {\n  return (props.loading)\n    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n        _createElementVNode(\"div\", _hoisted_2, [\n          _createElementVNode(\"div\", _hoisted_3, [\n            _createElementVNode(\"img\", {\n              src: require('@/assets/image/loading.svg')\n            }, null, 8, _hoisted_4),\n            _createElementVNode(\"div\", _hoisted_5, [\n              _createTextVNode(\" 当前模型已加载 \"),\n              _createElementVNode(\"b\", null, _toDisplayString(props.percentage), 1),\n              _createTextVNode(\" M \")\n            ]),\n            _hoisted_6\n          ])\n        ])\n      ]))\n    : _createCommentVNode(\"\", true)\n}\n}\n\n})","<template>\n  <div id=\"loading-mark\" v-if=\"props.loading\">\n    <div class=\"loading-box\">\n      <div class=\"loading\">\n        <img :src=\"require('@/assets/image/loading.svg')\" />\n        <div class=\"progress-txt\">\n          当前模型已加载 <b>{{ props.percentage }}</b> M\n        </div>\n        <div class=\"loading-txt\">模型文件首次加载时间较长请耐心等待.....</div>\n      </div>\n    </div>\n  </div>\n</template>\n<script setup lang=\"ts\">\nconst props = defineProps({\n  percentage: {\n    type: Number,\n    default: 0,\n  },\n  loading: {\n    type: Boolean,\n    default: false,\n  },\n});\n</script>\n<style scoped lang=\"scss\">\n#loading-mark {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  z-index: 2000;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n\n  .loading-box {\n    width: 100%;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    transition: opacity 0.3s;\n    background-color: rgb(0 0 0 / 64%);\n\n    .loading {\n      width: 320px;\n      height: 120px;\n      text-align: center;\n    }\n    .progress-txt {\n      font-size: 18px;\n      color: #ffcb00;\n      b {\n        color: #f56c6c;\n      }\n    }\n    .loading-txt {\n      text-align: center;\n      font-size: 14px;\n      color: #ff7c81;\n    }\n  }\n}\n</style>\n","import script from \"./PageLoading.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./PageLoading.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./PageLoading.vue?vue&type=style&index=0&id=17ffefe8&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-17ffefe8\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, unref as _unref, withCtx as _withCtx, createVNode as _createVNode, withModifiers as _withModifiers, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-5f5a5628\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"model-page\" }\nconst _hoisted_2 = { class: \"model-header\" }\nconst _hoisted_3 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"header-lf\" }, [\n  /*#__PURE__*/_createElementVNode(\"span\", null, \" 基于Three.js+Vue3+Element-Plus开发的3d模型可视化编辑系统 \"),\n  /*#__PURE__*/_createElementVNode(\"span\", null, \"作者:answer\")\n], -1))\nconst _hoisted_4 = { class: \"header-lr\" }\nconst _hoisted_5 = { class: \"model-container\" }\nconst _hoisted_6 = { class: \"camera-icon\" }\nconst _hoisted_7 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { id: \"mesh-txt\" }, null, -1))\nconst _hoisted_8 = {\n  class: \"edit-panel\",\n  style: { minWidth: '380px' }\n}\n\nimport { ModelChoose, ModelEditPanel } from \"@/components/index\";\r\nimport {\r\n  onMounted,\r\n  ref,\r\n  Ref,\r\n  reactive,\r\n  computed,\r\n  getCurrentInstance,\r\n  onBeforeUnmount,\r\n} from \"vue\";\r\nimport { useStore } from \"vuex\";\r\nimport { useRouter } from \"vue-router\";\r\nimport { ElMessage, ElMessageBox } from \"element-plus\";\r\nimport renderModel from \"./renderModel\";\r\nimport { modelList } from \"@/config/model\";\r\nimport { pageEnums } from '@/enums/pageEnums'\r\nimport PageLoading from \"@/components/Loading/PageLoading.vue\";\r\nimport {\r\n  MODEL_PRIVEW_CONFIG,\r\n  MODEL_BASE_DATA,\r\n  MODEL_DEFAULT_CONFIG,\r\n} from \"@/config/constant\";\r\nimport { StorageType, BusType } from \"@/types/typeOptions\";\r\n\r\ninterface getCurrentInstanceOptions {\r\n  $bus: BusType;\r\n  $local: StorageType;\r\n}\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'index',\n  setup(__props) {\n\r\nconst store = useStore();\r\nconst router = useRouter();\r\nconst { $bus, $local } = (getCurrentInstance()!\r\n  .proxy as unknown) as getCurrentInstanceOptions;\r\n\r\nconst state = reactive({\r\n  modelApi: computed(() => {\r\n    return store.state.modelApi;\r\n  }),\r\n});\r\nconst loading = ref(false);\r\nconst progress = ref(0);\r\nconst editPanel: Ref<any> = ref(null);\r\nconst choosePanel: Ref<any> = ref(null);\r\n\r\n// 重置相机位置\r\nconst onResetCamera = () => {\r\n  state.modelApi.onResetModelCamera();\r\n};\r\n// 初始化模型库数据\r\nconst initModelBaseData = () => {\r\n  const modelBase: any = $local.get(MODEL_BASE_DATA);\r\n  // 如果是首次加载需要设置模型库初始数据值\r\n  if (!Array.isArray(modelBase)) {\r\n    let modelBaseData: Array<any> = [];\r\n    modelList.forEach((v) => {\r\n      modelBaseData.push({\r\n        ...MODEL_DEFAULT_CONFIG,\r\n        fileInfo: { ...v },\r\n      });\r\n    });\r\n    $local.set(MODEL_BASE_DATA, modelBaseData);\r\n  }\r\n};\r\n\r\n// 几何体模型拖拽结束\r\nconst onGeometryDrop = (e: any) => {\r\n  const dragGeometryModel = state.modelApi.dragGeometryModel;\r\n  if (dragGeometryModel.id) {\r\n    dragGeometryModel.clientX = e.clientX;\r\n    dragGeometryModel.clientY = e.clientY;\r\n    state.modelApi.onSwitchModel(dragGeometryModel);\r\n  }\r\n};\r\n// 预览\r\nconst onPrivew = () => {\r\n  const modelConfig = editPanel.value.getPanelConfig();\r\n\r\n  modelConfig.camera = state.modelApi.onGetModelCamera();\r\n  modelConfig.fileInfo = choosePanel.value.activeModel;\r\n  //判断是否是外部模型\r\n  if (modelConfig.fileInfo.filePath) {\r\n    $local.set(MODEL_PRIVEW_CONFIG, modelConfig);\r\n    const { href } = router.resolve({ path: pageEnums.MODEL_PREIVEW });\r\n    window.open(href, \"_blank\");\r\n  } else {\r\n    ElMessage.warning(\"当前模型暂不支持“效果预览”\");\r\n  }\r\n};\r\n// 保存配置\r\nconst onSaveConfig = () => {\r\n  ElMessageBox.confirm(\" 确认要更新当前模型数据至“模板库”?\", \"提示\", {\r\n    confirmButtonText: \"确认\",\r\n    cancelButtonText: \"取消\",\r\n    type: \"success\",\r\n  })\r\n    .then(() => {\r\n      const modelConfig = editPanel.value.getPanelConfig();\r\n\r\n      modelConfig.camera = state.modelApi.onGetModelCamera();\r\n      modelConfig.fileInfo = choosePanel.value.activeModel;\r\n      // 判断是否是外部模型\r\n      if (modelConfig.fileInfo.filePath) {\r\n        const modelBaseData = $local.get(MODEL_BASE_DATA) || [];\r\n        const { id } = modelConfig.fileInfo;\r\n        // 更新缓存数据\r\n        Object.assign(\r\n          modelBaseData.filter((v: any) => id === v.fileInfo.id)[0],\r\n          modelConfig\r\n        );\r\n        $local.set(MODEL_BASE_DATA, modelBaseData);\r\n        ElMessage.success(\"更新成功\");\r\n      } else {\r\n        ElMessage.warning(\"当前模型暂不支持“数据保存”\");\r\n      }\r\n    })\r\n    .catch(() => { });\r\n};\r\n\r\n// 下载封面\r\nconst onDownloadCover = () => {\r\n  state.modelApi.onDownloadScenCover();\r\n};\r\n// 导出模型\r\nconst onExportModleFile = (type: string) => {\r\n  state.modelApi.onExporterModel(type);\r\n};\r\n\r\nonMounted(async () => {\r\n  loading.value = true;\r\n  const modelApi = new renderModel(\"#model\");\r\n  store.commit(\"SET_MODEL_API\", modelApi);\r\n  $bus.on(\"page-loading\", (value: any) => {\r\n    loading.value = value;\r\n  });\r\n  // 模型加载进度条\r\n  state.modelApi.onProgress((progressNum: number) => {\r\n    progress.value = Number((progressNum / 1024 / 1024).toFixed(2));\r\n    // console.log('模型已加载' + progress.value + 'M')\r\n  });\r\n  const load: any = await modelApi.init();\r\n  if (load) {\r\n    loading.value = false;\r\n    progress.value = 0;\r\n  }\r\n  // 初始化模型库数据\r\n  initModelBaseData();\r\n});\r\nonBeforeUnmount(() => {\r\n  state.modelApi.onClearModelData();\r\n});\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_button = _resolveComponent(\"el-button\")!\n  const _component_arrow_down = _resolveComponent(\"arrow-down\")!\n  const _component_el_icon = _resolveComponent(\"el-icon\")!\n  const _component_el_dropdown_item = _resolveComponent(\"el-dropdown-item\")!\n  const _component_el_dropdown_menu = _resolveComponent(\"el-dropdown-menu\")!\n  const _component_el_dropdown = _resolveComponent(\"el-dropdown\")!\n  const _component_el_space = _resolveComponent(\"el-space\")!\n  const _component_Aim = _resolveComponent(\"Aim\")!\n  const _component_el_tooltip = _resolveComponent(\"el-tooltip\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"header\", _hoisted_2, [\n      _hoisted_3,\n      _createElementVNode(\"div\", _hoisted_4, [\n        _createVNode(_component_el_space, null, {\n          default: _withCtx(() => [\n            _createVNode(_component_el_button, {\n              type: \"primary\",\n              icon: \"Film\",\n              onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.$router.push({ path: _unref(pageEnums).MODEL_BASE })))\n            }, {\n              default: _withCtx(() => [\n                _createTextVNode(\" 模型库 \")\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_button, {\n              type: \"primary\",\n              icon: \"Document\",\n              onClick: onSaveConfig\n            }, {\n              default: _withCtx(() => [\n                _createTextVNode(\"保存数据\")\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_dropdown, { trigger: \"click\" }, {\n              dropdown: _withCtx(() => [\n                _createVNode(_component_el_dropdown_menu, null, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_el_dropdown_item, { onClick: onDownloadCover }, {\n                      default: _withCtx(() => [\n                        _createTextVNode(\"下载封面\")\n                      ]),\n                      _: 1\n                    }),\n                    _createVNode(_component_el_dropdown_item, {\n                      onClick: _cache[1] || (_cache[1] = ($event: any) => (onExportModleFile('glb')))\n                    }, {\n                      default: _withCtx(() => [\n                        _createTextVNode(\"导出模型(.glb)格式\")\n                      ]),\n                      _: 1\n                    }),\n                    _createVNode(_component_el_dropdown_item, {\n                      onClick: _cache[2] || (_cache[2] = ($event: any) => (onExportModleFile('gltf')))\n                    }, {\n                      default: _withCtx(() => [\n                        _createTextVNode(\"导出模型(.gltf)格式\")\n                      ]),\n                      _: 1\n                    })\n                  ]),\n                  _: 1\n                })\n              ]),\n              default: _withCtx(() => [\n                _createVNode(_component_el_button, {\n                  type: \"primary\",\n                  icon: \"Download\"\n                }, {\n                  default: _withCtx(() => [\n                    _createTextVNode(\" 下载/导出\"),\n                    _createVNode(_component_el_icon, { class: \"el-icon--right\" }, {\n                      default: _withCtx(() => [\n                        _createVNode(_component_arrow_down)\n                      ]),\n                      _: 1\n                    })\n                  ]),\n                  _: 1\n                })\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_button, {\n              type: \"primary\",\n              icon: \"View\",\n              onClick: onPrivew\n            }, {\n              default: _withCtx(() => [\n                _createTextVNode(\"效果预览\")\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        })\n      ])\n    ]),\n    _createElementVNode(\"div\", _hoisted_5, [\n      _createVNode(_unref(ModelChoose), {\n        ref_key: \"choosePanel\",\n        ref: choosePanel\n      }, null, 512),\n      _createElementVNode(\"div\", {\n        id: \"model\",\n        onDrop: onGeometryDrop,\n        ref: \"model\",\n        onDragover: _cache[3] || (_cache[3] = _withModifiers(() => {}, [\"prevent\"]))\n      }, [\n        _createElementVNode(\"div\", _hoisted_6, [\n          _createVNode(_component_el_tooltip, {\n            effect: \"dark\",\n            content: \"居中\",\n            placement: \"top\"\n          }, {\n            default: _withCtx(() => [\n              _createVNode(_component_el_icon, {\n                size: 18,\n                color: \"#fff\",\n                onClick: onResetCamera\n              }, {\n                default: _withCtx(() => [\n                  _createVNode(_component_Aim)\n                ]),\n                _: 1\n              })\n            ]),\n            _: 1\n          })\n        ]),\n        _hoisted_7\n      ], 544),\n      _createElementVNode(\"div\", _hoisted_8, [\n        (state.modelApi.model)\n          ? (_openBlock(), _createBlock(_unref(ModelEditPanel), {\n              key: 0,\n              ref_key: \"editPanel\",\n              ref: editPanel\n            }, null, 512))\n          : _createCommentVNode(\"\", true)\n      ])\n    ]),\n    _createVNode(PageLoading, {\n      loading: loading.value,\n      percentage: progress.value\n    }, null, 8, [\"loading\", \"percentage\"])\n  ]))\n}\n}\n\n})","<template>\r\n  <div class=\"model-page\">\r\n    <!-- 头部操作栏 -->\r\n    <header class=\"model-header\">\r\n      <div class=\"header-lf\">\r\n        <span> 基于Three.js+Vue3+Element-Plus开发的3d模型可视化编辑系统 </span>\r\n        <span>作者:answer</span>\r\n      </div>\r\n      <div class=\"header-lr\">\r\n        <el-space>\r\n          <el-button type=\"primary\" icon=\"Film\" @click=\"$router.push({ path: pageEnums.MODEL_BASE })\">\r\n            模型库\r\n          </el-button>\r\n          <el-button type=\"primary\" icon=\"Document\" @click=\"onSaveConfig\">保存数据</el-button>\r\n          <el-dropdown trigger=\"click\">\r\n            <el-button type=\"primary\" icon=\"Download\">\r\n              下载/导出<el-icon class=\"el-icon--right\"><arrow-down /></el-icon>\r\n            </el-button>\r\n            <template #dropdown>\r\n              <el-dropdown-menu>\r\n                <el-dropdown-item @click=\"onDownloadCover\">下载封面</el-dropdown-item>\r\n                <el-dropdown-item @click=\"onExportModleFile('glb')\">导出模型(.glb)格式</el-dropdown-item>\r\n                <el-dropdown-item @click=\"onExportModleFile('gltf')\">导出模型(.gltf)格式</el-dropdown-item>\r\n              </el-dropdown-menu>\r\n            </template>\r\n          </el-dropdown>\r\n          <el-button type=\"primary\" icon=\"View\" @click=\"onPrivew\">效果预览</el-button>\r\n        </el-space>\r\n      </div>\r\n    </header>\r\n    <div class=\"model-container\">\r\n      <!-- 模型列表 -->\r\n      <model-choose ref=\"choosePanel\"></model-choose>\r\n      <!-- 模型视图 -->\r\n      <div id=\"model\" @drop=\"onGeometryDrop\" ref=\"model\" @dragover.prevent>\r\n        <div class=\"camera-icon\">\r\n          <el-tooltip effect=\"dark\" content=\"居中\" placement=\"top\">\r\n            <el-icon :size=\"18\" color=\"#fff\" @click=\"onResetCamera\">\r\n              <Aim />\r\n            </el-icon>\r\n          </el-tooltip>\r\n        </div>\r\n        <div id=\"mesh-txt\"></div>\r\n      </div>\r\n      <!-- 右侧编辑栏 -->\r\n      <div class=\"edit-panel\" :style=\"{ minWidth: '380px' }\">\r\n        <model-edit-panel ref=\"editPanel\" v-if=\"state.modelApi.model\"></model-edit-panel>\r\n      </div>\r\n    </div>\r\n    <page-loading :loading=\"loading\" :percentage=\"progress\"></page-loading>\r\n  </div>\r\n</template>\r\n<script setup lang=\"ts\" name=\"modelEdit\">\r\nimport { ModelChoose, ModelEditPanel } from \"@/components/index\";\r\nimport {\r\n  onMounted,\r\n  ref,\r\n  Ref,\r\n  reactive,\r\n  computed,\r\n  getCurrentInstance,\r\n  onBeforeUnmount,\r\n} from \"vue\";\r\nimport { useStore } from \"vuex\";\r\nimport { useRouter } from \"vue-router\";\r\nimport { ElMessage, ElMessageBox } from \"element-plus\";\r\nimport renderModel from \"./renderModel\";\r\nimport { modelList } from \"@/config/model\";\r\nimport { pageEnums } from '@/enums/pageEnums'\r\nimport PageLoading from \"@/components/Loading/PageLoading.vue\";\r\nimport {\r\n  MODEL_PRIVEW_CONFIG,\r\n  MODEL_BASE_DATA,\r\n  MODEL_DEFAULT_CONFIG,\r\n} from \"@/config/constant\";\r\nimport { StorageType, BusType } from \"@/types/typeOptions\";\r\n\r\ninterface getCurrentInstanceOptions {\r\n  $bus: BusType;\r\n  $local: StorageType;\r\n}\r\n\r\nconst store = useStore();\r\nconst router = useRouter();\r\nconst { $bus, $local } = (getCurrentInstance()!\r\n  .proxy as unknown) as getCurrentInstanceOptions;\r\n\r\nconst state = reactive({\r\n  modelApi: computed(() => {\r\n    return store.state.modelApi;\r\n  }),\r\n});\r\nconst loading = ref(false);\r\nconst progress = ref(0);\r\nconst editPanel: Ref<any> = ref(null);\r\nconst choosePanel: Ref<any> = ref(null);\r\n\r\n// 重置相机位置\r\nconst onResetCamera = () => {\r\n  state.modelApi.onResetModelCamera();\r\n};\r\n// 初始化模型库数据\r\nconst initModelBaseData = () => {\r\n  const modelBase: any = $local.get(MODEL_BASE_DATA);\r\n  // 如果是首次加载需要设置模型库初始数据值\r\n  if (!Array.isArray(modelBase)) {\r\n    let modelBaseData: Array<any> = [];\r\n    modelList.forEach((v) => {\r\n      modelBaseData.push({\r\n        ...MODEL_DEFAULT_CONFIG,\r\n        fileInfo: { ...v },\r\n      });\r\n    });\r\n    $local.set(MODEL_BASE_DATA, modelBaseData);\r\n  }\r\n};\r\n\r\n// 几何体模型拖拽结束\r\nconst onGeometryDrop = (e: any) => {\r\n  const dragGeometryModel = state.modelApi.dragGeometryModel;\r\n  if (dragGeometryModel.id) {\r\n    dragGeometryModel.clientX = e.clientX;\r\n    dragGeometryModel.clientY = e.clientY;\r\n    state.modelApi.onSwitchModel(dragGeometryModel);\r\n  }\r\n};\r\n// 预览\r\nconst onPrivew = () => {\r\n  const modelConfig = editPanel.value.getPanelConfig();\r\n\r\n  modelConfig.camera = state.modelApi.onGetModelCamera();\r\n  modelConfig.fileInfo = choosePanel.value.activeModel;\r\n  //判断是否是外部模型\r\n  if (modelConfig.fileInfo.filePath) {\r\n    $local.set(MODEL_PRIVEW_CONFIG, modelConfig);\r\n    const { href } = router.resolve({ path: pageEnums.MODEL_PREIVEW });\r\n    window.open(href, \"_blank\");\r\n  } else {\r\n    ElMessage.warning(\"当前模型暂不支持“效果预览”\");\r\n  }\r\n};\r\n// 保存配置\r\nconst onSaveConfig = () => {\r\n  ElMessageBox.confirm(\" 确认要更新当前模型数据至“模板库”?\", \"提示\", {\r\n    confirmButtonText: \"确认\",\r\n    cancelButtonText: \"取消\",\r\n    type: \"success\",\r\n  })\r\n    .then(() => {\r\n      const modelConfig = editPanel.value.getPanelConfig();\r\n\r\n      modelConfig.camera = state.modelApi.onGetModelCamera();\r\n      modelConfig.fileInfo = choosePanel.value.activeModel;\r\n      // 判断是否是外部模型\r\n      if (modelConfig.fileInfo.filePath) {\r\n        const modelBaseData = $local.get(MODEL_BASE_DATA) || [];\r\n        const { id } = modelConfig.fileInfo;\r\n        // 更新缓存数据\r\n        Object.assign(\r\n          modelBaseData.filter((v: any) => id === v.fileInfo.id)[0],\r\n          modelConfig\r\n        );\r\n        $local.set(MODEL_BASE_DATA, modelBaseData);\r\n        ElMessage.success(\"更新成功\");\r\n      } else {\r\n        ElMessage.warning(\"当前模型暂不支持“数据保存”\");\r\n      }\r\n    })\r\n    .catch(() => { });\r\n};\r\n\r\n// 下载封面\r\nconst onDownloadCover = () => {\r\n  state.modelApi.onDownloadScenCover();\r\n};\r\n// 导出模型\r\nconst onExportModleFile = (type: string) => {\r\n  state.modelApi.onExporterModel(type);\r\n};\r\n\r\nonMounted(async () => {\r\n  loading.value = true;\r\n  const modelApi = new renderModel(\"#model\");\r\n  store.commit(\"SET_MODEL_API\", modelApi);\r\n  $bus.on(\"page-loading\", (value: any) => {\r\n    loading.value = value;\r\n  });\r\n  // 模型加载进度条\r\n  state.modelApi.onProgress((progressNum: number) => {\r\n    progress.value = Number((progressNum / 1024 / 1024).toFixed(2));\r\n    // console.log('模型已加载' + progress.value + 'M')\r\n  });\r\n  const load: any = await modelApi.init();\r\n  if (load) {\r\n    loading.value = false;\r\n    progress.value = 0;\r\n  }\r\n  // 初始化模型库数据\r\n  initModelBaseData();\r\n});\r\nonBeforeUnmount(() => {\r\n  state.modelApi.onClearModelData();\r\n});\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.model-page {\r\n  width: 100%;\r\n  background-color: #1b1c23;\r\n\r\n  .model-header {\r\n    height: 35px;\r\n    width: 100%;\r\n    background-color: #010c1d;\r\n    box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.1);\r\n    text-align: center;\r\n    font-weight: 500;\r\n    color: #fff;\r\n    text-shadow: 5px 3px 5px #c11212;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    padding: 0px 20px;\r\n    box-sizing: border-box;\r\n  }\r\n\r\n  .model-container {\r\n    display: flex;\r\n\r\n    #model {\r\n      width: calc(100% - 630px);\r\n      height: calc(100vh - 35px);\r\n      position: relative;\r\n\r\n      .camera-icon {\r\n        position: absolute;\r\n        top: 10px;\r\n        left: calc(100% - 50%);\r\n        cursor: pointer;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n<style lang=\"scss\">\r\n.edit-box,\r\n.model-choose {\r\n  .header {\r\n    width: 100%;\r\n    height: 40px;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    background-color: #33343f;\r\n    color: #ccc;\r\n    padding: 0px 20px;\r\n    border-bottom: 1px solid #1b1c23;\r\n    border-top: 1px solid #1b1c23;\r\n    box-sizing: border-box;\r\n  }\r\n\r\n  .disabled {\r\n    opacity: 0.3;\r\n    pointer-events: none;\r\n  }\r\n\r\n  .options {\r\n    max-width: 380px;\r\n    box-sizing: border-box;\r\n    background-color: #1b1c23;\r\n\r\n    .option-active {\r\n      background-color: #27282f;\r\n    }\r\n\r\n    .space-between {\r\n      justify-content: space-between;\r\n    }\r\n\r\n    .option {\r\n      padding: 0px 18px;\r\n      box-sizing: border-box;\r\n      cursor: pointer;\r\n      color: #ccc;\r\n      display: flex;\r\n      align-items: center;\r\n      height: 35px;\r\n      font-size: 14px;\r\n\r\n      .icon-name {\r\n        display: flex;\r\n        align-items: center;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.el-input-number {\r\n  width: 90px !important;\r\n}\r\n</style>\r\n","import script from \"./index.vue?vue&type=script&setup=true&lang=ts&name=modelEdit\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=ts&name=modelEdit\"\n\nimport \"./index.vue?vue&type=style&index=0&id=5f5a5628&lang=scss&scoped=true\"\nimport \"./index.vue?vue&type=style&index=1&id=5f5a5628&lang=scss\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-5f5a5628\"]])\n\nexport default __exports__","'use strict';\nvar TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar isCallable = require('../internals/is-callable');\nvar classofRaw = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar $Object = Object;\n\n// ES3 wrong here\nvar CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) === 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (error) { /* empty */ }\n};\n\n// getting tag from ES6+ `Object.prototype.toString`\nmodule.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function (it) {\n  var O, tag, result;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (tag = tryGet(O = $Object(it), TO_STRING_TAG)) == 'string' ? tag\n    // builtinTag case\n    : CORRECT_ARGUMENTS ? classofRaw(O)\n    // ES3 arguments fallback\n    : (result = classofRaw(O)) === 'Object' && isCallable(O.callee) ? 'Arguments' : result;\n};\n","'use strict';\nvar makeBuiltIn = require('../internals/make-built-in');\nvar defineProperty = require('../internals/object-define-property');\n\nmodule.exports = function (target, name, descriptor) {\n  if (descriptor.get) makeBuiltIn(descriptor.get, name, { getter: true });\n  if (descriptor.set) makeBuiltIn(descriptor.set, name, { setter: true });\n  return defineProperty.f(target, name, descriptor);\n};\n","'use strict';\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar test = {};\n\ntest[TO_STRING_TAG] = 'z';\n\nmodule.exports = String(test) === '[object z]';\n","'use strict';\nvar classof = require('../internals/classof');\n\nvar $String = String;\n\nmodule.exports = function (argument) {\n  if (classof(argument) === 'Symbol') throw new TypeError('Cannot convert a Symbol value to a string');\n  return $String(argument);\n};\n","'use strict';\nvar $TypeError = TypeError;\n\nmodule.exports = function (passed, required) {\n  if (passed < required) throw new $TypeError('Not enough arguments');\n  return passed;\n};\n","'use strict';\nvar defineBuiltIn = require('../internals/define-built-in');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar toString = require('../internals/to-string');\nvar validateArgumentsLength = require('../internals/validate-arguments-length');\n\nvar $URLSearchParams = URLSearchParams;\nvar URLSearchParamsPrototype = $URLSearchParams.prototype;\nvar append = uncurryThis(URLSearchParamsPrototype.append);\nvar $delete = uncurryThis(URLSearchParamsPrototype['delete']);\nvar forEach = uncurryThis(URLSearchParamsPrototype.forEach);\nvar push = uncurryThis([].push);\nvar params = new $URLSearchParams('a=1&a=2&b=3');\n\nparams['delete']('a', 1);\n// `undefined` case is a Chromium 117 bug\n// https://bugs.chromium.org/p/v8/issues/detail?id=14222\nparams['delete']('b', undefined);\n\nif (params + '' !== 'a=2') {\n  defineBuiltIn(URLSearchParamsPrototype, 'delete', function (name /* , value */) {\n    var length = arguments.length;\n    var $value = length < 2 ? undefined : arguments[1];\n    if (length && $value === undefined) return $delete(this, name);\n    var entries = [];\n    forEach(this, function (v, k) { // also validates `this`\n      push(entries, { key: k, value: v });\n    });\n    validateArgumentsLength(length, 1);\n    var key = toString(name);\n    var value = toString($value);\n    var index = 0;\n    var dindex = 0;\n    var found = false;\n    var entriesLength = entries.length;\n    var entry;\n    while (index < entriesLength) {\n      entry = entries[index++];\n      if (found || entry.key === key) {\n        found = true;\n        $delete(this, entry.key);\n      } else dindex++;\n    }\n    while (dindex < entriesLength) {\n      entry = entries[dindex++];\n      if (!(entry.key === key && entry.value === value)) append(this, entry.key, entry.value);\n    }\n  }, { enumerable: true, unsafe: true });\n}\n","'use strict';\nvar defineBuiltIn = require('../internals/define-built-in');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar toString = require('../internals/to-string');\nvar validateArgumentsLength = require('../internals/validate-arguments-length');\n\nvar $URLSearchParams = URLSearchParams;\nvar URLSearchParamsPrototype = $URLSearchParams.prototype;\nvar getAll = uncurryThis(URLSearchParamsPrototype.getAll);\nvar $has = uncurryThis(URLSearchParamsPrototype.has);\nvar params = new $URLSearchParams('a=1');\n\n// `undefined` case is a Chromium 117 bug\n// https://bugs.chromium.org/p/v8/issues/detail?id=14222\nif (params.has('a', 2) || !params.has('a', undefined)) {\n  defineBuiltIn(URLSearchParamsPrototype, 'has', function has(name /* , value */) {\n    var length = arguments.length;\n    var $value = length < 2 ? undefined : arguments[1];\n    if (length && $value === undefined) return $has(this, name);\n    var values = getAll(this, name); // also validates `this`\n    validateArgumentsLength(length, 1);\n    var value = toString($value);\n    var index = 0;\n    while (index < values.length) {\n      if (values[index++] === value) return true;\n    } return false;\n  }, { enumerable: true, unsafe: true });\n}\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar defineBuiltInAccessor = require('../internals/define-built-in-accessor');\n\nvar URLSearchParamsPrototype = URLSearchParams.prototype;\nvar forEach = uncurryThis(URLSearchParamsPrototype.forEach);\n\n// `URLSearchParams.prototype.size` getter\n// https://github.com/whatwg/url/pull/734\nif (DESCRIPTORS && !('size' in URLSearchParamsPrototype)) {\n  defineBuiltInAccessor(URLSearchParamsPrototype, 'size', {\n    get: function size() {\n      var count = 0;\n      forEach(this, function () { count++; });\n      return count;\n    },\n    configurable: true,\n    enumerable: true\n  });\n}\n"],"names":["_hoisted_1","class","_hoisted_2","_createElementVNode","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","key","style","color","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_defineComponent","__name","setup","__props","expose","__expose","store","useStore","$bus","getCurrentInstance","proxy","state","reactive","modelApi","computed","ordinaryModelList","modelList","filter","v","animation","animationModelList","activeModelId","ref","geometryVisable","activeModel","name","fileType","id","filePath","icon","require","decomposeName","localModelName","onChangeModel","async","model","value","emit","load","onSwitchModel","err","onAddGeometry","clearSceneModel","onDragstart","e","setDragGeometryModel","onDrag","event","preventDefault","onUpload","file","URL","createObjectURL","raw","getFileType","revokeObjectURL","_ctx","_cache","_component_Orange","_resolveComponent","_component_el_icon","_component_el_space","_component_el_image","_component_el_col","_component_el_row","_component_el_scrollbar","_component_Paperclip","_component_SwitchFilled","_component_el_tooltip","_component_Plus","_component_UploadFilled","_component_el_upload","_openBlock","_createElementBlock","_createVNode","default","_withCtx","_","_Fragment","_renderList","_createBlock","textAlign","span","draggable","onClick","_withModifiers","$event","_normalizeClass","src","fit","_createCommentVNode","_unref","geometryModelList","type","effect","content","placement","_toDisplayString","size","action","accept","__exports__","_withScopeId","n","_pushScopeId","_popScopeId","config","visible","image","viewImg","activeBackgroundId","activeViewImageId","optionsDisable","predefineColors","PREDEFINE_COLORS","onChangeType","onSetSceneColor","onSetSceneImage","onSetSceneViewImage","onChangeImage","url","onChangeViewImage","activeChangeColor","onChangeColor","onChangeBgSwitch","_component_el_switch","_component_Picture","_component_el_button","_component_Check","_component_DataAnalysis","_component_el_color_picker","_component_CameraFilled","modelValue","onChange","link","_createTextVNode","_withDirectives","_vShow","backgrundList","background","predefine","onActiveChange","viewImageList","view","meaterialName","wireframe","depthWrite","opacity","activeMeshType","activeTextureMap","describe","optionDisabled","activeMesh","modelMaterialList","find","uuid","selectMeshUuid","getters","modelTextureMap","onMounted","on","Object","assign","watch","val","map","mapId","material","THREE","getStyle","onChangeMeshType","meshTypeList","onChangeModelMeshType","onChangeMaterialType","mesh","onChangeModelMeaterial","onSetModelMaterial","onChangeMeaterial","onSetMeshVisibe","onChangeModelMap","onSetModelMap","ElMessage","success","onChangeSystemModelMap","onSetSystemModelMap","getMeshConfig","materialType","meshList","onGetEditMeshList","_component_el_option","_component_el_select","_component_View","_component_Hide","_component_WarnTriangleFilled","_component_el_slider","_component_Select","placeholder","item","label","onInput","min","max","step","justify","mapImageList","animationName","loop","timeScale","weight","rotationVisible","rotationType","rotationSpeed","optionRotation","modelAnimation","length","onChangeAnimationSwitch","onUplateAnimation","onClearAnimation","onChangeAnimationType","onStartModelAnimaion","onRotationAnimation","onSetRotation","onRotationType","onSetRotationType","_component_el_empty","_component_Switch","_component_el_radio_button","_component_el_radio_group","_component_VideoPlay","_component_Sort","description","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","skeletonHelper","gridHelper","x","y","z","positionX","positionY","positionZ","divisions","axesHelper","axesSize","gridDisabled","axesDisabled","onChangeAttributeSwitch","onSetRotateOnAxis","direction","flag","onSetModelRotateOnAxis","onResultRotate","onResultModelRotateOnAxis","onSetPosition","onSetModelPosition","onResultPosition","onResultModelPosition","onSetModelHelper","onSetModelGridHelper","onChangeGridHelper","onChangeGridHelperSize","onSetModelGridHelperSize","onChangeAxesHelper","onSetModelAxesHelper","getAttrbuteConfig","rotation","rotationX","rotationY","rotationZ","_component_Setting","_component_Location","_component_Eleme","_component_Grid","_component_el_input_number","_component_Rank","controls","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","_hoisted_43","_hoisted_44","_hoisted_45","_hoisted_46","_hoisted_47","_hoisted_48","_hoisted_49","_hoisted_50","_hoisted_51","_hoisted_52","_hoisted_53","_hoisted_54","_hoisted_55","_hoisted_56","_hoisted_57","_hoisted_58","_hoisted_59","_hoisted_60","_hoisted_61","_hoisted_62","_hoisted_63","_hoisted_64","_hoisted_65","_hoisted_66","planeGeometry","planeColor","planeWidth","planeHeight","ambientLight","ambientLightColor","ambientLightIntensity","directionalLight","directionalLightHelper","directionalLightColor","directionalLightIntensity","directionalHorizontal","directionalVertical","directionalSistance","directionaShadow","pointLight","pointLightHelper","pointLightColor","pointLightIntensity","pointHorizontal","pointVertical","pointSistance","spotLight","spotLightColor","spotLightIntensity","spotHorizontal","spotVertical","spotSistance","spotAngle","spotPenumbra","spotFocus","spotCastShadow","spotLightHelper","spotDistance","ambientDisabled","directionaDisabled","pointDisabled","spotDisabled","planetDisabled","changeAmbientLightColor","onSetModelAmbientLight","onChangeAmbientLight","changeDirectionalLightColor","onSetModelDirectionalLight","onChangeDirectionalLight","onSetModelPlaneGeometry","changePointLightColor","onSetModelPointLight","onChangePointLight","changeSpotLightColor","onSetModelSpotLight","onChangeSpotLight","changePlaneGeometryColor","onChangePlaneGeometry","_component_Odometer","_component_SetUp","_component_Place","height","glow","decomposeDisable","decomposeMesh","modelDrag","moveDisable","threshold","strength","radius","decompose","toneMappingExposure","onSetFlowColor","onChangeFlow","onSetUnrealBloomPass","onChangeDecompose","setModelMeshDecompose","onChangeDrag","setModelMeshDrag","getStageConfig","meshPositonList","getMeshDragPosition","_component_Sunny","_component_Umbrella","_component_Cpu","activeGeometry","geometryConfigList","disabled","geometrylen","userData","geometry","parameters","keys","onSetGeometry","onSetGeometryMesh","onDeleteGeometry","onDeleteGeometryMesh","inputRange","range","includes","_component_Delete","panelTabs","activeTab","attribute","light","stage","getPanelConfig","tab","_resolveDynamicComponent","EditBackground","ref_key","EditMaterial","EditLaterStage","EditAnimation","EditLight","EditAttribute","EditGeometry","_taskCache","WeakMap","DRACOLoader","Loader","constructor","manager","super","this","decoderPath","decoderConfig","decoderBinary","decoderPending","workerLimit","workerPool","workerNextTaskID","workerSourceURL","defaultAttributeIDs","position","normal","uv","defaultAttributeTypes","setDecoderPath","path","setDecoderConfig","setWorkerLimit","onLoad","onProgress","onError","loader","FileLoader","setPath","setResponseType","setRequestHeader","requestHeader","setWithCredentials","withCredentials","buffer","parse","decodeDracoFile","SRGBColorSpace","catch","callback","attributeIDs","attributeTypes","vertexColorSpace","LinearSRGBColorSpace","taskConfig","useUniqueIDs","decodeGeometry","then","taskKey","JSON","stringify","has","cachedTask","get","promise","byteLength","Error","worker","taskID","taskCost","geometryPending","_getWorker","_worker","Promise","resolve","reject","_callbacks","postMessage","message","_createGeometry","_releaseTask","set","geometryData","BufferGeometry","index","setIndex","BufferAttribute","array","i","attributes","result","itemSize","_assignVertexColorSpace","normalized","Float32Array","setAttribute","inputColorSpace","_color","Color","il","count","fromBufferAttribute","convertSRGBToLinear","setXYZ","r","g","b","_loadLibrary","responseType","undefined","preload","_initDecoder","useJS","WebAssembly","librariesPending","push","all","libraries","jsContent","wasmBinary","fn","DRACOWorker","toString","body","substring","indexOf","lastIndexOf","join","Blob","Worker","_taskCosts","_taskLoad","onmessage","data","console","error","sort","a","debug","log","dispose","terminate","draco","decoder","dracoGeometry","decodingStatus","geometryType","GetEncodedGeometryType","TRIANGULAR_MESH","Mesh","DecodeArrayToMesh","POINT_CLOUD","PointCloud","DecodeArrayToPointCloud","ok","ptr","error_msg","attributeName","attributeType","self","attributeID","GetAttributeByUniqueId","GetAttributeId","GetAttribute","attributeResult","decodeAttribute","decodeIndex","destroy","numFaces","num_faces","numIndices","_malloc","GetTrianglesUInt32Array","Uint32Array","HEAPF32","slice","_free","numComponents","num_components","numPoints","num_points","numValues","BYTES_PER_ELEMENT","dataType","getDracoDataType","GetAttributeDataArrayForAllPoints","DT_FLOAT32","Int8Array","DT_INT8","Int16Array","DT_INT16","Int32Array","DT_INT32","Uint8Array","DT_UINT8","Uint16Array","DT_UINT16","DT_UINT32","onModuleLoaded","DracoDecoderModule","module","Decoder","buffers","attr","_renderer","fullscreenQuadGeometry","fullscreenQuadMaterial","fullscreenQuad","decompress","texture","maxTextureSize","Infinity","renderer","PlaneGeometry","ShaderMaterial","uniforms","blitTexture","Uniform","vertexShader","fragmentShader","defines","IS_SRGB","colorSpace","needsUpdate","frustrumCulled","_camera","PerspectiveCamera","_scene","Scene","add","WebGLRenderer","antialias","setSize","Math","width","clear","render","readableTexture","Texture","domElement","minFilter","magFilter","wrapS","wrapT","KHR_mesh_quantization_ExtraAttrTypes","POSITION","NORMAL","TANGENT","TEXCOORD","GLTFExporter","pluginCallbacks","register","writer","GLTFLightExtension","GLTFMaterialsUnlitExtension","GLTFMaterialsTransmissionExtension","GLTFMaterialsVolumeExtension","GLTFMaterialsIorExtension","GLTFMaterialsSpecularExtension","GLTFMaterialsClearcoatExtension","GLTFMaterialsIridescenceExtension","GLTFMaterialsSheenExtension","GLTFMaterialsAnisotropyExtension","GLTFMaterialsEmissiveStrengthExtension","GLTFMeshGpuInstancing","unregister","splice","input","onDone","options","GLTFWriter","plugins","setPlugins","write","parseAsync","scope","WEBGL_CONSTANTS","POINTS","LINES","LINE_LOOP","LINE_STRIP","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN","BYTE","UNSIGNED_BYTE","SHORT","UNSIGNED_SHORT","INT","UNSIGNED_INT","FLOAT","ARRAY_BUFFER","ELEMENT_ARRAY_BUFFER","NEAREST","LINEAR","NEAREST_MIPMAP_NEAREST","LINEAR_MIPMAP_NEAREST","NEAREST_MIPMAP_LINEAR","LINEAR_MIPMAP_LINEAR","CLAMP_TO_EDGE","MIRRORED_REPEAT","REPEAT","KHR_MESH_QUANTIZATION","THREE_TO_WEBGL","NearestFilter","NearestMipmapNearestFilter","NearestMipmapLinearFilter","LinearFilter","LinearMipmapNearestFilter","LinearMipmapLinearFilter","ClampToEdgeWrapping","RepeatWrapping","MirroredRepeatWrapping","PATH_PROPERTIES","scale","quaternion","morphTargetInfluences","DEFAULT_SPECULAR_COLOR","GLB_HEADER_BYTES","GLB_HEADER_MAGIC","GLB_VERSION","GLB_CHUNK_PREFIX_BYTES","GLB_CHUNK_TYPE_JSON","GLB_CHUNK_TYPE_BIN","equalArray","array1","array2","every","element","stringToArrayBuffer","text","TextEncoder","encode","isIdentityMatrix","matrix","elements","getMinMax","start","output","Array","fill","Number","POSITIVE_INFINITY","NEGATIVE_INFINITY","getX","getY","getZ","getW","MathUtils","normalize","getPaddedBufferSize","bufferSize","ceil","getPaddedArrayBuffer","arrayBuffer","paddingByte","paddedLength","getCanvas","document","OffscreenCanvas","createElement","getToBlobPromise","canvas","mimeType","toBlob","quality","convertToBlob","pending","byteOffset","nodeMap","Map","skins","extensionsUsed","extensionsRequired","uids","uid","json","asset","version","generator","cache","meshes","attributesNormalized","materials","textures","images","binary","trs","onlyVisible","animations","includeCustomExtensions","processInput","blob","extensionsUsedList","extensionsRequiredList","reader","FileReader","readAsArrayBuffer","onloadend","binaryChunk","binaryChunkPrefix","DataView","ArrayBuffer","setUint32","jsonChunk","jsonChunkPrefix","header","headerView","totalByteLength","glbBlob","glbReader","readAsDataURL","base64data","uri","serializeUserData","object","objectDef","gltfExtensions","extensions","extensionName","extras","warn","getUID","isRelativeCopy","isNormalizedNormalAttribute","Vector3","abs","createNormalizedNormalAttribute","clone","setX","applyTextureTransform","mapDef","didTransform","transformDef","offset","toArray","repeat","buildMetalRoughTexture","metalnessMap","roughnessMap","getEncodingConversion","c","pow","CompressedTexture","metalness","roughness","context","getContext","fillStyle","fillRect","composite","getImageData","drawImage","convert","putImageData","reference","source","Source","NoColorSpace","channel","processBuffer","processBufferView","componentType","target","componentSize","bufferViews","dataView","setFloat32","setInt32","setInt16","setUint16","setInt8","setUint8","bufferViewDef","byteStride","processBufferViewImage","processAccessor","types","minMax","bufferViewTarget","bufferView","accessorDef","accessors","processImage","format","flipY","cachedImages","imageDef","ctx","translate","RGBAFormat","Uint8ClampedArray","ImageData","bufferViewIndex","toDataURL","dataURL","processSampler","samplers","samplerDef","processTexture","textureDef","sampler","_invokeAll","ext","writeTexture","processMaterial","isShaderMaterial","materialDef","pbrMetallicRoughness","isMeshStandardMaterial","isMeshBasicMaterial","concat","baseColorFactor","metallicFactor","roughnessFactor","metalRoughTexture","metalRoughMapDef","metallicRoughnessTexture","baseColorMapDef","texCoord","baseColorTexture","emissive","maxEmissiveComponent","emissiveFactor","emissiveMap","emissiveMapDef","emissiveTexture","normalMap","normalMapDef","normalScale","normalTexture","aoMap","occlusionMapDef","aoMapIntensity","occlusionTexture","transparent","alphaMode","alphaTest","alphaCutoff","side","DoubleSide","doubleSided","writeMaterial","processMesh","meshCacheKeyParts","isArray","l","meshCacheKey","mode","isLineSegments","isLineLoop","isLine","isPoints","meshDef","primitives","targets","nameConversion","uv1","uv2","uv3","skinWeight","skinIndex","originalNormal","getAttribute","modifiedAttribute","toUpperCase","validVertexAttributes","test","accessor","startsWith","detectMeshQuantization","weights","targetNames","reverseDictionary","morphTargetDictionary","warned","morphAttributes","gltfAttributeName","baseAttribute","relativeAttribute","morphTargetsRelative","j","jl","setY","setZ","setW","isMultiMaterial","groups","materialIndex","primitive","cacheKey","indices","writeMesh","attrType","attrNamePrefix","split","processCamera","camera","cameras","isOrtho","isOrthographicCamera","cameraDef","orthographic","xmag","right","ymag","top","zfar","far","znear","near","perspective","aspectRatio","aspect","yfov","degToRad","fov","processAnimation","clip","root","Utils","mergeMorphTargetTracks","tracks","channels","track","trackBinding","PropertyBinding","parseTrackName","trackNode","findNode","nodeName","trackProperty","propertyName","objectName","isSkinnedMesh","skeleton","getBoneByName","objectIndex","inputItemSize","interpolation","outputItemSize","values","times","createInterpolant","isInterpolantFactoryMethodGLTFCubicSpline","getInterpolation","InterpolateDiscrete","node","processSkin","nodes","rootJoint","bones","joints","inverseBindMatrices","temporaryBoneInverse","Matrix4","copy","boneInverses","multiply","bindMatrix","skin","processNode","nodeDef","translation","matrixAutoUpdate","updateMatrix","String","isMesh","meshIndex","isCamera","children","child","nodeIndex","writeNode","processScene","scene","scenes","sceneDef","processObjects","objects","beforeParse","objectsWithoutScene","afterParse","func","isLight","isDirectionalLight","isPointLight","isSpotLight","lightDef","intensity","distance","spot","innerConeAngle","penumbra","angle","outerConeAngle","decay","parent","lights","isMeshPhysicalMaterial","clearcoat","extensionDef","clearcoatFactor","clearcoatMap","clearcoatMapDef","clearcoatTexture","clearcoatRoughnessFactor","clearcoatRoughness","clearcoatRoughnessMap","clearcoatRoughnessMapDef","clearcoatRoughnessTexture","clearcoatNormalMap","clearcoatNormalMapDef","clearcoatNormalTexture","iridescence","iridescenceFactor","iridescenceMap","iridescenceMapDef","iridescenceTexture","iridescenceIor","iridescenceIOR","iridescenceThicknessMinimum","iridescenceThicknessRange","iridescenceThicknessMaximum","iridescenceThicknessMap","iridescenceThicknessMapDef","iridescenceThicknessTexture","transmission","transmissionFactor","transmissionMap","transmissionMapDef","transmissionTexture","thicknessFactor","thickness","thicknessMap","thicknessMapDef","thicknessTexture","attenuationDistance","attenuationColor","ior","specularIntensity","specularColor","equals","specularIntensityMap","specularColorTexture","specularIntensityMapDef","specularTexture","specularColorMap","specularColorMapDef","specularFactor","specularColorFactor","sheen","sheenRoughnessMap","sheenRoughnessMapDef","sheenRoughnessTexture","sheenColorMap","sheenColorMapDef","sheenColorTexture","sheenRoughnessFactor","sheenRoughness","sheenColorFactor","sheenColor","anisotropy","anisotropyMap","anisotropyMapDef","anisotropyTexture","anisotropyStrength","anisotropyRotation","emissiveIntensity","emissiveStrength","isInstancedMesh","translationAttr","rotationAttr","scaleAttr","Quaternion","getMatrixAt","TRANSLATION","ROTATION","SCALE","instanceColor","_COLOR_0","insertKeyframe","time","tolerance","valueSize","getValueSize","TimeBufferType","ValueBufferType","interpolant","evaluate","mergedTracks","sourceTracks","sourceTrack","sourceTrackBinding","sourceTrackNode","propertyIndex","InterpolantFactoryMethodDiscrete","InterpolantFactoryMethodLinear","setInterpolation","InterpolateLinear","targetCount","targetIndex","mergedTrack","sourceInterpolant","keyframeIndex","_plane","Plane","_raycaster","Raycaster","_pointer","Vector2","_offset","_intersection","_worldPosition","_inverseMatrix","DragControls","EventDispatcher","_objects","_domElement","touchAction","_selected","_hovered","_intersections","activate","addEventListener","onPointerMove","onPointerDown","onPointerCancel","deactivate","removeEventListener","cursor","getObjects","getRaycaster","enabled","updatePointer","setFromCamera","ray","intersectPlane","sub","applyMatrix4","dispatchEvent","pointerType","intersectObjects","recursive","setFromNormalAndCoplanarPoint","getWorldDirection","setFromMatrixPosition","matrixWorld","transformGroup","invert","rect","getBoundingClientRect","clientX","left","clientY","now","Easing","Linear","None","amount","Quadratic","In","Out","InOut","Cubic","Quartic","Quintic","Sinusoidal","cos","PI","sin","Exponential","Circular","sqrt","Elastic","Back","s","Bounce","process","hrtime","performance","bind","Date","getTime","now$1","Group","_tweens","_tweensAddedDuringUpdate","prototype","getAll","_this","tweenId","removeAll","tween","getId","remove","update","preserve","tweenIds","autoStart","Interpolation","k","m","f","floor","Bezier","pw","bn","Bernstein","CatmullRom","p0","p1","t","fc","Factorial","p2","p3","v0","v1","t2","t3","Sequence","nextId","_nextId","mainGroup","Tween","_object","_group","_isPaused","_pauseStart","_valuesStart","_valuesEnd","_valuesStartRepeat","_duration","_initialRepeat","_repeat","_yoyo","_isPlaying","_reversed","_delayTime","_startTime","_easingFunction","_interpolationFunction","_chainedTweens","_onStartCallbackFired","_id","_isChainStopped","_goToEnd","isPlaying","isPaused","to","properties","duration","create","d","property","_swapEndStartRepeatValues","parseFloat","_setupProperties","startValue","startValueIsArray","propType","isInterpolationList","endValues","_handleRelativeValue","reverse","prop","stop","stopChainedTweens","_onStopCallback","end","pause","resume","numChainedTweens","group","delay","repeatDelay","_repeatDelayTime","yoyo","easing","easingFunction","interpolationFunction","chain","tweens","_i","arguments","onStart","_onStartCallback","onUpdate","_onUpdateCallback","onRepeat","_onRepeatCallback","onComplete","_onCompleteCallback","onStop","elapsed","endTime","_updateProperties","isFinite","startIsArray","endIsArray","charAt","tmp","endValue","VERSION","TWEEN","renderModel","selector","_defineProperty","container","querySelector","geometryGroup","geometryModel","loadingManager","fileLoaderMap","GLTFLoader","FBXLoader","OBJLoader","animationMixer","animationColock","animationFrame","rotationAnimationFrame","animateClipAction","loopMap","LoopOnce","LoopRepeat","LoopPingPong","effectComposer","outlinePass","renderAnimation","raycaster","mouse","glowComposer","shaderPass","unrealBloomPass","glowMaterialList","dragControls","glowUnrealBloomPass","onWindowResizesListener","onMouseClickListener","modelProgressCallback","dragGeometryModel","init","initRender","initCamera","initScene","initControls","createHelper","createLight","addEvenListMouseLisatener","modelFile","setModel","createEffectComposer","sceneAnimation","reslove","mapping","environment","clientHeight","clientWidth","alpha","preserveDrawingBuffer","setPixelRatio","window","devicePixelRatio","toneMapping","autoClear","outputColorSpace","shadowMap","appendChild","requestAnimationFrame","traverse","onWindowResizes","onMouseClickModel","OrbitControls","enablePan","dracoLoader","setDRACOLoader","getModelMeaterialList","setModelPositionSize","getModelMeaterialMaps","xhr","loaded","setGeometryModel","offsetLeft","offsetTop","intersects","notGeometrykey","colors","meshColor","random","point","onlyKey","onSetGeometryMeshList","box","setFromObject","getSize","maxDistance","warning","castShadow","shadow","mapSize","groundMaterial","receiveShadow","EffectComposer","renderPass","RenderPass","addPass","OutlinePass","visibleEdgeColor","hiddenEdgeColor","edgeGlow","usePatternTexture","edgeThickness","edgeStrength","pulsePeriod","outputPass","OutputPass","effectFXAA","ShaderPass","FXAAShader","pixelRatio","getPixelRatio","resolution","renderToScreen","needsSwap","UnrealBloomPass","renderTargetParameters","stencilBuffer","glowRender","baseTexture","bloomTexture","renderTarget2","tDiffuse","glowColor","modelType","updateProjectionMatrix","onResettingLight","onDownloadScenCover","href","download","toLocaleString","click","onExporterModel","exporter","embedImages","saveArrayBuffer","filename","saveString","onClearModelData","cancelAnimationFrame","frustumCulled","newMaterial","Set","meshMaterials","forEach","numMaterials","ElMessageBox","alert","confirmButtonText","isMap","getModelMaps","meshName","mapTexture","updateMatrixWorld","center","getCenter","maxSize","targetSize","lookAt","textureMap","selectMesh","getObjectByProperty","modelMap","meshFrom","getObjectByName","selectedObjects","commit","intersectedObject","obj","meshDecompose","modelDecomposeMove","angleStep","MODEL_DECOMPOSE","modelX","modelY","modelZ","positonList","lightPosition","focus","verticesNeedUpdate","onSetModelAnimaion","animationFrameFun","findByName","clipAction","setEffectiveTimeScale","setEffectiveWeight","setLoop","play","getDelta","stopAllAction","rotationAnimationFun","maxAxis","endPosition","onResetModelCamera","onGetModelCamera","grid","linewidth","axes","newGeometry","props","percentage","loading","Boolean","minWidth","router","useRouter","$local","progress","editPanel","choosePanel","onResetCamera","initModelBaseData","modelBase","MODEL_BASE_DATA","modelBaseData","MODEL_DEFAULT_CONFIG","fileInfo","onGeometryDrop","onPrivew","modelConfig","MODEL_PRIVEW_CONFIG","pageEnums","MODEL_PREIVEW","open","onSaveConfig","confirm","cancelButtonText","onDownloadCover","onExportModleFile","progressNum","toFixed","onBeforeUnmount","_component_arrow_down","_component_el_dropdown_item","_component_el_dropdown_menu","_component_el_dropdown","_component_Aim","$router","MODEL_BASE","trigger","dropdown","ModelChoose","onDrop","onDragover","ModelEditPanel","PageLoading","TO_STRING_TAG_SUPPORT","isCallable","classofRaw","wellKnownSymbol","TO_STRING_TAG","$Object","CORRECT_ARGUMENTS","tryGet","it","exports","O","tag","callee","makeBuiltIn","defineProperty","descriptor","getter","setter","classof","$String","argument","TypeError","$TypeError","passed","required","defineBuiltIn","uncurryThis","validateArgumentsLength","$URLSearchParams","URLSearchParams","URLSearchParamsPrototype","append","$delete","params","$value","entries","entry","dindex","found","entriesLength","enumerable","unsafe","$has","DESCRIPTORS","defineBuiltInAccessor","configurable"],"sourceRoot":""}